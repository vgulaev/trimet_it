<ПравилаОбмена>
	<ВерсияФормата РежимСовместимости="РежимСовместимостиСБСП20">2.01</ВерсияФормата>
	<Ид>bf6c5efc-c5ca-4c0a-83a4-0db3b33185d6    </Ид>
	<Наименование>ЯМК УТ 11.0.9.1 -&gt; БП 2.0.41.3</Наименование>
	<ДатаВремяСоздания>2012-11-22T08:16:08</ДатаВремяСоздания>
	<Источник ВерсияПлатформы="8.0" ВерсияКонфигурации="11.0.9.1" СинонимКонфигурации="Управление торговлей, редакция 11.0">УправлениеТорговлей</Источник>
	<Приемник ВерсияПлатформы="8.0" ВерсияКонфигурации="2.0.41.3" СинонимКонфигурации="Бухгалтерия предприятия, редакция 2.0">БухгалтерияПредприятия</Приемник>
	<ПослеЗагрузкиПравилОбмена>// Параметры внешнего контекста:
// - ПолеДокументыДляОтложенногоПроведения

// Процедуры и функции внешнего контекста:
// - Процедура УстановитьПометкуУдаленияУОбъекта(Объект, ПометкаУдаления, ИмяТипаОбъекта)
// - Процедура ОтменитьПроведениеОбъектаВИБ(Объект, Тип, ЗаписатьОбъект = Ложь)</ПослеЗагрузкиПравилОбмена>
	<ПередПолучениемИзмененныхОбъектов>Параметры.Вставить("УзелДляОбменаСсылка",                          УзелДляОбмена.Ссылка);
Параметры.Вставить("УзелИспользоватьОтборПоОрганизации",           УзелДляОбмена.ИспользоватьОтборПоОрганизациям);
Параметры.Вставить("УзелДатаНачалаВыгрузкиДокументов",             УзелДляОбмена.ДатаНачалаВыгрузкиДокументов);
Параметры.Вставить("УзелРазрешитьПроведениеДокументовПриЗагрузке", УзелДляОбмена.РазрешитьПроведениеДокументовПриЗагрузке);
Параметры.Вставить("УзелПравилаСозданияДоговоровКонтрагентов",     УзелДляОбмена.ПравилаСозданияДоговоровКонтрагентов);
Параметры.Вставить("ВыгружатьЦеныНоменклатуры",                    УзелДляОбмена.ВыгружатьЦеныНоменклатуры);
Параметры.Вставить("ОбобщенныйСклад",                              УзелДляОбмена.ОбобщенныйСклад);

Параметры.Вставить("ВидыЦенНоменклатуры", УзелДляОбмена.ВидыЦенНоменклатуры.ВыгрузитьКолонку("ВидЦенНоменклатуры"));

СписокОрганизаций = Новый СписокЗначений;
СписокОрганизаций.ЗагрузитьЗначения(УзелДляОбмена.Организации.ВыгрузитьКолонку("Организация"));
Параметры.Вставить("УзелСписокОрганизаций", СписокОрганизаций);</ПередПолучениемИзмененныхОбъектов>
	<ПередВыгрузкойДанных>СписокОбъектовСозданныхВТекущемСеансеОбмена = Новый Массив;
Параметры.Вставить("СписокОбъектовСозданныхВТекущемСеансеОбмена", СписокОбъектовСозданныхВТекущемСеансеОбмена);

ДатыИзмененияЦен = Новый ТаблицаЗначений;
ДатыИзмененияЦен.Колонки.Добавить("ДатаИзменения", Новый ОписаниеТипов("Дата"));
Параметры.Вставить("ДатыИзмененияЦен", ДатыИзмененияЦен);</ПередВыгрузкойДанных>
	<ПослеВыгрузкиДанных>// Регистрируем объекты, созданные в этом сеансе обмена так, чтобы они относились к текущему сообщению обмена

Если Параметры.СписокОбъектовСозданныхВТекущемСеансеОбмена.Количество() &lt;&gt; 0 Тогда
	
	ПланыОбмена.ВыбратьИзменения(Параметры.УзелДляОбменаСсылка, ЗаписьСообщения.НомерСообщения, 
		Параметры.СписокОбъектовСозданныхВТекущемСеансеОбмена);
		
КонецЕсли;</ПослеВыгрузкиДанных>
	<ПередЗагрузкойДанных>Параметры.Вставить("ЗагруженныеГТДИмпорт", Новый Массив);
Параметры.Вставить("ЗагруженныеКорректировкиПоступления", Новый Массив);
Параметры.Вставить("ЗагруженныеКорректировкиРеализации", Новый Массив);
Параметры.Вставить("ЗагруженныеОтчетыОРозничныхПродажах", Новый Массив);
Параметры.Вставить("ЗагруженныеСчетаФактурыПолученные", Новый Массив);
Параметры.Вставить("ЗагруженныеСчетаФактурыВыданные", Новый Массив);

Параметры.Вставить("СтатьяПрочихДоходовРасходов_ОприходованиеТоваров", УзелОбменаЗагрузкаДанных.СтатьяПрочихДоходовРасходов_ОприходованиеТоваров);
Параметры.Вставить("НоменклатурнаяГруппаПоУмолчанию",                  УзелОбменаЗагрузкаДанных.НоменклатурнаяГруппаПоУмолчанию);
Параметры.Вставить("РазрешитьПроведениеДокументовПриЗагрузке",         УзелОбменаЗагрузкаДанных.РазрешитьПроведениеДокументовПриЗагрузке);</ПередЗагрузкойДанных>
	<ПослеЗагрузкиДанных>Выполнить(Алгоритмы.ОбработатьЗагруженныеГТДИмпорт);
Выполнить(Алгоритмы.ОбработатьЗагруженныеКорректировкиПоступления);
Выполнить(Алгоритмы.ОбработатьЗагруженныеКорректировкиРеализации);
Выполнить(Алгоритмы.ОбработатьЗагруженныеОтчетыОРозничныхПродажах);
Выполнить(Алгоритмы.ОбработатьЗагруженныеСчетаФактурыПолученные);
Выполнить(Алгоритмы.ОбработатьЗагруженныеСчетаФактурыВыданные);</ПослеЗагрузкиДанных>
	<ПередКонвертациейОбъекта>Если ТипЗнч(ВходящиеДанные) &lt;&gt; Тип("Структура") Тогда
	ВходящиеДанные = Новый Структура;
КонецЕсли;</ПередКонвертациейОбъекта>
	<ПередОтправкойИнформацииОбУдалении>Отказ = Истина;

СсылкаНаУдаляемыйОбъект = Ссылка;

Если  ТипЗнч(Ссылка) = Тип("ДокументСсылка.ЗаказКлиента") Тогда
	
	ТипИсточника = "ДокументСсылка.ЗаказКлиента";
	ТипПриемника = "ДокументСсылка.СчетНаОплатуПокупателю";		Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	ТипПриемника = "СправочникСсылка.ЗначенияСвойствОбъектов";	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	
ИначеЕсли ТипЗнч(Ссылка) = Тип("ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями") Тогда
	
	ТипИсточника = "ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями";
	ТипПриемника = "ДокументСсылка.ОтчетКомиссионераОПродажах";	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	ТипПриемника = "ДокументСсылка.ОтчетКомитентуОПродажах";	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	
ИначеЕсли ТипЗнч(Ссылка) = Тип("ДокументСсылка.ПередачаТоваровМеждуОрганизациями") Тогда
	
	ТипИсточника = "ДокументСсылка.ПередачаТоваровМеждуОрганизациями";
	ТипПриемника = "ДокументСсылка.ПоступлениеТоваровУслуг";	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	ТипПриемника = "ДокументСсылка.РеализацияТоваровУслуг";		Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	
ИначеЕсли ТипЗнч(Ссылка) = Тип("ДокументСсылка.ПересортицаТоваров") Тогда
	
	ТипИсточника = "ДокументСсылка.ПересортицаТоваров";
	ТипПриемника = "ДокументСсылка.ОприходованиеТоваров";	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	ТипПриемника = "ДокументСсылка.СписаниеТоваров";		Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	
ИначеЕсли ТипЗнч(Ссылка) = Тип("ДокументСсылка.ПорчаТоваров") Тогда
	
	ТипИсточника = "ДокументСсылка.ПорчаТоваров";
	ТипПриемника = "ДокументСсылка.ОприходованиеТоваров";	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	ТипПриемника = "ДокументСсылка.СписаниеТоваров";		Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	
ИначеЕсли ТипЗнч(Ссылка) = Тип("ДокументСсылка.СборкаТоваров") Тогда
	
	ТипИсточника = "ДокументСсылка.СборкаТоваров";
	ТипПриемника = "ДокументСсылка.КомплектацияНоменклатуры";	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	ТипПриемника = "ДокументСсылка.СписаниеТоваров";			Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	
ИначеЕсли ТипЗнч(Ссылка) = Тип("ДокументСсылка.СписаниеБезналичныхДенежныхСредств") Тогда
	
	ТипИсточника = "ДокументСсылка.СписаниеБезналичныхДенежныхСредств";
	ТипПриемника = "ДокументСсылка.СписаниеСРасчетногоСчета";	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	ТипПриемника = "ДокументСсылка.ПоступлениеНаРасчетныйСчет";	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	
ИначеЕсли ТипЗнч(Ссылка) = Тип("ДокументСсылка.ВнутреннееПотреблениеТоваров") Тогда
	
	ТипИсточника = "ДокументСсылка.ВнутреннееПотреблениеТоваров";
	ТипПриемника = "ДокументСсылка.ТребованиеНакладная";			 Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	ТипПриемника = "ДокументСсылка.СписаниеТоваров";				 Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	ТипПриемника = "ДокументСсылка.ПередачаМатериаловВЭксплуатацию"; Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	
ИначеЕсли ТипЗнч(Ссылка) = Тип("ПланВидовХарактеристикСсылка.СтатьиРасходов") Тогда
	
	ТипИсточника = "ПланВидовХарактеристикСсылка.СтатьиРасходов";
	ТипПриемника = "СправочникСсылка.СтатьиЗатрат";							 Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	ТипПриемника = "СправочникСсылка.ПрочиеДоходыИРасходы";					 Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	ТипПриемника = "СправочникСсылка.СпособыОтраженияРасходовПоАмортизации"; Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	
ИначеЕсли ТипЗнч(Ссылка) = Тип("ДокументСсылка.ВзаимозачетЗадолженности") Тогда

	ТипИсточника = "ДокументСсылка.ВзаимозачетЗадолженности";
	ТипПриемника = "ДокументСсылка.КорректировкаДолга"; Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	
	Если ОбщегоНазначения.СсылкаСуществует(Ссылка) Тогда
		ВыгрузитьПоПравилу(Ссылка,,,, "ВЗ_ВзаимозачетЗадолженностиОрганизацияКредиторУдал");
		ВыгрузитьПоПравилу(Ссылка,,,, "ВЗ_ВзаимозачетЗадолженностиОрганизацияДебиторУдал");
	КонецЕсли;
	
ИначеЕсли ТипЗнч(Ссылка) = Тип("ДокументСсылка.ПоступлениеТоваровУслуг") Тогда

	ТипИсточника = "ДокументСсылка.ПоступлениеТоваровУслуг";
	ТипПриемника = "ДокументСсылка.ПоступлениеТоваровУслуг"; Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	ТипПриемника = "ДокументСсылка.ПоступлениеДопРасходов"; Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	
ИначеЕсли ТипЗнч(Ссылка) = Тип("ДокументСсылка.ПоступлениеУслугПрочихАктивов") Тогда

	ТипИсточника = "ДокументСсылка.ПоступлениеУслугПрочихАктивов";
	ТипПриемника = "ДокументСсылка.ПоступлениеТоваровУслуг"; Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	ТипПриемника = "ДокументСсылка.ПоступлениеДопРасходов"; Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	
Иначе
	Отказ = Ложь;
КонецЕсли;</ПередОтправкойИнформацииОбУдалении>
	<ПриПолученииИнформацииОбУдалении>МетаданныеОбъекта = Объект.Метаданные();

Если Метаданные.Справочники.Содержит(МетаданныеОбъекта) Тогда
	
	Отказ  = Истина;
	
	УстановитьПометкуУдаленияУОбъекта(Объект, Истина, "Справочник");
	
ИначеЕсли Метаданные.Документы.Содержит(МетаданныеОбъекта) Тогда
	
	Отказ  = Истина;
	
	Если Объект.Проведен Тогда
		
		ОтменитьПроведениеОбъектаВИБ(Объект, ТипЗнч(Объект));
		
	КонецЕсли;
	
	УстановитьПометкуУдаленияУОбъекта(Объект, Истина, "Документ");
	
ИначеЕсли Метаданные.ПланыВидовХарактеристик.Содержит(МетаданныеОбъекта) Тогда
	
	Отказ  = Истина;
	
	УстановитьПометкуУдаленияУОбъекта(Объект, Истина, "ПланВидовХарактеристик");
	
КонецЕсли;</ПриПолученииИнформацииОбУдалении>
	<Параметры/>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Группа>
			<Код>Перечисления</Код>
			<Наименование>Перечисления</Наименование>
			<Порядок>50</Порядок>
			<Правило>
				<Код>ЮрФизЛицо</Код>
				<Наименование>Перечисление: Юр. / физ. лицо</Наименование>
				<Порядок>50</Порядок>
				<Источник>ПеречислениеСсылка.ЮрФизЛицо</Источник>
				<Приемник>ПеречислениеСсылка.ЮрФизЛицо</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ИндивидуальныйПредприниматель --&gt; ФизЛицо</Наименование>
						<Порядок>50</Порядок>
						<Источник>ИндивидуальныйПредприниматель</Источник>
						<Приемник>ФизЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ФизЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>100</Порядок>
						<Источник>ФизЛицо</Источник>
						<Приемник>ФизЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ЮрЛицо --&gt; ЮрЛицо</Наименование>
						<Порядок>150</Порядок>
						<Источник>ЮрЛицо</Источник>
						<Приемник>ЮрЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ЮрЛицоНеРезидент --&gt; ЮрЛицо</Наименование>
						<Порядок>200</Порядок>
						<Источник>ЮрЛицоНеРезидент</Источник>
						<Приемник>ЮрЛицо</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ПолФизическихЛиц</Код>
				<Наименование>Перечисление: Пол физического лица</Наименование>
				<Порядок>100</Порядок>
				<Источник>ПеречислениеСсылка.ПолФизическогоЛица</Источник>
				<Приемник>ПеречислениеСсылка.ПолФизическихЛиц</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Женский --&gt; Женский</Наименование>
						<Порядок>50</Порядок>
						<Источник>Женский</Источник>
						<Приемник>Женский</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Мужской --&gt; Мужской</Наименование>
						<Порядок>100</Порядок>
						<Источник>Мужской</Источник>
						<Приемник>Мужской</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыСкладов</Код>
				<Наименование>Перечисление: Типы складов</Наименование>
				<Порядок>150</Порядок>
				<Источник>ПеречислениеСсылка.ТипыСкладов</Источник>
				<Приемник>ПеречислениеСсылка.ВидыСкладов</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ОптовыйСклад --&gt; Оптовый</Наименование>
						<Порядок>50</Порядок>
						<Источник>ОптовыйСклад</Источник>
						<Приемник>Оптовый</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>РозничныйМагазин --&gt; Розничный</Наименование>
						<Порядок>100</Порядок>
						<Источник>РозничныйМагазин</Источник>
						<Приемник>Розничный</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>СтавкиНДС</Код>
				<Наименование>Перечисление: Ставки НДС</Наименование>
				<Порядок>200</Порядок>
				<Источник>ПеречислениеСсылка.СтавкиНДС</Источник>
				<Приемник>ПеречислениеСсылка.СтавкиНДС</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>БезНДС --&gt; БезНДС</Наименование>
						<Порядок>50</Порядок>
						<Источник>БезНДС</Источник>
						<Приемник>БезНДС</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>НДС0 --&gt; НДС0</Наименование>
						<Порядок>100</Порядок>
						<Источник>НДС0</Источник>
						<Приемник>НДС0</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>НДС10 --&gt; НДС10</Наименование>
						<Порядок>150</Порядок>
						<Источник>НДС10</Источник>
						<Приемник>НДС10</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>НДС10_110 --&gt; НДС10_110</Наименование>
						<Порядок>200</Порядок>
						<Источник>НДС10_110</Источник>
						<Приемник>НДС10_110</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>НДС18 --&gt; НДС18</Наименование>
						<Порядок>250</Порядок>
						<Источник>НДС18</Источник>
						<Приемник>НДС18</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>НДС18_118 --&gt; НДС18_118</Наименование>
						<Порядок>300</Порядок>
						<Источник>НДС18_118</Источник>
						<Приемник>НДС18_118</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыКонтактнойИнформации</Код>
				<Наименование>Перечисление: Типы контактной информации</Наименование>
				<Порядок>250</Порядок>
				<Источник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Источник>
				<Приемник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Адрес --&gt; Адрес</Наименование>
						<Порядок>50</Порядок>
						<Источник>Адрес</Источник>
						<Приемник>Адрес</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>АдресЭлектроннойПочты --&gt; АдресЭлектроннойПочты</Наименование>
						<Порядок>100</Порядок>
						<Источник>АдресЭлектроннойПочты</Источник>
						<Приемник>АдресЭлектроннойПочты</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ВебСтраница --&gt; ВебСтраница</Наименование>
						<Порядок>150</Порядок>
						<Источник>ВебСтраница</Источник>
						<Приемник>ВебСтраница</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Другое --&gt; Другое</Наименование>
						<Порядок>200</Порядок>
						<Источник>Другое</Источник>
						<Приемник>Другое</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Телефон --&gt; Телефон</Наименование>
						<Порядок>250</Порядок>
						<Источник>Телефон</Источник>
						<Приемник>Телефон</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>Факс --&gt; Телефон</Наименование>
						<Порядок>300</Порядок>
						<Источник>Факс</Источник>
						<Приемник>Телефон</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>СпособыРасчетаКомиссионногоВознаграждения</Код>
				<Наименование>Перечисление: Способы расчета комиссионного вознаграждения</Наименование>
				<Порядок>300</Порядок>
				<Источник>ПеречислениеСсылка.СпособыРасчетаКомиссионногоВознаграждения</Источник>
				<Приемник>ПеречислениеСсылка.СпособыРасчетаКомиссионногоВознаграждения</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>НеРассчитывается --&gt; НеРассчитывается</Наименование>
						<Порядок>50</Порядок>
						<Источник>НеРассчитывается</Источник>
						<Приемник>НеРассчитывается</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ПроцентОтРазностиСуммыПродажиИСуммыКомитента --&gt; П</Наименование>
						<Порядок>100</Порядок>
						<Источник>ПроцентОтРазностиСуммыПродажиИСуммыКомитента</Источник>
						<Приемник>ПроцентОтРазностиСуммПродажиИПоступления</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ПроцентОтСуммыПродажи --&gt; ПроцентОтСуммыПродажи</Наименование>
						<Порядок>150</Порядок>
						<Источник>ПроцентОтСуммыПродажи</Источник>
						<Приемник>ПроцентОтСуммыПродажи</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыЗадолженности</Код>
				<Наименование>Перечисление: Типы задолженности</Наименование>
				<Порядок>350</Порядок>
				<Источник>ПеречислениеСсылка.ТипыЗадолженности</Источник>
				<Приемник>ПеречислениеСсылка.ВидыЗадолженности</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Дебиторская --&gt; Дебиторская</Наименование>
						<Порядок>50</Порядок>
						<Источник>Дебиторская</Источник>
						<Приемник>Дебиторская</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Кредиторская --&gt; Кредиторская</Наименование>
						<Порядок>100</Порядок>
						<Источник>Кредиторская</Источник>
						<Приемник>Кредиторская</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыДоговоров_ВидыДоговоровКонтрагентов</Код>
				<Наименование>Перечисление: Хозяйственные операции</Наименование>
				<Порядок>400</Порядок>
				<Источник>ПеречислениеСсылка.ТипыДоговоров</Источник>
				<Приемник>ПеречислениеСсылка.ВидыДоговоровКонтрагентов</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ПередачаНаКомиссию --&gt; СКомиссионером</Наименование>
						<Порядок>50</Порядок>
						<Источник>СКомиссионером</Источник>
						<Приемник>СКомиссионером</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ПриемНаКомиссию --&gt; СКомитентом</Наименование>
						<Порядок>100</Порядок>
						<Источник>СКомитентом</Источник>
						<Приемник>СКомитентом</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>РеализацияКлиенту --&gt; СПокупателем</Наименование>
						<Порядок>150</Порядок>
						<Источник>СПокупателем</Источник>
						<Приемник>СПокупателем</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ПорчаТоваров --&gt; СПоставщиком</Наименование>
						<Порядок>200</Порядок>
						<Источник>СПоставщиком</Источник>
						<Приемник>СПоставщиком</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Импорт --&gt; СПоставщиком</Наименование>
						<Порядок>200</Порядок>
						<Источник>Импорт</Источник>
						<Приемник>СПоставщиком</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ЮридическоеФизическоеЛицо_ЮрФизЛицо</Код>
				<Наименование>Перечисление: Юридическое / физическое лицо</Наименование>
				<Порядок>450</Порядок>
				<Источник>ПеречислениеСсылка.ЮридическоеФизическоеЛицо</Источник>
				<Приемник>ПеречислениеСсылка.ЮрФизЛицо</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ФизическоеЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>50</Порядок>
						<Источник>ФизическоеЛицо</Источник>
						<Приемник>ФизЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ЮридическоеЛицо --&gt; ЮрЛицо</Наименование>
						<Порядок>100</Порядок>
						<Источник>ЮридическоеЛицо</Источник>
						<Приемник>ЮрЛицо</Приемник>
					</Значение>
				</Значения>
			</Правило>
		</Группа>
		<Группа>
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>100</Порядок>
			<Группа>
				<Код>БазовыеКлассификаторы</Код>
				<Наименование>БазовыеКлассификаторы</Наименование>
				<Порядок>50</Порядок>
				<Правило>
					<Код>Валюты</Код>
					<Наименование>Справочник: Валюты</Наименование>
					<Порядок>50</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.Валюты</Источник>
					<Приемник>СправочникСсылка.Валюты</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>ПараметрыПрописиНаРусском --&gt; ПараметрыПрописиНаРусском</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ПараметрыПрописиНаРусском" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ПараметрыПрописиНаРусском" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>Банки</Код>
					<Наименование>Справочник: Банки</Наименование>
					<Порядок>100</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.КлассификаторБанковРФ</Источник>
					<Приемник>СправочникСсылка.Банки</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Адрес --&gt; Адрес</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Город --&gt; Город</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>КоррСчет --&gt; КоррСчет</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Телефоны --&gt; Телефоны</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Родитель --&gt; Родитель</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.КлассификаторБанковРФ"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Банки"/>
							<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
						</Свойство>
						<Свойство Обязательное="true">
							<Код>10</Код>
							<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>КлассификаторСтранМира</Код>
					<Наименование>Справочник: Страны мира</Наименование>
					<Порядок>150</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.СтраныМира</Источник>
					<Приемник>СправочникСсылка.КлассификаторСтранМира</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>КодАльфа2 --&gt; КодАльфа2</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="КодАльфа2" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КодАльфа2" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения>
						<Значение>
							<Код>1</Код>
							<Наименование>Россия --&gt; Россия</Наименование>
							<Порядок>50</Порядок>
							<Источник>Россия</Источник>
							<Приемник>Россия</Приемник>
						</Значение>
					</Значения>
				</Правило>
				<Правило>
					<Код>КлассификаторЕдиницИзмерения</Код>
					<Наименование>Справочник: Единицы измерения</Наименование>
					<Порядок>200</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.ЕдиницыИзмерения</Источник>
					<Приемник>СправочникСсылка.КлассификаторЕдиницИзмерения</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
			</Группа>
			<Группа>
				<Код>СтруктураПредприятия</Код>
				<Наименование>СтруктураПредприятия</Наименование>
				<Порядок>100</Порядок>
				<Правило>
					<Код>Организации</Код>
					<Наименование>Справочник: Организации</Наименование>
					<Порядок>50</Порядок>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбновлениеОтветственныхЛицОрганизации);</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.Организации</Источник>
					<Приемник>СправочникСсылка.Организации</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>5</Код>
							<Наименование>ИНН --&gt; ИНН</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>8</Код>
							<Наименование>КПП --&gt; КПП</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>НаименованиеСокращенное --&gt; НаименованиеСокращенное</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="НаименованиеСокращенное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеСокращенное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>ЮрФизЛицо --&gt; ЮрФизЛицо</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
							<Приемник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
							<КодПравилаКонвертации>ЮрФизЛицо                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>КодПоОКАТО --&gt; КодПоОКАТО</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="КодПоОКАТО" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КодПоОКАТО" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>ОГРН --&gt; ОГРН</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="ОГРН" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ОГРН" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>Префикс --&gt; Префикс</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Префикс" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Префикс" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>СвидетельствоДатаВыдачи --&gt; СвидетельствоДатаВыдачи</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="СвидетельствоДатаВыдачи" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="СвидетельствоДатаВыдачи" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>СвидетельствоСерияНомер --&gt; СвидетельствоСерияНомер</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="СвидетельствоСерияНомер" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="СвидетельствоСерияНомер" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>40</Код>
							<Наименование>ТекущийРуководитель --&gt; ИндивидуальныйПредприниматель</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="ТекущийРуководитель" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
							<Приемник Имя="ИндивидуальныйПредприниматель" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
							<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
							<ПередВыгрузкой>Если Источник.ЮрФизЛицо &lt;&gt; Перечисления.ЮрФизЛицо.ИндивидуальныйПредприниматель Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>42</Код>
							<Наименование>ТекущийГлавныйБухгалтер --&gt; </Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="ТекущийГлавныйБухгалтер" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
							<Приемник Имя="" Вид=""/>
							<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
							<ИмяПараметраДляПередачи>ГлавныйБухгалтер</ИмяПараметраДляПередачи>
						</Свойство>
						<Свойство>
							<Код>43</Код>
							<Наименование>ТекущийРуководитель --&gt; </Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="ТекущийРуководитель" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
							<Приемник Имя="" Вид=""/>
							<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
							<ИмяПараметраДляПередачи>Руководитель</ИмяПараметраДляПередачи>
						</Свойство>
						<Свойство>
							<Код>44</Код>
							<Наименование>ТекущаяДолжностьРуководителя --&gt; </Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="ТекущаяДолжностьРуководителя" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="" Вид=""/>
							<КодПравилаКонвертации>ДолжностиОрганизаций                              </КодПравилаКонвертации>
							<ИмяПараметраДляПередачи>ДолжностьРуководителя</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.ТекущаяДолжностьРуководителя) Тогда
	Значение = Новый Структура("Ссылка, Наименование", , Источник.ТекущаяДолжностьРуководителя);
Иначе
	Отказ = Истина;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа Отключить="true">
							<Код>14</Код>
							<Наименование>КонтактнаяИнформация --&gt;</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>31</Код>
								<Наименование>Вид --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>39</Код>
								<Наименование>Тип --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>34</Код>
								<Наименование>ЗначенияПолей --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>29</Код>
								<Наименование>Представление --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>Склады</Код>
					<Наименование>Справочник: Склады</Наименование>
					<Порядок>100</Порядок>
					<ПослеЗагрузки>ИмяРеквизита			= "Ответственный";
ИмяРегистра				= "ОтветственныеЛица";
ИмяИзмерения			= "СтруктурнаяЕдиница";
ИмяРесурса				= "ФизическоеЛицо";
ПустоеЗначениеРеквизита = Справочники.ФизическиеЛица.ПустаяСсылка();

Выполнить(Алгоритмы.ОбновитьПериодическийРеквизит);</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.Склады</Источник>
					<Приемник>СправочникСсылка.Склады</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<НеЗамещать>true</НеЗамещать>
							<Код>5</Код>
							<Наименование>ТипСклада --&gt; ВидСклада</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ТипСклада" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыСкладов"/>
							<Приемник Имя="ВидСклада" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыСкладов"/>
							<КодПравилаКонвертации>ТипыСкладов                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>8</Код>
							<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Родитель --&gt; Родитель</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Склады"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Склады"/>
							<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>РозничныйВидЦены --&gt; ТипЦенРозничнойТорговли</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="РозничныйВидЦены" Вид="Реквизит" Тип="СправочникСсылка.ВидыЦен"/>
							<Приемник Имя="ТипЦенРозничнойТорговли" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
							<КодПравилаКонвертации>ТипыЦенНоменклатуры                               </КодПравилаКонвертации>
							<ПередВыгрузкой>// Выгружаем пустой вид цен, если вид цен не проходит фильтр
Если Параметры.ВидыЦенНоменклатуры.Найти(Источник.РозничныйВидЦены) = Неопределено Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>ТекущийОтветственный --&gt; </Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ТекущийОтветственный" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
							<Приемник Имя="" Вид=""/>
							<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
							<ИмяПараметраДляПередачи>Ответственный</ИмяПараметраДляПередачи>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>11</Код>
							<Наименование>ВыборГруппы --&gt;</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ВыборГруппы" Вид="Реквизит" Тип="ПеречислениеСсылка.ВыборГруппыСкладов"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
			</Группа>
			<Группа>
				<Код>Каталоги</Код>
				<Наименование>Каталоги</Наименование>
				<Порядок>150</Порядок>
				<Группа>
					<Код>БанковскиеСчета</Код>
					<Наименование>БанковскиеСчета</Наименование>
					<Порядок>50</Порядок>
					<Правило>
						<Код>БанковскиеСчетаОрганизаций</Код>
						<Наименование>Справочник: Банковские счета организаций</Наименование>
						<Порядок>50</Порядок>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.БанковскиеСчетаОрганизаций</Источник>
						<Приемник>СправочникСсылка.БанковскиеСчета</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>НомерСчета --&gt; НомерСчета</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Владелец --&gt; Владелец</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Владелец" Вид="Свойство"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>Банк --&gt; Банк</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторБанковРФ"/>
								<Приемник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
								<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>БанкДляРасчетов --&gt; БанкДляРасчетов</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторБанковРФ"/>
								<Приемник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
								<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>ВалютаДенежныхСредств --&gt; ВалютаДенежныхСредств</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>ТекстКорреспондента --&gt; ТекстКорреспондента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ТекстКорреспондента" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ТекстКорреспондента" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>ТекстНазначения --&gt; ТекстНазначения</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ТекстНазначения" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ТекстНазначения" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование> --&gt; ВидСчета</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидСчета" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Значение = "Расчетный";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>ВыводитьСуммуБезКопеек --&gt; СуммаБезКопеек</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ВыводитьСуммуБезКопеек" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаБезКопеек" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>ВариантВыводаМесяца --&gt; МесяцПрописью</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="ВариантВыводаМесяца" Вид="Реквизит" Тип="ПеречислениеСсылка.ВариантыВыводаМесяцаВДатеДокумента"/>
								<Приемник Имя="МесяцПрописью" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Источник.ВариантВыводаМесяца = Перечисления.ВариантыВыводаМесяцаВДатеДокумента.Прописью;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>БанковскиеСчетаКонтрагентов</Код>
						<Наименование>Справочник: Банковские счета организаций</Наименование>
						<Порядок>150</Порядок>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.БанковскиеСчетаКонтрагентов</Источник>
						<Приемник>СправочникСсылка.БанковскиеСчета</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование>НомерСчета --&gt; НомерСчета</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Владелец --&gt; Владелец</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Владелец" Вид="Свойство"/>
								<Приемник Имя="Владелец" Вид="Свойство"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								<ПередВыгрузкой>ВладелецИзВходящихДанных = Неопределено;
Если ВходящиеДанные &lt;&gt; Неопределено И ВходящиеДанные.Свойство("Владелец", ВладелецИзВходящихДанных) Тогда
	Значение = ВладелецИзВходящихДанных;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Банк --&gt; Банк</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторБанковРФ"/>
								<Приемник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
								<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>БанкДляРасчетов --&gt; БанкДляРасчетов</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторБанковРФ"/>
								<Приемник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
								<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>ТекстКорреспондента --&gt; ТекстКорреспондента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="ТекстКорреспондента" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ТекстКорреспондента" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>ТекстНазначения --&gt; ТекстНазначения</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ТекстНазначения" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ТекстНазначения" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование> --&gt; ВидСчета</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидСчета" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Значение = "Расчетный";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>ВалютаДенежныхСредств --&gt; ВалютаДенежныхСредств</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>БанковскиеСчетаФизическихЛиц</Код>
						<Наименование>Справочник: Банковские счета организаций</Наименование>
						<Порядок>200</Порядок>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.БанковскиеСчетаКонтрагентов</Источник>
						<Приемник>СправочникСсылка.БанковскиеСчета</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование>НомерСчета --&gt; НомерСчета</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Владелец --&gt; Владелец</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Владелец" Вид="Свойство"/>
								<Приемник Имя="Владелец" Вид="Свойство"/>
								<ПередВыгрузкой>НовыйКонтрагент = Справочники.Контрагенты.ПустаяСсылка();
ФизЛицо	 = Источник.Владелец;
Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзФизЛица);
Значение = НовыйКонтрагент;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Банк --&gt; Банк</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторБанковРФ"/>
								<Приемник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
								<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>БанкДляРасчетов --&gt; БанкДляРасчетов</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторБанковРФ"/>
								<Приемник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
								<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>ТекстКорреспондента --&gt; ТекстКорреспондента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="ТекстКорреспондента" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ТекстКорреспондента" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>ТекстНазначения --&gt; ТекстНазначения</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ТекстНазначения" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ТекстНазначения" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование> --&gt; ВидСчета</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидСчета" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Значение = "Расчетный";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>ВалютаДенежныхСредств --&gt; ВалютаДенежныхСредств</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Правило>
					<Код>ФизическиеЛица</Код>
					<Наименование>Справочник: Физические лица</Наименование>
					<Порядок>150</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.ФизическиеЛица</Источник>
					<Приемник>СправочникСсылка.ФизическиеЛица</Приемник>
					<Свойства>
						<Свойство Поиск="true" Обязательное="true">
							<Код>15</Код>
							<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>3</Код>
							<Наименование>ДатаРождения --&gt; ДатаРождения</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Родитель --&gt; Родитель</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ФизическиеЛица"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ФизическиеЛица"/>
							<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>ИНН --&gt; ИНН</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Пол --&gt; Пол</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Пол" Вид="Реквизит" Тип="ПеречислениеСсылка.ПолФизическогоЛица"/>
							<Приемник Имя="Пол" Вид="Реквизит" Тип="ПеречислениеСсылка.ПолФизическихЛиц"/>
							<КодПравилаКонвертации>ПолФизическихЛиц                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа Отключить="true">
							<Код>8</Код>
							<Наименование>КонтактнаяИнформация --&gt;</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>9</Код>
								<Наименование>Вид --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>12</Код>
								<Наименование>Тип --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>10</Код>
								<Наименование>ЗначенияПолей --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>11</Код>
								<Наименование>Представление --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>Контрагенты</Код>
					<Наименование>Справочник: Номенклатура</Наименование>
					<Порядок>200</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.Контрагенты</Источник>
					<Приемник>СправочникСсылка.Контрагенты</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>3</Код>
							<Наименование>ИНН --&gt; ИНН</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>5</Код>
							<Наименование>КПП --&gt; КПП</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>ЮридическоеФизическоеЛицо --&gt; ЮрФизЛицо</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ЮридическоеФизическоеЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮридическоеФизическоеЛицо"/>
							<Приемник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
							<КодПравилаКонвертации>ЮридическоеФизическоеЛицо_ЮрФизЛицо               </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование> --&gt; ГоловнойКонтрагент</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ГоловнойКонтрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							<ПередВыгрузкой>Значение = Источник.Ссылка;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа Отключить="true">
							<Код>10</Код>
							<Наименование>КонтактнаяИнформация --&gt;</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>12</Код>
								<Наименование>Вид --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>15</Код>
								<Наименование>ЗначенияПолей --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>18</Код>
								<Наименование>Представление --&gt;</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>21</Код>
								<Наименование>Тип --&gt;</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>Номенклатура</Код>
					<Наименование>Справочник: Номенклатура</Наименование>
					<Порядок>250</Порядок>
					<ПослеЗагрузки>Если НЕ Объект.ЭтоГруппа 
	И НЕ ЗначениеЗаполнено(Объект.НоменклатурнаяГруппа) 
	И ЗначениеЗаполнено(Параметры.НоменклатурнаяГруппаПоУмолчанию) Тогда
	Объект.НоменклатурнаяГруппа = Параметры.НоменклатурнаяГруппаПоУмолчанию;
Иначе
	ОбъектМодифицирован = Ложь;
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.Номенклатура</Источник>
					<Приемник>СправочникСсылка.Номенклатура</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>3</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>4</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>12</Код>
							<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>Родитель --&gt; Родитель</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Артикул --&gt; Артикул</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>ТипНоменклатуры --&gt; Услуга</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ТипНоменклатуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНоменклатуры"/>
							<Приемник Имя="Услуга" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
Иначе
	Значение = (Источник.ТипНоменклатуры = Перечисления.ТипыНоменклатуры.Услуга);
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>ЕдиницаИзмерения --&gt; БазоваяЕдиницаИзмерения</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="БазоваяЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>13</Код>
							<Наименование> --&gt; НоменклатурнаяГруппа</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НоменклатурнаяГруппа" Вид="Реквизит" Тип="СправочникСсылка.НоменклатурныеГруппы"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ДоговорыЭквайринга</Код>
					<Наименование>:</Наименование>
					<Порядок>300</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.ДоговорыЭквайринга</Источник>
					<Приемник>СправочникСсылка.ВидыОплатОрганизаций</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>5</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Контрагент --&gt; Контрагент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование> --&gt; ТипОплаты</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ТипОплаты" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыОплат"/>
							<ПередВыгрузкой>Значение = "ПлатежнаяКарта";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование> --&gt; ДоговорКонтрагента</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
							<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Неопределено);
Значение.Вставить("ВидДоговора",				"Прочее");
Значение.Вставить("Владелец",					Источник.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Источник.Эквайрер);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено); 

Значение.ВалютаВзаиморасчетов = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.БанковскийСчет, "ВалютаДенежныхСредств");

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>8</Код>
							<Наименование>БанковскийСчет --&gt;</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>9</Код>
							<Наименование>Эквайрер --&gt;</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Эквайрер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>Пользователи</Код>
					<Наименование>Справочник: Пользователи</Наименование>
					<Порядок>350</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.Пользователи</Источник>
					<Приемник>СправочникСсылка.Пользователи</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>5</Код>
							<Наименование> --&gt; ЭтоГруппа</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>ФизическоеЛицо --&gt; ФизЛицо</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ФизическоеЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
							<Приемник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
							<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
			</Группа>
			<Группа>
				<Код>ПрочиеСправочники</Код>
				<Наименование>ПрочиеСправочники</Наименование>
				<Порядок>500</Порядок>
				<Группа>
					<Код>ГруппаДоговорыКонтрагентов</Код>
					<Наименование>ДоговорыКонтрагентов</Наименование>
					<Порядок>50</Порядок>
					<Правило>
						<Код>ДоговорыКонтрагентов_ДоговорыКонтрагентов_оригинал</Код>
						<Наименование>Справочник: Договоры с контрагентами</Наименование>
						<Порядок>50</Порядок>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.ДоговорыКонтрагентов</Источник>
						<Приемник>СправочникСсылка.ДоговорыКонтрагентов</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>10</Код>
								<Наименование>ТипДоговора --&gt; ВидДоговора</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ТипДоговора" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыДоговоров"/>
								<Приемник Имя="ВидДоговора" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДоговоровКонтрагентов"/>
								<ПриВыгрузке>Если ВходящиеДанные.Свойство("ВидДоговора") Тогда
	Значение = ВходящиеДанные.ВидДоговора;
Иначе
	ИмяПКО = "ТипыДоговоров_ВидыДоговоровКонтрагентов";
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; ВалютаВзаиморасчетов</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>8</Код>
								<Наименование>Контрагент --&gt; Владелец</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>9</Код>
								<Наименование>ПорядокОплаты --&gt; РасчетыВУсловныхЕдиницах</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="ПорядокОплаты" Вид="Реквизит" Тип="ПеречислениеСсылка.ПорядокОплатыПоСоглашениям"/>
								<Приемник Имя="РасчетыВУсловныхЕдиницах" Вид="Реквизит" Тип="Булево"/>
								<ПриВыгрузке>Значение = Значение = Перечисления.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Дата" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Номер" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование> --&gt; Комментарий</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Значение = "Используется в УТ11";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ДоговорыКонтрагентов</Код>
						<Наименование>:</Наименование>
						<Порядок>100</Порядок>
						<ПередВыгрузкой>ЗапоминатьВыгруженные = Истина;
КлючВыгружаемыхДанных = ЗначениеВСтрокуВнутр(Источник);</ПередВыгрузкой>
						<ПослеЗагрузки>Если Объект.ЭтоНовый() Тогда

	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		
		Объект.УстановитьСсылкуНового(Справочники.ДоговорыКонтрагентов.ПолучитьСсылку(Новый УникальныйИдентификатор));
		
		НаборЗаписей = РегистрыСведений.ЗначенияСвойствОбъектов.СоздатьНаборЗаписей();
		НаборЗаписей.Отбор.Объект.Установить(Объект.ПолучитьСсылкуНового());
		
		Для Каждого ПараметрОбъекта Из ПараметрыОбъекта Цикл
			
			Ключ = ПараметрОбъекта.Ключ;
			Если Лев(Ключ, 16) = "ЗначениеСвойства" Тогда
				
				Свойство = ПараметрыОбъекта[СтрЗаменить(Ключ, "ЗначениеСвойства", "Свойство")];
				
				НоваяЗапись = НаборЗаписей.Добавить();
				НоваяЗапись.Объект	 = Объект.ПолучитьСсылкуНового();
				НоваяЗапись.Свойство = Свойство.Ссылка;
				НоваяЗапись.Значение = ПараметрОбъекта.Значение;
				
			КонецЕсли;
			
		КонецЦикла;
		
		Если НаборЗаписей.Количество() &gt; 0 Тогда
			УстановитьОбменДаннымиЗагрузка(НаборЗаписей);
			НаборЗаписей.Записать();		
			УстановитьОбменДаннымиЗагрузка(НаборЗаписей, Ложь);
		КонецЕсли;
	
	КонецЕсли;
	
	Объект.Комментарий = "Сформирован автоматически при обмене с конфигурацией ""Управление торговлей""";
	
КонецЕсли;</ПослеЗагрузки>
						<ПоследовательностьПолейПоиска>Запрос = Новый Запрос;
Для Каждого СвойствоПоиска Из СвойстваПоиска Цикл
	Запрос.УстановитьПараметр(СвойствоПоиска.Ключ, СвойствоПоиска.Значение);
КонецЦикла;

Если НЕ СвойстваПоиска.Получить("ИспользуетсяПриОбменеДанными") = Неопределено Тогда
	
	// Осуществляем поиск по реквизитам
	Запрос.Текст = "ВЫБРАТЬ
	               |	ДоговорыКонтрагентов.Ссылка
	               |ИЗ
	               |	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
	               |ГДЕ
	               |	ДоговорыКонтрагентов.ВидДоговора = &amp;ВидДоговора
	               |	И ДоговорыКонтрагентов.Организация = &amp;Организация
	               |	И ДоговорыКонтрагентов.Владелец = &amp;Владелец
	               |	И ДоговорыКонтрагентов.ВалютаВзаиморасчетов = &amp;ВалютаВзаиморасчетов
	               |	И ДоговорыКонтрагентов.ИспользуетсяПриОбменеДанными = &amp;ИспользуетсяПриОбменеДанными
	               |	И ДоговорыКонтрагентов.РасчетыВУсловныхЕдиницах = &amp;РасчетыВУсловныхЕдиницах";
	
	ВыборкаДоговоров = Запрос.Выполнить().Выбрать();
	Если ВыборкаДоговоров.Следующий() Тогда
		СсылкаНаОбъект = ВыборкаДоговоров.Ссылка;
	КонецЕсли;
	
Иначе
	
	// Осуществляем поиск договора не только по реквизитам, но и по свойствам
	Запрос.Текст = "ВЫБРАТЬ
	               |	ЗначенияЗагруженныхСвойств.СвойствоНаименование КАК СвойствоНаименование,
	               |	ЗначенияЗагруженныхСвойств.СвойствоЗначение
	               |ПОМЕСТИТЬ ЗначенияЗагруженныхСвойств
	               |ИЗ
	               |	&amp;ЗначенияЗагруженныхСвойств КАК ЗначенияЗагруженныхСвойств
	               |
	               |ИНДЕКСИРОВАТЬ ПО
	               |	СвойствоНаименование
	               |;
	               |
	               |////////////////////////////////////////////////////////////////////////////////
	               |ВЫБРАТЬ
	               |	ДоговорыКонтрагентов.Ссылка КАК Ссылка,
	               |	ЗначенияЗагруженныхСвойств.СвойствоНаименование
	               |ПОМЕСТИТЬ ОтборПоРеквизитам
	               |ИЗ
	               |	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов,
	               |	ЗначенияЗагруженныхСвойств КАК ЗначенияЗагруженныхСвойств
	               |ГДЕ
	               |	ДоговорыКонтрагентов.ВидДоговора = &amp;ВидДоговора
	               |	И ДоговорыКонтрагентов.Организация = &amp;Организация
	               |	И ДоговорыКонтрагентов.Владелец = &amp;Владелец
	               |	И ДоговорыКонтрагентов.ВалютаВзаиморасчетов = &amp;ВалютаВзаиморасчетов
	               |	И ДоговорыКонтрагентов.РасчетыВУсловныхЕдиницах = &amp;РасчетыВУсловныхЕдиницах
	               |
	               |ИНДЕКСИРОВАТЬ ПО
	               |	Ссылка
	               |;
	               |
	               |////////////////////////////////////////////////////////////////////////////////
	               |ВЫБРАТЬ
	               |	ОтборПоРеквизитам.Ссылка,
	               |	ЗначенияСвойствОбъектов.Свойство.Наименование КАК СвойствоНаименование,
	               |	ЗначенияСвойствОбъектов.Значение КАК СвойствоЗначение
	               |ПОМЕСТИТЬ ЗначенияСвойствВБазе
	               |ИЗ
	               |	ОтборПоРеквизитам КАК ОтборПоРеквизитам
	               |		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЗначенияСвойствОбъектов КАК ЗначенияСвойствОбъектов
	               |		ПО ОтборПоРеквизитам.Ссылка = ЗначенияСвойствОбъектов.Объект
	               |			И ОтборПоРеквизитам.СвойствоНаименование = ЗначенияСвойствОбъектов.Свойство.Наименование
	               |
	               |ИНДЕКСИРОВАТЬ ПО
	               |	СвойствоНаименование
	               |;
	               |
	               |////////////////////////////////////////////////////////////////////////////////
	               |ВЫБРАТЬ
	               |	РезультатАнализаДоговоров.Ссылка
	               |ИЗ
	               |	(ВЫБРАТЬ
	               |		ЗначенияСвойствВБазе.Ссылка КАК Ссылка,
	               |		МИНИМУМ(ВЫБОР
	               |				КОГДА ЗначенияЗагруженныхСвойств.СвойствоЗначение = ЗначенияСвойствВБазе.СвойствоЗначение
	               |							И (НЕ ЗначенияЗагруженныхСвойств.СвойствоЗначение ЕСТЬ NULL )
	               |							И (НЕ ЗначенияСвойствВБазе.СвойствоЗначение ЕСТЬ NULL )
	               |						ИЛИ ЗначенияЗагруженныхСвойств.СвойствоЗначение = НЕОПРЕДЕЛЕНО
	               |							И (ЗначенияСвойствВБазе.СвойствоЗначение ЕСТЬ NULL 
	               |								ИЛИ ЗначенияСвойствВБазе.СвойствоЗначение = НЕОПРЕДЕЛЕНО
	               |								ИЛИ ЗначенияСвойствВБазе.СвойствоЗначение = ЗНАЧЕНИЕ(Справочник.ЗначенияСвойствОбъектов.ПустаяСсылка))
	               |					ТОГДА ИСТИНА
	               |				ИНАЧЕ ЛОЖЬ
	               |			КОНЕЦ) КАК Результат
	               |	ИЗ
	               |		ЗначенияСвойствВБазе КАК ЗначенияСвойствВБазе
	               |			ПОЛНОЕ СОЕДИНЕНИЕ ЗначенияЗагруженныхСвойств КАК ЗначенияЗагруженныхСвойств
	               |			ПО ЗначенияСвойствВБазе.СвойствоНаименование = ЗначенияЗагруженныхСвойств.СвойствоНаименование
	               |	
	               |	СГРУППИРОВАТЬ ПО
	               |		ЗначенияСвойствВБазе.Ссылка) КАК РезультатАнализаДоговоров
	               |ГДЕ
	               |	РезультатАнализаДоговоров.Результат";
	
	ЗначенияЗагруженныхСвойств = Новый ТаблицаЗначений;
	ЗначенияЗагруженныхСвойств.Колонки.Добавить("СвойствоНаименование", Новый ОписаниеТипов("Строка",, Новый КвалификаторыСтроки(50)));
	ЗначенияЗагруженныхСвойств.Колонки.Добавить("СвойствоЗначение", Новый ОписаниеТипов("СправочникСсылка.ЗначенияСвойствОбъектов"));
	
	Для Каждого ПараметрОбъекта Из ПараметрыОбъекта Цикл
		
		Ключ = ПараметрОбъекта.Ключ;
		Если Ключ = "ЗначениеСвойстваПартнерУТ11" Тогда
			НазваниеСвойства = "Партнер УТ11";
		ИначеЕсли Ключ = "ЗначениеСвойстваСоглашениеСКлиентомУТ11" Тогда
			НазваниеСвойства = "Соглашение с клиентом УТ11";
		ИначеЕсли Ключ = "ЗначениеСвойстваСоглашениеСПоставщикомУТ11" Тогда
			НазваниеСвойства = "Соглашение с поставщиком УТ11";
		ИначеЕсли Ключ = "ЗначениеСвойстваСделкаСКлиентомУТ11" Тогда
			НазваниеСвойства = "Сделка с клиентом УТ11";
		ИначеЕсли Ключ = "ЗначениеСвойстваЗаказКлиентаУТ11" Тогда
			НазваниеСвойства = "Заказ клиента УТ11";
		ИначеЕсли Ключ = "ЗначениеСвойстваЗаказПоставщикуУТ11" Тогда
			НазваниеСвойства = "Заказ поставщику УТ11";
		КонецЕсли;
		
		НоваяСтрока = ЗначенияЗагруженныхСвойств.Добавить();
		НоваяСтрока.СвойствоНаименование = НазваниеСвойства;
		НоваяСтрока.СвойствоЗначение	 = ?(ЗначениеЗаполнено(ПараметрОбъекта.Значение), ПараметрОбъекта.Значение, Неопределено);
		
	КонецЦикла;
	
	Запрос.УстановитьПараметр("ЗначенияЗагруженныхСвойств", ЗначенияЗагруженныхСвойств);
	
	РезультатЗапроса = Запрос.ВыполнитьПакет()[3];
	ВыборкаДоговоров = РезультатЗапроса.Выбрать();
	Если ВыборкаДоговоров.Следующий() Тогда
		СсылкаНаОбъект = ВыборкаДоговоров.Ссылка;
	КонецЕсли;
	
КонецЕсли;

ПрекратитьПоиск = Истина;</ПоследовательностьПолейПоиска>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Приемник>СправочникСсылка.ДоговорыКонтрагентов</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование> --&gt; ВидДоговора</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидДоговора" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДоговоровКонтрагентов"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование> --&gt; ВалютаВзаиморасчетов</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование> --&gt; Владелец</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование> --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование> --&gt; РасчетыВУсловныхЕдиницах</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="РасчетыВУсловныхЕдиницах" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>10</Код>
								<Наименование> --&gt; ИспользуетсяПриОбменеДанными</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИспользуетсяПриОбменеДанными" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов = "БезРазделения" Тогда
	Значение = Истина;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>11</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>ПартнерыВЗначенияСвойствОбъектов                  </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>ЗначениеСвойстваПартнерУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов = "БезРазделения" Тогда
	Отказ = Истина;
Иначе
	Значение = Источник.ПартнерУТ11;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>12</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>СделкиСКлиентамиВЗначенияСвойствОбъектов          </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>ЗначениеСвойстваСделкаСКлиентомУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов &lt;&gt; "ПоСделкам" Тогда
	Отказ = Истина;
Иначе
	Значение = Источник.СделкаСКлиентомУТ11;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>13</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>СоглашенияСКлиентамиВЗначенияСвойствОбъектов      </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>ЗначениеСвойстваСоглашениеСКлиентомУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов &lt;&gt; "ПоСоглашениям" Тогда
	Отказ = Истина;
ИначеЕсли ТипЗнч(Источник.СоглашениеСКлиентомУТ11) = Тип("СправочникСсылка.СоглашенияСКлиентами") Тогда
	Значение = Источник.СоглашениеСКлиентомУТ11;
Иначе
	Значение = Неопределено;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>14</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>СоглашенияСПоставщикамиВЗначенияСвойствОбъектов   </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>ЗначениеСвойстваСоглашениеСПоставщикомУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов &lt;&gt; "ПоСоглашениям" Тогда
	Отказ = Истина;
ИначеЕсли ТипЗнч(Источник.СоглашениеСПоставщикомУТ11) = Тип("СправочникСсылка.СоглашенияСПоставщиками") Тогда
	Значение = Источник.СоглашениеСПоставщикомУТ11;
Иначе
	Значение = Неопределено;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>16</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>ЗаказКлиентаВЗначенияСвойствОбъектов              </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>ЗначениеСвойстваЗаказКлиентаУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов &lt;&gt; "ПоЗаказам" Тогда
	Отказ = Истина;
ИначеЕсли ТипЗнч(Источник.ЗаказКлиентаУТ11) = Тип("ДокументСсылка.ЗаказКлиента") Тогда
	Значение = Источник.ЗаказКлиентаУТ11;
Иначе
	Значение = Неопределено;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>15</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>ЗаказПоставщикуВЗначенияСвойствОбъектов           </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>ЗначениеСвойстваЗаказПоставщикуУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов &lt;&gt; "ПоЗаказам" Тогда
	Отказ = Истина;
ИначеЕсли ТипЗнч(Источник.ЗаказПоставщикуУТ11) = Тип("ДокументСсылка.ЗаказПоставщику") Тогда
	Значение = Источник.ЗаказПоставщикуУТ11;
Иначе
	Значение = Неопределено;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>8</Код>
								<Наименование> --&gt; Наименование</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>ВидДоговора = Источник.ВидДоговора;
Если ВидДоговора = "СПоставщиком" Тогда
	ВидДоговора = "С поставщиком";
ИначеЕсли ВидДоговора = "СПокупателем" Тогда
	ВидДоговора = "С покупателем";
ИначеЕсли ВидДоговора = "СКомитентом" Тогда
	ВидДоговора = "С комитентом";
ИначеЕсли ВидДоговора = "СКомиссионером" Тогда
	ВидДоговора = "С комиссионером";
КонецЕсли;

НазваниеПоУмолчанию = ВидДоговора + ", " + НРег(Источник.ВалютаВзаиморасчетов)+ ?(Источник.РасчетыВУсловныхЕдиницах, " (у.е.)", "");
НазваниеПоПартнеру	= "";

ПравилаСозданияДоговоров = Параметры.УзелПравилаСозданияДоговоровКонтрагентов;
Если ПравилаСозданияДоговоров = "БезРазделения" Тогда
	
	Значение = НазваниеПоУмолчанию;
	
Иначе
	
	Значение = "";
	
	// Если названия партнера и контрагента отличаются, то имеет смысл включить партнера в наименование договора
	ПартнерСтрокой = Строка(Источник.ПартнерУТ11);
	Если Строка(Источник.Владелец) &lt;&gt; ПартнерСтрокой И ЗначениеЗаполнено(Источник.ПартнерУТ11) Тогда
		
		ДопСтрока =  ", " + НРег(НазваниеПоУмолчанию);
		
		// Уменьшаем при необходимости длину наименования партнера
		НазваниеПоПартнеру = Лев(ПартнерСтрокой, 50 - СтрДлина(ДопСтрока));
		Если НазваниеПоПартнеру &lt;&gt; ПартнерСтрокой Тогда
			НазваниеПоПартнеру = Лев(НазваниеПоПартнеру, СтрДлина(НазваниеПоПартнеру) - 3) + "...";
		КонецЕсли;
		
		НазваниеПоПартнеру = НазваниеПоПартнеру + ДопСтрока;
		
	КонецЕсли;
	
	Если ПравилаСозданияДоговоров = "ПоСоглашениям" Тогда
		
		Соглашение = ?(ЗначениеЗаполнено(Источник.СоглашениеСКлиентомУТ11), Источник.СоглашениеСКлиентомУТ11, Источник.СоглашениеСПоставщикомУТ11);
		Если ЗначениеЗаполнено(Соглашение) Тогда
			
			ДопСтрока =  ", " + НРег(НазваниеПоУмолчанию);
			
			// Уменьшаем при необходимости длину наименования соглашения
			СоглашениеСтрокой = Строка(Соглашение);
			НазваниеПоСоглашению = Лев(СоглашениеСтрокой, 50 - СтрДлина(ДопСтрока));
			Если НазваниеПоСоглашению &lt;&gt; СоглашениеСтрокой Тогда
				НазваниеПоСоглашению = Лев(НазваниеПоСоглашению, СтрДлина(НазваниеПоСоглашению) - 3) + "...";
			КонецЕсли;
			
			Значение = НазваниеПоСоглашению + ДопСтрока;
			
		КонецЕсли;
		
	ИначеЕсли ПравилаСозданияДоговоров = "ПоСделкам" Тогда
		
		Если ЗначениеЗаполнено(Источник.СделкаСКлиентомУТ11) Тогда
			
			ДопСтрока =  ", " + НРег(НазваниеПоУмолчанию);
			
			// Уменьшаем при необходимости длину наименования сделки
			СделкаСтрокой = Строка(Источник.СделкаСКлиентомУТ11);
			НазваниеПоСделке = Лев(СделкаСтрокой, 50 - СтрДлина(ДопСтрока));
			Если НазваниеПоСделке &lt;&gt; СделкаСтрокой Тогда
				НазваниеПоСделке = Лев(НазваниеПоСделке, СтрДлина(НазваниеПоСделке) - 3) + "...";
			КонецЕсли;
			
			Значение = НазваниеПоСделке + ДопСтрока;
			
		КонецЕсли;
		
	ИначеЕсли ПравилаСозданияДоговоров = "ПоЗаказам" Тогда
		
		Заказ = ?(ЗначениеЗаполнено(Источник.ЗаказКлиентаУТ11), Источник.ЗаказКлиентаУТ11, Источник.ЗаказПоставщикуУТ11);
		Если ЗначениеЗаполнено(Заказ) Тогда
			РеквизитыИсточника = ОбщегоНазначения.ПолучитьЗначенияРеквизитов(Заказ.Ссылка, "Ссылка,Номер,Дата");
			Значение = ОбщегоНазначенияУТ.ПолучитьПредставлениеДокумента(РеквизитыИсточника.Ссылка, РеквизитыИсточника.Номер, РеквизитыИсточника.Дата);
		КонецЕсли;
		
	КонецЕсли;
	
	Если Значение = "" Тогда
		Значение = НазваниеПоПартнеру;
	КонецЕсли;
	
	Если Значение = "" Тогда
		Значение = НазваниеПоУмолчанию;
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>СвойствоПартнерУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов &lt;&gt; "БезРазделения" Тогда
	
	Значение = Новый Структура;
	Значение.Вставить("Ссылка");
	Значение.Вставить("Наименование", "Партнер УТ11");
	
Иначе
	Отказ = Истина;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>СвойствоСделкаСКлиентомУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов = "ПоСделкам" Тогда
	Значение = Новый Структура;
	Значение.Вставить("Ссылка");
	Значение.Вставить("Наименование", "Сделка с клиентом УТ11");
	
Иначе
	Отказ = Истина;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>СвойствоСоглашениеСКлиентомУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов = "ПоСоглашениям" Тогда
	Значение = Новый Структура;
	Значение.Вставить("Ссылка");
	Значение.Вставить("Наименование", "Соглашение с клиентом УТ11");
	
Иначе
	Отказ = Истина;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>СвойствоСоглашениеСПоставщикомУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов = "ПоСоглашениям" Тогда
	Значение = Новый Структура;
	Значение.Вставить("Ссылка");
	Значение.Вставить("Наименование", "Соглашение с поставщиком УТ11");
	
Иначе
	Отказ = Истина;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>СвойствоЗаказКлиентаУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов = "ПоЗаказам" Тогда
	Значение = Новый Структура;
	Значение.Вставить("Ссылка");
	Значение.Вставить("Наименование", "Заказ клиента УТ11");
	
Иначе
	Отказ = Истина;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>СвойствоЗаказПоставщикуУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов = "ПоЗаказам" Тогда
	Значение = Новый Структура;
	Значение.Вставить("Ссылка");
	Значение.Вставить("Наименование", "Заказ поставщику УТ11");
	
Иначе
	Отказ = Истина;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ДоговорыКонтрагентов_ДоговорыКонтрагентов</Код>
						<Наименование>:</Наименование>
						<Порядок>100</Порядок>
						<ПередВыгрузкой>ЗапоминатьВыгруженные = Истина;
КлючВыгружаемыхДанных = ЗначениеВСтрокуВнутр(Источник);</ПередВыгрузкой>
						<ПослеЗагрузки>Если Объект.ЭтоНовый() Тогда

	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		
		Объект.УстановитьСсылкуНового(Справочники.ДоговорыКонтрагентов.ПолучитьСсылку(Новый УникальныйИдентификатор));
		
		НаборЗаписей = РегистрыСведений.ЗначенияСвойствОбъектов.СоздатьНаборЗаписей();
		НаборЗаписей.Отбор.Объект.Установить(Объект.ПолучитьСсылкуНового());
		
		Для Каждого ПараметрОбъекта Из ПараметрыОбъекта Цикл
			
			Ключ = ПараметрОбъекта.Ключ;
			Если Лев(Ключ, 16) = "ЗначениеСвойства" Тогда
				
				Свойство = ПараметрыОбъекта[СтрЗаменить(Ключ, "ЗначениеСвойства", "Свойство")];
				
				НоваяЗапись = НаборЗаписей.Добавить();
				НоваяЗапись.Объект	 = Объект.ПолучитьСсылкуНового();
				НоваяЗапись.Свойство = Свойство.Ссылка;
				НоваяЗапись.Значение = ПараметрОбъекта.Значение;
				
			КонецЕсли;
			
		КонецЦикла;
		
		Если НаборЗаписей.Количество() &gt; 0 Тогда
			УстановитьОбменДаннымиЗагрузка(НаборЗаписей);
			НаборЗаписей.Записать();		
			УстановитьОбменДаннымиЗагрузка(НаборЗаписей, Ложь);
		КонецЕсли;
	
	КонецЕсли;
	
	Объект.Комментарий = "Сформирован автоматически при обмене с конфигурацией ""Управление торговлей""";
	
КонецЕсли;</ПослеЗагрузки>
						<ПоследовательностьПолейПоиска>Запрос = Новый Запрос;
Для Каждого СвойствоПоиска Из СвойстваПоиска Цикл
	Запрос.УстановитьПараметр(СвойствоПоиска.Ключ, СвойствоПоиска.Значение);
КонецЦикла;

Если НЕ СвойстваПоиска.Получить("ИспользуетсяПриОбменеДанными") = Неопределено Тогда
	
	// Осуществляем поиск по реквизитам
	Запрос.Текст = "ВЫБРАТЬ
	               |	ДоговорыКонтрагентов.Ссылка
	               |ИЗ
	               |	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
	               |ГДЕ
	               |	ДоговорыКонтрагентов.ВидДоговора = &amp;ВидДоговора
	               |	И ДоговорыКонтрагентов.Организация = &amp;Организация
	               |	И ДоговорыКонтрагентов.Владелец = &amp;Владелец
	               |	И ДоговорыКонтрагентов.ВалютаВзаиморасчетов = &amp;ВалютаВзаиморасчетов
	               |	И ДоговорыКонтрагентов.ИспользуетсяПриОбменеДанными = &amp;ИспользуетсяПриОбменеДанными
	               |	И ДоговорыКонтрагентов.РасчетыВУсловныхЕдиницах = &amp;РасчетыВУсловныхЕдиницах";
	
	ВыборкаДоговоров = Запрос.Выполнить().Выбрать();
	Если ВыборкаДоговоров.Следующий() Тогда
		СсылкаНаОбъект = ВыборкаДоговоров.Ссылка;
	КонецЕсли;
	
Иначе
	
	// Осуществляем поиск договора не только по реквизитам, но и по свойствам
	Запрос.Текст = "ВЫБРАТЬ
	               |	ЗначенияЗагруженныхСвойств.СвойствоНаименование КАК СвойствоНаименование,
	               |	ЗначенияЗагруженныхСвойств.СвойствоЗначение
	               |ПОМЕСТИТЬ ЗначенияЗагруженныхСвойств
	               |ИЗ
	               |	&amp;ЗначенияЗагруженныхСвойств КАК ЗначенияЗагруженныхСвойств
	               |
	               |ИНДЕКСИРОВАТЬ ПО
	               |	СвойствоНаименование
	               |;
	               |
	               |////////////////////////////////////////////////////////////////////////////////
	               |ВЫБРАТЬ
	               |	ДоговорыКонтрагентов.Ссылка КАК Ссылка,
	               |	ЗначенияЗагруженныхСвойств.СвойствоНаименование
	               |ПОМЕСТИТЬ ОтборПоРеквизитам
	               |ИЗ
	               |	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов,
	               |	ЗначенияЗагруженныхСвойств КАК ЗначенияЗагруженныхСвойств
	               |ГДЕ
	               |	ДоговорыКонтрагентов.ВидДоговора = &amp;ВидДоговора
	               |	И ДоговорыКонтрагентов.Организация = &amp;Организация
	               |	И ДоговорыКонтрагентов.Владелец = &amp;Владелец
	               |	И ДоговорыКонтрагентов.ВалютаВзаиморасчетов = &amp;ВалютаВзаиморасчетов
	               |	И ДоговорыКонтрагентов.РасчетыВУсловныхЕдиницах = &amp;РасчетыВУсловныхЕдиницах
	               |
	               |ИНДЕКСИРОВАТЬ ПО
	               |	Ссылка
	               |;
	               |
	               |////////////////////////////////////////////////////////////////////////////////
	               |ВЫБРАТЬ
	               |	ОтборПоРеквизитам.Ссылка,
	               |	ЗначенияСвойствОбъектов.Свойство.Наименование КАК СвойствоНаименование,
	               |	ЗначенияСвойствОбъектов.Значение КАК СвойствоЗначение
	               |ПОМЕСТИТЬ ЗначенияСвойствВБазе
	               |ИЗ
	               |	ОтборПоРеквизитам КАК ОтборПоРеквизитам
	               |		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЗначенияСвойствОбъектов КАК ЗначенияСвойствОбъектов
	               |		ПО ОтборПоРеквизитам.Ссылка = ЗначенияСвойствОбъектов.Объект
	               |			И ОтборПоРеквизитам.СвойствоНаименование = ЗначенияСвойствОбъектов.Свойство.Наименование
	               |
	               |ИНДЕКСИРОВАТЬ ПО
	               |	СвойствоНаименование
	               |;
	               |
	               |////////////////////////////////////////////////////////////////////////////////
	               |ВЫБРАТЬ
	               |	РезультатАнализаДоговоров.Ссылка
	               |ИЗ
	               |	(ВЫБРАТЬ
	               |		ЗначенияСвойствВБазе.Ссылка КАК Ссылка,
	               |		МИНИМУМ(ВЫБОР
	               |				КОГДА ЗначенияЗагруженныхСвойств.СвойствоЗначение = ЗначенияСвойствВБазе.СвойствоЗначение
	               |							И (НЕ ЗначенияЗагруженныхСвойств.СвойствоЗначение ЕСТЬ NULL )
	               |							И (НЕ ЗначенияСвойствВБазе.СвойствоЗначение ЕСТЬ NULL )
	               |						ИЛИ ЗначенияЗагруженныхСвойств.СвойствоЗначение = НЕОПРЕДЕЛЕНО
	               |							И (ЗначенияСвойствВБазе.СвойствоЗначение ЕСТЬ NULL 
	               |								ИЛИ ЗначенияСвойствВБазе.СвойствоЗначение = НЕОПРЕДЕЛЕНО
	               |								ИЛИ ЗначенияСвойствВБазе.СвойствоЗначение = ЗНАЧЕНИЕ(Справочник.ЗначенияСвойствОбъектов.ПустаяСсылка))
	               |					ТОГДА ИСТИНА
	               |				ИНАЧЕ ЛОЖЬ
	               |			КОНЕЦ) КАК Результат
	               |	ИЗ
	               |		ЗначенияСвойствВБазе КАК ЗначенияСвойствВБазе
	               |			ПОЛНОЕ СОЕДИНЕНИЕ ЗначенияЗагруженныхСвойств КАК ЗначенияЗагруженныхСвойств
	               |			ПО ЗначенияСвойствВБазе.СвойствоНаименование = ЗначенияЗагруженныхСвойств.СвойствоНаименование
	               |	
	               |	СГРУППИРОВАТЬ ПО
	               |		ЗначенияСвойствВБазе.Ссылка) КАК РезультатАнализаДоговоров
	               |ГДЕ
	               |	РезультатАнализаДоговоров.Результат";
	
	ЗначенияЗагруженныхСвойств = Новый ТаблицаЗначений;
	ЗначенияЗагруженныхСвойств.Колонки.Добавить("СвойствоНаименование", Новый ОписаниеТипов("Строка",, Новый КвалификаторыСтроки(50)));
	ЗначенияЗагруженныхСвойств.Колонки.Добавить("СвойствоЗначение", Новый ОписаниеТипов("СправочникСсылка.ЗначенияСвойствОбъектов"));
	
	Для Каждого ПараметрОбъекта Из ПараметрыОбъекта Цикл
		
		Ключ = ПараметрОбъекта.Ключ;
		Если Ключ = "ЗначениеСвойстваПартнерУТ11" Тогда
			НазваниеСвойства = "Партнер УТ11";
		ИначеЕсли Ключ = "ЗначениеСвойстваСоглашениеСКлиентомУТ11" Тогда
			НазваниеСвойства = "Соглашение с клиентом УТ11";
		ИначеЕсли Ключ = "ЗначениеСвойстваСоглашениеСПоставщикомУТ11" Тогда
			НазваниеСвойства = "Соглашение с поставщиком УТ11";
		ИначеЕсли Ключ = "ЗначениеСвойстваСделкаСКлиентомУТ11" Тогда
			НазваниеСвойства = "Сделка с клиентом УТ11";
		ИначеЕсли Ключ = "ЗначениеСвойстваЗаказКлиентаУТ11" Тогда
			НазваниеСвойства = "Заказ клиента УТ11";
		ИначеЕсли Ключ = "ЗначениеСвойстваЗаказПоставщикуУТ11" Тогда
			НазваниеСвойства = "Заказ поставщику УТ11";
		КонецЕсли;
		
		НоваяСтрока = ЗначенияЗагруженныхСвойств.Добавить();
		НоваяСтрока.СвойствоНаименование = НазваниеСвойства;
		НоваяСтрока.СвойствоЗначение	 = ?(ЗначениеЗаполнено(ПараметрОбъекта.Значение), ПараметрОбъекта.Значение, Неопределено);
		
	КонецЦикла;
	
	Запрос.УстановитьПараметр("ЗначенияЗагруженныхСвойств", ЗначенияЗагруженныхСвойств);
	
	РезультатЗапроса = Запрос.ВыполнитьПакет()[3];
	ВыборкаДоговоров = РезультатЗапроса.Выбрать();
	Если ВыборкаДоговоров.Следующий() Тогда
		СсылкаНаОбъект = ВыборкаДоговоров.Ссылка;
	КонецЕсли;
	
КонецЕсли;

ПрекратитьПоиск = Истина;</ПоследовательностьПолейПоиска>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Приемник>СправочникСсылка.ДоговорыКонтрагентов</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование> --&gt; ВидДоговора</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидДоговора" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДоговоровКонтрагентов"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование> --&gt; ВалютаВзаиморасчетов</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование> --&gt; Владелец</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование> --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование> --&gt; РасчетыВУсловныхЕдиницах</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="РасчетыВУсловныхЕдиницах" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>7</Код>
								<Наименование> --&gt; ИспользуетсяПриОбменеДанными</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИспользуетсяПриОбменеДанными" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов = "БезРазделения" Тогда
	Значение = Истина;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>8</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>ПартнерыВЗначенияСвойствОбъектов                  </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>ЗначениеСвойстваПартнерУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов = "БезРазделения" Тогда
	Отказ = Истина;
Иначе
	Значение = Источник.ПартнерУТ11;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>9</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>СделкиСКлиентамиВЗначенияСвойствОбъектов          </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>ЗначениеСвойстваСделкаСКлиентомУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов &lt;&gt; "ПоСделкам" Тогда
	Отказ = Истина;
Иначе
	Значение = Источник.СделкаСКлиентомУТ11;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>10</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>СоглашенияСКлиентамиВЗначенияСвойствОбъектов      </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>ЗначениеСвойстваСоглашениеСКлиентомУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов &lt;&gt; "ПоСоглашениям" Тогда
	Отказ = Истина;
ИначеЕсли ТипЗнч(Источник.СоглашениеСКлиентомУТ11) = Тип("СправочникСсылка.СоглашенияСКлиентами") Тогда
	Значение = Источник.СоглашениеСКлиентомУТ11;
Иначе
	Значение = Неопределено;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>11</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>СоглашенияСПоставщикамиВЗначенияСвойствОбъектов   </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>ЗначениеСвойстваСоглашениеСПоставщикомУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов &lt;&gt; "ПоСоглашениям" Тогда
	Отказ = Истина;
ИначеЕсли ТипЗнч(Источник.СоглашениеСПоставщикомУТ11) = Тип("СправочникСсылка.СоглашенияСПоставщиками") Тогда
	Значение = Источник.СоглашениеСПоставщикомУТ11;
Иначе
	Значение = Неопределено;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>13</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>ЗаказКлиентаВЗначенияСвойствОбъектов              </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>ЗначениеСвойстваЗаказКлиентаУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов &lt;&gt; "ПоЗаказам" Тогда
	Отказ = Истина;
ИначеЕсли ТипЗнч(Источник.ЗаказКлиентаУТ11) = Тип("ДокументСсылка.ЗаказКлиента") Тогда
	Значение = Источник.ЗаказКлиентаУТ11;
Иначе
	Значение = Неопределено;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>12</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>ЗаказПоставщикуВЗначенияСвойствОбъектов           </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>ЗначениеСвойстваЗаказПоставщикуУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов &lt;&gt; "ПоЗаказам" Тогда
	Отказ = Истина;
ИначеЕсли ТипЗнч(Источник.ЗаказПоставщикуУТ11) = Тип("ДокументСсылка.ЗаказПоставщику") Тогда
	Значение = Источник.ЗаказПоставщикуУТ11;
Иначе
	Значение = Неопределено;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>6</Код>
								<Наименование> --&gt; Наименование</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>ВидДоговора = Источник.ВидДоговора;
Если ВидДоговора = "СПоставщиком" Тогда
	ВидДоговора = "С поставщиком";
ИначеЕсли ВидДоговора = "СПокупателем" Тогда
	ВидДоговора = "С покупателем";
ИначеЕсли ВидДоговора = "СКомитентом" Тогда
	ВидДоговора = "С комитентом";
ИначеЕсли ВидДоговора = "СКомиссионером" Тогда
	ВидДоговора = "С комиссионером";
КонецЕсли;

НазваниеПоУмолчанию = ВидДоговора + ", " + НРег(Источник.ВалютаВзаиморасчетов)+ ?(Источник.РасчетыВУсловныхЕдиницах, " (у.е.)", "");
НазваниеПоПартнеру	= "";

ПравилаСозданияДоговоров = Параметры.УзелПравилаСозданияДоговоровКонтрагентов;
Если ПравилаСозданияДоговоров = "БезРазделения" Тогда
	
	Значение = НазваниеПоУмолчанию;
	
Иначе
	
	Значение = "";
	
	// Если названия партнера и контрагента отличаются, то имеет смысл включить партнера в наименование договора
	ПартнерСтрокой = Строка(Источник.ПартнерУТ11);
	Если Строка(Источник.Владелец) &lt;&gt; ПартнерСтрокой И ЗначениеЗаполнено(Источник.ПартнерУТ11) Тогда
		
		ДопСтрока =  ", " + НРег(НазваниеПоУмолчанию);
		
		// Уменьшаем при необходимости длину наименования партнера
		НазваниеПоПартнеру = Лев(ПартнерСтрокой, 50 - СтрДлина(ДопСтрока));
		Если НазваниеПоПартнеру &lt;&gt; ПартнерСтрокой Тогда
			НазваниеПоПартнеру = Лев(НазваниеПоПартнеру, СтрДлина(НазваниеПоПартнеру) - 3) + "...";
		КонецЕсли;
		
		НазваниеПоПартнеру = НазваниеПоПартнеру + ДопСтрока;
		
	КонецЕсли;
	
	Если ПравилаСозданияДоговоров = "ПоСоглашениям" Тогда
		
		Соглашение = ?(ЗначениеЗаполнено(Источник.СоглашениеСКлиентомУТ11), Источник.СоглашениеСКлиентомУТ11, Источник.СоглашениеСПоставщикомУТ11);
		Если ЗначениеЗаполнено(Соглашение) Тогда
			
			ДопСтрока =  ", " + НРег(НазваниеПоУмолчанию);
			
			// Уменьшаем при необходимости длину наименования соглашения
			СоглашениеСтрокой = Строка(Соглашение);
			НазваниеПоСоглашению = Лев(СоглашениеСтрокой, 50 - СтрДлина(ДопСтрока));
			Если НазваниеПоСоглашению &lt;&gt; СоглашениеСтрокой Тогда
				НазваниеПоСоглашению = Лев(НазваниеПоСоглашению, СтрДлина(НазваниеПоСоглашению) - 3) + "...";
			КонецЕсли;
			
			Значение = НазваниеПоСоглашению + ДопСтрока;
			
		КонецЕсли;
		
	ИначеЕсли ПравилаСозданияДоговоров = "ПоСделкам" Тогда
		
		Если ЗначениеЗаполнено(Источник.СделкаСКлиентомУТ11) Тогда
			
			ДопСтрока =  ", " + НРег(НазваниеПоУмолчанию);
			
			// Уменьшаем при необходимости длину наименования сделки
			СделкаСтрокой = Строка(Источник.СделкаСКлиентомУТ11);
			НазваниеПоСделке = Лев(СделкаСтрокой, 50 - СтрДлина(ДопСтрока));
			Если НазваниеПоСделке &lt;&gt; СделкаСтрокой Тогда
				НазваниеПоСделке = Лев(НазваниеПоСделке, СтрДлина(НазваниеПоСделке) - 3) + "...";
			КонецЕсли;
			
			Значение = НазваниеПоСделке + ДопСтрока;
			
		КонецЕсли;
		
	ИначеЕсли ПравилаСозданияДоговоров = "ПоЗаказам" Тогда
		
		Заказ = ?(ЗначениеЗаполнено(Источник.ЗаказКлиентаУТ11), Источник.ЗаказКлиентаУТ11, Источник.ЗаказПоставщикуУТ11);
		Если ЗначениеЗаполнено(Заказ) Тогда
			РеквизитыИсточника = ОбщегоНазначения.ПолучитьЗначенияРеквизитов(Заказ.Ссылка, "Ссылка,Номер,Дата");
			Значение = ОбщегоНазначенияУТ.ПолучитьПредставлениеДокумента(РеквизитыИсточника.Ссылка, РеквизитыИсточника.Номер, РеквизитыИсточника.Дата);
		КонецЕсли;
		
	КонецЕсли;
	
	Если Значение = "" Тогда
		Значение = НазваниеПоПартнеру;
	КонецЕсли;
	
	Если Значение = "" Тогда
		Значение = НазваниеПоУмолчанию;
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>ДоговорыЭквайринга                                </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>СвойствоПартнерУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов &lt;&gt; "БезРазделения" Тогда
	
	Значение = Новый Структура;
	Значение.Вставить("Ссылка");
	Значение.Вставить("Наименование", "Партнер УТ11");
	
Иначе
	Отказ = Истина;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>ДоговорыЭквайринга                                </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>СвойствоСделкаСКлиентомУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов = "ПоСделкам" Тогда
	Значение = Новый Структура;
	Значение.Вставить("Ссылка");
	Значение.Вставить("Наименование", "Сделка с клиентом УТ11");
	
Иначе
	Отказ = Истина;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>ДоговорыЭквайринга                                </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>СвойствоСоглашениеСКлиентомУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов = "ПоСоглашениям" Тогда
	Значение = Новый Структура;
	Значение.Вставить("Ссылка");
	Значение.Вставить("Наименование", "Соглашение с клиентом УТ11");
	
Иначе
	Отказ = Истина;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>ДоговорыЭквайринга                                </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>СвойствоСоглашениеСПоставщикомУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов = "ПоСоглашениям" Тогда
	Значение = Новый Структура;
	Значение.Вставить("Ссылка");
	Значение.Вставить("Наименование", "Соглашение с поставщиком УТ11");
	
Иначе
	Отказ = Истина;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>ДоговорыЭквайринга                                </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>СвойствоЗаказКлиентаУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов = "ПоЗаказам" Тогда
	Значение = Новый Структура;
	Значение.Вставить("Ссылка");
	Значение.Вставить("Наименование", "Заказ клиента УТ11");
	
Иначе
	Отказ = Истина;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование> --&gt; </Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>ДоговорыЭквайринга                                </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>СвойствоЗаказПоставщикуУТ11</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов = "ПоЗаказам" Тогда
	Значение = Новый Структура;
	Значение.Вставить("Ссылка");
	Значение.Вставить("Наименование", "Заказ поставщику УТ11");
	
Иначе
	Отказ = Истина;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ПартнерыВЗначенияСвойствОбъектов</Код>
						<Наименование>Справочник: Партнеры</Наименование>
						<Порядок>150</Порядок>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.Партнеры</Источник>
						<Приемник>СправочникСсылка.ЗначенияСвойствОбъектов</Приемник>
						<Свойства>
							<Свойство>
								<Код>1</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование> --&gt; Владелец</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Владелец" Вид="Свойство" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
								<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = Новый Структура;
Значение.Вставить("Ссылка");
Значение.Вставить("Наименование", "Партнер УТ11");

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>СоглашенияСКлиентамиВЗначенияСвойствОбъектов</Код>
						<Наименование>Справочник: Соглашения с клиентами</Наименование>
						<Порядок>200</Порядок>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.СоглашенияСКлиентами</Источник>
						<Приемник>СправочникСсылка.ЗначенияСвойствОбъектов</Приемник>
						<Свойства>
							<Свойство>
								<Код>1</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Значение = ?(Источник.Типовое, "Типовое", "Индивидуальное") + "; "
		   + Источник.Наименование 
		   + ?(ЗначениеЗаполнено(Источник.Номер), " №" + Источник.Номер, "")
		   + ?(Источник.Типовое,  "", "; " + Источник.Партнер);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование> --&gt; Владелец</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Владелец" Вид="Свойство" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
								<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = Новый Структура;
Значение.Вставить("Ссылка");
Значение.Вставить("Наименование", "Соглашение с клиентом УТ11");

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>СоглашенияСПоставщикамиВЗначенияСвойствОбъектов</Код>
						<Наименование>Справочник: Соглашения с поставщиками</Наименование>
						<Порядок>250</Порядок>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.СоглашенияСПоставщиками</Источник>
						<Приемник>СправочникСсылка.ЗначенияСвойствОбъектов</Приемник>
						<Свойства>
							<Свойство>
								<Код>1</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Значение = Источник.Наименование 
		   + ?(ЗначениеЗаполнено(Источник.Номер), " №" + Источник.Номер, "") + "; " 
		   + Источник.Партнер;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование> --&gt; Владелец</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Владелец" Вид="Свойство" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
								<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = Новый Структура;
Значение.Вставить("Ссылка");
Значение.Вставить("Наименование", "Соглашение с поставщиком УТ11");

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>СделкиСКлиентамиВЗначенияСвойствОбъектов</Код>
						<Наименование>Справочник: Сделки с клиентами</Наименование>
						<Порядок>300</Порядок>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.СделкиСКлиентами</Источник>
						<Приемник>СправочникСсылка.ЗначенияСвойствОбъектов</Приемник>
						<Свойства>
							<Свойство>
								<Код>1</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Значение = Источник.Наименование + "; " + Источник.Партнер;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование> --&gt; Владелец</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Владелец" Вид="Свойство" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
								<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = Новый Структура;
Значение.Вставить("Ссылка");
Значение.Вставить("Наименование", "Сделка с клиентом УТ11");

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ЗаказКлиентаВЗначенияСвойствОбъектов</Код>
						<Наименование>Документ: Заказ клиента</Наименование>
						<Порядок>350</Порядок>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ЗаказКлиента</Источник>
						<Приемник>СправочникСсылка.ЗначенияСвойствОбъектов</Приемник>
						<Свойства>
							<Свойство>
								<Код>2</Код>
								<Наименование> --&gt; Наименование</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>РеквизитыИсточника = ОбщегоНазначения.ПолучитьЗначенияРеквизитов(Источник.Ссылка, "Ссылка,Номер,Дата");
Значение = ОбщегоНазначенияУТ.ПолучитьПредставлениеДокумента(РеквизитыИсточника.Ссылка, РеквизитыИсточника.Номер, РеквизитыИсточника.Дата);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование> --&gt; Владелец</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Владелец" Вид="Свойство" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
								<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = Новый Структура;
Значение.Вставить("Ссылка");
Значение.Вставить("Наименование", "Заказ клиента УТ11");

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ЗаказПоставщикуВЗначенияСвойствОбъектов</Код>
						<Наименование>Документ: Заказ поставщику</Наименование>
						<Порядок>400</Порядок>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ЗаказПоставщику</Источник>
						<Приемник>СправочникСсылка.ЗначенияСвойствОбъектов</Приемник>
						<Свойства>
							<Свойство>
								<Код>2</Код>
								<Наименование> --&gt; Наименование</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>РеквизитыИсточника = ОбщегоНазначения.ПолучитьЗначенияРеквизитов(Источник.Ссылка, "Ссылка,Номер,Дата");
Значение = ОбщегоНазначенияУТ.ПолучитьПредставлениеДокумента(РеквизитыИсточника.Ссылка, РеквизитыИсточника.Номер, РеквизитыИсточника.Дата);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование> --&gt; Владелец</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Владелец" Вид="Свойство" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
								<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = Новый Структура;
Значение.Вставить("Ссылка");
Значение.Вставить("Наименование", "Заказ поставщику УТ11");

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>СвойстваОбъектов</Код>
						<Наименование>:</Наименование>
						<Порядок>450</Порядок>
						<ПередВыгрузкой>ЗапоминатьВыгруженные = Истина;
КлючВыгружаемыхДанных = ЗначениеВСтрокуВнутр(Источник);</ПередВыгрузкой>
						<ПриВыгрузке>УзелТипов = СоздатьУзел("Типы");
одЗаписатьЭлемент(УзелТипов, "Тип", "СправочникСсылка.ЗначенияСвойствОбъектов");
ДобавитьПодчиненный(Приемник, УзелТипов);</ПриВыгрузке>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Приемник>ПланВидовХарактеристикСсылка.СвойстваОбъектов</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование> --&gt; Наименование</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование> --&gt; НазначениеСвойства</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НазначениеСвойства" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов"/>
								<ПередВыгрузкой>Значение = "Справочник_ДоговорыКонтрагентов";</ПередВыгрузкой>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>ГруппаСтатьиДоходовРасходов</Код>
					<Наименование>БухгалтерскаяАналитика</Наименование>
					<Порядок>100</Порядок>
					<Правило>
						<Код>СтатьиРасходовВСтатьиЗатрат</Код>
						<Наименование>План видов характеристик: Статьи доходов</Наименование>
						<Порядок>50</Порядок>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ПланВидовХарактеристикСсылка.СтатьиРасходов</Источник>
						<Приемник>СправочникСсылка.СтатьиЗатрат</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Код --&gt; Код</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>6</Код>
								<Наименование> --&gt; ВидДеятельностиДляНалоговогоУчетаЗатрат</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидДеятельностиДляНалоговогоУчетаЗатрат" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДеятельностиДляНалоговогоУчетаЗатрат"/>
								<ПередВыгрузкой>Значение = "ПредпринимательскаяДеятельностьНеОблагаемаяЕНВД";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>7</Код>
								<Наименование> --&gt; ВидРасходовНУ</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидРасходовНУ" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыРасходовНУ"/>
								<ПередВыгрузкой>Значение = "ПрочиеРасходы";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>8</Код>
								<Наименование>КорреспондирующийСчет --&gt;</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="КорреспондирующийСчет" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>СтатьиДоходовВПрочиеДоходыИРасходы</Код>
						<Наименование>План видов характеристик: Статьи доходов</Наименование>
						<Порядок>100</Порядок>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ПланВидовХарактеристикСсылка.СтатьиДоходов</Источник>
						<Приемник>СправочникСсылка.ПрочиеДоходыИРасходы</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Код --&gt; Код</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Значение = Лев(Источник.Код, 3) + "Д" + Сред(Источник.Код, 5);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>6</Код>
								<Наименование> --&gt; ВидДеятельностиДляНалоговогоУчетаЗатрат</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидДеятельностиДляНалоговогоУчетаЗатрат" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДеятельностиДляНалоговогоУчетаЗатрат"/>
								<ПередВыгрузкой>Значение = "ПредпринимательскаяДеятельностьНеОблагаемаяЕНВД";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>7</Код>
								<Наименование> --&gt; ВидПрочихДоходовИРасходов</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидПрочихДоходовИРасходов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПрочихДоходовИРасходов"/>
								<ПередВыгрузкой>Значение = "ПрочиеВнереализационныеДоходыРасходы";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>8</Код>
								<Наименование> --&gt; ПринятиеКналоговомуУчету</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ПринятиеКналоговомуУчету" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = "Истина";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>9</Код>
								<Наименование>КорреспондирующийСчет --&gt;</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="КорреспондирующийСчет" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>СтатьиРасходовВПрочиеДоходыИРасходы</Код>
						<Наименование>План видов характеристик: Статьи расходов</Наименование>
						<Порядок>150</Порядок>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ПланВидовХарактеристикСсылка.СтатьиРасходов</Источник>
						<Приемник>СправочникСсылка.ПрочиеДоходыИРасходы</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>Код --&gt; Код</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Значение = Лев(Источник.Код, 3) + "Д" + Сред(Источник.Код, 5);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>6</Код>
								<Наименование> --&gt; ВидДеятельностиДляНалоговогоУчетаЗатрат</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидДеятельностиДляНалоговогоУчетаЗатрат" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДеятельностиДляНалоговогоУчетаЗатрат"/>
								<ПередВыгрузкой>Значение = "ПредпринимательскаяДеятельностьНеОблагаемаяЕНВД";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>7</Код>
								<Наименование> --&gt; ВидПрочихДоходовИРасходов</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидПрочихДоходовИРасходов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПрочихДоходовИРасходов"/>
								<ПередВыгрузкой>Значение = "ПрочиеВнереализационныеДоходыРасходы";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>8</Код>
								<Наименование> --&gt; ПринятиеКналоговомуУчету</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ПринятиеКналоговомуУчету" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = "Истина";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>9</Код>
								<Наименование>КорреспондирующийСчет --&gt;</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="КорреспондирующийСчет" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>СР_СпособыОтраженияРасходовПоАмортизации</Код>
						<Наименование>:</Наименование>
						<Порядок>200</Порядок>
						<ПередВыгрузкой>ЗапоминатьВыгруженные = Истина;
КлючВыгружаемыхДанных = ЗначениеВСтрокуВнутр(Источник);</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗначениеСубконто = ПараметрыОбъекта.Получить("ЗначениеСубконто");
	Для Каждого СтрокаВидаСубконто Из Объект.Способы[0].СчетЗатрат.ВидыСубконто Цикл
		
		ТипСубконто = СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
		Если ТипСубконто.СодержитТип(ТипЗнч(ЗначениеСубконто)) Тогда
			Объект.Способы[0]["Субконто" + СтрокаВидаСубконто.НомерСтроки] = ЗначениеСубконто;
		КонецЕсли;
		
	КонецЦикла;
	
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ПланВидовХарактеристикСсылка.СтатьиРасходов</Источник>
						<Приемник>СправочникСсылка.СпособыОтраженияРасходовПоАмортизации</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<ПриВыгрузке>Значение = Источник.Наименование + " (счет " + Источник.КорреспондирующийСчет + ")";</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Код --&gt; Код</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование> --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>СтатьиРасходовВСтатьиЗатрат                       </КодПравилаКонвертации>
								<ИмяПараметраДляПередачи>ЗначениеСубконто</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Значение = Источник;

Если ЗначениеЗаполнено(Значение) Тогда
	
	КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет");
	Если ЗначениеЗаполнено(КоррСчет) Тогда
		ИмяПКО = ?(Найти(КоррСчет, "91.02") &gt; 0, "СтатьиРасходовВПрочиеДоходыИРасходы", "СтатьиРасходовВСтатьиЗатрат");
	Иначе
		Пусто = Истина;
	КонецЕсли;
	
Иначе
	Пусто = Истина;	
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>4</Код>
								<Наименование> --&gt; Способы</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Способы" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СчетЗатрат");

НоваяСтрока = КоллекцияОбъектов.Добавить();
НоваяСтрока.СчетЗатрат = Источник.КорреспондирующийСчет;</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>5</Код>
									<Наименование> --&gt; СчетЗатрат</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетЗатрат" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>СР_НазначенияИспользования</Код>
						<Наименование>План видов характеристик: Статьи расходов</Наименование>
						<Порядок>250</Порядок>
						<ПередВыгрузкой>ЗапоминатьВыгруженные = Истина;

СтруктураКлюча = Новый Структура;
СтруктураКлюча.Вставить("Источник", Источник);
СтруктураКлюча.Вставить("Владелец", ВходящиеДанные.Владелец);
СтруктураКлюча.Вставить("СрокПолезногоИспользования", ВходящиеДанные.СрокПолезногоИспользования);
КлючВыгружаемыхДанных = ЗначениеВСтрокуВнутр(СтруктураКлюча);</ПередВыгрузкой>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ПланВидовХарактеристикСсылка.СтатьиРасходов</Источник>
						<Приемник>СправочникСсылка.НазначенияИспользования</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>8</Код>
								<Наименование> --&gt; Владелец</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>7</Код>
								<Наименование> --&gt; СрокПолезногоИспользования</Наименование>
								<Порядок>150</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СрокПолезногоИспользования" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование> --&gt; СпособОтраженияРасходов</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СпособОтраженияРасходов" Вид="Реквизит" Тип="СправочникСсылка.СпособыОтраженияРасходовПоАмортизации"/>
								<КодПравилаКонвертации>СР_СпособыОтраженияРасходовПоАмортизации          </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = Источник;
ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование> --&gt; СпособПогашенияСтоимости</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СпособПогашенияСтоимости" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияСтоимости"/>
								<ПередВыгрузкой>Если ВходящиеДанные.СрокПолезногоИспользования &lt; 12 Тогда
	Значение = "ПогашатьСтоимостьПриПередачеВЭксплуатацию";
Иначе
	Значение = "Линейный";
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Код --&gt; Код</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>4</Код>
								<Наименование> --&gt; Количество</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = 1</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Правило>
					<Код>СтатьиДвиженияДенежныхСредств</Код>
					<Наименование>Справочник: Статьи движения денежных средств</Наименование>
					<Порядок>150</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.СтатьиДвиженияДенежныхСредств</Источник>
					<Приемник>СправочникСсылка.СтатьиДвиженияДенежныхСредств</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>10</Код>
							<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Родитель --&gt; Родитель</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
							<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>НомераГТД</Код>
					<Наименование>Справочник: Номера ГТД</Наименование>
					<Порядок>200</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<Источник>СправочникСсылка.НомераГТД</Источник>
					<Приемник>СправочникСсылка.НомераГТД</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>4</Код>
							<Наименование>СтранаПроисхождения --&gt;</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.СтраныМира"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ТипыЦенНоменклатуры</Код>
					<Наименование>Справочник: Виды цен</Наименование>
					<Порядок>250</Порядок>
					<ПослеЗагрузки>Если НЕ ЗначениеЗаполнено(Объект.ПорядокОкругления) Тогда
	Объект.ПорядокОкругления = Перечисления.ПорядкиОкругления.Окр0_01;
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.ВидыЦен</Источник>
					<Приемник>СправочникСсылка.ТипыЦенНоменклатуры</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>4</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>ВалютаЦены --&gt; ВалютаЦены</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ВалютаЦены" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаЦены" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>ОкруглятьВБольшуюСторону --&gt; ОкруглятьВБольшуюСторону</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ОкруглятьВБольшуюСторону" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="ОкруглятьВБольшуюСторону" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>ЦенаВключаетНДС --&gt; ЦенаВключаетНДС</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование> --&gt; ПорядокОкругления</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПорядокОкругления" Вид="Реквизит" Тип="ПеречислениеСсылка.ПорядкиОкругления"/>
							<ПередВыгрузкой>Если Источник.ПравилаОкругленияЦены.Количество() &gt; 0 Тогда
	ТочностьОкругления = Источник.ПравилаОкругленияЦены[0].ТочностьОкругления;
Иначе
	ТочностьОкругления = 0.01;
КонецЕсли;

Если ТочностьОкругления = 0.01 Тогда
	Значение = "Окр0_01";
ИначеЕсли ТочностьОкругления = 0.05 Тогда
	Значение = "Окр0_05";
ИначеЕсли ТочностьОкругления = 0.10 Тогда
	Значение = "Окр0_1";
ИначеЕсли ТочностьОкругления = 0.50 Тогда
	Значение = "Окр0_5";
ИначеЕсли ТочностьОкругления = 1 Тогда
	Значение = "Окр1";
ИначеЕсли ТочностьОкругления = 5 Тогда
	Значение = "Окр5";
ИначеЕсли ТочностьОкругления = 10 Тогда
	Значение = "Окр10";
ИначеЕсли ТочностьОкругления = 50 Тогда
	Значение = "Окр50";
ИначеЕсли ТочностьОкругления = 100 Тогда
	Значение = "Окр100";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа Отключить="true">
							<Код>7</Код>
							<Наименование>ПравилаОкругленияЦены --&gt;</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ПравилаОкругленияЦены" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>10</Код>
								<Наименование>ТочностьОкругления --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ТочностьОкругления" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ВидыКонтактнойИнформации</Код>
					<Наименование>Справочник: Виды контактной информации</Наименование>
					<Порядок>300</Порядок>
					<ПослеЗагрузки>Если Объект.МожноРедактироватьТолькоВДиалоге Тогда
	Объект.РедактированиеВДиалоге = Истина;
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.ВидыКонтактнойИнформации</Источник>
					<Приемник>СправочникСсылка.ВидыКонтактнойИнформации</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<НеЗамещать>true</НеЗамещать>
							<Код>1</Код>
							<Наименование>Тип --&gt; Тип</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
							<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
							<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<НеЗамещать>true</НеЗамещать>
							<Код>5</Код>
							<Наименование>РедактированиеТолькоВДиалоге --&gt; РедактированиеВДиалоге</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="РедактированиеТолькоВДиалоге" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="РедактированиеВДиалоге" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<НеЗамещать>true</НеЗамещать>
							<Код>7</Код>
							<Наименование>Родитель --&gt; ВидОбъектаКонтактнойИнформации</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
							<Приемник Имя="ВидОбъектаКонтактнойИнформации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации"/>
							<ПередВыгрузкой>Если Источник.Родитель = Справочники.ВидыКонтактнойИнформации.СправочникКонтрагенты Тогда
	Значение = "Контрагенты";
ИначеЕсли Источник.Родитель = Справочники.ВидыКонтактнойИнформации.СправочникОрганизации Тогда
	Значение = "Организации";
ИначеЕсли Источник.Родитель = Справочники.ВидыКонтактнойИнформации.СправочникФизическиеЛица Тогда
	Значение = "ФизическиеЛица";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения>
						<Значение>
							<Код>1</Код>
							<Наименование>EmailОрганизации --&gt; EmailОрганизации</Наименование>
							<Порядок>50</Порядок>
							<Источник>EmailОрганизации</Источник>
							<Приемник>EmailОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>2</Код>
							<Наименование>ДругаяИнформацияОрганизации --&gt; ДругаяИнформацияОр</Наименование>
							<Порядок>100</Порядок>
							<Источник>ДругаяИнформацияОрганизации</Источник>
							<Приемник>ДругаяИнформацияОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>3</Код>
							<Наименование>ТелефонОрганизации --&gt; ТелефонОрганизации</Наименование>
							<Порядок>150</Порядок>
							<Источник>ТелефонОрганизации</Источник>
							<Приемник>ТелефонОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>4</Код>
							<Наименование>ФаксОрганизации --&gt; ФаксОрганизации</Наименование>
							<Порядок>200</Порядок>
							<Источник>ФаксОрганизации</Источник>
							<Приемник>ФаксОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>5</Код>
							<Наименование>ФактАдресКонтрагента --&gt; ФактАдресКонтрагента</Наименование>
							<Порядок>250</Порядок>
							<Источник>ФактАдресКонтрагента</Источник>
							<Приемник>ФактАдресКонтрагента</Приемник>
						</Значение>
						<Значение>
							<Код>6</Код>
							<Наименование>ФактАдресОрганизации --&gt; ФактАдресОрганизации</Наименование>
							<Порядок>300</Порядок>
							<Источник>ФактАдресОрганизации</Источник>
							<Приемник>ФактАдресОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>7</Код>
							<Наименование>ЮрАдресКонтрагента --&gt; ЮрАдресКонтрагента</Наименование>
							<Порядок>350</Порядок>
							<Источник>ЮрАдресКонтрагента</Источник>
							<Приемник>ЮрАдресКонтрагента</Приемник>
						</Значение>
						<Значение>
							<Код>8</Код>
							<Наименование>ЮрАдресОрганизации --&gt; ЮрАдресОрганизации</Наименование>
							<Порядок>400</Порядок>
							<Источник>ЮрАдресОрганизации</Источник>
							<Приемник>ЮрАдресОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>9</Код>
							<Наименование>ТелефонКонтрагента --&gt; ТелефонКонтрагента</Наименование>
							<Порядок>450</Порядок>
							<Источник>ТелефонКонтрагента</Источник>
							<Приемник>ТелефонКонтрагента</Приемник>
						</Значение>
						<Значение>
							<Код>10</Код>
							<Наименование>EmailФизическогоЛица --&gt; EmailФизЛица</Наименование>
							<Порядок>500</Порядок>
							<Источник>EmailФизическогоЛица</Источник>
							<Приемник>EmailФизЛица</Приемник>
						</Значение>
						<Значение>
							<Код>11</Код>
							<Наименование>ДомашнийАдресФизическогоЛица --&gt; ФактАдресФизЛица</Наименование>
							<Порядок>550</Порядок>
							<Источник>ДомашнийАдресФизическогоЛица</Источник>
							<Приемник>ФактАдресФизЛица</Приемник>
						</Значение>
						<Значение>
							<Код>12</Код>
							<Наименование>ПочтовыйАдресОрганизации --&gt; АдресОрганизацииПочто</Наименование>
							<Порядок>600</Порядок>
							<Источник>ПочтовыйАдресОрганизации</Источник>
							<Приемник>АдресОрганизацииПочтовый</Приемник>
						</Значение>
						<Значение>
							<Код>13</Код>
							<Наименование>ТелефонКонтактногоЛица --&gt; ТелефонКонтактногоЛица</Наименование>
							<Порядок>650</Порядок>
							<Источник>ТелефонКонтактногоЛица</Источник>
							<Приемник>ТелефонКонтактногоЛица</Приемник>
						</Значение>
					</Значения>
				</Правило>
				<Правило>
					<Код>ДолжностиОрганизаций</Код>
					<Наименование>:</Наименование>
					<Порядок>350</Порядок>
					<ПередВыгрузкой>ЗапоминатьВыгруженные = Истина;
КлючВыгружаемыхДанных = ЗначениеВСтрокуВнутр(Источник);</ПередВыгрузкой>
					<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Приемник>СправочникСсылка.ДолжностиОрганизаций</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование> --&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
			</Группа>
		</Группа>
		<Группа>
			<Код>Документы</Код>
			<Наименование>ПКО для документов</Наименование>
			<Порядок>150</Порядок>
			<Группа>
				<Код>ВводНачальныхОстатков</Код>
				<Наименование>ПКО для документов ввода начальных остатков</Наименование>
				<Порядок>50</Порядок>
				<Группа>
					<Код>ОстаткиДенежныхСредств</Код>
					<Наименование>ПКО для документов ввода остатков денежных средств</Наименование>
					<Порядок>50</Порядок>
					<Правило>
						<Код>ВНО_ОстаткиВКассах</Код>
						<Наименование>Документ: Ввод остатков</Наименование>
						<Порядок>200</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);</ПослеЗагрузки>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВводОстатков</Источник>
						<Приемник>ДокументСсылка.ВводНачальныхОстатков</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование> --&gt; ОтражатьВБухгалтерскомУчете</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтражатьВБухгалтерскомУчете" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование> --&gt; ОтражатьВНалоговомУчете</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтражатьВНалоговомУчете" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование> --&gt; ОтражатьПоСпециальнымРегистрам</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтражатьПоСпециальнымРегистрам" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование> --&gt; РазделУчета</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="РазделУчета" Вид="Реквизит" Тип="ПеречислениеСсылка.РазделыУчетаДляВводаОстатков"/>
								<ПередВыгрузкой>Значение = "ДенежныеСредства";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>12</Код>
								<Наименование>Кассы --&gt; БухСправка</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="Кассы" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="БухСправка" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>13</Код>
									<Наименование>Касса --&gt; Валюта</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Касса" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
									<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
									<ПередВыгрузкой>Значение = ОбъектКоллекции.Касса.ВалютаДенежныхСредств;
Если Значение = Константы.ВалютаРегламентированногоУчета.Получить() Тогда
	Значение = Справочники.Валюты.ПустаяСсылка();
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>Сумма --&gt; ВалютнаяСумма</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="ВалютнаяСумма" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>Если ОбъектКоллекции.Касса.ВалютаДенежныхСредств = Константы.ВалютаРегламентированногоУчета.Получить() Тогда
	Значение = 0;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>Значение = РаботаСКурсамиВалютУТ.ПересчитатьСуммуДокументаВВалюту(ОбъектКоллекции.Сумма, 
	ОбъектКоллекции.Касса.ВалютаДенежныхСредств, Константы.ВалютаРегламентированногоУчета.Получить(), Источник.Дата);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Значение = ?(ОбъектКоллекции.Касса.ВалютаДенежныхСредств = Константы.ВалютаРегламентированногоУчета.Получить(), "50.01", "50.21");</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование> --&gt; СуммаНУ</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНУ" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>Значение = РаботаСКурсамиВалютУТ.ПересчитатьСуммуДокументаВВалюту(ОбъектКоллекции.Сумма, 
	ОбъектКоллекции.Касса.ВалютаДенежныхСредств, Константы.ВалютаРегламентированногоУчета.Получить(), Источник.Дата);</ПередВыгрузкой>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ВНО_ОстаткиНаБанковскихСчетах</Код>
						<Наименование>Документ: Ввод остатков</Наименование>
						<Порядок>250</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);</ПослеЗагрузки>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВводОстатков</Источник>
						<Приемник>ДокументСсылка.ВводНачальныхОстатков</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>15</Код>
								<Наименование> --&gt; ОтражатьВБухгалтерскомУчете</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтражатьВБухгалтерскомУчете" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>16</Код>
								<Наименование> --&gt; ОтражатьВНалоговомУчете</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтражатьВНалоговомУчете" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>17</Код>
								<Наименование> --&gt; ОтражатьПоСпециальнымРегистрам</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтражатьПоСпециальнымРегистрам" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование> --&gt; РазделУчета</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="РазделУчета" Вид="Реквизит" Тип="ПеречислениеСсылка.РазделыУчетаДляВводаОстатков"/>
								<ПередВыгрузкой>Значение = "ДенежныеСредства";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>8</Код>
								<Наименование>БанковскиеСчета --&gt; БухСправка</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="БанковскиеСчета" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="БухСправка" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>10</Код>
									<Наименование>БанковскийСчет --&gt; Валюта</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
									<ПередВыгрузкой>Значение = ОбъектКоллекции.БанковскийСчет.ВалютаДенежныхСредств;
Если Значение = Константы.ВалютаРегламентированногоУчета.Получить() Тогда
	Значение = Справочники.Валюты.ПустаяСсылка();
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Сумма --&gt; ВалютнаяСумма</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="ВалютнаяСумма" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>Если ОбъектКоллекции.БанковскийСчет.ВалютаДенежныхСредств = Константы.ВалютаРегламентированногоУчета.Получить() Тогда
	Значение = 0;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>Значение = РаботаСКурсамиВалютУТ.ПересчитатьСуммуДокументаВВалюту(ОбъектКоллекции.Сумма, 
	ОбъектКоллекции.БанковскийСчет.ВалютаДенежныхСредств, Константы.ВалютаРегламентированногоУчета.Получить(), Источник.Дата);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>БанковскийСчет --&gt; Субконто1</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="Субконто1" Вид="Реквизит"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование> --&gt; СуммаНУ</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНУ" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>Значение = РаботаСКурсамиВалютУТ.ПересчитатьСуммуДокументаВВалюту(ОбъектКоллекции.Сумма, 
	ОбъектКоллекции.БанковскийСчет.ВалютаДенежныхСредств, Константы.ВалютаРегламентированногоУчета.Получить(), Источник.Дата);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Значение = ?(ОбъектКоллекции.БанковскийСчет.ВалютаДенежныхСредств = Константы.ВалютаРегламентированногоУчета.Получить(), 
	"51", "52")</ПередВыгрузкой>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>ОстаткиТоваров</Код>
					<Наименование>ПКО для документов ввода остатков товаров</Наименование>
					<Порядок>100</Порядок>
					<Правило>
						<Код>ВНО_ВводНачальныхОстатковТоваров</Код>
						<Наименование>Документ: Ввод остатков</Наименование>
						<Порядок>50</Порядок>
						<ПередВыгрузкой>ВалютаУправленческогоУчета = Константы.ВалютаУправленческогоУчета.Получить();
КоэффициентПересчетаВВалютуРегл = РаботаСКурсамивалютУТ.ПолучитьКоэффициентыПересчетаВалюты(ВалютаУправленческогоУчета,
				Неопределено, Источник.Дата).КоэффициентПересчетаВВалютуРегл;
				
ВходящиеДанные.Вставить("КоэффициентПересчетаВВалютуРегл", КоэффициентПересчетаВВалютуРегл);</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	// Заполняем признак "Отражение в УСН" значением по умолчанию
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = ?(УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы,
								Перечисления.ОтражениеВУСН.Принимаются, Перечисления.ОтражениеВУСН.ПустаяСсылка());
			
		// Заполняем отражение в УСН для ТЧ МПЗПриобретенные
		Для Каждого СтрокаТЧ Из Объект.МПЗПриобретенные Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВводОстатков</Источник>
						<Приемник>ДокументСсылка.ВводНачальныхОстатков</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование> --&gt; ОтражатьВБухгалтерскомУчете</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтражатьВБухгалтерскомУчете" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование> --&gt; ОтражатьВНалоговомУчете</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтражатьВНалоговомУчете" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование> --&gt; ОтражатьПоСпециальнымРегистрам</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтражатьПоСпециальнымРегистрам" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование> --&gt; РазделУчета</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="РазделУчета" Вид="Реквизит" Тип="ПеречислениеСсылка.РазделыУчетаДляВводаОстатков"/>
								<ПередВыгрузкой>Значение = "Товары";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>7</Код>
								<Наименование>Товары --&gt; МПЗПриобретенные</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="МПЗПриобретенные" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>17</Код>
									<Наименование> --&gt; Склад</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
									<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
									<ПередВыгрузкой>Значение = Источник.Склад;</ПередВыгрузкой>
									<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="Номенклатура" Вид="Реквизит"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Количество --&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>СуммаРегл --&gt; Сумма</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="СуммаРегл" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									<ПриВыгрузке>Если Значение = 0 И ОбъектКоллекции.Сумма &gt; 0 Тогда

	Если ОбъектКоллекции.СуммаБезНДС = 0 Тогда
		СуммаНДС = ОбъектКоллекции.Сумма * ЦенообразованиеКлиентСервер.ПолучитьСтавкуНДСЧислом(ОбъектКоллекции.Номенклатура.СтавкаНДС);
		СуммаБезНДС = ОбъектКоллекции.Сумма - СуммаНДС;
	Иначе
		СуммаБезНДС = ОбъектКоллекции.СуммаБезНДС;
	КонецЕсли;
	
	Значение = СуммаБезНДС * ВходящиеДанные.КоэффициентПересчетаВВалютуРегл;
	
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование>СуммаРегл --&gt; СуммаНУ</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СуммаРегл" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаНУ" Вид="Реквизит" Тип="Число"/>
									<ПриВыгрузке>Если Значение = 0 И ОбъектКоллекции.Сумма &gt; 0 Тогда

	Если ОбъектКоллекции.СуммаБезНДС = 0 Тогда
		СуммаНДС = ОбъектКоллекции.Сумма * ЦенообразованиеКлиентСервер.ПолучитьСтавкуНДСЧислом(ОбъектКоллекции.Номенклатура.СтавкаНДС);
		СуммаБезНДС = ОбъектКоллекции.Сумма - СуммаНДС;
	Иначе
		СуммаБезНДС = ОбъектКоллекции.СуммаБезНДС;
	КонецЕсли;
	
	Значение = СуммаБезНДС * ВходящиеДанные.КоэффициентПересчетаВВалютуРегл;
	
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Значение = "41.01";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование> --&gt; НомерСтрокиТЧ</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерСтрокиТЧ" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>Значение = ОбъектКоллекции.НомерСтроки;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; Ключ</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Ключ" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>Значение = ОбъектКоллекции.НомерСтроки;</ПередВыгрузкой>
								</Свойство>
								<Свойство Отключить="true">
									<Код>18</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство Отключить="true">
									<Код>23</Код>
									<Наименование>Сумма --&gt;</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>24</Код>
									<Наименование>СуммаБезНДС --&gt;</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="СуммаБезНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>21</Код>
									<Наименование> --&gt; ОтражениеВУСН</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражениеВУСН" Вид="Реквизит" Тип="ПеречислениеСсылка.ОтражениеВУСН"/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ВНО_ОстаткиГТД</Код>
						<Наименование>Документ: Ввод остатков</Наименование>
						<Порядок>100</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);</ПослеЗагрузки>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВводОстатков</Источник>
						<Приемник>ДокументСсылка.ОперацияБух</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Значение = Лев(Источник.Номер, 5) + "Н" + Сред(Источник.Номер, 7)</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>35</Код>
								<Наименование> --&gt; Содержание</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Значение = "Ввод начальных остатков ГТД";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>37</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>36</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Группа>
								<Код>28</Код>
								<Наименование> --&gt; Хозрасчетный</Наименование>
								<Порядок>400</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Хозрасчетный" Вид="НаборДвиженийРегистраБухгалтерии"/>
								<Свойство>
									<Код>29</Код>
									<Наименование> --&gt; СубконтоДт</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СубконтоДт" Вид="ВидыСубконтоСчета"/>
									<ПередВыгрузкой>ИмяПКОВидСубконто = "ВидыСубконтоХозрасчетные";

Значение = Новый ТаблицаЗначений;
Значение.Колонки.Добавить("Ключ");
Значение.Колонки.Добавить("Значение");

СубконтоДт1 = Значение.Добавить();
СубконтоДт2 = Значение.Добавить();
СубконтоДт3 = Значение.Добавить();

СубконтоДт1.Ключ = "Номенклатура";
СубконтоДт2.Ключ = "НомераГТД";
СубконтоДт3.Ключ = "СтраныПроисхождения";

СубконтоДт1.Значение = ОбъектКоллекции.Номенклатура;
СубконтоДт2.Значение = ОбъектКоллекции.НомерГТД;
СубконтоДт3.Значение = ОбъектКоллекции.СтранаПроисхождения;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование> --&gt; Организация</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Организация" Вид="Измерение" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
									<ПередВыгрузкой>Значение = Источник.Организация;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>31</Код>
									<Наименование> --&gt; Содержание</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
									<ПередВыгрузкой>Значение = "Ввод начальных остатков ГТД";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>32</Код>
									<Наименование> --&gt; КоличествоДт</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КоличествоДт" Вид="Ресурс" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>33</Код>
									<Наименование> --&gt; Активность</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Источник.Проведен;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>34</Код>
									<Наименование> --&gt; СчетДт</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетДт" Вид="Свойство" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Значение = "ГТД";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>38</Код>
									<Наименование> --&gt; Период</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Период" Вид="Свойство" Тип="Дата"/>
									<ПередВыгрузкой>Значение = Источник.Дата;</ПередВыгрузкой>
								</Свойство>
							</Группа>
							<Группа>
								<Код>39</Код>
								<Наименование> --&gt; ЗаполнениеДвижений</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЗаполнениеДвижений" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("Документ");
КоллекцияОбъектов.Колонки.Добавить("Примечание");

КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>40</Код>
									<Наименование> --&gt; Документ</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Документ" Вид="Реквизит"/>
								</Свойство>
								<Свойство>
									<Код>41</Код>
									<Наименование> --&gt; Примечание</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Примечание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ВНО_ОстаткиТоваровПереданныхНаКомиссию</Код>
						<Наименование>Документ: Ввод остатков</Наименование>
						<Порядок>150</Порядок>
						<ПередВыгрузкой>ВалютаУправленческогоУчета = Константы.ВалютаУправленческогоУчета.Получить();
КоэффициентПересчетаВВалютуРегл = РаботаСКурсамивалютУТ.ПолучитьКоэффициентыПересчетаВалюты(ВалютаУправленческогоУчета,
				Неопределено, Источник.Дата).КоэффициентПересчетаВВалютуРегл;
				
ВходящиеДанные.Вставить("КоэффициентПересчетаВВалютуРегл", КоэффициентПересчетаВВалютуРегл);

КонтрагентПартнера = ПартнерыИКонтрагенты.ПолучитьКонтрагентаПартнераПоУмолчанию(Источник.Партнер);
ВходящиеДанные.Вставить("Контрагент", КонтрагентПартнера);</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);
Объект.Проведен = Ложь;

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	// Заполняем признак "Отражение в УСН" значением по умолчанию
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = ?(УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы,
								Перечисления.ОтражениеВУСН.Принимаются, Перечисления.ОтражениеВУСН.ПустаяСсылка());
			
		// Заполняем отражение в УСН для ТЧ МПЗОтгруженные
		Для Каждого СтрокаТЧ Из Объект.МПЗОтгруженные Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВводОстатков</Источник>
						<Приемник>ДокументСсылка.ВводНачальныхОстатков</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование> --&gt; ОтражатьВБухгалтерскомУчете</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтражатьВБухгалтерскомУчете" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование> --&gt; ОтражатьВНалоговомУчете</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтражатьВНалоговомУчете" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование> --&gt; ОтражатьПоСпециальнымРегистрам</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтражатьПоСпециальнымРегистрам" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование> --&gt; РазделУчета</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="РазделУчета" Вид="Реквизит" Тип="ПеречислениеСсылка.РазделыУчетаДляВводаОстатков"/>
								<ПередВыгрузкой>Значение = "ТоварыОтгруженные";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>11</Код>
								<Наименование>Товары --&gt; МПЗОтгруженные</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="МПЗОтгруженные" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>13</Код>
									<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>Количество --&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>СуммаРегл --&gt; Сумма</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="СуммаРегл" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									<ПриВыгрузке>Если Значение = 0 И ОбъектКоллекции.Сумма &gt; 0 Тогда

	Если ОбъектКоллекции.СуммаБезНДС = 0 Тогда
		СуммаНДС = ОбъектКоллекции.Сумма * ЦенообразованиеКлиентСервер.ПолучитьСтавкуНДСЧислом(ОбъектКоллекции.Номенклатура.СтавкаНДС);
		СуммаБезНДС = ОбъектКоллекции.Сумма - СуммаНДС;
	Иначе
		СуммаБезНДС = ОбъектКоллекции.СуммаБезНДС;
	КонецЕсли;
	
	Значение = СуммаБезНДС * ВходящиеДанные.КоэффициентПересчетаВВалютуРегл;
	
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование>СуммаРегл --&gt; СуммаНУ</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="СуммаРегл" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаНУ" Вид="Реквизит" Тип="Число"/>
									<ПриВыгрузке>Если Значение = 0 И ОбъектКоллекции.Сумма &gt; 0 Тогда

	Если ОбъектКоллекции.СуммаБезНДС = 0 Тогда
		СуммаНДС = ОбъектКоллекции.Сумма * ЦенообразованиеКлиентСервер.ПолучитьСтавкуНДСЧислом(ОбъектКоллекции.Номенклатура.СтавкаНДС);
		СуммаБезНДС = ОбъектКоллекции.Сумма - СуммаНДС;
	Иначе
		СуммаБезНДС = ОбъектКоллекции.СуммаБезНДС;
	КонецЕсли;
	
	Значение = СуммаБезНДС * ВходящиеДанные.КоэффициентПересчетаВВалютуРегл;
	
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование> --&gt; Покупатель</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Покупатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
									<ПередВыгрузкой>Значение = ВходящиеДанные.Контрагент;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt; ДоговорПокупателя</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДоговорПокупателя" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
									<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
									<ПередВыгрузкой>Если ЗначениеЗаполнено(ВходящиеДанные.Контрагент) Тогда
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.СоглашениеСКомиссионером, "Валюта"));
	Значение.Вставить("ВидДоговора",				"СКомиссионером");
	Значение.Вставить("Владелец",					ВходящиеДанные.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Источник.СоглашениеСКомиссионером);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
Иначе
    Значение = Неопределено;
КонецЕсли;	

ВходящиеДанные.Вставить("ДоговорКонтрагента", Значение);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Значение = "45.01";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; ВидМПЗ</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидМПЗ" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМПЗ"/>
									<ПередВыгрузкой>Значение = "Товары";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование> --&gt; ДокументОтгрузки</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДокументОтгрузки" Вид="Реквизит"/>
									<КодПравилаКонвертации>ДРК_ДокументРасчетовСКонтрагентом                 </КодПравилаКонвертации>
									<ПередВыгрузкой>Если ЗначениеЗаполнено(ВходящиеДанные.Контрагент) Тогда
	
	Значение = Новый Структура;
	Значение.Вставить("Ссылка");
	Значение.Вставить("ДатаВходящегоДокумента");
	Значение.Вставить("НомерВходящегоДокумента");
	Значение.Вставить("Организация", Источник.Организация);
	Значение.Вставить("Контрагент", ВходящиеДанные.Контрагент);
	Значение.Вставить("ВалютаДокумента", Источник.СоглашениеСКомиссионером.Валюта);
	Значение.Вставить("ДоговорКонтрагента", ВходящиеДанные.ДоговорКонтрагента);
	
Иначе
	Значение = Неопределено;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование> --&gt; Ключ</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Ключ" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>Значение = ОбъектКоллекции.НомерСтроки;</ПередВыгрузкой>
								</Свойство>
								<Свойство Отключить="true">
									<Код>26</Код>
									<Наименование>Сумма --&gt;</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>27</Код>
									<Наименование>СуммаБезНДС --&gt;</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="СуммаБезНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>24</Код>
									<Наименование> --&gt; ОтражениеВУСН</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражениеВУСН" Вид="Реквизит" Тип="ПеречислениеСсылка.ОтражениеВУСН"/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>21</Код>
								<Наименование>Партнер --&gt;</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>22</Код>
								<Наименование>СоглашениеСКомиссионером --&gt;</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="СоглашениеСКомиссионером" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСКлиентами"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ВНО_ОстаткиТоваровПринятыхНаКомиссию</Код>
						<Наименование>Документ: Ввод остатков</Наименование>
						<Порядок>200</Порядок>
						<ПередВыгрузкой>КонтрагентПартнера = ПартнерыИКонтрагенты.ПолучитьКонтрагентаПартнераПоУмолчанию(Источник.Партнер);
ВходящиеДанные.Вставить("Контрагент", КонтрагентПартнера);</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Для Каждого СтрокаТаблицы Из Объект.БухСправка Цикл
	
	ЧислоАктивныхСубконто = СтрокаТаблицы.СчетУчета.ВидыСубконто.Количество();
	
	Для Сч = 1 По ЧислоАктивныхСубконто Цикл
		
		ТипСубк = СтрокаТаблицы.СчетУчета.ВидыСубконто[Сч - 1].ВидСубконто.ТипЗначения;
		
		Если ТипСубк.ПривестиЗначение(СтрокаТаблицы["Субконто" + Сч]) &lt;&gt; СтрокаТаблицы["Субконто" + Сч] Тогда
			СтрокаТаблицы["Субконто" + Сч] = ТипСубк.ПривестиЗначение(СтрокаТаблицы["Субконто" + Сч]);
		КонецЕсли;
		
	КонецЦикла;
	
	Для Сч = (ЧислоАктивныхСубконто + 1) По 3 Цикл
		
		Если Не СтрокаТаблицы["Субконто" + Сч] = Неопределено Тогда
			СтрокаТаблицы["Субконто" + Сч] = Неопределено;
		КонецЕсли;
		
	КонецЦикла;
	
КонецЦикла;</ПослеЗагрузки>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВводОстатков</Источник>
						<Приемник>ДокументСсылка.ВводНачальныхОстатков</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование> --&gt; ОтражатьВБухгалтерскомУчете</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтражатьВБухгалтерскомУчете" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование> --&gt; ОтражатьВНалоговомУчете</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтражатьВНалоговомУчете" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование> --&gt; ОтражатьПоСпециальнымРегистрам</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтражатьПоСпециальнымРегистрам" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование> --&gt; РазделУчета</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="РазделУчета" Вид="Реквизит" Тип="ПеречислениеСсылка.РазделыУчетаДляВводаОстатков"/>
								<ПередВыгрузкой>Значение = "ПрочиеСчетаБухгалтерскогоУчета";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>12</Код>
								<Наименование>Товары --&gt; БухСправка</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="БухСправка" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Запрос = Новый Запрос("ВЫБРАТЬ
|	NULL КАК Номенклатура,
|	ВводОстатковТовары.Номенклатура КАК Субконто2,
|	ВводОстатковТовары.Ссылка.Склад КАК Субконто3,
|	""004.01"" КАК СчетУчета,
|	ВводОстатковТовары.Количество
|ИЗ
|	Документ.ВводОстатков.Товары КАК ВводОстатковТовары
|ГДЕ
|	ВводОстатковТовары.Ссылка = &amp;Ссылка
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ВводОстатковТовары.Номенклатура,
|	ВводОстатковТовары.НомерГТД,
|	ВводОстатковТовары.НомерГТД.СтранаПроисхождения,
|	""ГТД"",
|	ВводОстатковТовары.Количество
|ИЗ
|	Документ.ВводОстатков.Товары КАК ВводОстатковТовары
|ГДЕ
|	ВводОстатковТовары.Ссылка = &amp;Ссылка
|	И ВводОстатковТовары.НомерГТД &lt;&gt; ЗНАЧЕНИЕ(Справочник.НомераГТД.ПустаяСсылка)");
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();
КоллекцияОбъектов.Колонки.Добавить("Субконто1");

Для Каждого СтрокаКоллекции Из КоллекцияОбъектов Цикл
	
	Если СтрокаКоллекции.СчетУчета = "004.01" И ЗначениеЗаполнено(ВходящиеДанные.Контрагент) Тогда
		
		// Инициализируем структуру договора
		ДоговорКонтрагента = Новый Структура;
		
		// Реквизиты договора
		ДоговорКонтрагента.Вставить("Ссылка");
		ДоговорКонтрагента.Вставить("ВалютаВзаиморасчетов",     Источник.СоглашениеСКомиссионером.Валюта);
		ДоговорКонтрагента.Вставить("ВидДоговора",              "СКомитентом");
		ДоговорКонтрагента.Вставить("Владелец",                 ВходящиеДанные.Контрагент);
		ДоговорКонтрагента.Вставить("Организация",              Источник.Организация);
		ДоговорКонтрагента.Вставить("РасчетыВУсловныхЕдиницах", Ложь);
		
		// Дополнительные свойства договора
		ДоговорКонтрагента.Вставить("ПартнерУТ11",                Источник.Партнер);
		ДоговорКонтрагента.Вставить("СоглашениеСКлиентомУТ11",    Источник.СоглашениеСКомиссионером);
		ДоговорКонтрагента.Вставить("СоглашениеСПоставщикомУТ11", Неопределено);
		ДоговорКонтрагента.Вставить("СделкаСКлиентомУТ11",        Неопределено);
		ДоговорКонтрагента.Вставить("ЗаказКлиентаУТ11",           Неопределено);
		ДоговорКонтрагента.Вставить("ЗаказПоставщикуУТ11",        Неопределено);
		
		ДокументРасчетов = Новый Структура;
		ДокументРасчетов.Вставить("Ссылка");
		ДокументРасчетов.Вставить("ДатаВходящегоДокумента");
		ДокументРасчетов.Вставить("НомерВходящегоДокумента");
		ДокументРасчетов.Вставить("Организация", Источник.Организация);
		ДокументРасчетов.Вставить("Контрагент", ВходящиеДанные.Контрагент);
		ДокументРасчетов.Вставить("ВалютаДокумента", Источник.Валюта);
		ДокументРасчетов.Вставить("ДоговорКонтрагента", ДоговорКонтрагента);
		
		СтрокаКоллекции.Субконто1 = ДокументРасчетов;
		
	Иначе
		СтрокаКоллекции.Субконто1 = СтрокаКоллекции.Номенклатура;
	КонецЕсли;
	
КонецЦикла;</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>13</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt; Субконто1</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Субконто1" Вид="Реквизит"/>
									<ПередВыгрузкой>Если ОбъектКоллекции.СчетУчета = "004.01" Тогда
	ИмяПКО = "ДРК_ДокументРасчетовСКонтрагентом";
	ВыгрузитьТолькоСсылку = Ложь;
Иначе
	ИмяПКО = "Номенклатура";
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование> --&gt; Субконто2</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Субконто2" Вид="Реквизит"/>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование> --&gt; Субконто3</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Субконто3" Вид="Реквизит"/>
									<ПриВыгрузке>Если ТипЗнч(Значение) = Тип("СправочникСсылка.Склады") Тогда
	Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>ОстаткиВзаиморасчетов</Код>
					<Наименование>ПКО для документов ввода остатков взаиморасчетов</Наименование>
					<Порядок>150</Порядок>
					<Группа>
						<Код>ВзаиморасчетыСКлиентами</Код>
						<Наименование>ПКО для документов ввода остатков взаиморасчетов с клиентами</Наименование>
						<Порядок>50</Порядок>
						<Правило>
							<Код>ВНО_АвансыПолученныеОтКлиентов</Код>
							<Наименование>Документ: Ввод остатков</Наименование>
							<Порядок>50</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);</ПослеЗагрузки>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ВводОстатков</Источник>
							<Приемник>ДокументСсылка.ВводНачальныхОстатков</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>4</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>5</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; ОтражатьВБухгалтерскомУчете</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВБухгалтерскомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; ОтражатьВНалоговомУчете</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВНалоговомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; ОтражатьПоСпециальнымРегистрам</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьПоСпециальнымРегистрам" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; РазделУчета</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РазделУчета" Вид="Реквизит" Тип="ПеречислениеСсылка.РазделыУчетаДляВводаОстатков"/>
									<ПередВыгрузкой>Значение = "РасчетыСПокупателямиИЗаказчиками";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Ответственный --&gt; Ответственный</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>8</Код>
									<Наименование> --&gt; РасчетыСКонтрагентами</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасчетыСКонтрагентами" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>Запрос = Новый Запрос();
Запрос.Текст = "ВЫБРАТЬ
|	РасчетыСПартнерами.Контрагент,
|	РасчетыСПартнерами.РасчетныйДокумент,
|	РасчетыСПартнерами.Партнер,
|	РасчетыСПартнерами.Ссылка.Организация,
|	РасчетыСПартнерами.ВалютаВзаиморасчетов,
|	КурсыВалют.Кратность КАК КратностьВзаиморасчетов,
|	КурсыВалют.Курс КАК КурсВзаиморасчетов,
|	КурсВалютыРегУчета.Кратность КАК КратностьРег,
|	КурсВалютыРегУчета.Курс КАК КурсРег,
|	РасчетыСПартнерами.Сумма КАК ВалютнаяСумма,
|	РасчетыСПартнерами.НомерРасчетногоДокумента,
|	РасчетыСПартнерами.ДатаРасчетногоДокумента
|ПОМЕСТИТЬ ТабРасчетов
|ИЗ
|	Документ.ВводОстатков.РасчетыСПартнерами КАК РасчетыСПартнерами
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, ) КАК КурсыВалют
|		ПО РасчетыСПартнерами.ВалютаВзаиморасчетов = КурсыВалют.Валюта
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;ВалютаРег) КАК КурсВалютыРегУчета
|		ПО (ИСТИНА)
|ГДЕ
|	РасчетыСПартнерами.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка КАК Ссылка,
|	ОбъектыРасчетов.Договор,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
|			ТОГДА ""СКомиссионером""
|		ИНАЧЕ ""СПокупателем""
|	КОНЕЦ КАК ВидДоговора,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
|			ТОГДА ОбъектыРасчетов.Ссылка
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ КАК ЗаказКлиентаУТ11,
|	ОбъектыРасчетов.Соглашение КАК СоглашениеСКлиентомУТ11,
|	НЕОПРЕДЕЛЕНО КАК СоглашениеСПоставщикомУТ11,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
|			ТОГДА ОбъектыРасчетов.Сделка
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ КАК СделкаСКлиентомУТ11,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ КАК РасчетыВУсловныхЕдиницах
|ПОМЕСТИТЬ ДанныеОбъектовРасчетов
|ИЗ
|	Документ.ЗаказКлиента КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
|			ТОГДА ""СКомиссионером""
|		ИНАЧЕ ""СПокупателем""
|	КОНЕЦ,
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
|			ТОГДА ОбъектыРасчетов.Сделка
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ
|ИЗ
|	Документ.ЗаявкаНаВозвратТоваровОтКлиента КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
|			ТОГДА ""СКомиссионером""
|		ИНАЧЕ ""СПокупателем""
|	КОНЕЦ,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
|			ТОГДА ОбъектыРасчетов.ЗаказКлиента
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
|			ТОГДА ОбъектыРасчетов.Сделка
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ
|ИЗ
|	Документ.РеализацияТоваровУслуг КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СПокупателем"",
|	ОбъектыРасчетов.ЗаказКлиента,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Сделка,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ
|ИЗ
|	Документ.АктВыполненныхРабот КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СПокупателем"",
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ
|ИЗ
|	Документ.РеализацияУслугПрочихАктивов КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СКомиссионером"",
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ
|ИЗ
|	Документ.ОтчетКомиссионера КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СКомитентом"",
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА ОбъектыРасчетов.Валюта &lt;&gt; &amp;ВалютаРег
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ
|ИЗ
|	Документ.ОтчетКомитенту КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СКомиссионером"",
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ
|ИЗ
|	Документ.ОтчетКомиссионера КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СКомиссионером"",
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ
|ИЗ
|	Документ.ОтчетКомиссионераОСписании КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Ссылка,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ
|ИЗ
|	Справочник.ДоговорыКонтрагентов КАК ОбъектыРасчетов
|
|ИНДЕКСИРОВАТЬ ПО
|	Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ТабРасчетов.Организация,
|	ТабРасчетов.Контрагент,
|	ТабРасчетов.Партнер,
|	ТабРасчетов.ВалютаВзаиморасчетов КАК Валюта,
|	ДанныеОбъектовРасчетов.Договор,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.ВидДоговора, ""СПокупателем"") КАК ВидДоговора,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.ЗаказКлиентаУТ11, НЕОПРЕДЕЛЕНО) КАК ЗаказКлиентаУТ11,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.СоглашениеСКлиентомУТ11, НЕОПРЕДЕЛЕНО) КАК СоглашениеСКлиентомУТ11,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.СоглашениеСПоставщикомУТ11, НЕОПРЕДЕЛЕНО) КАК СоглашениеСПоставщикомУТ11,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.СделкаСКлиентомУТ11, НЕОПРЕДЕЛЕНО) КАК СделкаСКлиентомУТ11,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.РасчетыВУсловныхЕдиницах, ЛОЖЬ) КАК РасчетыВУсловныхЕдиницах,
|	ВЫБОР
|		КОГДА ЕСТЬNULL(ДанныеОбъектовРасчетов.РасчетыВУсловныхЕдиницах, ЛОЖЬ)
|			ТОГДА ""62.32""
|		ИНАЧЕ ВЫБОР
|				КОГДА ТабРасчетов.ВалютаВзаиморасчетов = &amp;ВалютаРег
|					ТОГДА ""62.02""
|				ИНАЧЕ ""62.22""
|			КОНЕЦ
|	КОНЕЦ КАК СчетУчета,
|	ТабРасчетов.КратностьВзаиморасчетов,
|	ТабРасчетов.КурсВзаиморасчетов,
|	ТабРасчетов.ВалютнаяСумма,
|	ТабРасчетов.ВалютнаяСумма * ВЫБОР
|		КОГДА ТабРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ВЫБОР
|					КОГДА ЕСТЬNULL(ТабРасчетов.КратностьВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КратностьРег, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсРег, 0) &gt; 0
|						ТОГДА ТабРасчетов.КурсВзаиморасчетов * ТабРасчетов.КратностьРег / (ТабРасчетов.КратностьВзаиморасчетов * ТабРасчетов.КурсРег)
|					ИНАЧЕ 0
|				КОНЕЦ
|		ИНАЧЕ 1
|	КОНЕЦ КАК Сумма,
|	ТабРасчетов.ВалютнаяСумма * ВЫБОР
|		КОГДА ТабРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ВЫБОР
|					КОГДА ЕСТЬNULL(ТабРасчетов.КратностьВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КратностьРег, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсРег, 0) &gt; 0
|						ТОГДА ТабРасчетов.КурсВзаиморасчетов * ТабРасчетов.КратностьРег / (ТабРасчетов.КратностьВзаиморасчетов * ТабРасчетов.КурсРег)
|					ИНАЧЕ 0
|				КОНЕЦ
|		ИНАЧЕ 1
|	КОНЕЦ КАК СуммаНУ,
|	ТабРасчетов.НомерРасчетногоДокумента,
|	ТабРасчетов.ДатаРасчетногоДокумента
|ИЗ
|	ТабРасчетов КАК ТабРасчетов
|		ЛЕВОЕ СОЕДИНЕНИЕ ДанныеОбъектовРасчетов КАК ДанныеОбъектовРасчетов
|		ПО ТабРасчетов.РасчетныйДокумент = ДанныеОбъектовРасчетов.Ссылка";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата", Источник.Дата);
Запрос.УстановитьПараметр("ВалютаРег", Константы.ВалютаРегламентированногоУчета.Получить());

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>16</Код>
										<Наименование> --&gt; Контрагент</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
										<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.Договор) Тогда
	Значение = ОбъектКоллекции.Договор;
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;

	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.Валюта);
	Значение.Вставить("ВидДоговора",				ОбъектКоллекции.ВидДоговора);
	Значение.Вставить("Владелец",					ОбъектКоллекции.Контрагент);
	Значение.Вставить("Организация",				ОбъектКоллекции.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах",	ОбъектКоллекции.РасчетыВУсловныхЕдиницах);

	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				ОбъектКоллекции.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	ОбъектКоллекции.СоглашениеСКлиентомУТ11);
	Значение.Вставить("СоглашениеСПоставщикомУТ11", ОбъектКоллекции.СоглашениеСПоставщикомУТ11);
	Значение.Вставить("СделкаСКлиентомУТ11",		ОбъектКоллекции.СделкаСКлиентомУТ11);
	Значение.Вставить("ЗаказКлиентаУТ11",			ОбъектКоллекции.ЗаказКлиентаУТ11);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

	ИмяПКО = "ДоговорыКонтрагентов";
	ВыгрузитьТолькоСсылку = Ложь;
	
КонецЕсли;

ВходящиеДанные.Вставить("ДоговорКонтрагента", Значение);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; Валюта</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; ВалютнаяСумма</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ВалютнаяСумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>11</Код>
										<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>12</Код>
										<Наименование> --&gt; Сумма</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>9</Код>
										<Наименование> --&gt; СуммаНУ</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаНУ" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>10</Код>
										<Наименование> --&gt; СчетУчета</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									</Свойство>
									<Свойство>
										<Код>13</Код>
										<Наименование> --&gt; Документ</Наименование>
										<Порядок>500</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Документ" Вид="Реквизит"/>
										<КодПравилаКонвертации>ДРК_ДокументРасчетовСКонтрагентом                 </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Новый Структура;
Значение.Вставить("Ссылка");
Значение.Вставить("ДатаВходящегоДокумента",	 ОбъектКоллекции.ДатаРасчетногоДокумента);
Значение.Вставить("НомерВходящегоДокумента", ОбъектКоллекции.НомерРасчетногоДокумента);
Значение.Вставить("Организация",			 ОбъектКоллекции.Организация);
Значение.Вставить("Контрагент",				 ОбъектКоллекции.Контрагент);
Значение.Вставить("ВалютаДокумента",		 ОбъектКоллекции.Валюта);
Значение.Вставить("ДоговорКонтрагента",		 ВходящиеДанные.ДоговорКонтрагента);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Группа Отключить="true">
									<Код>23</Код>
									<Наименование>РасчетыСПартнерами --&gt;</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="РасчетыСПартнерами" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>29</Код>
										<Наименование>Партнер --&gt;</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>27</Код>
										<Наименование>ДатаРасчетногоДокумента --&gt;</Наименование>
										<Порядок>550</Порядок>
										<Источник Имя="ДатаРасчетногоДокумента" Вид="Реквизит" Тип="Дата"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>28</Код>
										<Наименование>НомерРасчетногоДокумента --&gt;</Наименование>
										<Порядок>600</Порядок>
										<Источник Имя="НомерРасчетногоДокумента" Вид="Реквизит" Тип="Строка"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>26</Код>
										<Наименование>РасчетныйДокумент --&gt;</Наименование>
										<Порядок>650</Порядок>
										<Источник Имя="РасчетныйДокумент" Вид="Реквизит"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>24</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
										<Порядок>700</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>25</Код>
										<Наименование>Контрагент --&gt;</Наименование>
										<Порядок>750</Порядок>
										<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>30</Код>
										<Наименование>Сумма --&gt;</Наименование>
										<Порядок>800</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ВНО_ЗадолженностьКлиентов</Код>
							<Наименование>Документ: Ввод остатков</Наименование>
							<Порядок>100</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);</ПослеЗагрузки>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ВводОстатков</Источник>
							<Приемник>ДокументСсылка.ВводНачальныхОстатков</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>4</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>5</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; ОтражатьВБухгалтерскомУчете</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВБухгалтерскомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; ОтражатьВНалоговомУчете</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВНалоговомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; ОтражатьПоСпециальнымРегистрам</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьПоСпециальнымРегистрам" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; РазделУчета</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РазделУчета" Вид="Реквизит" Тип="ПеречислениеСсылка.РазделыУчетаДляВводаОстатков"/>
									<ПередВыгрузкой>Значение = "РасчетыСПокупателямиИЗаказчиками";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Ответственный --&gt; Ответственный</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>8</Код>
									<Наименование> --&gt; РасчетыСКонтрагентами</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасчетыСКонтрагентами" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>Запрос = Новый Запрос();
Запрос.Текст = "ВЫБРАТЬ
|	РасчетыСПартнерами.Контрагент,
|	РасчетыСПартнерами.РасчетныйДокумент,
|	РасчетыСПартнерами.Партнер,
|	РасчетыСПартнерами.Ссылка.Организация,
|	РасчетыСПартнерами.ВалютаВзаиморасчетов,
|	КурсыВалют.Кратность КАК КратностьВзаиморасчетов,
|	КурсыВалют.Курс КАК КурсВзаиморасчетов,
|	КурсВалютыРегУчета.Кратность КАК КратностьРег,
|	КурсВалютыРегУчета.Курс КАК КурсРег,
|	РасчетыСПартнерами.Сумма КАК ВалютнаяСумма,
|	РасчетыСПартнерами.НомерРасчетногоДокумента,
|	РасчетыСПартнерами.ДатаРасчетногоДокумента
|ПОМЕСТИТЬ ТабРасчетов
|ИЗ
|	Документ.ВводОстатков.РасчетыСПартнерами КАК РасчетыСПартнерами
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, ) КАК КурсыВалют
|		ПО РасчетыСПартнерами.ВалютаВзаиморасчетов = КурсыВалют.Валюта
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;ВалютаРег) КАК КурсВалютыРегУчета
|		ПО (ИСТИНА)
|ГДЕ
|	РасчетыСПартнерами.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка КАК Ссылка,
|	ОбъектыРасчетов.Договор,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
|			ТОГДА ""СКомиссионером""
|		ИНАЧЕ ""СПокупателем""
|	КОНЕЦ КАК ВидДоговора,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
|			ТОГДА ОбъектыРасчетов.Ссылка
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ КАК ЗаказКлиентаУТ11,
|	ОбъектыРасчетов.Соглашение КАК СоглашениеСКлиентомУТ11,
|	НЕОПРЕДЕЛЕНО КАК СоглашениеСПоставщикомУТ11,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
|			ТОГДА ОбъектыРасчетов.Сделка
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ КАК СделкаСКлиентомУТ11,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ КАК РасчетыВУсловныхЕдиницах
|ПОМЕСТИТЬ ДанныеОбъектовРасчетов
|ИЗ
|	Документ.ЗаказКлиента КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
|			ТОГДА ""СКомиссионером""
|		ИНАЧЕ ""СПокупателем""
|	КОНЕЦ,
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
|			ТОГДА ОбъектыРасчетов.Сделка
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ
|ИЗ
|	Документ.ЗаявкаНаВозвратТоваровОтКлиента КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
|			ТОГДА ""СКомиссионером""
|		ИНАЧЕ ""СПокупателем""
|	КОНЕЦ,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
|			ТОГДА ОбъектыРасчетов.ЗаказКлиента
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
|			ТОГДА ОбъектыРасчетов.Сделка
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ
|ИЗ
|	Документ.РеализацияТоваровУслуг КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СПокупателем"",
|	ОбъектыРасчетов.ЗаказКлиента,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Сделка,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ
|ИЗ
|	Документ.АктВыполненныхРабот КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СПокупателем"",
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ
|ИЗ
|	Документ.РеализацияУслугПрочихАктивов КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СКомиссионером"",
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ
|ИЗ
|	Документ.ОтчетКомиссионера КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СКомитентом"",
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА ОбъектыРасчетов.Валюта &lt;&gt; &amp;ВалютаРег
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ
|ИЗ
|	Документ.ОтчетКомитенту КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СКомиссионером"",
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ
|ИЗ
|	Документ.ОтчетКомиссионера КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СКомиссионером"",
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ
|ИЗ
|	Документ.ОтчетКомиссионераОСписании КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Ссылка,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ
|ИЗ
|	Справочник.ДоговорыКонтрагентов КАК ОбъектыРасчетов
|
|ИНДЕКСИРОВАТЬ ПО
|	Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ТабРасчетов.Организация,
|	ТабРасчетов.Контрагент,
|	ТабРасчетов.Партнер,
|	ТабРасчетов.ВалютаВзаиморасчетов КАК Валюта,
|	ДанныеОбъектовРасчетов.Договор,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.ВидДоговора, ""СПокупателем"") КАК ВидДоговора,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.ЗаказКлиентаУТ11, НЕОПРЕДЕЛЕНО) КАК ЗаказКлиентаУТ11,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.СоглашениеСКлиентомУТ11, НЕОПРЕДЕЛЕНО) КАК СоглашениеСКлиентомУТ11,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.СоглашениеСПоставщикомУТ11, НЕОПРЕДЕЛЕНО) КАК СоглашениеСПоставщикомУТ11,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.СделкаСКлиентомУТ11, НЕОПРЕДЕЛЕНО) КАК СделкаСКлиентомУТ11,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.РасчетыВУсловныхЕдиницах, ЛОЖЬ) КАК РасчетыВУсловныхЕдиницах,
|	ВЫБОР
|		КОГДА ЕСТЬNULL(ДанныеОбъектовРасчетов.РасчетыВУсловныхЕдиницах, ЛОЖЬ)
|			ТОГДА ""62.31""
|		ИНАЧЕ ВЫБОР
|				КОГДА ТабРасчетов.ВалютаВзаиморасчетов = &amp;ВалютаРег
|					ТОГДА ""62.01""
|				ИНАЧЕ ""62.21""
|			КОНЕЦ
|	КОНЕЦ КАК СчетУчета,
|	ТабРасчетов.КратностьВзаиморасчетов,
|	ТабРасчетов.КурсВзаиморасчетов,
|	ТабРасчетов.ВалютнаяСумма,
|	ТабРасчетов.ВалютнаяСумма * ВЫБОР
|		КОГДА ТабРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ВЫБОР
|					КОГДА ЕСТЬNULL(ТабРасчетов.КратностьВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КратностьРег, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсРег, 0) &gt; 0
|						ТОГДА ТабРасчетов.КурсВзаиморасчетов * ТабРасчетов.КратностьРег / (ТабРасчетов.КратностьВзаиморасчетов * ТабРасчетов.КурсРег)
|					ИНАЧЕ 0
|				КОНЕЦ
|		ИНАЧЕ 1
|	КОНЕЦ КАК Сумма,
|	ТабРасчетов.ВалютнаяСумма * ВЫБОР
|		КОГДА ТабРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ВЫБОР
|					КОГДА ЕСТЬNULL(ТабРасчетов.КратностьВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КратностьРег, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсРег, 0) &gt; 0
|						ТОГДА ТабРасчетов.КурсВзаиморасчетов * ТабРасчетов.КратностьРег / (ТабРасчетов.КратностьВзаиморасчетов * ТабРасчетов.КурсРег)
|					ИНАЧЕ 0
|				КОНЕЦ
|		ИНАЧЕ 1
|	КОНЕЦ КАК СуммаНУ,
|	ТабРасчетов.НомерРасчетногоДокумента,
|	ТабРасчетов.ДатаРасчетногоДокумента
|ИЗ
|	ТабРасчетов КАК ТабРасчетов
|		ЛЕВОЕ СОЕДИНЕНИЕ ДанныеОбъектовРасчетов КАК ДанныеОбъектовРасчетов
|		ПО ТабРасчетов.РасчетныйДокумент = ДанныеОбъектовРасчетов.Ссылка";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата", Источник.Дата);
Запрос.УстановитьПараметр("ВалютаРег", Константы.ВалютаРегламентированногоУчета.Получить());

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>10</Код>
										<Наименование> --&gt; Контрагент</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
										<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>11</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.Договор) Тогда
	Значение = ОбъектКоллекции.Договор;
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;

	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.Валюта);
	Значение.Вставить("ВидДоговора",				ОбъектКоллекции.ВидДоговора);
	Значение.Вставить("Владелец",					ОбъектКоллекции.Контрагент);
	Значение.Вставить("Организация",				ОбъектКоллекции.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах",	ОбъектКоллекции.РасчетыВУсловныхЕдиницах);

	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				ОбъектКоллекции.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	ОбъектКоллекции.СоглашениеСКлиентомУТ11);
	Значение.Вставить("СоглашениеСПоставщикомУТ11", ОбъектКоллекции.СоглашениеСПоставщикомУТ11);
	Значение.Вставить("СделкаСКлиентомУТ11",		ОбъектКоллекции.СделкаСКлиентомУТ11);
	Значение.Вставить("ЗаказКлиентаУТ11",			ОбъектКоллекции.ЗаказКлиентаУТ11);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

	ИмяПКО = "ДоговорыКонтрагентов";
	ВыгрузитьТолькоСсылку = Ложь;
	
КонецЕсли;

ВходящиеДанные.Вставить("ДоговорКонтрагента", Значение);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>12</Код>
										<Наименование> --&gt; Валюта</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>13</Код>
										<Наименование> --&gt; ВалютнаяСумма</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ВалютнаяСумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; Сумма</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование> --&gt; СуммаНУ</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаНУ" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; СчетУчета</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									</Свойство>
									<Свойство>
										<Код>9</Код>
										<Наименование> --&gt; Документ</Наименование>
										<Порядок>500</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Документ" Вид="Реквизит"/>
										<КодПравилаКонвертации>ДРК_ДокументРасчетовСКонтрагентом                 </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Новый Структура;
Значение.Вставить("Ссылка");
Значение.Вставить("ДатаВходящегоДокумента",	 ОбъектКоллекции.ДатаРасчетногоДокумента);
Значение.Вставить("НомерВходящегоДокумента", ОбъектКоллекции.НомерРасчетногоДокумента);
Значение.Вставить("Организация",			 ОбъектКоллекции.Организация);
Значение.Вставить("Контрагент",				 ОбъектКоллекции.Контрагент);
Значение.Вставить("ВалютаДокумента",		 ОбъектКоллекции.Валюта);
Значение.Вставить("ДоговорКонтрагента",		 ВходящиеДанные.ДоговорКонтрагента);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Группа Отключить="true">
									<Код>23</Код>
									<Наименование>РасчетыСПартнерами --&gt;</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="РасчетыСПартнерами" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>24</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>25</Код>
										<Наименование>Контрагент --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>27</Код>
										<Наименование>Партнер --&gt;</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>26</Код>
										<Наименование>Сумма --&gt;</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>29</Код>
										<Наименование>ДатаРасчетногоДокумента --&gt;</Наименование>
										<Порядок>550</Порядок>
										<Источник Имя="ДатаРасчетногоДокумента" Вид="Реквизит" Тип="Дата"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>28</Код>
										<Наименование>НомерРасчетногоДокумента --&gt;</Наименование>
										<Порядок>600</Порядок>
										<Источник Имя="НомерРасчетногоДокумента" Вид="Реквизит" Тип="Строка"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>30</Код>
										<Наименование>РасчетныйДокумент --&gt;</Наименование>
										<Порядок>650</Порядок>
										<Источник Имя="РасчетныйДокумент" Вид="Реквизит"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ВНО_АвансыПолученныеОтКлиентовИК</Код>
							<Наименование>Документ: Ввод остатков</Наименование>
							<Порядок>150</Порядок>
							<ПередВыгрузкой>ОрганизацияКонтрагента = Источник.ОрганизацияПолучатель;
НовыйКонтрагент		   = Неопределено;
Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);

ВходящиеДанные.Вставить("Контрагент", НовыйКонтрагент);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);</ПослеЗагрузки>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ВводОстатков</Источник>
							<Приемник>ДокументСсылка.ВводНачальныхОстатков</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>4</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>5</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; ОтражатьВБухгалтерскомУчете</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВБухгалтерскомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; ОтражатьВНалоговомУчете</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВНалоговомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; ОтражатьПоСпециальнымРегистрам</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьПоСпециальнымРегистрам" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; РазделУчета</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РазделУчета" Вид="Реквизит" Тип="ПеречислениеСсылка.РазделыУчетаДляВводаОстатков"/>
									<ПередВыгрузкой>Значение = "РасчетыСПокупателямиИЗаказчиками";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Ответственный --&gt; Ответственный</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>8</Код>
									<Наименование> --&gt; РасчетыСКонтрагентами</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасчетыСКонтрагентами" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>Запрос = Новый Запрос();
Запрос.Текст = "ВЫБРАТЬ
|	РасчетыМеждуОрганизациями.Ссылка.Организация,
|	РасчетыМеждуОрганизациями.РасчетныйДокумент,
|	РасчетыМеждуОрганизациями.ВалютаВзаиморасчетов,
|	КурсыВалют.Кратность КАК КратностьВзаиморасчетов,
|	КурсыВалют.Курс КАК КурсВзаиморасчетов,
|	КурсВалютыРегУчета.Кратность КАК КратностьРег,
|	КурсВалютыРегУчета.Курс КАК КурсРег,
|	РасчетыМеждуОрганизациями.Сумма КАК ВалютнаяСумма,
|	РасчетыМеждуОрганизациями.НомерРасчетногоДокумента,
|	РасчетыМеждуОрганизациями.ДатаРасчетногоДокумента
|ПОМЕСТИТЬ ТабРасчетов
|ИЗ
|	Документ.ВводОстатков.РасчетыМеждуОрганизациями КАК РасчетыМеждуОрганизациями
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, ) КАК КурсыВалют
|		ПО РасчетыМеждуОрганизациями.ВалютаВзаиморасчетов = КурсыВалют.Валюта
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;ВалютаРег) КАК КурсВалютыРегУчета
|		ПО (ИСТИНА)
|ГДЕ
|	РасчетыМеждуОрганизациями.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка КАК Ссылка,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссиюВДругуюОрганизацию)
|			ТОГДА ""СКомиссионером""
|		ИНАЧЕ ""СПокупателем""
|	КОНЕЦ КАК ВидДоговора,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ КАК РасчетыВУсловныхЕдиницах
|ПОМЕСТИТЬ ДанныеОбъектовРасчетов
|ИЗ
|	Документ.ПередачаТоваровМеждуОрганизациями КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	""СКомиссионером"",
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Валюта &lt;&gt; &amp;ВалютаРег
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ КАК РасчетыВУсловныхЕдиницах
|ИЗ
|	Документ.ОтчетПоКомиссииМеждуОрганизациями КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ТабРасчетов.Организация,
|	ТабРасчетов.ВалютаВзаиморасчетов КАК Валюта,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.ВидДоговора, ""СПокупателем"") КАК ВидДоговора,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.РасчетыВУсловныхЕдиницах, ЛОЖЬ) КАК РасчетыВУсловныхЕдиницах,
|	ВЫБОР
|		КОГДА ЕСТЬNULL(ДанныеОбъектовРасчетов.РасчетыВУсловныхЕдиницах, ЛОЖЬ)
|			ТОГДА ""62.32""
|		ИНАЧЕ ВЫБОР
|				КОГДА ТабРасчетов.ВалютаВзаиморасчетов = &amp;ВалютаРег
|					ТОГДА ""62.02""
|				ИНАЧЕ ""62.22""
|			КОНЕЦ
|	КОНЕЦ КАК СчетУчета,
|	ТабРасчетов.КратностьВзаиморасчетов,
|	ТабРасчетов.КурсВзаиморасчетов,
|	ТабРасчетов.ВалютнаяСумма,
|	ТабРасчетов.ВалютнаяСумма * ВЫБОР
|		КОГДА ТабРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ВЫБОР
|					КОГДА ЕСТЬNULL(ТабРасчетов.КратностьВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КратностьРег, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсРег, 0) &gt; 0
|						ТОГДА ТабРасчетов.КурсВзаиморасчетов * ТабРасчетов.КратностьРег / (ТабРасчетов.КратностьВзаиморасчетов * ТабРасчетов.КурсРег)
|					ИНАЧЕ 0
|				КОНЕЦ
|		ИНАЧЕ 1
|	КОНЕЦ КАК Сумма,
|	ТабРасчетов.ВалютнаяСумма * ВЫБОР
|		КОГДА ТабРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ВЫБОР
|					КОГДА ЕСТЬNULL(ТабРасчетов.КратностьВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КратностьРег, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсРег, 0) &gt; 0
|						ТОГДА ТабРасчетов.КурсВзаиморасчетов * ТабРасчетов.КратностьРег / (ТабРасчетов.КратностьВзаиморасчетов * ТабРасчетов.КурсРег)
|					ИНАЧЕ 0
|				КОНЕЦ
|		ИНАЧЕ 1
|	КОНЕЦ КАК СуммаНУ,
|	ТабРасчетов.НомерРасчетногоДокумента,
|	ТабРасчетов.ДатаРасчетногоДокумента
|ИЗ
|	ТабРасчетов КАК ТабРасчетов
|		ЛЕВОЕ СОЕДИНЕНИЕ ДанныеОбъектовРасчетов КАК ДанныеОбъектовРасчетов
|		ПО ТабРасчетов.РасчетныйДокумент = ДанныеОбъектовРасчетов.Ссылка";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата", Источник.Дата);
Запрос.УстановитьПараметр("ВалютаРег", Константы.ВалютаРегламентированногоУчета.Получить());

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>16</Код>
										<Наименование> --&gt; Контрагент</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
										<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = ВходящиеДанные.Контрагент;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.Валюта);
Значение.Вставить("ВидДоговора",				ОбъектКоллекции.ВидДоговора);
Значение.Вставить("Владелец",					ВходящиеДанные.Контрагент);
Значение.Вставить("Организация",				ОбъектКоллекции.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах",	ОбъектКоллекции.РасчетыВУсловныхЕдиницах);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11", Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;

ВходящиеДанные.Вставить("ДоговорКонтрагента", Значение);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; Валюта</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; ВалютнаяСумма</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ВалютнаяСумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>11</Код>
										<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>12</Код>
										<Наименование> --&gt; Сумма</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>9</Код>
										<Наименование> --&gt; СуммаНУ</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаНУ" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>10</Код>
										<Наименование> --&gt; СчетУчета</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									</Свойство>
									<Свойство>
										<Код>13</Код>
										<Наименование> --&gt; Документ</Наименование>
										<Порядок>500</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Документ" Вид="Реквизит"/>
										<КодПравилаКонвертации>ДРК_ДокументРасчетовСКонтрагентом                 </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Новый Структура;
Значение.Вставить("Ссылка");
Значение.Вставить("ДатаВходящегоДокумента",	 ОбъектКоллекции.ДатаРасчетногоДокумента);
Значение.Вставить("НомерВходящегоДокумента", ОбъектКоллекции.НомерРасчетногоДокумента);
Значение.Вставить("Организация",			 ОбъектКоллекции.Организация);
Значение.Вставить("Контрагент",				 ВходящиеДанные.Контрагент);
Значение.Вставить("ВалютаДокумента",		 ОбъектКоллекции.Валюта);
Значение.Вставить("ДоговорКонтрагента",		 ВходящиеДанные.ДоговорКонтрагента);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>31</Код>
									<Наименование>ОрганизацияПолучатель --&gt;</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Группа Отключить="true">
									<Код>23</Код>
									<Наименование>РасчетыСПартнерами --&gt;</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="РасчетыСПартнерами" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>29</Код>
										<Наименование>Партнер --&gt;</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>27</Код>
										<Наименование>ДатаРасчетногоДокумента --&gt;</Наименование>
										<Порядок>550</Порядок>
										<Источник Имя="ДатаРасчетногоДокумента" Вид="Реквизит" Тип="Дата"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>28</Код>
										<Наименование>НомерРасчетногоДокумента --&gt;</Наименование>
										<Порядок>600</Порядок>
										<Источник Имя="НомерРасчетногоДокумента" Вид="Реквизит" Тип="Строка"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>26</Код>
										<Наименование>РасчетныйДокумент --&gt;</Наименование>
										<Порядок>650</Порядок>
										<Источник Имя="РасчетныйДокумент" Вид="Реквизит"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>24</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
										<Порядок>700</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>25</Код>
										<Наименование>Контрагент --&gt;</Наименование>
										<Порядок>750</Порядок>
										<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>30</Код>
										<Наименование>Сумма --&gt;</Наименование>
										<Порядок>800</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ВНО_ЗадолженностьКлиентовИК</Код>
							<Наименование>Документ: Ввод остатков</Наименование>
							<Порядок>200</Порядок>
							<ПередВыгрузкой>ОрганизацияКонтрагента = Источник.ОрганизацияПолучатель;
НовыйКонтрагент		   = Неопределено;
Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);

ВходящиеДанные.Вставить("Контрагент", НовыйКонтрагент);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);</ПослеЗагрузки>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ВводОстатков</Источник>
							<Приемник>ДокументСсылка.ВводНачальныхОстатков</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>4</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>5</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; ОтражатьВБухгалтерскомУчете</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВБухгалтерскомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; ОтражатьВНалоговомУчете</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВНалоговомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; ОтражатьПоСпециальнымРегистрам</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьПоСпециальнымРегистрам" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; РазделУчета</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РазделУчета" Вид="Реквизит" Тип="ПеречислениеСсылка.РазделыУчетаДляВводаОстатков"/>
									<ПередВыгрузкой>Значение = "РасчетыСПокупателямиИЗаказчиками";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Ответственный --&gt; Ответственный</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>8</Код>
									<Наименование> --&gt; РасчетыСКонтрагентами</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасчетыСКонтрагентами" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>Запрос = Новый Запрос();
Запрос.Текст = "ВЫБРАТЬ
|	РасчетыМеждуОрганизациями.Ссылка.Организация,
|	РасчетыМеждуОрганизациями.РасчетныйДокумент,
|	РасчетыМеждуОрганизациями.ВалютаВзаиморасчетов,
|	КурсыВалют.Кратность КАК КратностьВзаиморасчетов,
|	КурсыВалют.Курс КАК КурсВзаиморасчетов,
|	КурсВалютыРегУчета.Кратность КАК КратностьРег,
|	КурсВалютыРегУчета.Курс КАК КурсРег,
|	РасчетыМеждуОрганизациями.Сумма КАК ВалютнаяСумма,
|	РасчетыМеждуОрганизациями.НомерРасчетногоДокумента,
|	РасчетыМеждуОрганизациями.ДатаРасчетногоДокумента
|ПОМЕСТИТЬ ТабРасчетов
|ИЗ
|	Документ.ВводОстатков.РасчетыМеждуОрганизациями КАК РасчетыМеждуОрганизациями
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, ) КАК КурсыВалют
|		ПО РасчетыМеждуОрганизациями.ВалютаВзаиморасчетов = КурсыВалют.Валюта
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;ВалютаРег) КАК КурсВалютыРегУчета
|		ПО (ИСТИНА)
|ГДЕ
|	РасчетыМеждуОрганизациями.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка КАК Ссылка,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссиюВДругуюОрганизацию)
|			ТОГДА ""СКомиссионером""
|		ИНАЧЕ ""СПокупателем""
|	КОНЕЦ КАК ВидДоговора,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ КАК РасчетыВУсловныхЕдиницах
|ПОМЕСТИТЬ ДанныеОбъектовРасчетов
|ИЗ
|	Документ.ПередачаТоваровМеждуОрганизациями КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	""СКомиссионером"",
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Валюта &lt;&gt; &amp;ВалютаРег
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ КАК РасчетыВУсловныхЕдиницах
|ИЗ
|	Документ.ОтчетПоКомиссииМеждуОрганизациями КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ТабРасчетов.Организация,
|	ТабРасчетов.ВалютаВзаиморасчетов КАК Валюта,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.ВидДоговора, ""СПокупателем"") КАК ВидДоговора,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.РасчетыВУсловныхЕдиницах, ЛОЖЬ) КАК РасчетыВУсловныхЕдиницах,
|	ВЫБОР
|		КОГДА ЕСТЬNULL(ДанныеОбъектовРасчетов.РасчетыВУсловныхЕдиницах, ЛОЖЬ)
|			ТОГДА ""62.31""
|		ИНАЧЕ ВЫБОР
|				КОГДА ТабРасчетов.ВалютаВзаиморасчетов = &amp;ВалютаРег
|					ТОГДА ""62.01""
|				ИНАЧЕ ""62.21""
|			КОНЕЦ
|	КОНЕЦ КАК СчетУчета,
|	ТабРасчетов.КратностьВзаиморасчетов,
|	ТабРасчетов.КурсВзаиморасчетов,
|	ТабРасчетов.ВалютнаяСумма,
|	ТабРасчетов.ВалютнаяСумма * ВЫБОР
|		КОГДА ТабРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ВЫБОР
|					КОГДА ЕСТЬNULL(ТабРасчетов.КратностьВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КратностьРег, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсРег, 0) &gt; 0
|						ТОГДА ТабРасчетов.КурсВзаиморасчетов * ТабРасчетов.КратностьРег / (ТабРасчетов.КратностьВзаиморасчетов * ТабРасчетов.КурсРег)
|					ИНАЧЕ 0
|				КОНЕЦ
|		ИНАЧЕ 1
|	КОНЕЦ КАК Сумма,
|	ТабРасчетов.ВалютнаяСумма * ВЫБОР
|		КОГДА ТабРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ВЫБОР
|					КОГДА ЕСТЬNULL(ТабРасчетов.КратностьВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КратностьРег, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсРег, 0) &gt; 0
|						ТОГДА ТабРасчетов.КурсВзаиморасчетов * ТабРасчетов.КратностьРег / (ТабРасчетов.КратностьВзаиморасчетов * ТабРасчетов.КурсРег)
|					ИНАЧЕ 0
|				КОНЕЦ
|		ИНАЧЕ 1
|	КОНЕЦ КАК СуммаНУ,
|	ТабРасчетов.НомерРасчетногоДокумента,
|	ТабРасчетов.ДатаРасчетногоДокумента
|ИЗ
|	ТабРасчетов КАК ТабРасчетов
|		ЛЕВОЕ СОЕДИНЕНИЕ ДанныеОбъектовРасчетов КАК ДанныеОбъектовРасчетов
|		ПО ТабРасчетов.РасчетныйДокумент = ДанныеОбъектовРасчетов.Ссылка";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата", Источник.Дата);
Запрос.УстановитьПараметр("ВалютаРег", Константы.ВалютаРегламентированногоУчета.Получить());

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>10</Код>
										<Наименование> --&gt; Контрагент</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
										<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = ВходящиеДанные.Контрагент;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>11</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.Валюта);
Значение.Вставить("ВидДоговора",				ОбъектКоллекции.ВидДоговора);
Значение.Вставить("Владелец",					ВходящиеДанные.Контрагент);
Значение.Вставить("Организация",				ОбъектКоллекции.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах",	ОбъектКоллекции.РасчетыВУсловныхЕдиницах);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11", Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;

ВходящиеДанные.Вставить("ДоговорКонтрагента", Значение);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>12</Код>
										<Наименование> --&gt; Валюта</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>13</Код>
										<Наименование> --&gt; ВалютнаяСумма</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ВалютнаяСумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; Сумма</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование> --&gt; СуммаНУ</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаНУ" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; СчетУчета</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									</Свойство>
									<Свойство>
										<Код>9</Код>
										<Наименование> --&gt; Документ</Наименование>
										<Порядок>500</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Документ" Вид="Реквизит"/>
										<КодПравилаКонвертации>ДРК_ДокументРасчетовСКонтрагентом                 </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Новый Структура;
Значение.Вставить("Ссылка");
Значение.Вставить("ДатаВходящегоДокумента",	 ОбъектКоллекции.ДатаРасчетногоДокумента);
Значение.Вставить("НомерВходящегоДокумента", ОбъектКоллекции.НомерРасчетногоДокумента);
Значение.Вставить("Организация",			 ОбъектКоллекции.Организация);
Значение.Вставить("Контрагент",				 ВходящиеДанные.Контрагент);
Значение.Вставить("ВалютаДокумента",		 ОбъектКоллекции.Валюта);
Значение.Вставить("ДоговорКонтрагента",		 ВходящиеДанные.ДоговорКонтрагента);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>31</Код>
									<Наименование>ОрганизацияПолучатель --&gt;</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Группа Отключить="true">
									<Код>23</Код>
									<Наименование>РасчетыСПартнерами --&gt;</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="РасчетыСПартнерами" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>24</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>25</Код>
										<Наименование>Контрагент --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>27</Код>
										<Наименование>Партнер --&gt;</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>26</Код>
										<Наименование>Сумма --&gt;</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>29</Код>
										<Наименование>ДатаРасчетногоДокумента --&gt;</Наименование>
										<Порядок>550</Порядок>
										<Источник Имя="ДатаРасчетногоДокумента" Вид="Реквизит" Тип="Дата"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>28</Код>
										<Наименование>НомерРасчетногоДокумента --&gt;</Наименование>
										<Порядок>600</Порядок>
										<Источник Имя="НомерРасчетногоДокумента" Вид="Реквизит" Тип="Строка"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>30</Код>
										<Наименование>РасчетныйДокумент --&gt;</Наименование>
										<Порядок>650</Порядок>
										<Источник Имя="РасчетныйДокумент" Вид="Реквизит"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
					</Группа>
					<Группа>
						<Код>ВзаиморасчетыСПоставщиками</Код>
						<Наименование>ПКО для документов ввода остатков взаиморасчетов с поставщиками</Наименование>
						<Порядок>100</Порядок>
						<Правило>
							<Код>ВНО_АвансыВыданныеПоставщикам</Код>
							<Наименование>Документ: Ввод остатков</Наименование>
							<Порядок>50</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);</ПослеЗагрузки>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ВводОстатков</Источник>
							<Приемник>ДокументСсылка.ВводНачальныхОстатков</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>4</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>5</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; ОтражатьВБухгалтерскомУчете</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВБухгалтерскомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; ОтражатьВНалоговомУчете</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВНалоговомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; ОтражатьПоСпециальнымРегистрам</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьПоСпециальнымРегистрам" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; РазделУчета</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РазделУчета" Вид="Реквизит" Тип="ПеречислениеСсылка.РазделыУчетаДляВводаОстатков"/>
									<ПередВыгрузкой>Значение = "РасчетыСПоставщикамиИПодрядчиками";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Ответственный --&gt; Ответственный</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>8</Код>
									<Наименование> --&gt; РасчетыСКонтрагентами</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасчетыСКонтрагентами" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>Запрос = Новый Запрос();
Запрос.Текст = "ВЫБРАТЬ
|	РасчетыСПартнерами.Контрагент,
|	РасчетыСПартнерами.РасчетныйДокумент,
|	РасчетыСПартнерами.Партнер,
|	РасчетыСПартнерами.Ссылка.Организация,
|	РасчетыСПартнерами.ВалютаВзаиморасчетов,
|	КурсыВалют.Кратность КАК КратностьВзаиморасчетов,
|	КурсыВалют.Курс КАК КурсВзаиморасчетов,
|	КурсВалютыРегУчета.Кратность КАК КратностьРег,
|	КурсВалютыРегУчета.Курс КАК КурсРег,
|	РасчетыСПартнерами.Сумма КАК ВалютнаяСумма,
|	РасчетыСПартнерами.НомерРасчетногоДокумента,
|	РасчетыСПартнерами.ДатаРасчетногоДокумента
|ПОМЕСТИТЬ ТабРасчетов
|ИЗ
|	Документ.ВводОстатков.РасчетыСПартнерами КАК РасчетыСПартнерами
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, ) КАК КурсыВалют
|		ПО РасчетыСПартнерами.ВалютаВзаиморасчетов = КурсыВалют.Валюта
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;ВалютаРег) КАК КурсВалютыРегУчета
|		ПО (ИСТИНА)
|ГДЕ
|	РасчетыСПартнерами.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка КАК Ссылка,
|	ОбъектыРасчетов.Договор,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПриемНаКомиссию)
|			ТОГДА ""СКомитентом""
|		ИНАЧЕ ""СПоставщиком""
|	КОНЕЦ КАК ВидДоговора,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПриемНаКомиссию)
|			ТОГДА ОбъектыРасчетов.Ссылка
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ КАК ЗаказПоставщикуУТ11,
|	НЕОПРЕДЕЛЕНО КАК СоглашениеСКлиентомУТ11,
|	ОбъектыРасчетов.Соглашение КАК СоглашениеСПоставщикомУТ11,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА ОбъектыРасчетов.Валюта &lt;&gt; &amp;ВалютаРег
|							И НЕ(ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаПоИмпорту)
|									ИЛИ ОбъектыРасчетов.НалогообложениеНДС = ЗНАЧЕНИЕ(Перечисление.ТипыНалогообложенияНДС.ПродажаНаЭкспорт))
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ КАК РасчетыВУсловныхЕдиницах
|ПОМЕСТИТЬ ДанныеОбъектовРасчетов
|ИЗ
|	Документ.ЗаказПоставщику КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПриемНаКомиссию)
|			ТОГДА ""СКомитентом""
|		ИНАЧЕ ""СПоставщиком""
|	КОНЕЦ,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПриемНаКомиссию)
|			ТОГДА ОбъектыРасчетов.ЗаказПоставщику
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ,
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА ОбъектыРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|							И НЕ(ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаПоИмпорту)
|									ИЛИ ОбъектыРасчетов.НалогообложениеНДС = ЗНАЧЕНИЕ(Перечисление.ТипыНалогообложенияНДС.ПродажаНаЭкспорт))
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ
|ИЗ
|	Документ.ПоступлениеТоваровУслуг КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СПоставщиком"",
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА ОбъектыРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ
|ИЗ
|	Документ.ПоступлениеУслугПрочихАктивов КАК ОбъектыРасчетов
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""Прочее"",
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА ОбъектыРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ
|ИЗ
|	Документ.ТаможеннаяДекларацияИмпорт КАК ОбъектыРасчетов
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СКомитентом"",
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА ОбъектыРасчетов.Валюта &lt;&gt; &amp;ВалютаРег
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ
|ИЗ
|	Документ.ОтчетКомитенту КАК ОбъектыРасчетов
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СКомитентом"",
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА ОбъектыРасчетов.Валюта &lt;&gt; &amp;ВалютаРег
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ
|ИЗ
|	Документ.ОтчетКомитентуОСписании КАК ОбъектыРасчетов
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СКомиссионером"",
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА ОбъектыРасчетов.Валюта &lt;&gt; &amp;ВалютаРег
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ
|ИЗ
|	Документ.ОтчетКомиссионера КАК ОбъектыРасчетов
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Ссылка,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО
|ИЗ
|	Справочник.ДоговорыКонтрагентов КАК ОбъектыРасчетов
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ТабРасчетов.Организация,
|	ТабРасчетов.Контрагент,
|	ТабРасчетов.Партнер,
|	ТабРасчетов.ВалютаВзаиморасчетов КАК Валюта,
|	ДанныеОбъектовРасчетов.Договор,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.ВидДоговора, ""СПоставщиком"") КАК ВидДоговора,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.ЗаказПоставщикуУТ11, НЕОПРЕДЕЛЕНО) КАК ЗаказПоставщикуУТ11,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.СоглашениеСКлиентомУТ11, НЕОПРЕДЕЛЕНО) КАК СоглашениеСКлиентомУТ11,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.СоглашениеСПоставщикомУТ11, НЕОПРЕДЕЛЕНО) КАК СоглашениеСПоставщикомУТ11,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.РасчетыВУсловныхЕдиницах, ЛОЖЬ) КАК РасчетыВУсловныхЕдиницах,
|	ВЫБОР
|		КОГДА ЕСТЬNULL(ДанныеОбъектовРасчетов.РасчетыВУсловныхЕдиницах, ЛОЖЬ)
|			ТОГДА ""60.32""
|		ИНАЧЕ ВЫБОР
|				КОГДА ТабРасчетов.ВалютаВзаиморасчетов = &amp;ВалютаРег
|					ТОГДА ""60.02""
|				ИНАЧЕ ""60.22""
|			КОНЕЦ
|	КОНЕЦ КАК СчетУчета,
|	ТабРасчетов.КратностьВзаиморасчетов,
|	ТабРасчетов.КурсВзаиморасчетов,
|	ТабРасчетов.ВалютнаяСумма,
|	ТабРасчетов.ВалютнаяСумма * ВЫБОР
|		КОГДА ТабРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ВЫБОР
|					КОГДА ЕСТЬNULL(ТабРасчетов.КратностьВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КратностьРег, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсРег, 0) &gt; 0
|						ТОГДА ТабРасчетов.КурсВзаиморасчетов * ТабРасчетов.КратностьРег / (ТабРасчетов.КратностьВзаиморасчетов * ТабРасчетов.КурсРег)
|					ИНАЧЕ 0
|				КОНЕЦ
|		ИНАЧЕ 1
|	КОНЕЦ КАК Сумма,
|	ТабРасчетов.ВалютнаяСумма * ВЫБОР
|		КОГДА ТабРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ВЫБОР
|					КОГДА ЕСТЬNULL(ТабРасчетов.КратностьВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КратностьРег, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсРег, 0) &gt; 0
|						ТОГДА ТабРасчетов.КурсВзаиморасчетов * ТабРасчетов.КратностьРег / (ТабРасчетов.КратностьВзаиморасчетов * ТабРасчетов.КурсРег)
|					ИНАЧЕ 0
|				КОНЕЦ
|		ИНАЧЕ 1
|	КОНЕЦ КАК СуммаНУ,
|	ТабРасчетов.НомерРасчетногоДокумента,
|	ТабРасчетов.ДатаРасчетногоДокумента
|ИЗ
|	ТабРасчетов КАК ТабРасчетов
|		ЛЕВОЕ СОЕДИНЕНИЕ ДанныеОбъектовРасчетов КАК ДанныеОбъектовРасчетов
|		ПО ТабРасчетов.РасчетныйДокумент = ДанныеОбъектовРасчетов.Ссылка";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата", Источник.Дата);
Запрос.УстановитьПараметр("ВалютаРег", Константы.ВалютаРегламентированногоУчета.Получить());

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>10</Код>
										<Наименование> --&gt; Контрагент</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
										<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>11</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.Договор) Тогда
	Значение = ОбъектКоллекции.Договор;
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;

	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.Валюта);
	Значение.Вставить("ВидДоговора",				ОбъектКоллекции.ВидДоговора);
	Значение.Вставить("Владелец",					ОбъектКоллекции.Контрагент);
	Значение.Вставить("Организация",				ОбъектКоллекции.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах",	ОбъектКоллекции.РасчетыВУсловныхЕдиницах);

	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				ОбъектКоллекции.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	ОбъектКоллекции.СоглашениеСКлиентомУТ11);
	Значение.Вставить("СоглашениеСПоставщикомУТ11", ОбъектКоллекции.СоглашениеСПоставщикомУТ11);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		ОбъектКоллекции.ЗаказПоставщикуУТ11);

	ИмяПКО = "ДоговорыКонтрагентов";
	ВыгрузитьТолькоСсылку = Ложь;
	
КонецЕсли;

ВходящиеДанные.Вставить("ДоговорКонтрагента", Значение);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>12</Код>
										<Наименование> --&gt; Валюта</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>13</Код>
										<Наименование> --&gt; ВалютнаяСумма</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ВалютнаяСумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; Сумма</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>9</Код>
										<Наименование> --&gt; СуммаНУ</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаНУ" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; СчетУчета</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; Документ</Наименование>
										<Порядок>500</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Документ" Вид="Реквизит"/>
										<КодПравилаКонвертации>ДРК_ДокументРасчетовСКонтрагентом                 </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Новый Структура;
Значение.Вставить("Ссылка");
Значение.Вставить("ДатаВходящегоДокумента",	 ОбъектКоллекции.ДатаРасчетногоДокумента);
Значение.Вставить("НомерВходящегоДокумента", ОбъектКоллекции.НомерРасчетногоДокумента);
Значение.Вставить("Организация",			 ОбъектКоллекции.Организация);
Значение.Вставить("Контрагент",				 ОбъектКоллекции.Контрагент);
Значение.Вставить("ВалютаДокумента",		 ОбъектКоллекции.Валюта);
Значение.Вставить("ДоговорКонтрагента",		 ВходящиеДанные.ДоговорКонтрагента);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Группа Отключить="true">
									<Код>23</Код>
									<Наименование>РасчетыСПартнерами --&gt;</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="РасчетыСПартнерами" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>27</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>28</Код>
										<Наименование>Контрагент --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>29</Код>
										<Наименование>Партнер --&gt;</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>30</Код>
										<Наименование>Сумма --&gt;</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>25</Код>
										<Наименование>ДатаРасчетногоДокумента --&gt;</Наименование>
										<Порядок>550</Порядок>
										<Источник Имя="ДатаРасчетногоДокумента" Вид="Реквизит" Тип="Дата"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>26</Код>
										<Наименование>НомерРасчетногоДокумента --&gt;</Наименование>
										<Порядок>600</Порядок>
										<Источник Имя="НомерРасчетногоДокумента" Вид="Реквизит" Тип="Строка"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>24</Код>
										<Наименование>РасчетныйДокумент --&gt;</Наименование>
										<Порядок>650</Порядок>
										<Источник Имя="РасчетныйДокумент" Вид="Реквизит"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ВНО_ЗадолженностьПередПоставщиками</Код>
							<Наименование>Документ: Ввод остатков</Наименование>
							<Порядок>100</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);</ПослеЗагрузки>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ВводОстатков</Источник>
							<Приемник>ДокументСсылка.ВводНачальныхОстатков</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>4</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>5</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; ОтражатьВБухгалтерскомУчете</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВБухгалтерскомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; ОтражатьВНалоговомУчете</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВНалоговомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; ОтражатьПоСпециальнымРегистрам</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьПоСпециальнымРегистрам" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование> --&gt; РазделУчета</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РазделУчета" Вид="Реквизит" Тип="ПеречислениеСсылка.РазделыУчетаДляВводаОстатков"/>
									<ПередВыгрузкой>Значение = "РасчетыСПоставщикамиИПодрядчиками";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Ответственный --&gt; Ответственный</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>8</Код>
									<Наименование> --&gt; РасчетыСКонтрагентами</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасчетыСКонтрагентами" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>Запрос = Новый Запрос();
Запрос.Текст = "ВЫБРАТЬ
|	РасчетыСПартнерами.Контрагент,
|	РасчетыСПартнерами.РасчетныйДокумент,
|	РасчетыСПартнерами.Партнер,
|	РасчетыСПартнерами.Ссылка.Организация,
|	РасчетыСПартнерами.ВалютаВзаиморасчетов,
|	КурсыВалют.Кратность КАК КратностьВзаиморасчетов,
|	КурсыВалют.Курс КАК КурсВзаиморасчетов,
|	КурсВалютыРегУчета.Кратность КАК КратностьРег,
|	КурсВалютыРегУчета.Курс КАК КурсРег,
|	РасчетыСПартнерами.Сумма КАК ВалютнаяСумма,
|	РасчетыСПартнерами.НомерРасчетногоДокумента,
|	РасчетыСПартнерами.ДатаРасчетногоДокумента
|ПОМЕСТИТЬ ТабРасчетов
|ИЗ
|	Документ.ВводОстатков.РасчетыСПартнерами КАК РасчетыСПартнерами
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, ) КАК КурсыВалют
|		ПО РасчетыСПартнерами.ВалютаВзаиморасчетов = КурсыВалют.Валюта
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;ВалютаРег) КАК КурсВалютыРегУчета
|		ПО (ИСТИНА)
|ГДЕ
|	РасчетыСПартнерами.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка КАК Ссылка,
|	ОбъектыРасчетов.Договор,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПриемНаКомиссию)
|			ТОГДА ""СКомитентом""
|		ИНАЧЕ ""СПоставщиком""
|	КОНЕЦ КАК ВидДоговора,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПриемНаКомиссию)
|			ТОГДА ОбъектыРасчетов.Ссылка
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ КАК ЗаказПоставщикуУТ11,
|	НЕОПРЕДЕЛЕНО КАК СоглашениеСКлиентомУТ11,
|	ОбъектыРасчетов.Соглашение КАК СоглашениеСПоставщикомУТ11,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА ОбъектыРасчетов.Валюта &lt;&gt; &amp;ВалютаРег
|							И НЕ(ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаПоИмпорту)
|									ИЛИ ОбъектыРасчетов.НалогообложениеНДС = ЗНАЧЕНИЕ(Перечисление.ТипыНалогообложенияНДС.ПродажаНаЭкспорт))
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ КАК РасчетыВУсловныхЕдиницах
|ПОМЕСТИТЬ ДанныеОбъектовРасчетов
|ИЗ
|	Документ.ЗаказПоставщику КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПриемНаКомиссию)
|			ТОГДА ""СКомитентом""
|		ИНАЧЕ ""СПоставщиком""
|	КОНЕЦ,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПриемНаКомиссию)
|			ТОГДА ОбъектыРасчетов.ЗаказПоставщику
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ,
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА ОбъектыРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|							И НЕ(ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаПоИмпорту)
|									ИЛИ ОбъектыРасчетов.НалогообложениеНДС = ЗНАЧЕНИЕ(Перечисление.ТипыНалогообложенияНДС.ПродажаНаЭкспорт))
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ
|ИЗ
|	Документ.ПоступлениеТоваровУслуг КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СПоставщиком"",
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА ОбъектыРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ
|ИЗ
|	Документ.ПоступлениеУслугПрочихАктивов КАК ОбъектыРасчетов
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""Прочее"",
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА ОбъектыРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ
|ИЗ
|	Документ.ТаможеннаяДекларацияИмпорт КАК ОбъектыРасчетов
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СКомитентом"",
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА ОбъектыРасчетов.Валюта &lt;&gt; &amp;ВалютаРег
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ
|ИЗ
|	Документ.ОтчетКомитенту КАК ОбъектыРасчетов
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СКомитентом"",
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА ОбъектыРасчетов.Валюта &lt;&gt; &amp;ВалютаРег
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ
|ИЗ
|	Документ.ОтчетКомитентуОСписании КАК ОбъектыРасчетов
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Договор,
|	""СКомиссионером"",
|	НЕОПРЕДЕЛЕНО,
|	ОбъектыРасчетов.Соглашение,
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА ОбъектыРасчетов.Валюта &lt;&gt; &amp;ВалютаРег
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА ОбъектыРасчетов.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ
|ИЗ
|	Документ.ОтчетКомиссионера КАК ОбъектыРасчетов
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	ОбъектыРасчетов.Ссылка,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО,
|	НЕОПРЕДЕЛЕНО
|ИЗ
|	Справочник.ДоговорыКонтрагентов КАК ОбъектыРасчетов
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ТабРасчетов.Организация,
|	ТабРасчетов.Контрагент,
|	ТабРасчетов.Партнер,
|	ТабРасчетов.ВалютаВзаиморасчетов КАК Валюта,
|	ДанныеОбъектовРасчетов.Договор,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.ВидДоговора, ""СПоставщиком"") КАК ВидДоговора,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.ЗаказПоставщикуУТ11, НЕОПРЕДЕЛЕНО) КАК ЗаказПоставщикуУТ11,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.СоглашениеСКлиентомУТ11, НЕОПРЕДЕЛЕНО) КАК СоглашениеСКлиентомУТ11,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.СоглашениеСПоставщикомУТ11, НЕОПРЕДЕЛЕНО) КАК СоглашениеСПоставщикомУТ11,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.РасчетыВУсловныхЕдиницах, ЛОЖЬ) КАК РасчетыВУсловныхЕдиницах,
|	ВЫБОР
|		КОГДА ЕСТЬNULL(ДанныеОбъектовРасчетов.РасчетыВУсловныхЕдиницах, ЛОЖЬ)
|			ТОГДА ""60.31""
|		ИНАЧЕ ВЫБОР
|				КОГДА ТабРасчетов.ВалютаВзаиморасчетов = &amp;ВалютаРег
|					ТОГДА ""60.01""
|				ИНАЧЕ ""60.21""
|			КОНЕЦ
|	КОНЕЦ КАК СчетУчета,
|	ТабРасчетов.КратностьВзаиморасчетов,
|	ТабРасчетов.КурсВзаиморасчетов,
|	ТабРасчетов.ВалютнаяСумма,
|	ТабРасчетов.ВалютнаяСумма * ВЫБОР
|		КОГДА ТабРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ВЫБОР
|					КОГДА ЕСТЬNULL(ТабРасчетов.КратностьВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КратностьРег, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсРег, 0) &gt; 0
|						ТОГДА ТабРасчетов.КурсВзаиморасчетов * ТабРасчетов.КратностьРег / (ТабРасчетов.КратностьВзаиморасчетов * ТабРасчетов.КурсРег)
|					ИНАЧЕ 0
|				КОНЕЦ
|		ИНАЧЕ 1
|	КОНЕЦ КАК Сумма,
|	ТабРасчетов.ВалютнаяСумма * ВЫБОР
|		КОГДА ТабРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ВЫБОР
|					КОГДА ЕСТЬNULL(ТабРасчетов.КратностьВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КратностьРег, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсРег, 0) &gt; 0
|						ТОГДА ТабРасчетов.КурсВзаиморасчетов * ТабРасчетов.КратностьРег / (ТабРасчетов.КратностьВзаиморасчетов * ТабРасчетов.КурсРег)
|					ИНАЧЕ 0
|				КОНЕЦ
|		ИНАЧЕ 1
|	КОНЕЦ КАК СуммаНУ,
|	ТабРасчетов.НомерРасчетногоДокумента,
|	ТабРасчетов.ДатаРасчетногоДокумента
|ИЗ
|	ТабРасчетов КАК ТабРасчетов
|		ЛЕВОЕ СОЕДИНЕНИЕ ДанныеОбъектовРасчетов КАК ДанныеОбъектовРасчетов
|		ПО ТабРасчетов.РасчетныйДокумент = ДанныеОбъектовРасчетов.Ссылка";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата", Источник.Дата);
Запрос.УстановитьПараметр("ВалютаРег", Константы.ВалютаРегламентированногоУчета.Получить());

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>11</Код>
										<Наименование> --&gt; Контрагент</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
										<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.Договор) Тогда
	Значение = ОбъектКоллекции.Договор;
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;

	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.Валюта);
	Значение.Вставить("ВидДоговора",				ОбъектКоллекции.ВидДоговора);
	Значение.Вставить("Владелец",					ОбъектКоллекции.Контрагент);
	Значение.Вставить("Организация",				ОбъектКоллекции.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах",	ОбъектКоллекции.РасчетыВУсловныхЕдиницах);

	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				ОбъектКоллекции.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	ОбъектКоллекции.СоглашениеСКлиентомУТ11);
	Значение.Вставить("СоглашениеСПоставщикомУТ11", ОбъектКоллекции.СоглашениеСПоставщикомУТ11);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		ОбъектКоллекции.ЗаказПоставщикуУТ11);

	ИмяПКО = "ДоговорыКонтрагентов";
	ВыгрузитьТолькоСсылку = Ложь;
	
КонецЕсли;

ВходящиеДанные.Вставить("ДоговорКонтрагента", Значение);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>9</Код>
										<Наименование> --&gt; Валюта</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>13</Код>
										<Наименование> --&gt; ВалютнаяСумма</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ВалютнаяСумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>24</Код>
										<Наименование> --&gt; Сумма</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; СуммаНУ</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаНУ" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование> --&gt; СчетУчета</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; Документ</Наименование>
										<Порядок>500</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Документ" Вид="Реквизит"/>
										<КодПравилаКонвертации>ДРК_ДокументРасчетовСКонтрагентом                 </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Новый Структура;
Значение.Вставить("Ссылка");
Значение.Вставить("ДатаВходящегоДокумента",	 ОбъектКоллекции.ДатаРасчетногоДокумента);
Значение.Вставить("НомерВходящегоДокумента", ОбъектКоллекции.НомерРасчетногоДокумента);
Значение.Вставить("Организация",			 ОбъектКоллекции.Организация);
Значение.Вставить("Контрагент",				 ОбъектКоллекции.Контрагент);
Значение.Вставить("ВалютаДокумента",		 ОбъектКоллекции.Валюта);
Значение.Вставить("ДоговорКонтрагента",		 ВходящиеДанные.ДоговорКонтрагента);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Группа Отключить="true">
									<Код>26</Код>
									<Наименование>РасчетыСПартнерами --&gt;</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="РасчетыСПартнерами" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>27</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>28</Код>
										<Наименование>Контрагент --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>29</Код>
										<Наименование>Партнер --&gt;</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>30</Код>
										<Наименование>Сумма --&gt;</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>10</Код>
										<Наименование>ДатаРасчетногоДокумента --&gt;</Наименование>
										<Порядок>550</Порядок>
										<Источник Имя="ДатаРасчетногоДокумента" Вид="Реквизит" Тип="Дата"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>12</Код>
										<Наименование>НомерРасчетногоДокумента --&gt;</Наименование>
										<Порядок>600</Порядок>
										<Источник Имя="НомерРасчетногоДокумента" Вид="Реквизит" Тип="Строка"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>25</Код>
										<Наименование>РасчетныйДокумент --&gt;</Наименование>
										<Порядок>650</Порядок>
										<Источник Имя="РасчетныйДокумент" Вид="Реквизит"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ВНО_АвансыВыданныеПоставщикамИК</Код>
							<Наименование>Документ: Ввод остатков</Наименование>
							<Порядок>150</Порядок>
							<ПередВыгрузкой>ОрганизацияКонтрагента = Источник.Организация;
НовыйКонтрагент		   = Неопределено;
Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);

ВходящиеДанные.Вставить("Контрагент", НовыйКонтрагент);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);</ПослеЗагрузки>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ВводОстатков</Источник>
							<Приемник>ДокументСсылка.ВводНачальныхОстатков</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>4</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>5</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<ПриВыгрузке>Значение = Лев(Значение, 5) + "И" + Сред(Значение, 7);</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>ОрганизацияПолучатель --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; ОтражатьВБухгалтерскомУчете</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВБухгалтерскомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; ОтражатьВНалоговомУчете</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВНалоговомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; ОтражатьПоСпециальнымРегистрам</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьПоСпециальнымРегистрам" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; РазделУчета</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РазделУчета" Вид="Реквизит" Тип="ПеречислениеСсылка.РазделыУчетаДляВводаОстатков"/>
									<ПередВыгрузкой>Значение = "РасчетыСПоставщикамиИПодрядчиками";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Ответственный --&gt; Ответственный</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>8</Код>
									<Наименование> --&gt; РасчетыСКонтрагентами</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасчетыСКонтрагентами" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>Запрос = Новый Запрос();
Запрос.Текст = "ВЫБРАТЬ
|	РасчетыМеждуОрганизациями.Ссылка.ОрганизацияПолучатель КАК Организация,
|	РасчетыМеждуОрганизациями.РасчетныйДокумент,
|	РасчетыМеждуОрганизациями.ВалютаВзаиморасчетов,
|	КурсыВалют.Кратность КАК КратностьВзаиморасчетов,
|	КурсыВалют.Курс КАК КурсВзаиморасчетов,
|	КурсВалютыРегУчета.Кратность КАК КратностьРег,
|	КурсВалютыРегУчета.Курс КАК КурсРег,
|	РасчетыМеждуОрганизациями.Сумма КАК ВалютнаяСумма,
|	РасчетыМеждуОрганизациями.НомерРасчетногоДокумента,
|	РасчетыМеждуОрганизациями.ДатаРасчетногоДокумента
|ПОМЕСТИТЬ ТабРасчетов
|ИЗ
|	Документ.ВводОстатков.РасчетыМеждуОрганизациями КАК РасчетыМеждуОрганизациями
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, ) КАК КурсыВалют
|		ПО РасчетыМеждуОрганизациями.ВалютаВзаиморасчетов = КурсыВалют.Валюта
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;ВалютаРег) КАК КурсВалютыРегУчета
|		ПО (ИСТИНА)
|ГДЕ
|	РасчетыМеждуОрганизациями.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка КАК Ссылка,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссиюВДругуюОрганизацию)
|			ТОГДА ""СКомитентом""
|		ИНАЧЕ ""СПоставщиком""
|	КОНЕЦ КАК ВидДоговора,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ КАК РасчетыВУсловныхЕдиницах
|ПОМЕСТИТЬ ДанныеОбъектовРасчетов
|ИЗ
|	Документ.ПередачаТоваровМеждуОрганизациями КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	""СКомитентом"",
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Валюта &lt;&gt; &amp;ВалютаРег
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ КАК РасчетыВУсловныхЕдиницах
|ИЗ
|	Документ.ОтчетПоКомиссииМеждуОрганизациями КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ТабРасчетов.Организация,
|	ТабРасчетов.ВалютаВзаиморасчетов КАК Валюта,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.ВидДоговора, ""СПокупателем"") КАК ВидДоговора,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.РасчетыВУсловныхЕдиницах, ЛОЖЬ) КАК РасчетыВУсловныхЕдиницах,
|	ВЫБОР
|		КОГДА ЕСТЬNULL(ДанныеОбъектовРасчетов.РасчетыВУсловныхЕдиницах, ЛОЖЬ)
|			ТОГДА ""60.32""
|		ИНАЧЕ ВЫБОР
|				КОГДА ТабРасчетов.ВалютаВзаиморасчетов = &amp;ВалютаРег
|					ТОГДА ""60.02""
|				ИНАЧЕ ""60.22""
|			КОНЕЦ
|	КОНЕЦ КАК СчетУчета,
|	ТабРасчетов.КратностьВзаиморасчетов,
|	ТабРасчетов.КурсВзаиморасчетов,
|	ТабРасчетов.ВалютнаяСумма,
|	ТабРасчетов.ВалютнаяСумма * ВЫБОР
|		КОГДА ТабРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ВЫБОР
|					КОГДА ЕСТЬNULL(ТабРасчетов.КратностьВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КратностьРег, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсРег, 0) &gt; 0
|						ТОГДА ТабРасчетов.КурсВзаиморасчетов * ТабРасчетов.КратностьРег / (ТабРасчетов.КратностьВзаиморасчетов * ТабРасчетов.КурсРег)
|					ИНАЧЕ 0
|				КОНЕЦ
|		ИНАЧЕ 1
|	КОНЕЦ КАК Сумма,
|	ТабРасчетов.ВалютнаяСумма * ВЫБОР
|		КОГДА ТабРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ВЫБОР
|					КОГДА ЕСТЬNULL(ТабРасчетов.КратностьВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КратностьРег, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсРег, 0) &gt; 0
|						ТОГДА ТабРасчетов.КурсВзаиморасчетов * ТабРасчетов.КратностьРег / (ТабРасчетов.КратностьВзаиморасчетов * ТабРасчетов.КурсРег)
|					ИНАЧЕ 0
|				КОНЕЦ
|		ИНАЧЕ 1
|	КОНЕЦ КАК СуммаНУ,
|	ТабРасчетов.НомерРасчетногоДокумента,
|	ТабРасчетов.ДатаРасчетногоДокумента
|ИЗ
|	ТабРасчетов КАК ТабРасчетов
|		ЛЕВОЕ СОЕДИНЕНИЕ ДанныеОбъектовРасчетов КАК ДанныеОбъектовРасчетов
|		ПО ТабРасчетов.РасчетныйДокумент = ДанныеОбъектовРасчетов.Ссылка";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата", Источник.Дата);
Запрос.УстановитьПараметр("ВалютаРег", Константы.ВалютаРегламентированногоУчета.Получить());

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>10</Код>
										<Наименование> --&gt; Контрагент</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
										<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = ВходящиеДанные.Контрагент;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>11</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.Валюта);
Значение.Вставить("ВидДоговора",				ОбъектКоллекции.ВидДоговора);
Значение.Вставить("Владелец",					ВходящиеДанные.Контрагент);
Значение.Вставить("Организация",				ОбъектКоллекции.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах",	ОбъектКоллекции.РасчетыВУсловныхЕдиницах);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11", Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;

ВходящиеДанные.Вставить("ДоговорКонтрагента", Значение);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>12</Код>
										<Наименование> --&gt; Валюта</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>13</Код>
										<Наименование> --&gt; ВалютнаяСумма</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ВалютнаяСумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; Сумма</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>9</Код>
										<Наименование> --&gt; СуммаНУ</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаНУ" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; СчетУчета</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; Документ</Наименование>
										<Порядок>500</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Документ" Вид="Реквизит"/>
										<КодПравилаКонвертации>ДРК_ДокументРасчетовСКонтрагентом                 </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Новый Структура;
Значение.Вставить("Ссылка");
Значение.Вставить("ДатаВходящегоДокумента",	 ОбъектКоллекции.ДатаРасчетногоДокумента);
Значение.Вставить("НомерВходящегоДокумента", ОбъектКоллекции.НомерРасчетногоДокумента);
Значение.Вставить("Организация",			 ОбъектКоллекции.Организация);
Значение.Вставить("Контрагент",				 ВходящиеДанные.Контрагент);
Значение.Вставить("ВалютаДокумента",		 ОбъектКоллекции.Валюта);
Значение.Вставить("ДоговорКонтрагента",		 ВходящиеДанные.ДоговорКонтрагента);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>31</Код>
									<Наименование>Организация --&gt;</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Группа Отключить="true">
									<Код>23</Код>
									<Наименование>РасчетыСПартнерами --&gt;</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="РасчетыСПартнерами" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>27</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>28</Код>
										<Наименование>Контрагент --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>29</Код>
										<Наименование>Партнер --&gt;</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>30</Код>
										<Наименование>Сумма --&gt;</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>25</Код>
										<Наименование>ДатаРасчетногоДокумента --&gt;</Наименование>
										<Порядок>550</Порядок>
										<Источник Имя="ДатаРасчетногоДокумента" Вид="Реквизит" Тип="Дата"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>26</Код>
										<Наименование>НомерРасчетногоДокумента --&gt;</Наименование>
										<Порядок>600</Порядок>
										<Источник Имя="НомерРасчетногоДокумента" Вид="Реквизит" Тип="Строка"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>24</Код>
										<Наименование>РасчетныйДокумент --&gt;</Наименование>
										<Порядок>650</Порядок>
										<Источник Имя="РасчетныйДокумент" Вид="Реквизит"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ВНО_ЗадолженностьПередПоставщикамиИК</Код>
							<Наименование>Документ: Ввод остатков</Наименование>
							<Порядок>200</Порядок>
							<ПередВыгрузкой>ОрганизацияКонтрагента = Источник.Организация;
НовыйКонтрагент		   = Неопределено;
Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);

ВходящиеДанные.Вставить("Контрагент", НовыйКонтрагент);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);</ПослеЗагрузки>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ВводОстатков</Источник>
							<Приемник>ДокументСсылка.ВводНачальныхОстатков</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>4</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>5</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<ПриВыгрузке>Значение = Лев(Значение, 5) + "И" + Сред(Значение, 7);</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>ОрганизацияПолучатель --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; ОтражатьВБухгалтерскомУчете</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВБухгалтерскомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; ОтражатьВНалоговомУчете</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВНалоговомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; ОтражатьПоСпециальнымРегистрам</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьПоСпециальнымРегистрам" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; РазделУчета</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РазделУчета" Вид="Реквизит" Тип="ПеречислениеСсылка.РазделыУчетаДляВводаОстатков"/>
									<ПередВыгрузкой>Значение = "РасчетыСПоставщикамиИПодрядчиками";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Ответственный --&gt; Ответственный</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>8</Код>
									<Наименование> --&gt; РасчетыСКонтрагентами</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасчетыСКонтрагентами" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>Запрос = Новый Запрос();
Запрос.Текст = "ВЫБРАТЬ
|	РасчетыМеждуОрганизациями.Ссылка.ОрганизацияПолучатель КАК Организация,
|	РасчетыМеждуОрганизациями.РасчетныйДокумент,
|	РасчетыМеждуОрганизациями.ВалютаВзаиморасчетов,
|	КурсыВалют.Кратность КАК КратностьВзаиморасчетов,
|	КурсыВалют.Курс КАК КурсВзаиморасчетов,
|	КурсВалютыРегУчета.Кратность КАК КратностьРег,
|	КурсВалютыРегУчета.Курс КАК КурсРег,
|	РасчетыМеждуОрганизациями.Сумма КАК ВалютнаяСумма,
|	РасчетыМеждуОрганизациями.НомерРасчетногоДокумента,
|	РасчетыМеждуОрганизациями.ДатаРасчетногоДокумента
|ПОМЕСТИТЬ ТабРасчетов
|ИЗ
|	Документ.ВводОстатков.РасчетыМеждуОрганизациями КАК РасчетыМеждуОрганизациями
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, ) КАК КурсыВалют
|		ПО РасчетыМеждуОрганизациями.ВалютаВзаиморасчетов = КурсыВалют.Валюта
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;ВалютаРег) КАК КурсВалютыРегУчета
|		ПО (ИСТИНА)
|ГДЕ
|	РасчетыМеждуОрганизациями.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка КАК Ссылка,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссиюВДругуюОрганизацию)
|			ТОГДА ""СКомитентом""
|		ИНАЧЕ ""СПоставщиком""
|	КОНЕЦ КАК ВидДоговора,
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ КАК РасчетыВУсловныхЕдиницах
|ПОМЕСТИТЬ ДанныеОбъектовРасчетов
|ИЗ
|	Документ.ПередачаТоваровМеждуОрганизациями КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ОбъектыРасчетов.Ссылка,
|	""СКомитентом"",
|	ВЫБОР
|		КОГДА ОбъектыРасчетов.Валюта &lt;&gt; &amp;ВалютаРег
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ КАК РасчетыВУсловныхЕдиницах
|ИЗ
|	Документ.ОтчетПоКомиссииМеждуОрганизациями КАК ОбъектыРасчетов
|ГДЕ
|	ОбъектыРасчетов.Ссылка В
|			(ВЫБРАТЬ
|				ТабРасчетов.РасчетныйДокумент
|			ИЗ
|				ТабРасчетов КАК ТабРасчетов)
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ТабРасчетов.Организация,
|	ТабРасчетов.ВалютаВзаиморасчетов КАК Валюта,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.ВидДоговора, ""СПокупателем"") КАК ВидДоговора,
|	ЕСТЬNULL(ДанныеОбъектовРасчетов.РасчетыВУсловныхЕдиницах, ЛОЖЬ) КАК РасчетыВУсловныхЕдиницах,
|	ВЫБОР
|		КОГДА ЕСТЬNULL(ДанныеОбъектовРасчетов.РасчетыВУсловныхЕдиницах, ЛОЖЬ)
|			ТОГДА ""60.31""
|		ИНАЧЕ ВЫБОР
|				КОГДА ТабРасчетов.ВалютаВзаиморасчетов = &amp;ВалютаРег
|					ТОГДА ""60.01""
|				ИНАЧЕ ""60.21""
|			КОНЕЦ
|	КОНЕЦ КАК СчетУчета,
|	ТабРасчетов.КратностьВзаиморасчетов,
|	ТабРасчетов.КурсВзаиморасчетов,
|	ТабРасчетов.ВалютнаяСумма,
|	ТабРасчетов.ВалютнаяСумма * ВЫБОР
|		КОГДА ТабРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ВЫБОР
|					КОГДА ЕСТЬNULL(ТабРасчетов.КратностьВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КратностьРег, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсРег, 0) &gt; 0
|						ТОГДА ТабРасчетов.КурсВзаиморасчетов * ТабРасчетов.КратностьРег / (ТабРасчетов.КратностьВзаиморасчетов * ТабРасчетов.КурсРег)
|					ИНАЧЕ 0
|				КОНЕЦ
|		ИНАЧЕ 1
|	КОНЕЦ КАК Сумма,
|	ТабРасчетов.ВалютнаяСумма * ВЫБОР
|		КОГДА ТабРасчетов.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|			ТОГДА ВЫБОР
|					КОГДА ЕСТЬNULL(ТабРасчетов.КратностьВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсВзаиморасчетов, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КратностьРег, 0) &gt; 0
|							И ЕСТЬNULL(ТабРасчетов.КурсРег, 0) &gt; 0
|						ТОГДА ТабРасчетов.КурсВзаиморасчетов * ТабРасчетов.КратностьРег / (ТабРасчетов.КратностьВзаиморасчетов * ТабРасчетов.КурсРег)
|					ИНАЧЕ 0
|				КОНЕЦ
|		ИНАЧЕ 1
|	КОНЕЦ КАК СуммаНУ,
|	ТабРасчетов.НомерРасчетногоДокумента,
|	ТабРасчетов.ДатаРасчетногоДокумента
|ИЗ
|	ТабРасчетов КАК ТабРасчетов
|		ЛЕВОЕ СОЕДИНЕНИЕ ДанныеОбъектовРасчетов КАК ДанныеОбъектовРасчетов
|		ПО ТабРасчетов.РасчетныйДокумент = ДанныеОбъектовРасчетов.Ссылка";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата", Источник.Дата);
Запрос.УстановитьПараметр("ВалютаРег", Константы.ВалютаРегламентированногоУчета.Получить());

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; Контрагент</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
										<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = ВходящиеДанные.Контрагент;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.Валюта);
Значение.Вставить("ВидДоговора",				ОбъектКоллекции.ВидДоговора);
Значение.Вставить("Владелец",					ВходящиеДанные.Контрагент);
Значение.Вставить("Организация",				ОбъектКоллекции.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах",	ОбъектКоллекции.РасчетыВУсловныхЕдиницах);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11", Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;

ВходящиеДанные.Вставить("ДоговорКонтрагента", Значение);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>10</Код>
										<Наименование> --&gt; Валюта</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; ВалютнаяСумма</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ВалютнаяСумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>9</Код>
										<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>11</Код>
										<Наименование> --&gt; Сумма</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>12</Код>
										<Наименование> --&gt; СуммаНУ</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаНУ" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; СчетУчета</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									</Свойство>
									<Свойство>
										<Код>13</Код>
										<Наименование> --&gt; Документ</Наименование>
										<Порядок>500</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Документ" Вид="Реквизит"/>
										<КодПравилаКонвертации>ДРК_ДокументРасчетовСКонтрагентом                 </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Новый Структура;
Значение.Вставить("Ссылка");
Значение.Вставить("ДатаВходящегоДокумента",	 ОбъектКоллекции.ДатаРасчетногоДокумента);
Значение.Вставить("НомерВходящегоДокумента", ОбъектКоллекции.НомерРасчетногоДокумента);
Значение.Вставить("Организация",			 ОбъектКоллекции.Организация);
Значение.Вставить("Контрагент",				 ВходящиеДанные.Контрагент);
Значение.Вставить("ВалютаДокумента",		 ОбъектКоллекции.Валюта);
Значение.Вставить("ДоговорКонтрагента",		 ВходящиеДанные.ДоговорКонтрагента);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>31</Код>
									<Наименование>Организация --&gt;</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Группа Отключить="true">
									<Код>23</Код>
									<Наименование>РасчетыСПартнерами --&gt;</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="РасчетыСПартнерами" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>27</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>28</Код>
										<Наименование>Контрагент --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>29</Код>
										<Наименование>Партнер --&gt;</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>30</Код>
										<Наименование>Сумма --&gt;</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>26</Код>
										<Наименование>ДатаРасчетногоДокумента --&gt;</Наименование>
										<Порядок>550</Порядок>
										<Источник Имя="ДатаРасчетногоДокумента" Вид="Реквизит" Тип="Дата"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>25</Код>
										<Наименование>НомерРасчетногоДокумента --&gt;</Наименование>
										<Порядок>600</Порядок>
										<Источник Имя="НомерРасчетногоДокумента" Вид="Реквизит" Тип="Строка"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>24</Код>
										<Наименование>РасчетныйДокумент --&gt;</Наименование>
										<Порядок>650</Порядок>
										<Источник Имя="РасчетныйДокумент" Вид="Реквизит"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
					</Группа>
					<Группа>
						<Код>ВзаиморасчетыСПодотчетниками</Код>
						<Наименование>ПКО для документов ввода остатков взаиморасчетов с подотчетниками</Наименование>
						<Порядок>150</Порядок>
						<Правило>
							<Код>ВНО_ЗадолженностьПодотчетников</Код>
							<Наименование>Документ: Ввод остатков</Наименование>
							<Порядок>150</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);</ПослеЗагрузки>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ВводОстатков</Источник>
							<Приемник>ДокументСсылка.ВводНачальныхОстатков</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>4</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>5</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; ОтражатьВБухгалтерскомУчете</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВБухгалтерскомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt; ОтражатьВНалоговомУчете</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВНалоговомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование> --&gt; ОтражатьПоСпециальнымРегистрам</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьПоСпециальнымРегистрам" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование> --&gt; РазделУчета</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РазделУчета" Вид="Реквизит" Тип="ПеречислениеСсылка.РазделыУчетаДляВводаОстатков"/>
									<ПередВыгрузкой>Значение = "РасчетыСПодотчетнымиЛицами";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Ответственный --&gt; Ответственный</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>8</Код>
									<Наименование>РасчетыСПодотчетниками --&gt; РасчетыСПодотчетнымиЛицами</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="РасчетыСПодотчетниками" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="РасчетыСПодотчетнымиЛицами" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>10</Код>
										<Наименование>ПодотчетноеЛицо --&gt; РаботникОрганизации</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="ПодотчетноеЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
										<Приемник Имя="РаботникОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
										<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>9</Код>
										<Наименование>Валюта --&gt; Валюта</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>11</Код>
										<Наименование>Сумма --&gt; ВалютнаяСумма</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="ВалютнаяСумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>12</Код>
										<Наименование> --&gt; Сумма</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = РаботаСКурсамиВалютУТ.ПересчитатьСуммуДокументаВВалюту(ОбъектКоллекции.Сумма, 
	ОбъектКоллекции.Валюта, Константы.ВалютаРегламентированногоУчета.Получить(), Источник.Дата);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>13</Код>
										<Наименование> --&gt; СчетУчета</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ?(ОбъектКоллекции.Валюта = Константы.ВалютаРегламентированногоУчета.Получить(), "71.01", "71.21");</ПередВыгрузкой>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ВНО_ЗадолженностьПередПодотчетниками</Код>
							<Наименование>Документ: Ввод остатков</Наименование>
							<Порядок>150</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);</ПослеЗагрузки>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ВводОстатков</Источник>
							<Приемник>ДокументСсылка.ВводНачальныхОстатков</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>4</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>5</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; ОтражатьВБухгалтерскомУчете</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВБухгалтерскомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt; ОтражатьВНалоговомУчете</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьВНалоговомУчете" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование> --&gt; ОтражатьПоСпециальнымРегистрам</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьПоСпециальнымРегистрам" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование> --&gt; РазделУчета</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РазделУчета" Вид="Реквизит" Тип="ПеречислениеСсылка.РазделыУчетаДляВводаОстатков"/>
									<ПередВыгрузкой>Значение = "РасчетыСПодотчетнымиЛицами";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Ответственный --&gt; Ответственный</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>8</Код>
									<Наименование>РасчетыСПодотчетниками --&gt; РасчетыСПодотчетнымиЛицами</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="РасчетыСПодотчетниками" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="РасчетыСПодотчетнымиЛицами" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>10</Код>
										<Наименование>ПодотчетноеЛицо --&gt; РаботникОрганизации</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="ПодотчетноеЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
										<Приемник Имя="РаботникОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
										<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>9</Код>
										<Наименование>Валюта --&gt; Валюта</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>12</Код>
										<Наименование>Сумма --&gt; ВалютнаяСумма</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="ВалютнаяСумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>11</Код>
										<Наименование> --&gt; СуммаКт</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаКт" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = РаботаСКурсамиВалютУТ.ПересчитатьСуммуДокументаВВалюту(ОбъектКоллекции.Сумма, 
	ОбъектКоллекции.Валюта, Константы.ВалютаРегламентированногоУчета.Получить(), Источник.Дата);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>13</Код>
										<Наименование> --&gt; СчетУчета</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ?(ОбъектКоллекции.Валюта = Константы.ВалютаРегламентированногоУчета.Получить(), "71.01", "71.21");</ПередВыгрузкой>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
					</Группа>
					<Правило>
						<Код>ДРК_ДокументРасчетовСКонтрагентом</Код>
						<Наименование>:</Наименование>
						<Порядок>200</Порядок>
						<ПередВыгрузкой>ЗапоминатьВыгруженные = Истина;
КлючВыгружаемыхДанных = ЗначениеВСтрокуВнутр(Источник);</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);</ПослеЗагрузки>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Приемник>ДокументСсылка.ДокументРасчетовСКонтрагентом</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование> --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<ПередВыгрузкой>Значение = Дата("00010101000001");</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование> --&gt; Организация</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование> --&gt; Контрагент</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование> --&gt; ВалютаДокумента</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<ПриВыгрузке>Если ТипЗнч(Значение) = Тип("СправочникСсылка.ДоговорыКонтрагентов") Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	ИмяПКО = "ДоговорыКонтрагентов";
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство Поиск="true">
								<Код>7</Код>
								<Наименование> --&gt; ДатаВходящегоДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>6</Код>
								<Наименование> --&gt; НомерВходящегоДокумента</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
			</Группа>
			<Группа>
				<Код>Взаиморасчеты</Код>
				<Наименование>Взаиморасчеты</Наименование>
				<Порядок>100</Порядок>
				<Правило>
					<Код>CЗ_СписаниеЗадолженности</Код>
					<Наименование>Документ: Списание задолженности</Наименование>
					<Порядок>100</Порядок>
					<ПередВыгрузкой>Если Источник.РасчетыМеждуОрганизациями Тогда
	
	ОрганизацияКонтрагента = Источник.Контрагент;
	НовыйКонтрагент		   = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	ВходящиеДанные.Вставить("КонтрагентДебитор", НовыйКонтрагент);
Иначе
	ВходящиеДанные.Вставить("КонтрагентДебитор", Источник.Контрагент);
КонецЕсли;</ПередВыгрузкой>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		
		СтатьяДоходов = ПараметрыОбъекта.Получить("СтатьяДоходов");
		Если ЗначениеЗаполнено(Объект.СчетКт) И СтатьяДоходов &lt;&gt; Неопределено Тогда
			
			// Заполняем аналитику счета доходов
			Для Каждого СтрокаВидаСубконто Из Объект.СчетКт.ВидыСубконто Цикл
				ТипЗначенияСубконто = СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
				Если ТипЗначенияСубконто.СодержитТип(ТипЗнч(СтатьяДоходов)) Тогда
					Объект["СубконтоКт" + СтрокаВидаСубконто.НомерСтроки] = СтатьяДоходов;
				КонецЕсли;
			КонецЦикла;
			
		КонецЕсли;
		
		СтатьяРасходов = ПараметрыОбъекта.Получить("СтатьяРасходов");
		Если ЗначениеЗаполнено(Объект.СчетДт) И СтатьяРасходов &lt;&gt; Неопределено  Тогда
			
			// Заполняем аналитику счета расходов	
			Для Каждого СтрокаВидаСубконто Из Объект.СчетДт.ВидыСубконто Цикл
				ТипЗначенияСубконто = СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
				Если ТипЗначенияСубконто.СодержитТип(ТипЗнч(СтатьяРасходов)) Тогда
					Объект["СубконтоДт" + СтрокаВидаСубконто.НомерСтроки] = СтатьяРасходов;
				КонецЕсли;
			КонецЦикла;
			
		КонецЕсли;
		
	КонецЕсли;
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.СписаниеЗадолженности</Источник>
					<Приемник>ДокументСсылка.КорректировкаДолга</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>3</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "С" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование> --&gt; ВалютаДокумента</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							<ПередВыгрузкой>Значение = Константы.ВалютаРегламентированногоУчета.Получить();</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование> --&gt; ВидОперации</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийКорректировкаДолга"/>
							<ПередВыгрузкой>Значение = "СписаниеЗадолженности";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование> --&gt; КонтрагентДебитор</Наименование>
							<Порядок>350</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КонтрагентДебитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование> --&gt; КратностьДокумента</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КратностьДокумента" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование> --&gt; КурсДокумента</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КурсДокумента" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование> --&gt; СчетДт</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетДт" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<ПередВыгрузкой>Значение = Источник.СтатьяРасходов.КорреспондирующийСчет;

Если Значение = "" Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование> --&gt; СчетКт</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетКт" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<ПередВыгрузкой>Значение = Источник.СтатьяДоходов.КорреспондирующийСчет;

Если Значение = "" Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа>
							<Код>12</Код>
							<Наименование>Задолженность --&gt; СуммыДолга</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="Задолженность" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="СуммыДолга" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>14</Код>
								<Наименование> --&gt; ВидЗадолженности</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыЗадолженности"/>
								<КодПравилаКонвертации>ВидыЗадолженности                                 </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = Источник.ТипЗадолженности;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>Заказ --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Заказ" Вид="Реквизит"/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) И ТипЗнч(Значение) = Тип("СправочникСсылка.ДоговорыКонтрагентов") Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				Неопределено);
	Значение.Вставить("Владелец",					ВходящиеДанные.КонтрагентДебитор);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				ОбъектКоллекции.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	Заказ = ОбъектКоллекции.Заказ;
	Если ЗначениеЗаполнено(Заказ) Тогда
		
		// Определяем тип заказа, он может быть одним из следующих
		// - ДокументСсылка.ЗаказКлиента
		// - ДокументСсылка.РеализацияТоваровУслуг
		// - ДокументСсылка.АктВыполненныхРабот
		// - ДокументСсылка.ЗаказПоставщику
		// - ДокументСсылка.ПоступлениеТоваровУслуг
		// - ДокументСсылка.ОтчетКомиссионера
		// - ДокументСсылка.ОтчетКомитенту
		// - ДокументСсылка.ОтчетКомитентуОСписании
		// - ДокументСсылка.ОтчетКомиссионераОСписании
		// - ДокументСсылка.ПередачаТоваровМеждуОрганизациями
		// - ДокументСсылка.ВозвратТоваровМеждуОрганизациями
		// - ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями
		
		ТипЗаказа = ТипЗнч(Заказ);
		
		Соглашение = Неопределено;
		Если Заказ.Метаданные().Реквизиты.Найти("Соглашение") &lt;&gt; Неопределено Тогда
			
			Соглашение = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Заказ, "Соглашение");
			Если ТипЗнч(Соглашение) = Тип("СправочникСсылка.СоглашенияСПоставщиками") Тогда
				Значение.СоглашениеСПоставщикомУТ11 = Соглашение;
			ИначеЕсли ТипЗнч(Соглашение) = Тип("СправочникСсылка.СоглашенияСКлиентами") Тогда
				Значение.СоглашениеСКлиентомУТ11 = Соглашение;
			КонецЕсли;
			
			// Для продолжения анализа операции, необходимо определить вид договора
			Значение.ВидДоговора = ВзаиморасчетыСервер.ВидДоговораКонтрагента(ОбъектКоллекции.Заказ, Соглашение, Неопределено);
			Если НЕ ЗначениеЗаполнено(Значение.ВидДоговора) Тогда
				Значение.ВидДоговора = ?(ОбъектКоллекции.ТипРасчетов = Перечисления.ТипыРасчетовСПартнерами.РасчетыСПоставщиком, "СПоставщиком", "СПокупателем");
			КонецЕсли;
		КонецЕсли;
		
		Если ТипЗнч(Заказ) = Тип("ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями") Тогда
			Значение.ВидДоговора = ?(ОбъектКоллекции.ТипРасчетов = Перечисления.ТипыРасчетовСПартнерами.РасчетыСПоставщиком, "СКомитентом", "СКомиссионером");
		КонецЕсли;
		
		// Для продолжения анализа операции, необходимо определить вид договора
		Если НЕ ЗначениеЗаполнено(Значение.ВидДоговора) Тогда
			Значение.ВидДоговора = ?(ОбъектКоллекции.ТипРасчетов = Перечисления.ТипыРасчетовСПартнерами.РасчетыСПоставщиком, "СПоставщиком", "СПокупателем");
		КонецЕсли;
		
		Если Значение.ВидДоговора = "СКомитентом" ИЛИ Значение.ВидДоговора = "СКомиссионером" Тогда
			// Договора по комиссии выгружаются без разделения по сделкам и заказам и всегда не в у.е.
			Значение.РасчетыВУсловныхЕдиницах = Ложь;
		Иначе
			
			Если ЗначениеЗаполнено(Соглашение) Тогда
				
				Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Соглашение);
				
			ИначеЕсли ТипЗаказа = Тип("ДокументСсылка.РеализацияТоваровУслуг") ИЛИ ТипЗаказа = Тип("ДокументСсылка.ПоступлениеТоваровУслуг") Тогда
				
				ДанныеЗаказа = ОбщегоНазначения.ПолучитьЗначенияРеквизитов(Заказ, "Валюта,ВалютаВзаиморасчетов");
				Значение.РасчетыВУсловныхЕдиницах = ДанныеЗаказа.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И ДанныеЗаказа.Валюта &lt;&gt; ДанныеЗаказа.ВалютаВзаиморасчетов;
			Иначе
				Значение.РасчетыВУсловныхЕдиницах = Ложь;
			КонецЕсли;
			
			Если Заказ.Метаданные().Реквизиты.Найти("Сделка") &lt;&gt; Неопределено Тогда
				Значение.СделкаСКлиентомУТ11 = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Заказ, "Сделка");
			КонецЕсли;
			
			// Разделение по заказу идет, если в качестве заказа указан заказ клиента
			Если ТипЗаказа = Тип("ДокументСсылка.ЗаказКлиента") Тогда
				Значение.ЗаказКлиентаУТ11 = Заказ;
			КонецЕсли;
			
		КонецЕсли;
		
	Иначе
		Значение.ВидДоговора			  = ?(ОбъектКоллекции.ТипРасчетов = Перечисления.ТипыРасчетовСПартнерами.РасчетыСПоставщиком, "СПоставщиком", "СПокупателем");
		Значение.РасчетыВУсловныхЕдиницах = Ложь;
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>Сумма --&gt; Сумма</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = РаботаСКурсамиВалютУТ.ПересчитатьСуммуДокументаВВалюту(ОбъектКоллекции.Сумма, 
																 ОбъектКоллекции.ВалютаВзаиморасчетов,
																 Константы.ВалютаРегламентированногоУчета.Получить(),
																 Источник.Дата);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>Сумма --&gt; СуммаВзаиморасчетов</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>27</Код>
								<Наименование>Партнер --&gt;</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>28</Код>
								<Наименование>ТипРасчетов --&gt;</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="ТипРасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыРасчетовСПартнерами"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Свойство>
							<Код>20</Код>
							<Наименование>СтатьяДоходов --&gt;</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="СтатьяДоходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиДоходов"/>
							<Приемник Имя="" Вид=""/>
							<КодПравилаКонвертации>СтатьиДоходовВПрочиеДоходыИРасходы                </КодПравилаКонвертации>
							<ИмяПараметраДляПередачи>СтатьяДоходов</ИмяПараметраДляПередачи>
							<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	Пусто = НЕ ЗначениеЗаполнено(ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет"));
Иначе
	Пусто = Истина;
КонецЕсли;</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>СтатьяРасходов --&gt;</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="СтатьяРасходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиРасходов"/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СтатьяРасходов</ИмяПараметраДляПередачи>
							<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	
	КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет");
	Если ЗначениеЗаполнено(КоррСчет) Тогда
		ИмяПКО = ?(Найти(КоррСчет, "91.02") &gt; 0, "СтатьиРасходовВПрочиеДоходыИРасходы", "СтатьиРасходовВСтатьиЗатрат");
	Иначе
		Пусто = Истина;
	КонецЕсли;
	
Иначе
	Пусто = Истина;	
КонецЕсли;</ПриВыгрузке>
						</Свойство>
						<Свойство Отключить="true">
							<Код>24</Код>
							<Наименование>ТипЗадолженности --&gt;</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="ТипЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыЗадолженности"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ВЗ_ВзаимозачетЗадолженностиНашаОрганизация</Код>
					<Наименование>Документ: Взаимозачет задолженности</Наименование>
					<Порядок>150</Порядок>
					<ПередВыгрузкой>// Вычислим значения реквизитов "КонтрагентДебитор" и "КонтрагентКредитор"
Если Источник.РасчетыМеждуОрганизациямиДебитор Тогда
	
	ОрганизацияКонтрагента = Источник.КонтрагентДебитор;
	НовыйКонтрагент		   = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	ВходящиеДанные.Вставить("КонтрагентДебитор", НовыйКонтрагент);
Иначе
	ВходящиеДанные.Вставить("КонтрагентДебитор", Источник.КонтрагентДебитор);
КонецЕсли;

Если Источник.РасчетыМеждуОрганизациямиКредитор Тогда
	
	ОрганизацияКонтрагента = Источник.КонтрагентКредитор;
	НовыйКонтрагент		   = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	ВходящиеДанные.Вставить("КонтрагентКредитор", НовыйКонтрагент);
Иначе
	ВходящиеДанные.Вставить("КонтрагентКредитор", Источник.КонтрагентКредитор);
КонецЕсли;</ПередВыгрузкой>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ВзаимозачетЗадолженности</Источник>
					<Приемник>ДокументСсылка.КорректировкаДолга</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>5</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>6</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "В" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование> --&gt; ВидОперации</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийКорректировкаДолга"/>
							<ПередВыгрузкой>Значение = "ПроведениеВзаимозачета";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование> --&gt; КонтрагентДебитор</Наименование>
							<Порядок>350</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КонтрагентДебитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование> --&gt; КонтрагентКредитор</Наименование>
							<Порядок>400</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КонтрагентКредитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>Валюта --&gt; КратностьДокумента</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КратностьДокумента" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Валюта --&gt; КурсДокумента</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КурсДокумента" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа>
							<Код>9</Код>
							<Наименование> --&gt; СуммыДолга</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммыДолга" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>Запрос = Новый Запрос("ВЫБРАТЬ
|	ДебиторскаяЗадолженность.Сумма,
|	ДебиторскаяЗадолженность.СуммаВзаиморасчетов,
|	ДебиторскаяЗадолженность.ВалютаВзаиморасчетов,
|	""Дебиторская"" КАК ВидЗадолженности,
|	НЕОПРЕДЕЛЕНО КАК ДоговорКонтрагента,
|	ВЫБОР
|		КОГДА ДебиторскаяЗадолженность.Ссылка.РасчетыМеждуОрганизациямиДебитор
|			ТОГДА НЕОПРЕДЕЛЕНО
|		ИНАЧЕ ДебиторскаяЗадолженность.Партнер
|	КОНЕЦ КАК Партнер,
|	ДебиторскаяЗадолженность.Заказ,
|	ДебиторскаяЗадолженность.ТипРасчетов
|ИЗ
|	Документ.ВзаимозачетЗадолженности.ДебиторскаяЗадолженность КАК ДебиторскаяЗадолженность
|ГДЕ
|	ДебиторскаяЗадолженность.Ссылка = &amp;Ссылка
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	КредиторскаяЗадолженность.Сумма,
|	КредиторскаяЗадолженность.СуммаВзаиморасчетов,
|	КредиторскаяЗадолженность.ВалютаВзаиморасчетов,
|	""Кредиторская"",
|	НЕОПРЕДЕЛЕНО,
|	ВЫБОР
|		КОГДА КредиторскаяЗадолженность.Ссылка.РасчетыМеждуОрганизациямиКредитор
|			ТОГДА НЕОПРЕДЕЛЕНО
|		ИНАЧЕ КредиторскаяЗадолженность.Партнер
|	КОНЕЦ,
|	КредиторскаяЗадолженность.Заказ,
|	КредиторскаяЗадолженность.ТипРасчетов
|ИЗ
|	Документ.ВзаимозачетЗадолженности.КредиторскаяЗадолженность КАК КредиторскаяЗадолженность
|ГДЕ
|	КредиторскаяЗадолженность.Ссылка = &amp;Ссылка");

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>14</Код>
								<Наименование> --&gt; ВидЗадолженности</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыЗадолженности"/>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(ОбъектКоллекции.Заказ) И ТипЗнч(ОбъектКоллекции.Заказ) = Тип("СправочникСсылка.ДоговорыКонтрагентов") Тогда
	Значение = ОбъектКоллекции.Заказ;
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				Неопределено);
	Значение.Вставить("Владелец",					Неопределено);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				ОбъектКоллекции.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	Значение.Владелец = ?(ОбъектКоллекции.ВидЗадолженности = "Дебиторская", ВходящиеДанные.КонтрагентДебитор, ВходящиеДанные.КонтрагентКредитор);
	
	Заказ = ОбъектКоллекции.Заказ;
	Если ЗначениеЗаполнено(Заказ) Тогда
		
		// Определяем тип заказа, он может быть одним из следующих
		// - ДокументСсылка.ЗаказКлиента
		// - ДокументСсылка.РеализацияТоваровУслуг
		// - ДокументСсылка.АктВыполненныхРабот
		// - ДокументСсылка.ЗаказПоставщику
		// - ДокументСсылка.ПоступлениеТоваровУслуг
		// - ДокументСсылка.ОтчетКомиссионера
		// - ДокументСсылка.ОтчетКомитенту
		// - ДокументСсылка.ОтчетКомитентуОСписании
		// - ДокументСсылка.ОтчетКомиссионераОСписании
		// - ДокументСсылка.ПередачаТоваровМеждуОрганизациями
		// - ДокументСсылка.ВозвратТоваровМеждуОрганизациями
		// - ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями
		
		ТипЗаказа = ТипЗнч(Заказ);
		
		Соглашение = Неопределено;
		Если Заказ.Метаданные().Реквизиты.Найти("Соглашение") &lt;&gt; Неопределено Тогда
			
			Соглашение = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Заказ, "Соглашение");
			Если ТипЗнч(Соглашение) = Тип("СправочникСсылка.СоглашенияСПоставщиками") Тогда
				Значение.СоглашениеСПоставщикомУТ11 = Соглашение;
			ИначеЕсли ТипЗнч(Соглашение) = Тип("СправочникСсылка.СоглашенияСКлиентами") Тогда
				Значение.СоглашениеСКлиентомУТ11 = Соглашение;
			КонецЕсли;
			
			Значение.ВидДоговора = ВзаиморасчетыСервер.ВидДоговораКонтрагента(ОбъектКоллекции.Заказ, Соглашение, Неопределено);
		КонецЕсли;
		
		Если ТипЗнч(Заказ) = Тип("ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями") Тогда
			Значение.ВидДоговора = ?(ОбъектКоллекции.ТипРасчетов = Перечисления.ТипыРасчетовСПартнерами.РасчетыСПоставщиком, "СКомитентом", "СКомиссионером");
		КонецЕсли;
		
		// Для продолжения анализа операции, необходимо определить вид договора
		Если НЕ ЗначениеЗаполнено(Значение.ВидДоговора) Тогда
			Значение.ВидДоговора = ?(ОбъектКоллекции.ТипРасчетов = Перечисления.ТипыРасчетовСПартнерами.РасчетыСПоставщиком, "СПоставщиком", "СПокупателем");
		КонецЕсли;
		
		Если Значение.ВидДоговора = "СКомитентом" ИЛИ Значение.ВидДоговора = "СКомиссионером" Тогда
			// Договора по комиссии выгружаются без разделения по сделкам и заказам и всегда не в у.е.
			Значение.РасчетыВУсловныхЕдиницах = Ложь;
		Иначе
			
			Если ЗначениеЗаполнено(Соглашение) Тогда
				Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Соглашение);
			КонецЕсли;
			
			Если Заказ.Метаданные().Реквизиты.Найти("Сделка") &lt;&gt; Неопределено Тогда
				Значение.СделкаСКлиентомУТ11 = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Заказ, "Сделка");
			КонецЕсли;
			
			// Разделение по заказу идет, если в качестве заказа указан заказ клиента
			Если ТипЗаказа = Тип("ДокументСсылка.ЗаказКлиента") Тогда
				Значение.ЗаказКлиентаУТ11 = Заказ;
			КонецЕсли;
			
		КонецЕсли;
		
	Иначе
		Значение.ВидДоговора = ?(ОбъектКоллекции.ТипРасчетов = Перечисления.ТипыРасчетовСПартнерами.РасчетыСПоставщиком, "СПоставщиком", "СПокупателем");
	КонецЕсли;
	
	Если Значение.РасчетыВУсловныхЕдиницах = Неопределено Тогда
		Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ОбъектКоллекции.ВалютаВзаиморасчетов;
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование> --&gt; Сумма</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование> --&gt; СуммаВзаиморасчетов</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>23</Код>
							<Наименование>ДебиторскаяЗадолженность --&gt;</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="ДебиторскаяЗадолженность" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>24</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>25</Код>
								<Наименование>Заказ --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Заказ" Вид="Реквизит"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>27</Код>
								<Наименование>Сумма --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>28</Код>
								<Наименование>СуммаВзаиморасчетов --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>36</Код>
								<Наименование>Партнер --&gt;</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>37</Код>
								<Наименование>ТипРасчетов --&gt;</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ТипРасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыРасчетовСПартнерами"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>29</Код>
							<Наименование>КредиторскаяЗадолженность --&gt;</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="КредиторскаяЗадолженность" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>30</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>31</Код>
								<Наименование>Заказ --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Заказ" Вид="Реквизит"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>33</Код>
								<Наименование>Сумма --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>34</Код>
								<Наименование>СуммаВзаиморасчетов --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>38</Код>
								<Наименование>Партнер --&gt;</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>39</Код>
								<Наименование>ТипРасчетов --&gt;</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ТипРасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыРасчетовСПартнерами"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Свойство Отключить="true">
							<Код>40</Код>
							<Наименование>КонтрагентДебитор --&gt;</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="КонтрагентДебитор" Вид="Реквизит"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>41</Код>
							<Наименование>КонтрагентКредитор --&gt;</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="КонтрагентКредитор" Вид="Реквизит"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ВЗ_ВзаимозачетЗадолженностиОрганизацияКредитор</Код>
					<Наименование>Документ: Взаимозачет задолженности</Наименование>
					<Порядок>200</Порядок>
					<ПередВыгрузкой>// Вычислим значения реквизитов "КонтрагентДебитор" и "КонтрагентКредитор"
ОрганизацияКонтрагента = Источник.Организация;
НовыйКонтрагент		   = Неопределено;
Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);

ВходящиеДанные.Вставить("КонтрагентДебитор", НовыйКонтрагент);

Если Источник.РасчетыМеждуОрганизациямиДебитор Тогда
	
	ОрганизацияКонтрагента = Источник.КонтрагентДебитор;
	НовыйКонтрагент		   = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	ВходящиеДанные.Вставить("КонтрагентКредитор", НовыйКонтрагент);
Иначе
	ВходящиеДанные.Вставить("КонтрагентКредитор", Источник.КонтрагентДебитор);
КонецЕсли;</ПередВыгрузкой>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	СчетаУчета = БухгалтерскийУчетРасчетовСКонтрагентами.ПолучитьСчетаРасчетовСКонтрагентом(Объект.Организация, Объект.КонтрагентКредитор, Объект.ДоговорКонтрагента);
	
	Если Объект.ДоговорКонтрагента.ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СПоставщиком Тогда
		Объект.СчетДт = СчетаУчета.СчетРасчетов;
		Объект.СчетКт = СчетаУчета.СчетАвансов;
	ИначеЕсли Объект.ДоговорКонтрагента.ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СПокупателем 
		или Объект.ДоговорКонтрагента.ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СКомиссионером 
		Тогда
		Объект.СчетДт = СчетаУчета.СчетАвансовПокупателя;
		Объект.СчетКт = СчетаУчета.СчетРасчетовПокупателя;
	ИначеЕсли Объект.ДоговорКонтрагента.ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СКомитентом Тогда
		Объект.СчетДт = СчетаУчета.СчетРасчетовСКомитентом;
		Объект.СчетКт = СчетаУчета.СчетРасчетовСКомитентом;
	КонецЕсли;
	
КонецЕсли;</ПослеЗагрузки>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ВзаимозачетЗадолженности</Источник>
					<Приемник>ДокументСсылка.КорректировкаДолга</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>5</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>6</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "ВК" + Сред(Источник.Номер, 8);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>КонтрагентКредитор --&gt; Организация</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="КонтрагентКредитор" Вид="Реквизит"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование> --&gt; ВидОперации</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийКорректировкаДолга"/>
							<ПередВыгрузкой>Значение = "ПереносЗадолженности";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование> --&gt; КонтрагентДебитор</Наименование>
							<Порядок>350</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КонтрагентДебитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование> --&gt; КонтрагентКредитор</Наименование>
							<Порядок>400</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КонтрагентКредитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование> --&gt; ДоговорКонтрагента</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
							<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Неопределено);
Значение.Вставить("ВидДоговора",				"СПокупателем");
Значение.Вставить("Владелец",					ВходящиеДанные.КонтрагентКредитор);
Значение.Вставить("Организация",				Источник.КонтрагентКредитор);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Значение.ВалютаВзаиморасчетов = Источник.ДебиторскаяЗадолженность[0].ВалютаВзаиморасчетов;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Валюта --&gt; КратностьДокумента</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КратностьДокумента" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Валюта --&gt; КурсДокумента</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КурсДокумента" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа>
							<Код>9</Код>
							<Наименование> --&gt; СуммыДолга</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммыДолга" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>Запрос = Новый Запрос("ВЫБРАТЬ
|	КредиторскаяЗадолженность.Сумма,
|	КредиторскаяЗадолженность.СуммаВзаиморасчетов,
|	КредиторскаяЗадолженность.ВалютаВзаиморасчетов,
|	""Дебиторская"" КАК ВидЗадолженности,
|	Неопределено КАК ДоговорКонтрагента,
|	КредиторскаяЗадолженность.Заказ,
|	КредиторскаяЗадолженность.ТипРасчетов
|ИЗ
|	Документ.ВзаимозачетЗадолженности.КредиторскаяЗадолженность КАК КредиторскаяЗадолженность
|ГДЕ
|	КредиторскаяЗадолженность.Ссылка = &amp;Ссылка");

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>11</Код>
								<Наименование> --&gt; ВидЗадолженности</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыЗадолженности"/>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.ВалютаВзаиморасчетов);
Значение.Вставить("ВидДоговора",				Неопределено);
Значение.Вставить("Владелец",					ВходящиеДанные.КонтрагентДебитор);
Значение.Вставить("Организация",				Источник.КонтрагентКредитор);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Заказ = ОбъектКоллекции.Заказ;
Если ЗначениеЗаполнено(Заказ) Тогда
	
	// Определяем тип заказа, он может быть одним из следующих
	// - ДокументСсылка.ПередачаТоваровМеждуОрганизациями
	// - ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями
	
	ТипЗаказа = ТипЗнч(Заказ);
	
	Если ТипЗнч(Заказ) = Тип("ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями") Тогда
		Значение.ВидДоговора = ?(ОбъектКоллекции.ТипРасчетов = Перечисления.ТипыРасчетовСПартнерами.РасчетыСПоставщиком, "СКомиссионером", "СКомитентом");
	КонецЕсли;
		
	// Для продолжения анализа операции, необходимо определить вид договора
	Если НЕ ЗначениеЗаполнено(Значение.ВидДоговора) Тогда
		Значение.ВидДоговора = ?(ОбъектКоллекции.ТипРасчетов = Перечисления.ТипыРасчетовСПартнерами.РасчетыСПоставщиком, "СПокупателем", "СПоставщиком");
	КонецЕсли;
	
	Если Значение.ВидДоговора = "СКомитентом" ИЛИ Значение.ВидДоговора = "СКомиссионером" Тогда
		// Договора по комиссии выгружаются без разделения по сделкам и заказам и всегда не в у.е.
		Значение.РасчетыВУсловныхЕдиницах = Ложь;
	КонецЕсли;
	
Иначе
	Значение.ВидДоговора = ?(ОбъектКоллекции.ТипРасчетов = Перечисления.ТипыРасчетовСПартнерами.РасчетыСПоставщиком, "СПокупателем", "СПоставщиком");
КонецЕсли;

Если Значение.РасчетыВУсловныхЕдиницах = Неопределено Тогда
	Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ОбъектКоллекции.ВалютаВзаиморасчетов;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование> --&gt; Сумма</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование> --&gt; СуммаВзаиморасчетов</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>19</Код>
							<Наименование>ДебиторскаяЗадолженность --&gt;</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="ДебиторскаяЗадолженность" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>20</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>26</Код>
								<Наименование>Заказ --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Заказ" Вид="Реквизит"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>22</Код>
								<Наименование> --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>23</Код>
								<Наименование>Сумма --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>21</Код>
								<Наименование>СуммаВзаиморасчетов --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>25</Код>
								<Наименование>Партнер --&gt;</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>24</Код>
								<Наименование>ТипРасчетов --&gt;</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ТипРасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыРасчетовСПартнерами"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>27</Код>
							<Наименование>КредиторскаяЗадолженность --&gt;</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="КредиторскаяЗадолженность" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>31</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>28</Код>
								<Наименование>Заказ --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Заказ" Вид="Реквизит"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>29</Код>
								<Наименование> --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>30</Код>
								<Наименование>Сумма --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>34</Код>
								<Наименование>СуммаВзаиморасчетов --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>32</Код>
								<Наименование>Партнер --&gt;</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>33</Код>
								<Наименование>ТипРасчетов --&gt;</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ТипРасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыРасчетовСПартнерами"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Свойство Отключить="true">
							<Код>36</Код>
							<Наименование>КонтрагентДебитор --&gt;</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="КонтрагентДебитор" Вид="Реквизит"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>37</Код>
							<Наименование>Организация --&gt;</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ВЗ_ВзаимозачетЗадолженностиОрганизацияДебитор</Код>
					<Наименование>Документ: Взаимозачет задолженности</Наименование>
					<Порядок>250</Порядок>
					<ПередВыгрузкой>// Вычислим значения реквизитов "КонтрагентДебитор" и "КонтрагентКредитор"
ОрганизацияКонтрагента = Источник.Организация;
НовыйКонтрагент		   = Неопределено;
Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);

ВходящиеДанные.Вставить("КонтрагентДебитор", НовыйКонтрагент);

Если Источник.РасчетыМеждуОрганизациямиКредитор Тогда
	
	ОрганизацияКонтрагента = Источник.КонтрагентКредитор;
	НовыйКонтрагент		   = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	ВходящиеДанные.Вставить("КонтрагентКредитор", НовыйКонтрагент);
Иначе
	ВходящиеДанные.Вставить("КонтрагентКредитор", Источник.КонтрагентКредитор);
КонецЕсли;</ПередВыгрузкой>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	СчетаУчета = БухгалтерскийУчетРасчетовСКонтрагентами.ПолучитьСчетаРасчетовСКонтрагентом(Объект.Организация, Объект.КонтрагентКредитор, Объект.ДоговорКонтрагента);
	
	Если Объект.ДоговорКонтрагента.ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СПоставщиком Тогда
		Объект.СчетДт = СчетаУчета.СчетРасчетов;
		Объект.СчетКт = СчетаУчета.СчетАвансов;
	ИначеЕсли Объект.ДоговорКонтрагента.ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СПокупателем 
		или Объект.ДоговорКонтрагента.ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СКомиссионером 
		Тогда
		Объект.СчетДт = СчетаУчета.СчетАвансовПокупателя;
		Объект.СчетКт = СчетаУчета.СчетРасчетовПокупателя;
	ИначеЕсли Объект.ДоговорКонтрагента.ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СКомитентом Тогда
		Объект.СчетДт = СчетаУчета.СчетРасчетовСКомитентом;
		Объект.СчетКт = СчетаУчета.СчетРасчетовСКомитентом;
	КонецЕсли;
	
КонецЕсли;</ПослеЗагрузки>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ВзаимозачетЗадолженности</Источник>
					<Приемник>ДокументСсылка.КорректировкаДолга</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>5</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>6</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "ВД" + Сред(Источник.Номер, 8);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>КонтрагентДебитор --&gt; Организация</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="КонтрагентДебитор" Вид="Реквизит"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование> --&gt; ВидОперации</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийКорректировкаДолга"/>
							<ПередВыгрузкой>Значение = "ПереносЗадолженности";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование> --&gt; КонтрагентДебитор</Наименование>
							<Порядок>350</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КонтрагентДебитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование> --&gt; КонтрагентКредитор</Наименование>
							<Порядок>400</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КонтрагентКредитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование> --&gt; ДоговорКонтрагента</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
							<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Неопределено);
Значение.Вставить("ВидДоговора",				"СПоставщиком");
Значение.Вставить("Владелец",					ВходящиеДанные.КонтрагентДебитор);
Значение.Вставить("Организация",				Источник.КонтрагентДебитор);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Значение.ВалютаВзаиморасчетов = Источник.ДебиторскаяЗадолженность[0].ВалютаВзаиморасчетов;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Валюта --&gt; КратностьДокумента</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КратностьДокумента" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Валюта --&gt; КурсДокумента</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КурсДокумента" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа>
							<Код>9</Код>
							<Наименование> --&gt; СуммыДолга</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммыДолга" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>Запрос = Новый Запрос("ВЫБРАТЬ
|	ДебиторскаяЗадолженность.Сумма,
|	ДебиторскаяЗадолженность.СуммаВзаиморасчетов,
|	ДебиторскаяЗадолженность.ВалютаВзаиморасчетов,
|	""Кредиторская"" КАК ВидЗадолженности,
|	Неопределено КАК ДоговорКонтрагента,
|	ДебиторскаяЗадолженность.Заказ,
|	ДебиторскаяЗадолженность.ТипРасчетов
|ИЗ
|	Документ.ВзаимозачетЗадолженности.ДебиторскаяЗадолженность КАК ДебиторскаяЗадолженность
|ГДЕ
|	ДебиторскаяЗадолженность.Ссылка = &amp;Ссылка");

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>11</Код>
								<Наименование> --&gt; ВидЗадолженности</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыЗадолженности"/>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.ВалютаВзаиморасчетов);
Значение.Вставить("ВидДоговора",				Неопределено);
Значение.Вставить("Владелец",					ВходящиеДанные.КонтрагентДебитор);
Значение.Вставить("Организация",				Источник.КонтрагентДебитор);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Заказ = ОбъектКоллекции.Заказ;
Если ЗначениеЗаполнено(Заказ) Тогда
	
	// Определяем тип заказа, он может быть одним из следующих
	// - ДокументСсылка.ПередачаТоваровМеждуОрганизациями
	// - ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями
	
	ТипЗаказа = ТипЗнч(Заказ);
	
	Если ТипЗнч(Заказ) = Тип("ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями") Тогда
		Значение.ВидДоговора = ?(ОбъектКоллекции.ТипРасчетов = Перечисления.ТипыРасчетовСПартнерами.РасчетыСПоставщиком, "СКомиссионером", "СКомитентом");
	КонецЕсли;
	
	// Для продолжения анализа операции, необходимо определить вид договора
	Если НЕ ЗначениеЗаполнено(Значение.ВидДоговора) Тогда
		Значение.ВидДоговора = ?(ОбъектКоллекции.ТипРасчетов = Перечисления.ТипыРасчетовСПартнерами.РасчетыСПоставщиком, "СПокупателем", "СПоставщиком");
	КонецЕсли;
	
	Если Значение.ВидДоговора = "СКомитентом" ИЛИ Значение.ВидДоговора = "СКомиссионером" Тогда
		// Договора по комиссии выгружаются без разделения по сделкам и заказам и всегда не в у.е.
		Значение.РасчетыВУсловныхЕдиницах = Ложь;
	КонецЕсли;
	
Иначе
	Значение.ВидДоговора = ?(ОбъектКоллекции.ТипРасчетов = Перечисления.ТипыРасчетовСПартнерами.РасчетыСПоставщиком, "СПокупателем", "СПоставщиком");
КонецЕсли;

Если Значение.РасчетыВУсловныхЕдиницах = Неопределено Тогда
	Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ОбъектКоллекции.ВалютаВзаиморасчетов;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование> --&gt; Сумма</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование> --&gt; СуммаВзаиморасчетов</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>19</Код>
							<Наименование>ДебиторскаяЗадолженность --&gt;</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="ДебиторскаяЗадолженность" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>20</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>26</Код>
								<Наименование>Заказ --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Заказ" Вид="Реквизит"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>22</Код>
								<Наименование> --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>23</Код>
								<Наименование>Сумма --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>21</Код>
								<Наименование>СуммаВзаиморасчетов --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>25</Код>
								<Наименование>Партнер --&gt;</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>24</Код>
								<Наименование>ТипРасчетов --&gt;</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ТипРасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыРасчетовСПартнерами"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>27</Код>
							<Наименование>КредиторскаяЗадолженность --&gt;</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="КредиторскаяЗадолженность" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>31</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>28</Код>
								<Наименование>Заказ --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Заказ" Вид="Реквизит"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>29</Код>
								<Наименование> --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>30</Код>
								<Наименование>Сумма --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>34</Код>
								<Наименование>СуммаВзаиморасчетов --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>32</Код>
								<Наименование>Партнер --&gt;</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>33</Код>
								<Наименование>ТипРасчетов --&gt;</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ТипРасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыРасчетовСПартнерами"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Свойство Отключить="true">
							<Код>36</Код>
							<Наименование>КонтрагентКредитор --&gt;</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="КонтрагентКредитор" Вид="Реквизит"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>37</Код>
							<Наименование>Организация --&gt;</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ВЗ_ВзаимозачетЗадолженностиОрганизацияКредиторУдал</Код>
					<Наименование>Документ: Взаимозачет задолженности</Наименование>
					<Порядок>300</Порядок>
					<ПослеЗагрузки>Если Объект.ЭтоНовый() Тогда
	Отказ = Истина;
КонецЕсли;</ПослеЗагрузки>
					<Источник>ДокументСсылка.ВзаимозачетЗадолженности</Источник>
					<Приемник>ДокументСсылка.КорректировкаДолга</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "ВК" + Сред(Источник.Номер, 8);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование> --&gt; ПометкаУдаления</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование> --&gt; Проведен</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ВЗ_ВзаимозачетЗадолженностиОрганизацияДебиторУдал</Код>
					<Наименование>Документ: Взаимозачет задолженности</Наименование>
					<Порядок>350</Порядок>
					<ПослеЗагрузки>Если Объект.ЭтоНовый() Тогда
	Отказ = Истина;
КонецЕсли;</ПослеЗагрузки>
					<Источник>ДокументСсылка.ВзаимозачетЗадолженности</Источник>
					<Приемник>ДокументСсылка.КорректировкаДолга</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "ВД" + Сред(Источник.Номер, 8);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование> --&gt; ПометкаУдаления</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование> --&gt; Проведен</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
			</Группа>
			<Группа>
				<Код>ДвижениеДенежныхСредств</Код>
				<Наименование>ПКО для документов движения денежных средств</Наименование>
				<Порядок>150</Порядок>
				<Группа>
					<Код>ДвижениеБезналичныхДенежныхСредств</Код>
					<Наименование>ПКО для документов движения безналичных денежных средств</Наименование>
					<Порядок>200</Порядок>
					<Группа>
						<Код>ПоступлениеБезналичныхДенежныхСредств</Код>
						<Наименование>ПКО для документа "Поступление безналичных денежных средств"</Наименование>
						<Порядок>250</Порядок>
						<Правило>
							<Код>ПБДС_ПоступлениеИзДругойОрганизации</Код>
							<Наименование>Документ: Поступление безналичных денежных средств</Наименование>
							<Порядок>50</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчетПолучатель;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);

// Вычислим значение реквизита "Организация"
Значение = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.БанковскийСчетПолучатель, "Владелец");
ВходящиеДанные.Вставить("Организация", Значение);

// Вычислим значение реквизита "Контрагент"
ОрганизацияКонтрагента = Источник.Организация;
НовыйКонтрагент		   = Неопределено;
Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);

ВходящиеДанные.Вставить("Контрагент", НовыйКонтрагент);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.СписаниеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.ПоступлениеНаРасчетныйСчет</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<ПередВыгрузкой>Значение = Лев(Источник.Номер, 5) + "И" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование> --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ОплатаПокупателя";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>БанковскийСчетПолучатель --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчетПолучатель" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; Контрагент</Наименование>
									<Порядок>450</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>БанковскийСчет --&gt; СчетКонтрагента</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаКонтрагентов                       </КодПравилаКонвертации>
									<ПриВыгрузке>БанковскийСчет		= Значение;
НовыйБанковскийСчет	= Неопределено;

НовыйВладелецБанковскогоСчета = ВходящиеДанные.Контрагент;
Выполнить(Алгоритмы.СоздатьИВыгрузитьБанковскийСчет);
Значение = НовыйБанковскийСчет;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = Источник.Дата;
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>15</Код>
									<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>16</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Справочники.СтатьиДвиженияДенежныхСредств.ОплатаДенежныхСредствВДругуюОрганизацию;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование>Сумма --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование>СуммаВзаиморасчетов --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.ВалютаВзаиморасчетов);
Значение.Вставить("ВидДоговора",				Неопределено);
Значение.Вставить("Владелец",					ВходящиеДанные.Контрагент);
Значение.Вставить("Организация",				ВходящиеДанные.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Заказ = ОбъектКоллекции.Заказ;
Если ЗначениеЗаполнено(Заказ) Тогда
	
	// Определяем тип заказа, он может быть одним из следующих
	//	- ДокументСсылка.ПередачаТоваровМеждуОрганизациями
	//	- ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями
	Если ТипЗнч(Заказ) = Тип("ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями") Тогда
		Значение.ВидДоговора = ?(ВходящиеДанные.Организация = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Заказ, "Организация"), "СКомиссионером", "СКомитентом");
		Значение.РасчетыВУсловныхЕдиницах = Ложь;
	Иначе
		Значение.ВидДоговора = "СПокупателем";
	КонецЕсли;
		
Иначе
	Значение.ВидДоговора = "СПокупателем";
КонецЕсли;	

Если Значение.РасчетыВУсловныхЕдиницах = Неопределено Тогда
	Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ОбъектКоллекции.ВалютаВзаиморасчетов;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
										<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>21</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>22</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство Отключить="true">
										<Код>23</Код>
										<Наименование>Заказ --&gt;</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="Заказ" Вид="Реквизит"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>24</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>25</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>27</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПБДС_ВозвратДСИзДругойОрганизации</Код>
							<Наименование>Документ: Поступление безналичных денежных средств</Наименование>
							<Порядок>100</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчетПолучатель;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);

// Вычислим значение реквизита "Организация"
Значение = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.БанковскийСчетПолучатель, "Владелец");
ВходящиеДанные.Вставить("Организация", Значение);

// Вычислим значение реквизита "Контрагент"
ОрганизацияКонтрагента = Источник.Организация;
НовыйКонтрагент		   = Неопределено;
Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);

ВходящиеДанные.Вставить("Контрагент", НовыйКонтрагент);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.СписаниеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.ПоступлениеНаРасчетныйСчет</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<ПередВыгрузкой>Значение = Лев(Источник.Номер, 5) + "И" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование> --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ВозвратОтПоставщика";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>БанковскийСчетПолучатель --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчетПолучатель" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; Контрагент</Наименование>
									<Порядок>450</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>БанковскийСчет --&gt; СчетКонтрагента</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаКонтрагентов                       </КодПравилаКонвертации>
									<ПриВыгрузке>БанковскийСчет		= Значение;
НовыйБанковскийСчет	= Неопределено;

НовыйВладелецБанковскогоСчета = ВходящиеДанные.Контрагент;
Выполнить(Алгоритмы.СоздатьИВыгрузитьБанковскийСчет);
Значение = НовыйБанковскийСчет;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = Источник.Дата;
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>15</Код>
									<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>16</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Справочники.СтатьиДвиженияДенежныхСредств.ОплатаДенежныхСредствВДругуюОрганизацию;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование>Сумма --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование>СуммаВзаиморасчетов --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>23</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.ВалютаВзаиморасчетов);
Значение.Вставить("ВидДоговора",				"СПоставщиком");
Значение.Вставить("Владелец",					ВходящиеДанные.Контрагент);
Значение.Вставить("Организация",				ВходящиеДанные.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ОбъектКоллекции.ВалютаВзаиморасчетов;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>21</Код>
										<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
										<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>22</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство Отключить="true">
										<Код>19</Код>
										<Наименование>Заказ --&gt;</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="Заказ" Вид="Реквизит"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>24</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>25</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>27</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПБДС_ПоступлениеОтКлиентаБезналичныхДС</Код>
							<Наименование>Документ: Поступление безналичных денежных средств</Наименование>
							<Порядок>150</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПоступлениеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.ПоступлениеНаРасчетныйСчет</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>8</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>9</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ОплатаПокупателя";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>БанковскийСчетКонтрагента --&gt; СчетКонтрагента</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаКонтрагентов"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаКонтрагентов                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование>СтатьяДвиженияДенежныхСредств --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
									<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
									<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>14</Код>
									<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование>Сумма --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование>СуммаВзаиморасчетов --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование>Заказ --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Заказ" Вид="Реквизит"/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПриВыгрузке>Организация		= Источник.Организация;
Контрагент		= Источник.Контрагент;
ОбъектРасчетов	= Значение;
Выполнить(Алгоритмы.ВыгрузитьДоговорПлатежногоДокумента);</ПриВыгрузке>
									</Свойство>
									<Свойство>
										<Код>21</Код>
										<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
										<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>27</Код>
										<Наименование>Заказ --&gt; СчетНаОплату</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="Заказ" Вид="Реквизит"/>
										<Приемник Имя="СчетНаОплату" Вид="Реквизит" Тип="ДокументСсылка.СчетНаОплатуПокупателю"/>
										<КодПравилаКонвертации>СНОП_СчетНаОплатуПокупателю                       </КодПравилаКонвертации>
										<ПередВыгрузкой>Если ТипЗнч(ОбъектКоллекции.Заказ) &lt;&gt; Тип("ДокументСсылка.ЗаказКлиента") Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>25</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>26</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Группа Отключить="true">
									<Код>30</Код>
									<Наименование>РасшифровкаПлатежа --&gt;</Наименование>
									<Порядок>1000</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>31</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>32</Код>
										<Наименование>Партнер --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПБДС_ВозвратОтПоставщикаБезналичныхДС</Код>
							<Наименование>Документ: Поступление безналичных денежных средств</Наименование>
							<Порядок>200</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПоступлениеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.ПоступлениеНаРасчетныйСчет</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>15</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>16</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ВозвратОтПоставщика";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>БанковскийСчетКонтрагента --&gt; СчетКонтрагента</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаКонтрагентов"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаФизическихЛиц                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование>СтатьяДвиженияДенежныхСредств --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
									<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
									<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>1</Код>
									<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>2</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>22</Код>
										<Наименование>Сумма --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>3</Код>
										<Наименование>СуммаВзаиморасчетов --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>4</Код>
										<Наименование>Заказ --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Заказ" Вид="Реквизит"/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПриВыгрузке>Организация		= Источник.Организация;
Контрагент		= Источник.Контрагент;
ОбъектРасчетов	= Значение;
Выполнить(Алгоритмы.ВыгрузитьДоговорПлатежногоДокумента);</ПриВыгрузке>
									</Свойство>
									<Свойство>
										<Код>7</Код>
										<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
										<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>5</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>6</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>25</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>26</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПБДС_ПрочиеРасчетыСКонтрагентами</Код>
							<Наименование>Документ: Поступление безналичных денежных средств</Наименование>
							<Порядок>250</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПоступлениеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.ПоступлениеНаРасчетныйСчет</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ПрочиеРасчетыСКонтрагентами";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование> --&gt; ДоговорКонтрагента</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
									<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
									<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"Прочее");
Значение.Вставить("Владелец",					Источник.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>БанковскийСчетКонтрагента --&gt; СчетКонтрагента</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаКонтрагентов"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаКонтрагентов                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>17</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("ДоговорКонтрагента");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СчетУчетаРасчетовСКонтрагентом");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>21</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"Прочее");
Значение.Вставить("Владелец",					Источник.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>22</Код>
										<Наименование>СуммаДокумента --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>23</Код>
										<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>24</Код>
										<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ВходящиеДанные.Счет;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>25</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>26</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПБДС_ПоступленияОтПродажиИностраннойВалюты</Код>
							<Наименование>Документ: Поступление безналичных денежных средств</Наименование>
							<Порядок>300</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПоступлениеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.ПоступлениеНаРасчетныйСчет</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ПоступленияОтПродажиИностраннойВалюты";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>БанковскийСчетКонтрагента --&gt; СчетКонтрагента</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаКонтрагентов"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаКонтрагентов                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование> --&gt; ОтражатьРазницуВКурсеВСоставеОперационныхРасходов</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьРазницуВКурсеВСоставеОперационныхРасходов" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = "Истина";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>36</Код>
									<Наименование> --&gt; КурсНаДатуПриобретенияРеализацииВалюты</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КурсНаДатуПриобретенияРеализацииВалюты" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.ВалютаКонвертации, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>32</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>19</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СчетУчетаРасчетовСКонтрагентом");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>23</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>25</Код>
										<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>26</Код>
										<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ВходящиеДанные.Счет;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>34</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.ВалютаКонвертации);
Значение.Вставить("ВидДоговора",				"Прочее");
Значение.Вставить("Владелец",					Источник.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>37</Код>
										<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.КурсКонвертации;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>38</Код>
										<Наименование> --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента / ?(Источник.КурсКонвертации = 0, 1, Источник.КурсКонвертации);</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>27</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>1000</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>28</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>1050</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Группа Отключить="true">
									<Код>29</Код>
									<Наименование>РасшифровкаПлатежа --&gt;</Наименование>
									<Порядок>1100</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>31</Код>
										<Наименование>СтатьяДоходов --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СтатьяДоходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиДоходов"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>39</Код>
									<Наименование>ВалютаКонвертации --&gt;</Наименование>
									<Порядок>1150</Порядок>
									<Источник Имя="ВалютаКонвертации" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>40</Код>
									<Наименование>КурсКонвертации --&gt;</Наименование>
									<Порядок>1200</Порядок>
									<Источник Имя="КурсКонвертации" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПБДС_ПриобретениеИностраннойВалюты</Код>
							<Наименование>Документ: Поступление безналичных денежных средств</Наименование>
							<Порядок>350</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПоступлениеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.ПоступлениеНаРасчетныйСчет</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ПриобретениеИностраннойВалюты";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование> --&gt; ДоговорКонтрагента</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
									<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
									<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Константы.ВалютаРегламентированногоУчета.Получить());
Значение.Вставить("ВидДоговора",				"Прочее");
Значение.Вставить("Владелец",					Источник.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>БанковскийСчетКонтрагента --&gt; СчетКонтрагента</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаКонтрагентов"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаКонтрагентов                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование> --&gt; КурсНаДатуПриобретенияРеализацииВалюты</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КурсНаДатуПриобретенияРеализацииВалюты" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование> --&gt; ОтражатьРазницуВКурсеВСоставеОперационныхРасходов</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражатьРазницуВКурсеВСоставеОперационныхРасходов" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>32</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>13</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("ДоговорКонтрагента");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СчетУчетаРасчетовСКонтрагентом");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Константы.ВалютаРегламентированногоУчета.Получить());
Значение.Вставить("ВидДоговора",				"Прочее");
Значение.Вставить("Владелец",					Источник.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.КонвертацияВалюты Тогда
	Значение = 1;
Иначе
	СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата);
	Значение	   = СтруктураКурса.Кратность;
КонецЕсли;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.КонвертацияВалюты Тогда
	Значение = Источник.КурсКонвертации;
Иначе
	СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата);
	Значение	   = СтруктураКурса.Курс;
КонецЕсли;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование> --&gt; СуммаПлатежа</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.КонвертацияВалюты Тогда
	Значение = Источник.СуммаДокумента * Источник.КурсКонвертации;
Иначе
	Значение = РаботаСКурсамиВалютУТ.ПересчитатьСуммуДокументаВВалюту(Источник.СуммаДокумента,
		Источник.Валюта, Константы.ВалютаРегламентированногоУчета.Получить(), Источник.Дата);
КонецЕсли;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ВходящиеДанные.Счет;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>27</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>1000</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>28</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>1050</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>34</Код>
									<Наименование>КурсКонвертации --&gt;</Наименование>
									<Порядок>1100</Порядок>
									<Источник Имя="КурсКонвертации" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>35</Код>
									<Наименование>СуммаДокумента --&gt;</Наименование>
									<Порядок>1150</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Группа Отключить="true">
									<Код>29</Код>
									<Наименование>РасшифровкаПлатежа --&gt;</Наименование>
									<Порядок>1200</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>31</Код>
										<Наименование>СтатьяДоходов --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СтатьяДоходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиДоходов"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПБДС_РасчетыПоКредитамИЗаймам</Код>
							<Наименование>Документ: Поступление безналичных денежных средств</Наименование>
							<Порядок>400</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПоступлениеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.ПоступлениеНаРасчетныйСчет</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "РасчетыПоКредитамИЗаймам";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование> --&gt; ДоговорКонтрагента</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
									<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
									<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"Прочее");
Значение.Вставить("Владелец",					Источник.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>БанковскийСчетКонтрагента --&gt; СчетКонтрагента</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаКонтрагентов"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаКонтрагентов                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>32</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>17</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("ДоговорКонтрагента");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СчетУчетаРасчетовСКонтрагентом");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>21</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"Прочее");
Значение.Вставить("Владелец",					Источник.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>22</Код>
										<Наименование>СуммаДокумента --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>23</Код>
										<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>25</Код>
										<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ВходящиеДанные.Счет;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>26</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>27</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПБДС_ПрочееПоступлениеБезналичныхДС</Код>
							<Наименование>Документ: Поступление безналичных денежных средств</Наименование>
							<Порядок>450</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	Выполнить(Алгоритмы.ЗаполнитьСтатьюДоходовРасходовВПлатежномДокументе);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПоступлениеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.ПоступлениеНаРасчетныйСчет</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>14</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>15</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ПрочееПоступление";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>БанковскийСчетКонтрагента --&gt; СчетКонтрагента</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаКонтрагентов"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Значение = ВходящиеДанные.Счет;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>36</Код>
									<Наименование> --&gt; СубконтоКт1</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СубконтоКт1" Вид="Реквизит"/>
									<ПередВыгрузкой>Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.КонвертацияВалюты
	Или Найти(ВходящиеДанные.Счет, "57.02") &lt;&gt; 0
	Или Найти(ВходящиеДанные.Счет, "57.22") &lt;&gt; 0 Тогда
	Значение = Источник.Контрагент;
	ИмяПКО = "Контрагенты";
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>37</Код>
									<Наименование> --&gt; СубконтоКт2</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СубконтоКт2" Вид="Реквизит"/>
									<ПередВыгрузкой>Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.КонвертацияВалюты
	Или Найти(ВходящиеДанные.Счет, "57.02") &lt;&gt; 0
	Или Найти(ВходящиеДанные.Счет, "57.22") &lt;&gt; 0 Тогда

	ИмяПКО = "ДоговорыКонтрагентов";
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Неопределено);
	Значение.Вставить("ВидДоговора",				"Прочее");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Неопределено);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.КонвертацияВалюты Тогда
		Значение.ВалютаВзаиморасчетов = Источник.ВалютаКонвертации;
	Иначе
		Значение.ВалютаВзаиморасчетов = Константы.ВалютаРегламентированногоУчета.Получить();
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
	
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>34</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>1</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СчетУчетаРасчетовСКонтрагентом");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>2</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>4</Код>
										<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>3</Код>
										<Наименование>СуммаДокумента --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>5</Код>
										<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>6</Код>
										<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>25</Код>
										<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ВходящиеДанные.Счет;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство>
									<Код>28</Код>
									<Наименование> --&gt;</Наименование>
									<Порядок>1000</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<КодПравилаКонвертации>СтатьиДоходовВПрочиеДоходыИРасходы                </КодПравилаКонвертации>
									<ИмяПараметраДляПередачи>СтатьяДоходовРасходов</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>Значение = ВходящиеДанные.СтатьяДоходов;
Если ЗначениеЗаполнено(Значение) Тогда
	Пусто = НЕ ЗначениеЗаполнено(ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет"));
Иначе
	Пусто = Истина;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство Отключить="true">
									<Код>32</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>1050</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>33</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>1100</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство>
									<Код>35</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>1150</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа Отключить="true">
									<Код>29</Код>
									<Наименование>РасшифровкаПлатежа --&gt;</Наименование>
									<Порядок>1200</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>31</Код>
										<Наименование>СтатьяДоходов --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СтатьяДоходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиДоходов"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
					</Группа>
					<Группа>
						<Код>СписаниеБезналичныхДенежныхСредств</Код>
						<Наименование>ПКО для документа "Списание безналичных денежных средств"</Наименование>
						<Порядок>550</Порядок>
						<Правило>
							<Код>СБДС_ПеречислениеДСВДругуюОрганизацию</Код>
							<Наименование>Документ: Списание безналичных денежных средств</Наименование>
							<Порядок>50</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);

// Вычислим значение реквизита "Контрагент"
ОрганизацияКонтрагента = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.БанковскийСчетПолучатель, "Владелец");
НовыйКонтрагент		   = Неопределено;
Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);

ВходящиеДанные.Вставить("Контрагент", НовыйКонтрагент);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.СписаниеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.СписаниеСРасчетногоСчета</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ОплатаПоставщику";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; Контрагент</Наименование>
									<Порядок>450</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>БанковскийСчетПолучатель --&gt; СчетКонтрагента</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="БанковскийСчетПолучатель" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаКонтрагентов                       </КодПравилаКонвертации>
									<ПриВыгрузке>БанковскийСчет		= Значение;
НовыйБанковскийСчет	= Неопределено;

НовыйВладелецБанковскогоСчета = ВходящиеДанные.Контрагент;
Выполнить(Алгоритмы.СоздатьИВыгрузитьБанковскийСчет);
Значение = НовыйБанковскийСчет;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = Источник.Дата;
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>13</Код>
									<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Справочники.СтатьиДвиженияДенежныхСредств.ОплатаДенежныхСредствВДругуюОрганизацию;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование>СуммаВзаиморасчетов --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование>Сумма --&gt; СуммаПлатежа</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.ВалютаВзаиморасчетов);
Значение.Вставить("ВидДоговора",				Неопределено);
Значение.Вставить("Владелец",					ВходящиеДанные.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Заказ = ОбъектКоллекции.Заказ;
Если ЗначениеЗаполнено(Заказ) Тогда
	
	// Определяем тип заказа, он может быть одним из следующих
	//	- ДокументСсылка.ПередачаТоваровМеждуОрганизациями
	//	- ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями
	Если ТипЗнч(Заказ) = Тип("ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями") Тогда
		Значение.ВидДоговора = ?(Источник.Организация = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Заказ, "Организация"), "СКомиссионером", "СКомитентом");
		Значение.РасчетыВУсловныхЕдиницах = Ложь;
	Иначе
		Значение.ВидДоговора = "СПоставщиком";
	КонецЕсли;
	
Иначе
	Значение.ВидДоговора = "СПоставщиком";
КонецЕсли;	

Если Значение.РасчетыВУсловныхЕдиницах = Неопределено Тогда
	Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ОбъектКоллекции.ВалютаВзаиморасчетов;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
										<ПередВыгрузкой>Значение = "Автоматически"</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство Отключить="true">
										<Код>26</Код>
										<Наименование>Заказ --&gt;</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="Заказ" Вид="Реквизит"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>21</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>22</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>27</Код>
									<Наименование>БанковскийСчетПолучатель --&gt;</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="БанковскийСчетПолучатель" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>СБДС_ВозвратДСВДругуюОрганизацию</Код>
							<Наименование>Документ: Списание безналичных денежных средств</Наименование>
							<Порядок>100</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);

// Вычислим значение реквизита "Контрагент"
ОрганизацияКонтрагента = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.БанковскийСчетПолучатель, "Владелец");
НовыйКонтрагент		   = Неопределено;
Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);

ВходящиеДанные.Вставить("Контрагент", НовыйКонтрагент);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.СписаниеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.СписаниеСРасчетногоСчета</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ВозвратПокупателю";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; Контрагент</Наименование>
									<Порядок>450</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>БанковскийСчетПолучатель --&gt; СчетКонтрагента</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="БанковскийСчетПолучатель" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаКонтрагентов                       </КодПравилаКонвертации>
									<ПриВыгрузке>БанковскийСчет		= Значение;
НовыйБанковскийСчет	= Неопределено;

НовыйВладелецБанковскогоСчета = ВходящиеДанные.Контрагент;
Выполнить(Алгоритмы.СоздатьИВыгрузитьБанковскийСчет);
Значение = НовыйБанковскийСчет;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = Источник.Дата;
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>13</Код>
									<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Справочники.СтатьиДвиженияДенежныхСредств.ОплатаДенежныхСредствВДругуюОрганизацию;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование>СуммаВзаиморасчетов --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование>Сумма --&gt; СуммаПлатежа</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.ВалютаВзаиморасчетов);
Значение.Вставить("ВидДоговора",				"СПокупателем");
Значение.Вставить("Владелец",					ВходящиеДанные.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ОбъектКоллекции.ВалютаВзаиморасчетов;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
										<ПередВыгрузкой>Значение = "Автоматически"</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство Отключить="true">
										<Код>21</Код>
										<Наименование>Заказ --&gt;</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="Заказ" Вид="Реквизит"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>22</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>23</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>27</Код>
									<Наименование>БанковскийСчетПолучатель --&gt;</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="БанковскийСчетПолучатель" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>СБДС_ОплатаПоставщикуБезналичныеДС</Код>
							<Наименование>Документ: Списание безналичных денежных средств</Наименование>
							<Порядок>150</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.СписаниеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.СписаниеСРасчетногоСчета</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>16</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>17</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ОплатаПоставщику";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>БанковскийСчетКонтрагента --&gt; СчетКонтрагента</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаКонтрагентов"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаКонтрагентов                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = Источник.Дата;
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>1</Код>
									<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>2</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>3</Код>
										<Наименование>СуммаВзаиморасчетов --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>4</Код>
										<Наименование>Сумма --&gt; СуммаПлатежа</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>5</Код>
										<Наименование>Заказ --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Заказ" Вид="Реквизит"/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПриВыгрузке>Организация		= Источник.Организация;
Контрагент		= Источник.Контрагент;
ОбъектРасчетов	= Значение;
Выполнить(Алгоритмы.ВыгрузитьДоговорПлатежногоДокумента);</ПриВыгрузке>
									</Свойство>
									<Свойство>
										<Код>8</Код>
										<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
										<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>6</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>7</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство Отключить="true">
										<Код>31</Код>
										<Наименование>Партнер --&gt;</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>25</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>26</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>СБДС_ВозвратПокупателюБезналичныеДС</Код>
							<Наименование>Документ: Списание безналичных денежных средств</Наименование>
							<Порядок>200</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.СписаниеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.СписаниеСРасчетногоСчета</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>13</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>14</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ВозвратПокупателю";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>БанковскийСчетКонтрагента --&gt; СчетКонтрагента</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаКонтрагентов"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаКонтрагентов                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = Источник.Дата;
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>1</Код>
									<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>2</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>3</Код>
										<Наименование>СуммаВзаиморасчетов --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>4</Код>
										<Наименование>Сумма --&gt; СуммаПлатежа</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>5</Код>
										<Наименование>Заказ --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Заказ" Вид="Реквизит"/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПриВыгрузке>Организация		= Источник.Организация;
Контрагент		= Источник.Контрагент;
ОбъектРасчетов	= Значение;
Выполнить(Алгоритмы.ВыгрузитьДоговорПлатежногоДокумента);</ПриВыгрузке>
									</Свойство>
									<Свойство>
										<Код>21</Код>
										<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
										<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>6</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>7</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>24</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>25</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>СБДС_ПрочиеРасчетыСКонтрагентами</Код>
							<Наименование>Документ: Списание безналичных денежных средств</Наименование>
							<Порядок>250</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.СписаниеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.СписаниеСРасчетногоСчета</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>14</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>15</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ПрочиеРасчетыСКонтрагентами";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; ДоговорКонтрагента</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
									<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
									<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"Прочее");
Значение.Вставить("Владелец",					Источник.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>БанковскийСчетКонтрагента --&gt; СчетКонтрагента</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаКонтрагентов"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаКонтрагентов                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = Источник.Дата;
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>31</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>1</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("ДоговорКонтрагента");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СчетУчетаРасчетовСКонтрагентом");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>2</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>4</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"Прочее");
Значение.Вставить("Владелец",					Источник.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>5</Код>
										<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>6</Код>
										<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>3</Код>
										<Наименование>СуммаДокумента --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>7</Код>
										<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>8</Код>
										<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ВходящиеДанные.Счет;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>24</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>25</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Группа Отключить="true">
									<Код>26</Код>
									<Наименование>РасшифровкаПлатежа --&gt;</Наименование>
									<Порядок>1000</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>28</Код>
										<Наименование>СтатьяРасходов --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СтатьяРасходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиРасходов"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>СБДС_ПеречислениеНаДругойРСБезналичныхДС</Код>
							<Наименование>Документ: Списание безналичных денежных средств</Наименование>
							<Порядок>300</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.СписаниеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.СписаниеСРасчетногоСчета</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>11</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>12</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ПереводНаДругойСчет";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>БанковскийСчетПолучатель --&gt; СчетКонтрагента</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="БанковскийСчетПолучатель" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = Источник.Дата;
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>1</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>2</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Справочники.СтатьиДвиженияДенежныхСредств.ПеречислениеДенежныхСредствНаДругойСчет;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>3</Код>
										<Наименование>СуммаДокумента --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>4</Код>
										<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>5</Код>
										<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>21</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>22</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>СБДС_ПеречислениеНалога</Код>
							<Наименование>Документ: Списание безналичных денежных средств</Наименование>
							<Порядок>350</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Приводим тип значений субконто	
	Если ЗначениеЗаполнено(Объект.СчетУчетаРасчетовСКонтрагентом) Тогда
		
		Для Каждого СтрокаВидаСубконто Из Объект.СчетУчетаРасчетовСКонтрагентом.ВидыСубконто Цикл
			
			ТипСубконто	= СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
			Субконто	= Объект["СубконтоДт" + СтрокаВидаСубконто.НомерСтроки];
			Если ТипСубконто.ПривестиЗначение(Субконто) &lt;&gt; Субконто Тогда
				Объект["СубконтоДт" + СтрокаВидаСубконто.НомерСтроки] = ТипСубконто.ПривестиЗначение(Субконто);
			КонецЕсли;
			
		КонецЦикла;
		
	КонецЕсли;
	
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.СписаниеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.СписаниеСРасчетногоСчета</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>12</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>13</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ПеречислениеНалога";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование>БанковскийСчетКонтрагента --&gt; СчетКонтрагента</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаКонтрагентов"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаКонтрагентов                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Если Источник.РасшифровкаПлатежа.Количество() &gt; 0 Тогда
	Значение = Источник.СтатьяДвиженияДенежныхСредств.КорреспондирующийСчет;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = Источник.Дата;
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>1</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>2</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>3</Код>
										<Наименование>СуммаДокумента --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>4</Код>
										<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>5</Код>
										<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>6</Код>
										<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>26</Код>
										<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Если Источник.РасшифровкаПлатежа.Количество() &gt; 0 Тогда
	Значение = Источник.СтатьяДвиженияДенежныхСредств.КорреспондирующийСчет;
КонецЕсли;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>21</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>22</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>СБДС_ПеречислениеЗП</Код>
							<Наименование>Документ: Списание безналичных денежных средств</Наименование>
							<Порядок>400</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	Выполнить(Алгоритмы.ЗаполнитьСтатьюДоходовРасходовВПлатежномДокументе);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.СписаниеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.СписаниеСРасчетногоСчета</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>6</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>7</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ПеречислениеЗП";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>БанковскийСчетКонтрагента --&gt; СчетКонтрагента</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаКонтрагентов"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаКонтрагентов                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = Источник.Дата;
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt;</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>СтатьяДоходовРасходов</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>Значение = ВходящиеДанные.СтатьяРасходов;

Если ЗначениеЗаполнено(Значение) Тогда
	
	КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет");
	Если ЗначениеЗаполнено(КоррСчет) Тогда
		ИмяПКО = ?(Найти(КоррСчет, "91.02") &gt; 0, "СтатьиРасходовВПрочиеДоходыИРасходы", "СтатьиРасходовВСтатьиЗатрат");
	Иначе
		Пусто = Истина;
	КонецЕсли;
	
Иначе
	Пусто = Истина;	
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство Отключить="true">
									<Код>18</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>19</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Группа Отключить="true">
									<Код>16</Код>
									<Наименование>РасшифровкаПлатежа --&gt;</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>17</Код>
										<Наименование>СтатьяРасходов --&gt;</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="СтатьяРасходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиРасходов"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>СБДС_ПеречислениеПодотчетномуЛицу</Код>
							<Наименование>Документ: Списание безналичных денежных средств</Наименование>
							<Порядок>450</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.СписаниеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.СписаниеСРасчетногоСчета</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>6</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>7</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ПеречислениеПодотчетномуЛицу";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>ПодотчетноеЛицо --&gt; ФизЛицо</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="ПодотчетноеЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
									<Приемник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
									<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>ПодотчетноеЛицо --&gt; Контрагент</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="ПодотчетноеЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
									<ПередВыгрузкой>НовыйКонтрагент = Справочники.Контрагенты.ПустаяСсылка();
ФизЛицо	 = Источник.ПодотчетноеЛицо;
Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзФизЛица);
Значение = НовыйКонтрагент;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>БанковскийСчетКонтрагента --&gt; СчетКонтрагента</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаКонтрагентов"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаФизическихЛиц                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = Источник.Дата;
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>15</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>16</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование> --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>22</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>23</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>СБДС_РасчетыПоКредитамИЗаймам</Код>
							<Наименование>Документ: Списание безналичных денежных средств</Наименование>
							<Порядок>500</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.СписаниеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.СписаниеСРасчетногоСчета</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>14</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>15</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "РасчетыПоКредитамИЗаймам";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; ДоговорКонтрагента</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
									<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
									<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"Прочее");
Значение.Вставить("Владелец",					Источник.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>БанковскийСчетКонтрагента --&gt; СчетКонтрагента</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаКонтрагентов"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаКонтрагентов                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = Источник.Дата;
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>1</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("ДоговорКонтрагента");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СчетУчетаРасчетовСКонтрагентом");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>2</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>4</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"Прочее");
Значение.Вставить("Владелец",					Источник.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>5</Код>
										<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>6</Код>
										<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>3</Код>
										<Наименование>СуммаДокумента --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>7</Код>
										<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>8</Код>
										<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ВходящиеДанные.Счет;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>23</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>24</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Группа Отключить="true">
									<Код>25</Код>
									<Наименование>РасшифровкаПлатежа --&gt;</Наименование>
									<Порядок>1000</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>27</Код>
										<Наименование>СтатьяРасходов --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СтатьяРасходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиРасходов"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>СБДС_ПрочееСписаниеБезналичныхДС</Код>
							<Наименование>Документ: Списание безналичных денежных средств</Наименование>
							<Порядок>550</Порядок>
							<ПередВыгрузкой>БанковскийСчетОперации = Источник.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	Выполнить(Алгоритмы.ЗаполнитьСтатьюДоходовРасходовВПлатежномДокументе);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.СписаниеБезналичныхДенежныхСредств</Источник>
							<Приемник>ДокументСсылка.СписаниеСРасчетногоСчета</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование> --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеДенежныхСредств"/>
									<ПередВыгрузкой>Значение = "ПрочееСписание";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>БанковскийСчетКонтрагента --&gt; СчетКонтрагента</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаКонтрагентов"/>
									<Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаКонтрагентов                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Значение = ВходящиеДанные.Счет;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>34</Код>
									<Наименование> --&gt; СубконтоДт1</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СубконтоДт1" Вид="Реквизит"/>
									<ПередВыгрузкой>Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.КонвертацияВалюты
	Или Найти(ВходящиеДанные.Счет, "57.02") &lt;&gt; 0
	Или Найти(ВходящиеДанные.Счет, "57.22") &lt;&gt; 0 Тогда
	Значение = Источник.Контрагент;
	ИмяПКО = "Контрагенты";
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>35</Код>
									<Наименование> --&gt; СубконтоДт2</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СубконтоДт2" Вид="Реквизит"/>
									<ПередВыгрузкой>Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.КонвертацияВалюты
	Или Найти(ВходящиеДанные.Счет, "57.02") &lt;&gt; 0
	Или Найти(ВходящиеДанные.Счет, "57.22") &lt;&gt; 0 Тогда

	ИмяПКО = "ДоговорыКонтрагентов";
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
	Значение.Вставить("ВидДоговора",				"Прочее");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Неопределено);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	ВыгрузитьТолькоСсылку = Ложь;
	
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>31</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = Источник.Дата;
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>32</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<ПриВыгрузке>Если Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>13</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СчетУчетаРасчетовСКонтрагентом");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование>СуммаДокумента --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ВходящиеДанные.Счет;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство>
									<Код>24</Код>
									<Наименование> --&gt;</Наименование>
									<Порядок>1000</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>СтатьяДоходовРасходов</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>Значение = ВходящиеДанные.СтатьяРасходов;

Если ЗначениеЗаполнено(Значение) Тогда
	
	КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет");
	Если ЗначениеЗаполнено(КоррСчет) Тогда
		ИмяПКО = ?(Найти(КоррСчет, "91.02") &gt; 0, "СтатьиРасходовВПрочиеДоходыИРасходы", "СтатьиРасходовВСтатьиЗатрат");
	Иначе
		Пусто = Истина;
	КонецЕсли;
	
Иначе
	Пусто = Истина;	
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство Отключить="true">
									<Код>25</Код>
									<Наименование>Дата --&gt;</Наименование>
									<Порядок>1050</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>26</Код>
									<Наименование>Проведен --&gt;</Наименование>
									<Порядок>1100</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
					</Группа>
				</Группа>
				<Группа>
					<Код>ДвижениеНаличныхДенежныхСредств</Код>
					<Наименование>ПКО для документов движения наличных денежных средств</Наименование>
					<Порядок>250</Порядок>
					<Группа>
						<Код>ПриходныйКассовыйОрдер</Код>
						<Наименование>ПКО для документа "Приходный кассовый ордер"</Наименование>
						<Порядок>300</Порядок>
						<Правило>
							<Код>ПКО_ПоступлениеДСИзДругойОрганизации</Код>
							<Наименование>Документ: Приходный кассовый ордер</Наименование>
							<Порядок>50</Порядок>
							<ПередВыгрузкой>// Вычислим значение реквизита "Контрагент"
ОрганизацияКонтрагента = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.РасходныйКассовыйОрдер, "Организация");
НовыйКонтрагент		   = Неопределено;
Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);

ВходящиеДанные.Вставить("Контрагент", НовыйКонтрагент);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПриходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.ПриходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>3</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>4</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПКО"/>
									<ПередВыгрузкой>Значение = "ОплатаПокупателя";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Контрагент" Вид="Реквизит"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>ПринятоОт --&gt; ПринятоОт</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>36</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>35</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>37</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>27</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>Запрос = Новый Запрос("ВЫБРАТЬ
|	РасшифровкаПлатежа.СуммаВзаиморасчетов,
|	РасшифровкаПлатежа.ВалютаВзаиморасчетов,
|	РасшифровкаПлатежа.Заказ,
|	РасшифровкаПлатежа.Сумма КАК СуммаПлатежа
|ИЗ
|	Документ.РасходныйКассовыйОрдер.РасшифровкаПлатежа КАК РасшифровкаПлатежа
|ГДЕ
|	РасшифровкаПлатежа.Ссылка = &amp;Ссылка");
Запрос.УстановитьПараметр("Ссылка", Источник.РасходныйКассовыйОрдер);
РасшифровкаРКО	  = Запрос.Выполнить().Выгрузить();

КоллекцияОбъектов = РасшифровкаРКО.Скопировать();
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("ДоговорКонтрагента");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СпособПогашенияЗадолженности");</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>28</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Справочники.СтатьиДвиженияДенежныхСредств.ОплатаДенежныхСредствВДругуюОрганизацию;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>29</Код>
										<Наименование> --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>30</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.ВалютаВзаиморасчетов);
Значение.Вставить("ВидДоговора",				Неопределено);
Значение.Вставить("Владелец",					ВходящиеДанные.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Заказ = ОбъектКоллекции.Заказ;
Если ЗначениеЗаполнено(Заказ) Тогда
	
	// Определяем тип заказа, он может быть одним из следующих
	//	- ДокументСсылка.ПередачаТоваровМеждуОрганизациями
	//	- ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями
	Если ТипЗнч(Заказ) = Тип("ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями") Тогда
		Значение.ВидДоговора = ?(Источник.Организация = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Заказ, "Организация"), "СКомиссионером", "СКомитентом");
		Значение.РасчетыВУсловныхЕдиницах = Ложь;
	Иначе
		Значение.ВидДоговора = "СПокупателем";
	КонецЕсли;
		
Иначе
	Значение.ВидДоговора = "СПокупателем";
КонецЕсли;	

Если Значение.РасчетыВУсловныхЕдиницах = Неопределено Тогда
	Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ОбъектКоллекции.ВалютаВзаиморасчетов;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>31</Код>
										<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>32</Код>
										<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>33</Код>
										<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
										<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>34</Код>
										<Наименование> --&gt; СуммаПлатежа</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>38</Код>
									<Наименование>РасходныйКассовыйОрдер --&gt;</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="РасходныйКассовыйОрдер" Вид="Реквизит" Тип="ДокументСсылка.РасходныйКассовыйОрдер"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПКО_ВозвратДСИзДругойОрганизации</Код>
							<Наименование>Документ: Приходный кассовый ордер</Наименование>
							<Порядок>100</Порядок>
							<ПередВыгрузкой>// Вычислим значение реквизита "Контрагент"
ОрганизацияКонтрагента = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.РасходныйКассовыйОрдер, "Организация");
НовыйКонтрагент		   = Неопределено;
Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);

ВходящиеДанные.Вставить("Контрагент", НовыйКонтрагент);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПриходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.ПриходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>3</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>4</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПКО"/>
									<ПередВыгрузкой>Значение = "ВозвратОтПоставщика";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование> --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Контрагент" Вид="Реквизит"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>ПринятоОт --&gt; ПринятоОт</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>12</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>Запрос = Новый Запрос("ВЫБРАТЬ
|	РасшифровкаПлатежа.СуммаВзаиморасчетов,
|	РасшифровкаПлатежа.ВалютаВзаиморасчетов,
|	РасшифровкаПлатежа.Заказ,
|	РасшифровкаПлатежа.Сумма КАК СуммаПлатежа
|ИЗ
|	Документ.РасходныйКассовыйОрдер.РасшифровкаПлатежа КАК РасшифровкаПлатежа
|ГДЕ
|	РасшифровкаПлатежа.Ссылка = &amp;Ссылка");
Запрос.УстановитьПараметр("Ссылка", Источник.РасходныйКассовыйОрдер);
РасшифровкаРКО	  = Запрос.Выполнить().Выгрузить();

КоллекцияОбъектов = РасшифровкаРКО.Скопировать();
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("ДоговорКонтрагента");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СпособПогашенияЗадолженности");</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Справочники.СтатьиДвиженияДенежныхСредств.ОплатаДенежныхСредствВДругуюОрганизацию;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>13</Код>
										<Наименование> --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.ВалютаВзаиморасчетов);
Значение.Вставить("ВидДоговора",				"СПоставщиком");
Значение.Вставить("Владелец",					ВходящиеДанные.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ОбъектКоллекции.ВалютаВзаиморасчетов;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
										<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; СуммаПлатежа</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>23</Код>
									<Наименование>РасходныйКассовыйОрдер --&gt;</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="РасходныйКассовыйОрдер" Вид="Реквизит" Тип="ДокументСсылка.РасходныйКассовыйОрдер"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПКО_ПоступлениеДСОтКлиента</Код>
							<Наименование>Документ: Приходный кассовый ордер</Наименование>
							<Порядок>150</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПриходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.ПриходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>10</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>9</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПКО"/>
									<ПередВыгрузкой>Значение = "ОплатаПокупателя";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование>ПринятоОт --&gt; ПринятоОт</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>1</Код>
									<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>6</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>8</Код>
										<Наименование>Сумма --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>7</Код>
										<Наименование>СуммаВзаиморасчетов --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>2</Код>
										<Наименование>Заказ --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Заказ" Вид="Реквизит"/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПриВыгрузке>Организация		= Источник.Организация;
Контрагент		= Источник.Контрагент;
ОбъектРасчетов	= Значение;
Выполнить(Алгоритмы.ВыгрузитьДоговорПлатежногоДокумента);</ПриВыгрузке>
									</Свойство>
									<Свойство>
										<Код>5</Код>
										<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
										<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>3</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>4</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>24</Код>
										<Наименование>Заказ --&gt; СчетНаОплату</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="Заказ" Вид="Реквизит"/>
										<Приемник Имя="СчетНаОплату" Вид="Реквизит" Тип="ДокументСсылка.СчетНаОплатуПокупателю"/>
										<КодПравилаКонвертации>СНОП_СчетНаОплатуПокупателю                       </КодПравилаКонвертации>
										<ПередВыгрузкой>Если ТипЗнч(ОбъектКоллекции.Заказ) &lt;&gt; Тип("ДокументСсылка.ЗаказКлиента") Тогда
	Отказ = Истина;	
КонецЕсли;</ПередВыгрузкой>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПКО_ВозвратДСОтПоставщика</Код>
							<Наименование>Документ: Приходный кассовый ордер</Наименование>
							<Порядок>200</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПриходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.ПриходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПКО"/>
									<ПередВыгрузкой>Значение = "ВозвратОтПоставщика";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>ПринятоОт --&gt; ПринятоОт</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>13</Код>
									<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование>Сумма --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование>СуммаВзаиморасчетов --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование>Заказ --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Заказ" Вид="Реквизит"/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПриВыгрузке>Организация		= Источник.Организация;
Контрагент		= Источник.Контрагент;
ОбъектРасчетов	= Значение;
Выполнить(Алгоритмы.ВыгрузитьДоговорПлатежногоДокумента);</ПриВыгрузке>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
										<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПКО_ПоступлениеРозничнойВыручки</Код>
							<Наименование>Документ: Приходный кассовый ордер</Наименование>
							<Порядок>250</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Объект.ВыручкаСНТТ = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Объект.Контрагент, "ВидСклада") = Перечисления.ВидыСкладов.НеавтоматизированнаяТорговаяТочка;

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	Если Объект.ЭтоНовый() Тогда
		
		// Устанавливаем ставку НДС "Без НДС"
		Объект.РасшифровкаПлатежа[0].СтавкаНДС	= Перечисления.СтавкиНДС.БезНДС;
		Объект.РасшифровкаПлатежа[0].СуммаНДС	= 0;
		
	КонецЕсли;
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПриходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.ПриходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПКО"/>
									<ПередВыгрузкой>Значение = "РозничнаяВыручка";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>КассаККМ --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="КассаККМ" Вид="Реквизит" Тип="СправочникСсылка.КассыККМ"/>
									<Приемник Имя="Контрагент" Вид="Реквизит"/>
									<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
									<ПриВыгрузке>Значение = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "Склад");
Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>ПринятоОт --&gt; ПринятоОт</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; ВыручкаСНТТ</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВыручкаСНТТ" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Если ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.КассаККМ, "ТипКассы") = Перечисления.ТипыКассККМ.ФискальныйРегистратор Тогда
	Значение = Ложь;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>13</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("СпособПогашенияЗадолженности");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("ДоговорКонтрагента");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Справочники.СтатьиДвиженияДенежныхСредств.ПоступлениеДенежныхСредствИзКассыККМ;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование>СуммаДокумента --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПКО_ПоступлениеДСИзБанка</Код>
							<Наименование>Документ: Приходный кассовый ордер</Наименование>
							<Порядок>300</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПриходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.ПриходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>3</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПКО"/>
									<ПередВыгрузкой>Значение = "ПолучениеНаличныхВБанке";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>БанковскийСчет --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="Контрагент" Вид="Реквизит"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>ПринятоОт --&gt; ПринятоОт</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>13</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>19</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Справочники.СтатьиДвиженияДенежныхСредств.ПоступлениеДенежныхСредствИзБанка;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>21</Код>
										<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование>СуммаДокумента --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПКО_ВозвратДСОтПодотчетногоЛица</Код>
							<Наименование>Документ: Приходный кассовый ордер</Наименование>
							<Порядок>350</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПриходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.ПриходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>3</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПКО"/>
									<ПередВыгрузкой>Значение = "ВозвратОтПодотчетногоЛица";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>ПодотчетноеЛицо --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="ПодотчетноеЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
									<Приемник Имя="Контрагент" Вид="Реквизит"/>
									<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>ПринятоОт --&gt; ПринятоОт</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>13</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("СпособПогашенияЗадолженности");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("ДоговорКонтрагента");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование>СуммаДокумента --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПКО_РасчетыПоКредитамИЗаймам</Код>
							<Наименование>Документ: Приходный кассовый ордер</Наименование>
							<Порядок>400</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПриходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.ПриходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>3</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПКО"/>
									<ПередВыгрузкой>Значение = "РасчетыПоКредитамИЗаймам";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>ПринятоОт --&gt; ПринятоОт</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>14</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СчетУчетаРасчетовСКонтрагентом");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",			Источник.Валюта);
Значение.Вставить("ВидДоговора",					"Прочее");
Значение.Вставить("Владелец",						Источник.Контрагент);
Значение.Вставить("Организация",					Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 		Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",					Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",		Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",		Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",			Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",				Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",			Неопределено);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование> --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование> --&gt; СуммаПлатежа</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>21</Код>
										<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ВходящиеДанные.Счет;</ПередВыгрузкой>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПКО_ПрочееПоступлениеНаличныхДС</Код>
							<Наименование>Документ: Приходный кассовый ордер</Наименование>
							<Порядок>450</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	Выполнить(Алгоритмы.ЗаполнитьСтатьюДоходовРасходовВПлатежномДокументе);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПриходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.ПриходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПКО"/>
									<ПередВыгрузкой>Значение = "ПрочийПриход";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Значение = ВходящиеДанные.Счет;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>48</Код>
									<Наименование> --&gt; СубконтоКт1</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СубконтоКт1" Вид="Реквизит"/>
									<ПередВыгрузкой>Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.КонвертацияВалюты
	Или Найти(ВходящиеДанные.Счет, "57.02") &lt;&gt; 0
	Или Найти(ВходящиеДанные.Счет, "57.22") &lt;&gt; 0 Тогда
	Значение = Источник.Контрагент;
	ИмяПКО = "Контрагенты";
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>49</Код>
									<Наименование> --&gt; СубконтоКт2</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СубконтоКт2" Вид="Реквизит"/>
									<ПередВыгрузкой>Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.КонвертацияВалюты
	Или Найти(ВходящиеДанные.Счет, "57.02") &lt;&gt; 0
	Или Найти(ВходящиеДанные.Счет, "57.22") &lt;&gt; 0 Тогда

	ИмяПКО = "ДоговорыКонтрагентов";
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Неопределено);
	Значение.Вставить("ВидДоговора",				"Прочее");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Неопределено);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.КонвертацияВалюты Тогда
		Значение.ВалютаВзаиморасчетов = Источник.ВалютаКонвертации;
	Иначе
		Значение.ВалютаВзаиморасчетов = Константы.ВалютаРегламентированногоУчета.Получить();
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
	
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>ПринятоОт --&gt; ПринятоОт</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>31</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>11</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СчетУчетаРасчетовСКонтрагентом");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>20</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование>СуммаДокумента --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>13</Код>
										<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>14</Код>
										<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>23</Код>
										<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ВходящиеДанные.Счет;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство>
									<Код>26</Код>
									<Наименование> --&gt;</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<КодПравилаКонвертации>СтатьиДоходовВПрочиеДоходыИРасходы                </КодПравилаКонвертации>
									<ИмяПараметраДляПередачи>СтатьяДоходовРасходов</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>Значение = ВходящиеДанные.СтатьяДоходов;
Если ЗначениеЗаполнено(Значение) Тогда
	Пусто = НЕ ЗначениеЗаполнено(ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет"));
Иначе
	Пусто = Истина;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Группа Отключить="true">
									<Код>27</Код>
									<Наименование>РасшифровкаПлатежа --&gt;</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>30</Код>
										<Наименование>СтатьяДоходов --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СтатьяДоходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиДоходов"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
					</Группа>
					<Группа>
						<Код>РасходныйКассовыйОрдер</Код>
						<Наименование>ПКО для документа "Расходный кассовый ордер"</Наименование>
						<Порядок>450</Порядок>
						<Правило>
							<Код>РКО_ВыдачаДСВДругуюОрганизацию</Код>
							<Наименование>Документ: Расходный кассовый ордер</Наименование>
							<Порядок>50</Порядок>
							<ПередВыгрузкой>// Вычислим значение реквизита "Контрагент"
ОрганизацияКонтрагента = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.КассаПолучатель, "Владелец");
НовыйКонтрагент		   = Неопределено;
Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);

ВходящиеДанные.Вставить("Контрагент", НовыйКонтрагент);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.РасходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.РасходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРКО"/>
									<ПередВыгрузкой>Значение = "ОплатаПоставщику";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Контрагент" Вид="Реквизит"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Выдать --&gt; Выдать</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>ПоДокументу --&gt; ПоДокументу</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>14</Код>
									<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Справочники.СтатьиДвиженияДенежныхСредств.ОплатаДенежныхСредствВДругуюОрганизацию;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование>Сумма --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование>СуммаВзаиморасчетов --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// См. ПКО "СБДС_ПеречислениеДСВДругуюОрганизацию"

// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.ВалютаВзаиморасчетов);
Значение.Вставить("ВидДоговора",				Неопределено);
Значение.Вставить("Владелец",					ВходящиеДанные.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Заказ = ОбъектКоллекции.Заказ;
Если ЗначениеЗаполнено(Заказ) Тогда
	
	// Определяем тип заказа, он может быть одним из следующих
	//	- ДокументСсылка.ПередачаТоваровМеждуОрганизациями
	//	- ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями
	Если ТипЗнч(Заказ) = Тип("ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями") Тогда
		Значение.ВидДоговора = ?(Источник.Организация = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Заказ, "Организация"), "СКомиссионером", "СКомитентом");
		Значение.РасчетыВУсловныхЕдиницах = Ложь;
	Иначе
		Значение.ВидДоговора = "СПоставщиком";
	КонецЕсли;
		
Иначе
	Значение.ВидДоговора = "СПоставщиком";
КонецЕсли;	

Если Значение.РасчетыВУсловныхЕдиницах = Неопределено Тогда
	Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ОбъектКоллекции.ВалютаВзаиморасчетов;
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
										<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>21</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство Отключить="true">
										<Код>25</Код>
										<Наименование>Заказ --&gt;</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="Заказ" Вид="Реквизит"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>26</Код>
									<Наименование>КассаПолучатель --&gt;</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="КассаПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>РКО_ВозвратДСВДругуюОрганизацию</Код>
							<Наименование>Документ: Расходный кассовый ордер</Наименование>
							<Порядок>100</Порядок>
							<ПередВыгрузкой>// Вычислим значение реквизита "Контрагент"
ОрганизацияКонтрагента = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.КассаПолучатель, "Владелец");
НовыйКонтрагент		   = Неопределено;
Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);

ВходящиеДанные.Вставить("Контрагент", НовыйКонтрагент);</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.РасходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.РасходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРКО"/>
									<ПередВыгрузкой>Значение = "ВозвратПокупателю";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Контрагент" Вид="Реквизит"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>Выдать --&gt; Выдать</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>ПоДокументу --&gt; ПоДокументу</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>13</Код>
									<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>21</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование>Сумма --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование>СуммаВзаиморасчетов --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.ВалютаВзаиморасчетов);
Значение.Вставить("ВидДоговора",				"СПокупателем");
Значение.Вставить("Владелец",					ВходящиеДанные.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ОбъектКоллекции.ВалютаВзаиморасчетов;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<НеЗамещать>true</НеЗамещать>
										<Код>17</Код>
										<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
										<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство Отключить="true">
										<Код>14</Код>
										<Наименование>Заказ --&gt;</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="Заказ" Вид="Реквизит"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>РКО_ОплатаПоставщику</Код>
							<Наименование>Документ: Расходный кассовый ордер</Наименование>
							<Порядок>150</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.РасходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.РасходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРКО"/>
									<ПередВыгрузкой>Значение = "ОплатаПоставщику";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Выдать --&gt; Выдать</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>ПоДокументу --&gt; ПоДокументу</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>14</Код>
									<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование>Сумма --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование>СуммаВзаиморасчетов --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование>Заказ --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Заказ" Вид="Реквизит"/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПриВыгрузке>Организация		= Источник.Организация;
Контрагент		= Источник.Контрагент;
ОбъектРасчетов	= Значение;
Выполнить(Алгоритмы.ВыгрузитьДоговорПлатежногоДокумента);</ПриВыгрузке>
									</Свойство>
									<Свойство>
										<Код>21</Код>
										<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
										<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>РКО_ВозвратДСПокупателю</Код>
							<Наименование>Документ: Расходный кассовый ордер</Наименование>
							<Порядок>200</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.РасходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.РасходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРКО"/>
									<ПередВыгрузкой>Значение = "ВозвратПокупателю";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>Выдать --&gt; Выдать</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>ПоДокументу --&gt; ПоДокументу</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>14</Код>
									<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование>Сумма --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование>СуммаВзаиморасчетов --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование>Заказ --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Заказ" Вид="Реквизит"/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПриВыгрузке>Организация		= Источник.Организация;
Контрагент		= Источник.Контрагент;
ОбъектРасчетов	= Значение;
Выполнить(Алгоритмы.ВыгрузитьДоговорПлатежногоДокумента);</ПриВыгрузке>
									</Свойство>
									<Свойство>
										<НеЗамещать>true</НеЗамещать>
										<Код>21</Код>
										<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
										<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>РКО_ВзносНаличнымиВБанк</Код>
							<Наименование>Документ: Расходный кассовый ордер</Наименование>
							<Порядок>250</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если НЕ Объект.ЭтоНовый() Тогда
	СтарыйВидОперации = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Объект.Ссылка, "ВидОперации");
	Если СтарыйВидОперации = Перечисления.ВидыОперацийРКО.Инкассация Тогда
		Объект.ВидОперации = СтарыйВидОперации;
	КонецЕсли;
КонецЕсли;

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.РасходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.РасходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРКО"/>
									<ПередВыгрузкой>Значение = "ВзносНаличнымиВБанк";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>БанковскийСчет --&gt; СчетОрганизации</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
									<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
									<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование> --&gt; Контрагент</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Контрагент" Вид="Реквизит"/>
									<ПередВыгрузкой>Значение = Справочники.Контрагенты.ПустаяСсылка();</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Выдать --&gt; Выдать</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>ПоДокументу --&gt; ПоДокументу</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>14</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<ПередВыгрузкой>Значение = Справочники.СтатьиДвиженияДенежныхСредств.СдачаДенежныхСредствВБанк;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование>СуммаДокумента --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>РКО_ВыдачаДСПодотчетномуЛицу</Код>
							<Наименование>Документ: Расходный кассовый ордер</Наименование>
							<Порядок>300</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.РасходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.РасходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРКО"/>
									<ПередВыгрузкой>Значение = "ВыдачаПодотчетномуЛицу";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>ПодотчетноеЛицо --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="ПодотчетноеЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
									<Приемник Имя="Контрагент" Вид="Реквизит"/>
									<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Выдать --&gt; Выдать</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>ПоДокументу --&gt; ПоДокументу</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>14</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
НоваяСтрока = КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование>СуммаДокумента --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>РКО_ВыдачаЗП</Код>
							<Наименование>Документ: Расходный кассовый ордер</Наименование>
							<Порядок>350</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	Выполнить(Алгоритмы.ЗаполнитьСтатьюДоходовРасходовВПлатежномДокументе);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.РасходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.РасходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>8</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>9</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРКО"/>
									<ПередВыгрузкой>Значение = "ВыплатаЗаработнойПлатыПоВедомостям";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
									<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>Выдать --&gt; Выдать</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>ПоДокументу --&gt; ПоДокументу</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование> --&gt;</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>СтатьяДоходовРасходов</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>Значение = ВходящиеДанные.СтатьяРасходов;

Если ЗначениеЗаполнено(Значение) Тогда
	
	КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет");
	Если ЗначениеЗаполнено(КоррСчет) Тогда
		ИмяПКО = ?(Найти(КоррСчет, "91.02") &gt; 0, "СтатьиРасходовВПрочиеДоходыИРасходы", "СтатьиРасходовВСтатьиЗатрат");
	Иначе
		Пусто = Истина;
	КонецЕсли;
	
Иначе
	Пусто = Истина;	
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Группа Отключить="true">
									<Код>24</Код>
									<Наименование>РасшифровкаПлатежа --&gt;</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>26</Код>
										<Наименование>СтатьяРасходов --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СтатьяРасходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиРасходов"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>РКО_РасчетыПоКредитамИЗаймам</Код>
							<Наименование>Документ: Расходный кассовый ордер</Наименование>
							<Порядок>400</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.РасходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.РасходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>17</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>18</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРКО"/>
									<ПередВыгрузкой>Значение = "РасчетыПоКредитамИЗаймам";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование> --&gt; ДоговорКонтрагента</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
									<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
									<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"Прочее");
Значение.Вставить("Владелец",					Источник.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Выдать --&gt; Выдать</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>ПоДокументу --&gt; ПоДокументу</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>1</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("ДоговорКонтрагента");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СчетУчетаРасчетовСКонтрагентом");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>2</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>4</Код>
										<Наименование> --&gt; ДоговорКонтрагента</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
										<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
										<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"Прочее");
Значение.Вставить("Владелец",					Источник.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>3</Код>
										<Наименование>СуммаДокумента --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>7</Код>
										<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>5</Код>
										<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>6</Код>
										<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>8</Код>
										<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ВходящиеДанные.Счет;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Группа Отключить="true">
									<Код>25</Код>
									<Наименование>РасшифровкаПлатежа --&gt;</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>27</Код>
										<Наименование>СтатьяРасходов --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СтатьяРасходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиРасходов"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>РКО_ПрочийРасходДС</Код>
							<Наименование>Документ: Расходный кассовый ордер</Наименование>
							<Порядок>450</Порядок>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	Выполнить(Алгоритмы.ЗаполнитьСтатьюДоходовРасходовВПлатежномДокументе);
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.РасходныйКассовыйОрдер</Источник>
							<Приемник>ДокументСсылка.РасходныйКассовыйОрдер</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРКО"/>
									<ПередВыгрузкой>Значение = "ПрочийРасход";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование> --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Контрагент" Вид="Реквизит"/>
									<ПередВыгрузкой>Значение = Справочники.Контрагенты.ПустаяСсылка();</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Значение = ВходящиеДанные.Счет;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>36</Код>
									<Наименование> --&gt; СубконтоДт1</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СубконтоДт1" Вид="Реквизит"/>
									<ПередВыгрузкой>Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.КонвертацияВалюты
	Или Найти(ВходящиеДанные.Счет, "57.02") &lt;&gt; 0
	Или Найти(ВходящиеДанные.Счет, "57.22") &lt;&gt; 0 Тогда
	Значение = Источник.Контрагент;
	ИмяПКО = "Контрагенты";
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>37</Код>
									<Наименование> --&gt; СубконтоДт2</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СубконтоДт2" Вид="Реквизит"/>
									<ПередВыгрузкой>Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.КонвертацияВалюты
	Или Найти(ВходящиеДанные.Счет, "57.02") &lt;&gt; 0
	Или Найти(ВходящиеДанные.Счет, "57.22") &lt;&gt; 0 Тогда

	ИмяПКО = "ДоговорыКонтрагентов";
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
	Значение.Вставить("ВидДоговора",				"Прочее");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Неопределено);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	ВыгрузитьТолькоСсылку = Ложь;
	
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Выдать --&gt; Выдать</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Основание --&gt; Основание</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>ПоДокументу --&gt; ПоДокументу</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>Приложение --&gt; Приложение</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование>Кассир --&gt; Ответственный</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="Кассир" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>9</Код>
									<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("СтатьяДвиженияДенежныхСредств");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
										<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
										<ПередВыгрузкой>Значение = Источник.СтатьяДвиженияДенежныхСредств;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование>СуммаДокумента --&gt; СуммаВзаиморасчетов</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
										<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>22</Код>
										<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ВходящиеДанные.Счет;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство>
									<Код>24</Код>
									<Наименование> --&gt;</Наименование>
									<Порядок>1000</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>СтатьяДоходовРасходов</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>Значение = ВходящиеДанные.СтатьяРасходов;

Если ЗначениеЗаполнено(Значение) Тогда
	
	КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет");
	Если ЗначениеЗаполнено(КоррСчет) Тогда
		ИмяПКО = ?(Найти(КоррСчет, "91.02") &gt; 0, "СтатьиРасходовВПрочиеДоходыИРасходы", "СтатьиРасходовВСтатьиЗатрат");
	Иначе
		Пусто = Истина;
	КонецЕсли;
	
Иначе
	Пусто = Истина;	
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Группа Отключить="true">
									<Код>25</Код>
									<Наименование>РасшифровкаПлатежа --&gt;</Наименование>
									<Порядок>1050</Порядок>
									<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>27</Код>
										<Наименование>СтатьяРасходов --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="СтатьяРасходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиРасходов"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
					</Группа>
				</Группа>
			</Группа>
			<Группа>
				<Код>Комиссия</Код>
				<Наименование>Комиссия</Наименование>
				<Порядок>300</Порядок>
				<Правило>
					<Код>ОКОП_ОтчетКомиссионераОПродажах</Код>
					<Наименование>Документ: Отчет комиссионера о продажах</Наименование>
					<Порядок>50</Порядок>
					<ПередВыгрузкой>// Определяем наличие сторно и не сторно операций

ЕстьСторно   = Ложь;
ЕстьНеСторно = Ложь;

Для Каждого Строка Из Источник.Товары Цикл
	Если Строка.Количество &lt; 0 Тогда
		ЕстьСторно   = Истина;
	Иначе
		ЕстьНеСторно = Истина;
	КонецЕсли;
КонецЦикла;

ВходящиеДанные.Вставить("ЕстьСторно",   ЕстьСторно);
ВходящиеДанные.Вставить("ЕстьНеСторно", ЕстьНеСторно);

// Вычисление табличных частей документа

Запрос = Новый Запрос(
"ВЫБРАТЬ
|	Товары.НомерСтроки КАК НомерСтрокиДокумента,
|	Товары.Ссылка,
|	Товары.Ссылка.Организация КАК Организация,
|	Товары.Номенклатура,
|	Товары.Характеристика,
|	Товары.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
|	Товары.Количество,
|	Товары.СтавкаНДС,
|	Товары.СуммаСНДС / Товары.Количество КАК ЦенаПередачи,
|	Товары.СуммаСНДС КАК СуммаПередачи,
|	Товары.СуммаПродажи / Товары.Количество КАК Цена,
|	Товары.СуммаПродажи КАК Сумма,
|	Товары.СуммаПродажиНДС КАК СуммаНДС,
|	Товары.СуммаВознаграждения КАК СуммаВознаграждения,
|	Товары.Покупатель КАК Покупатель,
|	Товары.ДатаСчетаФактурыКомиссионера КАК ДатаСФ
|ПОМЕСТИТЬ Товары
|ИЗ
|	Документ.ОтчетКомиссионера.Товары КАК Товары
|ГДЕ
|	Товары.Ссылка = &amp;Ссылка
|	И Товары.Количество &gt; 0
|
|СГРУППИРОВАТЬ ПО
|	Товары.НомерСтроки,
|	Товары.Ссылка,
|	Товары.Ссылка.Организация,
|	Товары.Номенклатура,
|	Товары.Характеристика,
|	Товары.Номенклатура.ЕдиницаИзмерения,
|	Товары.Количество,
|	Товары.СтавкаНДС,
|	Товары.СуммаСНДС / Товары.Количество,
|	Товары.СуммаСНДС,
|	Товары.СуммаПродажи / Товары.Количество,
|	Товары.СуммаПродажи,
|	Товары.СуммаПродажиНДС,
|	Товары.СуммаВознаграждения,
|	ВЫБОР
|		КОГДА Товары.Количество &lt; 0
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ,
|	Товары.Покупатель,
|	Товары.ДатаСчетаФактурыКомиссионера
|
|ИНДЕКСИРОВАТЬ ПО
|	Товары.Ссылка,
|	Организация,
|	Покупатель,
|	ДатаСФ
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	Товары.НомерСтрокиДокумента,
|	Товары.Номенклатура,
|	Товары.Характеристика,
|	Товары.ЕдиницаИзмерения,
|	Товары.Количество,
|	Товары.СтавкаНДС,
|	Товары.ЦенаПередачи,
|	Товары.СуммаПередачи,
|	Товары.Цена,
|	Товары.Сумма,
|	Товары.СуммаНДС,
|	Товары.СуммаВознаграждения,
|	Товары.Покупатель,
|	Товары.ДатаСФ,
|	ЛОЖЬ КАК ВидыЗапасовЗаполнены,
|	1 КАК Коэффициент,
|	1 КАК КлючСтроки,
|	ЗНАЧЕНИЕ(Справочник.НомераГТД.ПустаяСсылка) КАК НомерГТД,
|	ЗНАЧЕНИЕ(Справочник.СтраныМира.ПустаяСсылка) КАК СтранаПроисхождения,
|	"""" КАК СчетУчета,
|	0 КАК СуммаНДСВознаграждения
|ИЗ
|	Товары КАК Товары
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ВидыЗапасов.Номенклатура,
|	ВидыЗапасов.Характеристика,
|	ВидыЗапасов.Количество КАК Количество,
|	ВидыЗапасов.НомерГТД,
|	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
|	ВЫБОР
|		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
|			ТОГДА ""ТоварыПереданныеНаКомиссию""
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ КАК СчетУчета,
|	ВЫБОР
|		КОГДА ВидыЗапасов.Количество &lt; 0
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ КАК Сторно,
|	ВидыЗапасов.ДатаСчетаФактурыКомиссионера КАК ДатаСФ,
|	ВидыЗапасов.Покупатель
|ИЗ
|	Документ.ОтчетКомиссионера.ВидыЗапасов КАК ВидыЗапасов
|ГДЕ
|	ВидыЗапасов.Ссылка = &amp;Ссылка
|	И ВидыЗапасов.Количество &gt; 0
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	1 КАК КлючСтроки,
|	Товары.Покупатель,
|	Товары.ДатаСФ,
|	МАКСИМУМ(ВЫБОР
|			КОГДА СчетФактураВыданный.Ссылка ЕСТЬ NULL 
|				ТОГДА ЛОЖЬ
|			ИНАЧЕ ИСТИНА
|		КОНЕЦ) КАК ВыставленСФ,
|	МАКСИМУМ(ЕСТЬNULL(СчетФактураВыданный.Ссылка, ЗНАЧЕНИЕ(Документ.СчетФактураВыданный.ПустаяСсылка))) КАК СчетФактура,
|	МИНИМУМ(Товары.НомерСтрокиДокумента) КАК ЗначениеУпорядочивания
|ИЗ
|	Товары КАК Товары
|		ЛЕВОЕ СОЕДИНЕНИЕ Документ.СчетФактураВыданный КАК СчетФактураВыданный
|		ПО Товары.Ссылка = СчетФактураВыданный.ДокументОснование
|			И Товары.Организация = СчетФактураВыданный.Организация
|			И (Товары.ДатаСФ = НАЧАЛОПЕРИОДА(СчетФактураВыданный.Дата, ДЕНЬ)
|				ИЛИ Товары.ДатаСФ = ДАТАВРЕМЯ(1, 1, 1))
|			И Товары.Покупатель = СчетФактураВыданный.Покупатель
|			И (НЕ СчетФактураВыданный.ПометкаУдаления)
|
|СГРУППИРОВАТЬ ПО
|	Товары.Покупатель,
|	Товары.ДатаСФ
|
|УПОРЯДОЧИТЬ ПО
|	ЗначениеУпорядочивания");

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
РезультатыЗапроса = Запрос.ВыполнитьПакет();

РеквизитыПоиска      = "Номенклатура,Характеристика,ДатаСФ,Покупатель";
ЗаполняемыеРеквизиты = "НомерГТД,СтранаПроисхождения,СчетУчета";

ТабТовары = РезультатыЗапроса[1].Выгрузить();

// Распределение НДС вознаграждения

БазаРаспределенияПоСуммеВознаграждения = ТабТовары.ВыгрузитьКолонку("СуммаВознаграждения");
РаспределениеНДСВознаграждения = ОбщегоНазначения.РаспределитьСуммуПропорциональноКоэффициентам(Источник.СуммаНДСВознаграждения, 
	БазаРаспределенияПоСуммеВознаграждения);

Если ЗначениеЗаполнено(РаспределениеНДСВознаграждения) Тогда
	ТабТовары.ЗагрузитьКолонку(РаспределениеНДСВознаграждения, "СуммаНДСВознаграждения");
КонецЕсли;

СтруктураПоиска = Новый Структура(РеквизитыПоиска + ",ВидыЗапасовЗаполнены");
ТабТовары.Индексы.Добавить(РеквизитыПоиска + ",ВидыЗапасовЗаполнены");

ВидыЗапасов = РезультатыЗапроса[2].Выбрать();
Пока ВидыЗапасов.Следующий() Цикл
	
	ЗаполнитьЗначенияСвойств(СтруктураПоиска, ВидыЗапасов, РеквизитыПоиска);
	СтруктураПоиска.ВидыЗапасовЗаполнены = Ложь;
	
	НайденныеСтроки = ТабТовары.НайтиСтроки(СтруктураПоиска);
	
	ОсталосьВидаЗапасов = ВидыЗапасов.Количество;
	Для Каждого СтрокаДокумента Из НайденныеСтроки Цикл
		
		Если ОсталосьВидаЗапасов = 0 Тогда
			Прервать;
		КонецЕсли;
		
		Если СтрокаДокумента.Количество &lt;= ОсталосьВидаЗапасов Тогда
			
			ЗаполнитьЗначенияСвойств(СтрокаДокумента, ВидыЗапасов, ЗаполняемыеРеквизиты);
			СтрокаДокумента.ВидыЗапасовЗаполнены = Истина;
			
			ОсталосьВидаЗапасов = ОсталосьВидаЗапасов - СтрокаДокумента.Количество;
			
		Иначе
			
			// Выделение новой строки с заполненным видом запасов
			НоваяСтрока = ТабТовары.Добавить();
			ЗаполнитьЗначенияСвойств(НоваяСтрока, СтрокаДокумента);
			
			ДоляВидаЗапасовВСтрокеДокумента = ОсталосьВидаЗапасов / СтрокаДокумента.Количество;
			
			НоваяСтрока.Количество             = ОсталосьВидаЗапасов;
			НоваяСтрока.СуммаПередачи          = Окр(СтрокаДокумента.СуммаПередачи * ДоляВидаЗапасовВСтрокеДокумента, 2);
			НоваяСтрока.Сумма                  = Окр(СтрокаДокумента.Сумма * ДоляВидаЗапасовВСтрокеДокумента, 2);
			НоваяСтрока.СуммаНДС               = Окр(СтрокаДокумента.СуммаНДС * ДоляВидаЗапасовВСтрокеДокумента, 2);
			НоваяСтрока.СуммаВознаграждения    = Окр(СтрокаДокумента.СуммаВознаграждения * ДоляВидаЗапасовВСтрокеДокумента, 2);
			НоваяСтрока.СуммаНДСВознаграждения = Окр(СтрокаДокумента.СуммаНДСВознаграждения * ДоляВидаЗапасовВСтрокеДокумента, 2);
			
			ЗаполнитьЗначенияСвойств(НоваяСтрока, ВидыЗапасов, ЗаполняемыеРеквизиты);
			
			СтрокаДокумента.Количество             = СтрокаДокумента.Количество - НоваяСтрока.Количество;
			СтрокаДокумента.СуммаПередачи          = СтрокаДокумента.СуммаПередачи - НоваяСтрока.СуммаПередачи;
			СтрокаДокумента.Сумма                  = СтрокаДокумента.Сумма - НоваяСтрока.Сумма;
			СтрокаДокумента.СуммаНДС               = СтрокаДокумента.СуммаНДС - НоваяСтрока.СуммаНДС;
			СтрокаДокумента.СуммаВознаграждения    = СтрокаДокумента.СуммаВознаграждения - НоваяСтрока.СуммаВознаграждения;
			СтрокаДокумента.СуммаНДСВознаграждения = СтрокаДокумента.СуммаНДСВознаграждения - НоваяСтрока.СуммаНДСВознаграждения;
			
			ОсталосьВидаЗапасов = 0;
			
		КонецЕсли;
		
	КонецЦикла;
	
КонецЦикла;

ТабТовары.Сортировать("НомерСтрокиДокумента Возр");

// Таблица покупателей

ТабПокупатели = РезультатыЗапроса[3].Выгрузить();

СтруктураПоиска = Новый Структура("Покупатель,ДатаСФ");

Для Каждого Строка Из ТабПокупатели Цикл
	
	Строка.КлючСтроки = ТабПокупатели.Индекс(Строка) + 1;
	
	ЗаполнитьЗначенияСвойств(СтруктураПоиска, Строка);
	НайденныйСтроки = ТабТовары.НайтиСтроки(СтруктураПоиска);
	
	Для Каждого СтрокаТоваров Из НайденныеСтроки Цикл
		СтрокаТоваров.КлючСтроки = Строка.КлючСтроки;
	КонецЦикла;
	
КонецЦикла;

ВходящиеДанные.Вставить("Товары", ТабТовары);
ВходящиеДанные.Вставить("Покупатели", ТабПокупатели);</ПередВыгрузкой>
					<ПослеВыгрузкиВФайл>Если ВходящиеДанные.ЕстьСторно Тогда
	
	Если ВходящиеДанные.ЕстьНеСторно Тогда
	
		ТекстСообщения = НСтр("ru = 'Выгрузка документа выполнена с предупреждением
									|Причина: выгружен документ ""Отчет комиссионера о продажах"", в котором присутствуют сторнирующие строки
									|Последствия: документ загрузится без учета сторнирующих строк 
									|Рекомендация: рекомендуется проконтролировать результат отражения операции в базе-приемнике'");
								
	Иначе

		ТекстСообщения = НСтр("ru = 'Выгрузка документа выполнена с предупреждением
									|Причина: выгружен документ ""Отчет комиссионера о продажах"", в котором присутствуют только сторнирующие строки
									|Последствия: документ загрузится пустым и непроведенным 
									|Рекомендация: рекомендуется проконтролировать результат отражения операции в базе-приемнике'");
								
	КонецЕсли;
	
	// создаем структуру для записи протокола
	ЗП = ПолучитьСтруктуруЗаписиПротокола();
	
	// заполняем доступные в данном контексте ключи структуры
	ЗП.Объект     = Источник;
	ЗП.ТипОбъекта = ТипЗнч(Источник);
	
	// выполняем запись в протокол и ЖР
	ЗаписатьВПротоколВыполнения(ТекстСообщения, ЗП, Ложь,,,, Перечисления.РезультатыВыполненияОбмена.ВыполненоСПредупреждениями);
	
КонецЕсли;</ПослеВыгрузкиВФайл>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);
Выполнить(Алгоритмы.УпрощенныйУчетНДС);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем параметры, зависящие от режима налогообложения
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		// Определяем признак включения НДС в стоимость
		Если УчетнаяПолитика.УСН Тогда
			Объект.НДСВключенВСтоимость = Истина;
		КонецЕсли;
	КонецЕсли;
	
	Если ПараметрыОбъекта["ЕстьСторно"] Тогда
		
		Если ПараметрыОбъекта["ЕстьНеСторно"] Тогда
		
			ТекстСообщения = НСтр("ru = 'Загрузка документа выполнена с предупреждением
								  |Причина: загружен документ ""Отчет комиссионера о продажах"", в котором в базе-источнике были сторнирующие строки
								  |Последствия: документ загрузился без учета сторнирующих строк
								  |Рекомендация: рекомендуется проконтролировать результат отражения операции в текущей базе'");
							  
		Иначе
			
			ТекстСообщения = НСтр("ru = 'Загрузка документа выполнена с предупреждением
								  |Причина: загружен документ ""Отчет комиссионера о продажах"", в котором в базе-источнике были только сторнирующие строки
								  |Последствия: документ загрузился пустым и непроведенным
								  |Рекомендация: рекомендуется проконтролировать результат отражения операции в текущей базе'");
							  
		КонецЕсли;
		
		// создаем структуру для записи протокола
		ЗП = ПолучитьСтруктуруЗаписиПротокола();
		
		// заполняем доступные в данном контексте ключи структуры
		ЗП.Объект     = Объект;
		ЗП.ТипОбъекта = ТипЗнч(Объект);
		
		// выполняем запись в протокол и ЖР
		ЗаписатьВПротоколВыполнения(ТекстСообщения, ЗП, Ложь,,,, Перечисления.РезультатыВыполненияОбмена.ВыполненоСПредупреждениями);
		
	КонецЕсли;
	
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ОтчетКомиссионера</Источник>
					<Приемник>ДокументСсылка.ОтчетКомиссионераОПродажах</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = ВходящиеДанные.ЕстьНеСторно И Источник.Проведен;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Увеличиваем сумму документа на модуль отрицательных сумм

Значение = Источник.СуммаДокумента;

СуммыПродаж = Источник.Товары.ВыгрузитьКолонку("СуммаПродажи");
Для Каждого Сумма Из СуммыПродаж Цикл
	Значение = Значение + ?(Сумма &lt; 0, - Сумма, 0);
КонецЦикла;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>Контрагент --&gt; Контрагент</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
							<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
	Значение.Вставить("ВидДоговора",				"СКомиссионером");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах",	Ложь);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Источник.Соглашение);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<НеЗамещать>true</НеЗамещать>
							<Код>24</Код>
							<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
							<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>СпособРасчетаВознаграждения --&gt; СпособРасчетаКомиссионногоВознаграждения</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="СпособРасчетаВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыРасчетаКомиссионногоВознаграждения"/>
							<Приемник Имя="СпособРасчетаКомиссионногоВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыРасчетаКомиссионногоВознаграждения"/>
							<КодПравилаКонвертации>СпособыРасчетаКомиссионногоВознаграждения         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>ПроцентВознаграждения --&gt; ПроцентКомиссионногоВознаграждения</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="ПроцентВознаграждения" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентКомиссионногоВознаграждения" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>СуммаВознаграждения --&gt; СуммаВознаграждения</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="СуммаВознаграждения" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаВознаграждения" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Увеличиваем сумму документа на модуль отрицательных сумм

Значение = Источник.СуммаВознаграждения;

СуммыВознаграждений = Источник.Товары.ВыгрузитьКолонку("СуммаВознаграждения");
Для Каждого Сумма Из СуммыВознаграждений Цикл
	Значение = Значение + ?(Сумма &lt; 0, - Сумма, 0);
КонецЦикла;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>СтавкаНДСВознаграждения --&gt; СтавкаНДСВознаграждения</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="СтавкаНДСВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДСВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>УдержатьВознаграждение --&gt; УдержатьВознаграждение</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="УдержатьВознаграждение" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="УдержатьВознаграждение" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
							<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>ПредъявленСчетФактура --&gt; ПредъявленСчетФактура</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>ДатаСчетаФактуры --&gt; ДатаВходящегоСчетаФактуры</Наименование>
							<Порядок>1000</Порядок>
							<Источник Имя="ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ДатаВходящегоСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>НомерСчетаФактуры --&gt; НомерВходящегоСчетаФактуры</Наименование>
							<Порядок>1050</Порядок>
							<Источник Имя="НомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерВходящегоСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
							<Порядок>1100</Порядок>
							<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
							<Порядок>1150</Порядок>
							<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>43</Код>
							<Наименование>Менеджер --&gt; Ответственный</Наименование>
							<Порядок>1200</Порядок>
							<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>1250</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>60</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>1300</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>63</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>1350</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ЕстьНеСторно</ИмяПараметраДляПередачи>
						</Свойство>
						<Свойство>
							<Код>62</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>1400</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ЕстьСторно</ИмяПараметраДляПередачи>
						</Свойство>
						<Группа>
							<Код>26</Код>
							<Наименование> --&gt; Товары</Наименование>
							<Порядок>1450</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>30</Код>
								<Наименование> --&gt; Номенклатура</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
								<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование> --&gt; Количество</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование> --&gt; Коэффициент</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>41</Код>
								<Наименование> --&gt; ЦенаПередачи</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЦенаПередачи" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>33</Код>
								<Наименование> --&gt; СтавкаНДС</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>35</Код>
								<Наименование> --&gt; Сумма</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>36</Код>
								<Наименование> --&gt; СуммаВознаграждения</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаВознаграждения" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>37</Код>
								<Наименование> --&gt; СуммаНДС</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>38</Код>
								<Наименование> --&gt; СуммаНДСВознаграждения</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДСВознаграждения" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>39</Код>
								<Наименование> --&gt; СуммаПередачи</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаПередачи" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>40</Код>
								<Наименование> --&gt; Цена</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование> --&gt; НомерГТД</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
								<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>34</Код>
								<Наименование> --&gt; СтранаПроисхождения</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
								<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>42</Код>
								<Наименование> --&gt; СчетУчета</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								<ПередВыгрузкой>Отказ = ОбъектКоллекции.СчетУчета = Неопределено;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>65</Код>
								<Наименование> --&gt; КлючСтроки</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
							</Свойство>
						</Группа>
						<Группа>
							<Код>66</Код>
							<Наименование> --&gt; Покупатели</Наименование>
							<Порядок>1500</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Покупатели" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>70</Код>
								<Наименование> --&gt; Покупатель</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Покупатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>67</Код>
								<Наименование> --&gt; ВыставленСФ</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВыставленСФ" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>68</Код>
								<Наименование> --&gt; ДатаСФ</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаСФ" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>71</Код>
								<Наименование> --&gt; СчетФактура</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетФактура" Вид="Реквизит" Тип="ДокументСсылка.СчетФактураВыданный"/>
								<КодПравилаКонвертации>СФВ_СчетФактураВыданный                           </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>69</Код>
								<Наименование> --&gt; КлючСтроки</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
							</Свойство>
						</Группа>
						<Свойство Отключить="true">
							<Код>61</Код>
							<Наименование>Соглашение --&gt;</Наименование>
							<Порядок>1550</Порядок>
							<Источник Имя="Соглашение" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСКлиентами"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Группа Отключить="true">
							<Код>45</Код>
							<Наименование>Товары --&gt;</Наименование>
							<Порядок>1600</Порядок>
							<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>46</Код>
								<Наименование>Количество --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>47</Код>
								<Наименование>Номенклатура --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>48</Код>
								<Наименование>СтавкаНДС --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>49</Код>
								<Наименование>СуммаВознаграждения --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="СуммаВознаграждения" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>50</Код>
								<Наименование>СуммаПродажи --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="СуммаПродажи" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>51</Код>
								<Наименование>СуммаПродажиНДС --&gt;</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаПродажиНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>52</Код>
								<Наименование>СуммаСНДС --&gt;</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>53</Код>
								<Наименование>Характеристика --&gt;</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Характеристика" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>54</Код>
							<Наименование>ВидыЗапасов --&gt;</Наименование>
							<Порядок>1650</Порядок>
							<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>55</Код>
								<Наименование>Количество --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>56</Код>
								<Наименование>Номенклатура --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>57</Код>
								<Наименование>НомерГТД --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>58</Код>
								<Наименование>Характеристика --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Характеристика" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>59</Код>
								<Наименование>ВидЗапасов --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Свойство Отключить="true">
							<Код>64</Код>
							<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
							<Порядок>1700</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ОКОС_ОтчетКомиссионераОСписании</Код>
					<Наименование>Документ: Отчет комиссионера о списании</Наименование>
					<Порядок>100</Порядок>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ОтчетКомиссионераОСписании</Источник>
					<Приемник>ДокументСсылка.ОтчетКомиссионераОПродажах</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>7</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>8</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "С" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Контрагент --&gt; Контрагент</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
							<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
	Значение.Вставить("ВидДоговора",				"СКомиссионером");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах",	Ложь);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Источник.Соглашение);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
							<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование> --&gt; СпособРасчетаКомиссионногоВознаграждения</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СпособРасчетаКомиссионногоВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыРасчетаКомиссионногоВознаграждения"/>
							<ПередВыгрузкой>Значение = "НеРассчитывается";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
							<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>53</Код>
							<Наименование> --&gt; ПредъявленСчетФактура</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>51</Код>
							<Наименование> --&gt; ДатаВходящегоСчетаФактуры</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДатаВходящегоСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
							<ПередВыгрузкой>Пусто = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>52</Код>
							<Наименование> --&gt; НомерВходящегоСчетаФактуры</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерВходящегоСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Пусто = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>50</Код>
							<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
							<Порядок>1000</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>31</Код>
							<Наименование>Менеджер --&gt; Ответственный</Наименование>
							<Порядок>1050</Порядок>
							<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>1100</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>48</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>1150</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа>
							<Код>18</Код>
							<Наименование> --&gt; Товары</Наименование>
							<Порядок>1200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>Запрос = Новый Запрос("ВЫБРАТЬ
                      |	Товары.НомерСтроки КАК НомерСтрокиДокумента,
                      |	Товары.Номенклатура,
                      |	Товары.Характеристика,
                      |	Товары.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
                      |	1 КАК Коэффициент,
                      |	Товары.Количество,
                      |	Товары.СуммаСНДС / Товары.Количество КАК Цена,
                      |	Товары.СуммаСНДС КАК Сумма,
                      |	Товары.СтавкаНДС,
                      |	Товары.СуммаНДС
                      |ИЗ
                      |	Документ.ОтчетКомиссионераОСписании.Товары КАК Товары
                      |ГДЕ
                      |	Товары.Ссылка = &amp;Ссылка
                      |;
                      |
                      |////////////////////////////////////////////////////////////////////////////////
                      |ВЫБРАТЬ
                      |	ВидыЗапасов.Номенклатура,
                      |	ВидыЗапасов.Характеристика,
                      |	ВидыЗапасов.Количество КАК Количество,
                      |	ВидыЗапасов.НомерГТД,
                      |	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
                      |	ВЫБОР
                      |		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
                      |			ТОГДА ""ТоварыПереданныеНаКомиссию""
                      |		ИНАЧЕ НЕОПРЕДЕЛЕНО
                      |	КОНЕЦ КАК СчетУчета
                      |ИЗ
                      |	Документ.ОтчетКомиссионераОСписании.ВидыЗапасов КАК ВидыЗапасов
                      |ГДЕ
                      |	ВидыЗапасов.Ссылка = &amp;Ссылка");

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
РезультатыЗапроса = Запрос.ВыполнитьПакет();

КоллекцияОбъектов = РезультатыЗапроса[0].Выгрузить();
КоллекцияОбъектов.Колонки.Добавить("НомерГТД");
КоллекцияОбъектов.Колонки.Добавить("СтранаПроисхождения");
КоллекцияОбъектов.Колонки.Добавить("СуммаНДСВознаграждения");
КоллекцияОбъектов.Колонки.Добавить("СчетУчета");

КоллекцияОбъектов.Индексы.Добавить("Номенклатура, Характеристика, НомерГТД");

СтруктураПоиска = Новый Структура;
СтруктураПоиска.Вставить("Номенклатура", Неопределено);
СтруктураПоиска.Вставить("Характеристика", Неопределено);
СтруктураПоиска.Вставить("НомерГТД", Неопределено);

ВидыЗапасов = РезультатыЗапроса[1].Выбрать();
Пока ВидыЗапасов.Следующий() Цикл
	
	СтруктураПоиска.Номенклатура   = ВидыЗапасов.Номенклатура;
	СтруктураПоиска.Характеристика = ВидыЗапасов.Характеристика;
	НайденныеСтроки = КоллекцияОбъектов.НайтиСтроки(СтруктураПоиска);

	ОсталосьВидаЗапасов = ВидыЗапасов.Количество;
	Для Каждого СтрокаДокумента Из НайденныеСтроки Цикл
		
		Если ОсталосьВидаЗапасов = 0 Тогда
			Прервать;
		КонецЕсли;

		Если СтрокаДокумента.Количество &lt;= ОсталосьВидаЗапасов Тогда
			ЗаполнитьЗначенияСвойств(СтрокаДокумента, ВидыЗапасов, "НомерГТД, СтранаПроисхождения, СчетУчета");
			ОсталосьВидаЗапасов = ОсталосьВидаЗапасов - СтрокаДокумента.Количество;
		Иначе
			
			// Выделяем из строки документа новую строку с определенным видом запасов
			НоваяСтрока = КоллекцияОбъектов.Добавить();
			ЗаполнитьЗначенияСвойств(НоваяСтрока, СтрокаДокумента);

			ДоляВидаЗапасовВСтрокеДокумента = ОсталосьВидаЗапасов / СтрокаДокумента.Количество;
			
			НоваяСтрока.Количество 					= ОсталосьВидаЗапасов;
			НоваяСтрока.Сумма      					= Окр(СтрокаДокумента.Сумма * ДоляВидаЗапасовВСтрокеДокумента, 2);
			НоваяСтрока.СуммаНДС   					= Окр(СтрокаДокумента.СуммаНДС * ДоляВидаЗапасовВСтрокеДокумента, 2);
			
			ЗаполнитьЗначенияСвойств(НоваяСтрока, ВидыЗапасов, "НомерГТД, СтранаПроисхождения, СчетУчета");
			
			СтрокаДокумента.Количество				= СтрокаДокумента.Количество - НоваяСтрока.Количество;
			СтрокаДокумента.Сумма					= СтрокаДокумента.Сумма - НоваяСтрока.Сумма;
			СтрокаДокумента.СуммаНДС				= СтрокаДокумента.СуммаНДС - НоваяСтрока.СуммаНДС;
			
			ОсталосьВидаЗапасов = 0;
			
		КонецЕсли;

	КонецЦикла;
	
КонецЦикла;

КоллекцияОбъектов.Сортировать("НомерСтрокиДокумента Возр");</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>22</Код>
								<Наименование> --&gt; Номенклатура</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
								<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование> --&gt; Количество</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование> --&gt; Коэффициент</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>30</Код>
								<Наименование> --&gt; ЦенаПередачи</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЦенаПередачи" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.Цена;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование> --&gt; СуммаПередачи</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаПередачи" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.Сумма;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование> --&gt; Цена</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование> --&gt; Сумма</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование> --&gt; СтавкаНДС</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование> --&gt; СуммаНДС</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование> --&gt; НомерГТД</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
								<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование> --&gt; СтранаПроисхождения</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
								<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>47</Код>
								<Наименование> --&gt; СчетУчета</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								<ПередВыгрузкой>Отказ = ОбъектКоллекции.СчетУчета = Неопределено;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>54</Код>
								<Наименование> --&gt; КлючСтроки</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
							</Свойство>
						</Группа>
						<Группа>
							<Код>55</Код>
							<Наименование> --&gt; Покупатели</Наименование>
							<Порядок>1250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Покупатели" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("ВыставленСФ");
КоллекцияОбъектов.Колонки.Добавить("СчетФактура");
КоллекцияОбъектов.Колонки.Добавить("ДатаСФ");
КоллекцияОбъектов.Колонки.Добавить("Покупатель");
КоллекцияОбъектов.Колонки.Добавить("КлючСтроки");

НоваяСтрока = КоллекцияОбъектов.Добавить();
НоваяСтрока.ВыставленСФ	= Ложь;
НоваяСтрока.Покупатель	= Источник.Контрагент;
НоваяСтрока.КлючСтроки	= 1;</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>59</Код>
								<Наименование> --&gt; Покупатель</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Покупатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>56</Код>
								<Наименование> --&gt; ВыставленСФ</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВыставленСФ" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>60</Код>
								<Наименование> --&gt; СчетФактура</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетФактура" Вид="Реквизит" Тип="ДокументСсылка.СчетФактураВыданный"/>
								<КодПравилаКонвертации>СФВ_СчетФактураВыданный                           </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>57</Код>
								<Наименование> --&gt; ДатаСФ</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаСФ" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>58</Код>
								<Наименование> --&gt; КлючСтроки</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
							</Свойство>
						</Группа>
						<Свойство Отключить="true">
							<Код>49</Код>
							<Наименование>Соглашение --&gt;</Наименование>
							<Порядок>1300</Порядок>
							<Источник Имя="Соглашение" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСКлиентами"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Группа Отключить="true">
							<Код>34</Код>
							<Наименование>Товары --&gt;</Наименование>
							<Порядок>1350</Порядок>
							<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>36</Код>
								<Наименование>Количество --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>37</Код>
								<Наименование>Номенклатура --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>38</Код>
								<Наименование>СтавкаНДС --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>39</Код>
								<Наименование>Сумма --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>40</Код>
								<Наименование>СуммаСНДС --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>41</Код>
								<Наименование>Характеристика --&gt;</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Характеристика" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>35</Код>
							<Наименование>ВидыЗапасов --&gt;</Наименование>
							<Порядок>1400</Порядок>
							<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>42</Код>
								<Наименование>ВидЗапасов --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>43</Код>
								<Наименование>Количество --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>44</Код>
								<Наименование>Номенклатура --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>45</Код>
								<Наименование>НомерГТД --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>46</Код>
								<Наименование>Характеристика --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Характеристика" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ОКТОП_ОтчетКомитентуОПродажах</Код>
					<Наименование>Документ: Отчет комитенту о продажах</Наименование>
					<Порядок>150</Порядок>
					<ПередВыгрузкой>Товары = Источник.Товары.Выгрузить();
Товары.Колонки.Добавить("СуммаНДСВознаграждения");

БазаРаспределенияПоСуммеВознаграждения = Товары.ВыгрузитьКолонку("СуммаВознаграждения");
РаспределениеНДСВознаграждения = ОбщегоНазначения.РаспределитьСуммуПропорциональноКоэффициентам(Источник.СуммаНДСВознаграждения, 
	БазаРаспределенияПоСуммеВознаграждения);
	
Если ЗначениеЗаполнено(РаспределениеНДСВознаграждения) Тогда
	Товары.ЗагрузитьКолонку(РаспределениеНДСВознаграждения, "СуммаНДСВознаграждения");
КонецЕсли;

ВходящиеДанные.Вставить("Товары", Товары);

// Определяем наличие сторно и не сторно операций

ЕстьСторно	 = Ложь;
ЕстьНеСторно = Ложь;

Для Каждого Строка Из Источник.Товары Цикл
	Если Строка.Количество &lt; 0 Тогда
		ЕстьСторно	 = Истина;
	Иначе
		ЕстьНеСторно = Истина;
	КонецЕсли;
КонецЦикла;

ВходящиеДанные.Вставить("ЕстьСторно",	ЕстьСторно);
ВходящиеДанные.Вставить("ЕстьНеСторно", ЕстьНеСторно);</ПередВыгрузкой>
					<ПослеВыгрузкиВФайл>Если ВходящиеДанные.ЕстьСторно Тогда
	
	Если ВходящиеДанные.ЕстьНеСторно Тогда
	
		ТекстСообщения = НСтр("ru = 'Выгрузка документа выполнена с предупреждением
									|Причина: выгружен документ ""Отчет комитенту о продажах"", в котором присутствуют сторнирующие строки
									|Последствия: документ загрузится без учета сторнирующих строк 
									|Рекомендация: рекомендуется проконтролировать результат отражения операции в базе-приемнике'");
								
	Иначе
	
		ТекстСообщения = НСтр("ru = 'Выгрузка документа выполнена с предупреждением
									|Причина: выгружен документ ""Отчет комитенту о продажах"", в котором присутствуют только сторнирующие строки
									|Последствия: документ загрузится пустым и непроведенным 
									|Рекомендация: рекомендуется проконтролировать результат отражения операции в базе-приемнике'");
								
	КонецЕсли;
	
	// создаем структуру для записи протокола
	ЗП = ПолучитьСтруктуруЗаписиПротокола();
	
	// заполняем доступные в данном контексте ключи структуры
	ЗП.Объект     = Источник;
	ЗП.ТипОбъекта = ТипЗнч(Источник);
	
	// выполняем запись в протокол и ЖР
	ЗаписатьВПротоколВыполнения(ТекстСообщения, ЗП, Ложь,,,, Перечисления.РезультатыВыполненияОбмена.ВыполненоСПредупреждениями);
	
КонецЕсли;</ПослеВыгрузкиВФайл>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
		
	Если Объект.СчетДоходов.ВидыСубконто.Количество() &gt; 0 Тогда
		Если Объект.СчетДоходов.ВидыСубконто[0].ВидСубконто.ТипЗначения.СодержитТип(ТипЗнч(Объект.Субконто)) тогда
			//Не надо менять, значение подходит
		Иначе
			Объект.Субконто = Новый(Объект.СчетДоходов.ВидыСубконто[0].ВидСубконто.ТипЗначения.Типы()[0])
		КонецЕсли;
	Иначе
		Объект.Субконто = Неопределено;
	КонецЕсли;
	
	Если ТипЗнч(Объект.Субконто) = Тип("СправочникСсылка.НоменклатурныеГруппы") 
	   И ЗначениеЗаполнено(Объект.УслугаПоВознаграждению) 
	   И ЗначениеЗаполнено(Объект.УслугаПоВознаграждению.НоменклатурнаяГруппа) Тогда
		
		Объект.Субконто = Объект.УслугаПоВознаграждению.НоменклатурнаяГруппа;
		
	КонецЕсли;
	
	Если ПараметрыОбъекта["ЕстьСторно"] Тогда
		
		Если ПараметрыОбъекта["ЕстьНеСторно"] Тогда
		
			ТекстСообщения = НСтр("ru = 'Загрузка документа выполнена с предупреждением
								  |Причина: загружен документ ""Отчет комитенту о продажах"", в котором в базе-источнике были сторнирующие строки
								  |Последствия: документ загрузился без учета сторнирующих строк
								  |Рекомендация: рекомендуется проконтролировать результат отражения операции в текущей базе'");
							  
		Иначе
		
			ТекстСообщения = НСтр("ru = 'Загрузка документа выполнена с предупреждением
								  |Причина: загружен документ ""Отчет комитенту о продажах"", в котором в базе-источнике были только сторнирующие строки
								  |Последствия: документ загрузился пустым и непроведенным
								  |Рекомендация: рекомендуется проконтролировать результат отражения операции в текущей базе'");
							  
		КонецЕсли;
		
		// создаем структуру для записи протокола
		ЗП = ПолучитьСтруктуруЗаписиПротокола();
		
		// заполняем доступные в данном контексте ключи структуры
		ЗП.Объект     = Объект;
		ЗП.ТипОбъекта = ТипЗнч(Объект);
		
		// выполняем запись в протокол и ЖР
		ЗаписатьВПротоколВыполнения(ТекстСообщения, ЗП, Ложь,,,, Перечисления.РезультатыВыполненияОбмена.ВыполненоСПредупреждениями);
		
	КонецЕсли;
	
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ОтчетКомитенту</Источник>
					<Приемник>ДокументСсылка.ОтчетКомитентуОПродажах</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>8</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>9</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = ВходящиеДанные.ЕстьНеСторно И Источник.Проведен;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>52</Код>
							<Наименование> --&gt; ВидОперации</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийОтчетКомитентуОПродажах"/>
							<ПередВыгрузкой>Значение = "ОтчетОПродажах";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Увеличиваем сумму документа на модуль отрицательных сумм

Значение = Источник.СуммаДокумента;

СуммыПродаж = Источник.Товары.ВыгрузитьКолонку("СуммаПродажи");
Для Каждого Сумма Из СуммыПродаж Цикл
	Значение = Значение + ?(Сумма &lt; 0, - Сумма, 0);
КонецЦикла;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Контрагент --&gt; Контрагент</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
							<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
	Значение.Вставить("ВидДоговора",				"СКомитентом");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Источник.Соглашение);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>СпособРасчетаВознаграждения --&gt; СпособРасчетаКомиссионногоВознаграждения</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="СпособРасчетаВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыРасчетаКомиссионногоВознаграждения"/>
							<Приемник Имя="СпособРасчетаКомиссионногоВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыРасчетаКомиссионногоВознаграждения"/>
							<КодПравилаКонвертации>СпособыРасчетаКомиссионногоВознаграждения         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>ПроцентВознаграждения --&gt; ПроцентКомиссионногоВознаграждения</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="ПроцентВознаграждения" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентКомиссионногоВознаграждения" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>СуммаВознаграждения --&gt; СуммаВознаграждения</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="СуммаВознаграждения" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаВознаграждения" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Увеличиваем сумму документа на модуль отрицательных сумм

Значение = Источник.СуммаВознаграждения;

СуммыВознаграждений = Источник.Товары.ВыгрузитьКолонку("СуммаВознаграждения");
Для Каждого Сумма Из СуммыВознаграждений Цикл
	Значение = Значение + ?(Сумма &lt; 0, - Сумма, 0);
КонецЦикла;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>СтавкаНДСВознаграждения --&gt; СтавкаНДСВознаграждения</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="СтавкаНДСВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДСВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>УдержатьВознаграждение --&gt; УдержатьВознаграждение</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="УдержатьВознаграждение" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="УдержатьВознаграждение" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
							<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Услуга --&gt; УслугаПоВознаграждению</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="Услуга" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="УслугаПоВознаграждению" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование>Менеджер --&gt; Ответственный</Наименование>
							<Порядок>1000</Порядок>
							<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>1050</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>46</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>1100</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>49</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>1150</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ЕстьНеСторно</ИмяПараметраДляПередачи>
						</Свойство>
						<Свойство>
							<Код>48</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>1200</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ЕстьСторно</ИмяПараметраДляПередачи>
						</Свойство>
						<Группа>
							<Код>21</Код>
							<Наименование> --&gt; Товары</Наименование>
							<Порядок>1250</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<ПередВыгрузкой>Если ОбъектКоллекции.Количество &lt; 0 Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
							<Свойство>
								<Код>23</Код>
								<Наименование> --&gt; Номенклатура</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							</Свойство>
							<Свойство>
								<Код>30</Код>
								<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
								<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура.ЕдиницаИзмерения;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование> --&gt; Количество</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование> --&gt; Коэффициент</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование> --&gt; СтавкаНДС</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование> --&gt; ЦенаПоступления</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЦенаПоступления" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.СуммаСНДС / ОбъектКоллекции.Количество;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование> --&gt; СуммаПоступления</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаПоступления" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.СуммаСНДС;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>33</Код>
								<Наименование> --&gt; Цена</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.Сумма / ОбъектКоллекции.Количество;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование> --&gt; Сумма</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.СуммаПродажи;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>34</Код>
								<Наименование> --&gt; СуммаНДС</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = Ценообразование.РассчитатьСуммуНДС(ОбъектКоллекции.СуммаПродажи, ОбъектКоллекции.СтавкаНДС, Истина)</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование> --&gt; СуммаВознаграждения</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаВознаграждения" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>32</Код>
								<Наименование> --&gt; СуммаНДСВознаграждения</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДСВознаграждения" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>50</Код>
								<Наименование> --&gt; ДатаРеализации</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаРеализации" Вид="Реквизит" Тип="Дата"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.ДатаСчетаФактуры;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>51</Код>
								<Наименование> --&gt; Покупатель</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Покупатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
						</Группа>
						<Свойство Отключить="true">
							<Код>45</Код>
							<Наименование>СуммаНДСВознаграждения --&gt;</Наименование>
							<Порядок>1300</Порядок>
							<Источник Имя="СуммаНДСВознаграждения" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>47</Код>
							<Наименование>Соглашение --&gt;</Наименование>
							<Порядок>1350</Порядок>
							<Источник Имя="Соглашение" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСПоставщиками"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Группа Отключить="true">
							<Код>37</Код>
							<Наименование>Товары --&gt;</Наименование>
							<Порядок>1400</Порядок>
							<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>38</Код>
								<Наименование>Количество --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>39</Код>
								<Наименование>Номенклатура --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>41</Код>
								<Наименование>СтавкаНДС --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>42</Код>
								<Наименование>Цена --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>43</Код>
								<Наименование>СуммаСНДС --&gt;</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>44</Код>
								<Наименование>СуммаПродажи --&gt;</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="СуммаПродажи" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ОКТОC_ОтчетКомитентуОСписании</Код>
					<Наименование>Документ: Отчет комитенту о списании</Наименование>
					<Порядок>200</Порядок>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ОтчетКомитентуОСписании</Источник>
					<Приемник>ДокументСсылка.ОтчетКомитентуОПродажах</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>16</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>17</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "С" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>29</Код>
							<Наименование> --&gt; ВидОперации</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийОтчетКомитентуОПродажах"/>
							<ПередВыгрузкой>Значение = "ОтчетОПродажах";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Контрагент --&gt; Контрагент</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
							<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
	Значение.Вставить("ВидДоговора",				"СКомитентом");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Источник.Соглашение);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование> --&gt; СпособРасчетаКомиссионногоВознаграждения</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СпособРасчетаКомиссионногоВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыРасчетаКомиссионногоВознаграждения"/>
							<ПередВыгрузкой>Значение = "НеРассчитывается";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
							<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>Менеджер --&gt; Ответственный</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>28</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа>
							<Код>1</Код>
							<Наименование>Товары --&gt; Товары</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>3</Код>
								<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Номенклатура --&gt; ЕдиницаИзмерения</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
								<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура.ЕдиницаИзмерения;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Количество --&gt; Количество</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование> --&gt; Коэффициент</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>СуммаСНДС --&gt; ЦенаПоступления</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="ЦенаПоступления" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.СуммаСНДС / ОбъектКоллекции.Количество;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>СуммаСНДС --&gt; СуммаПоступления</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаПоступления" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>СуммаСНДС --&gt; Цена</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.СуммаСНДС / ОбъектКоллекции.Количество;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>СуммаСНДС --&gt; Сумма</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							</Свойство>
						</Группа>
					</Свойства>
					<Значения/>
				</Правило>
			</Группа>
			<Группа>
				<Код>Покупка</Код>
				<Наименование>ПКО для документов, связанных с покупкой</Наименование>
				<Порядок>350</Порядок>
				<Группа>
					<Код>ПоступлениеТоваровУслуг</Код>
					<Наименование>ПКО для документа "Поступление товаров и услуг"</Наименование>
					<Порядок>50</Порядок>
					<Группа>
						<Код>ПоступлениеТоваровУслугСРасхождениями</Код>
						<Наименование>ПКО для выгрузки документа "Поступление товаров и услуг" с учетом расхождений</Наименование>
						<Порядок>50</Порядок>
						<Правило>
							<Код>ПТУ_РасхожденияВВозврат</Код>
							<Наименование>Документ: Поступление товаров услуг</Наименование>
							<Порядок>50</Порядок>
							<ПередВыгрузкой>Запрос = Новый Запрос("ВЫБРАТЬ
|	ДанныеШапкиДокумента.Склад.РозничныйВидЦены КАК РозничныйВидЦены,
|	ДанныеШапкиДокумента.Валюта,
|	ДанныеШапкиДокумента.ВалютаВзаиморасчетов
|ПОМЕСТИТЬ ДанныеШапкиДокумента
|ИЗ
|	Документ.ПоступлениеТоваровУслуг КАК ДанныеШапкиДокумента
|ГДЕ
|	ДанныеШапкиДокумента.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	Расхождения.Ссылка КАК ДокументОприходования,
|	Расхождения.Номенклатура,
|	Расхождения.Количество,
|	Расхождения.Цена / ЕСТЬNULL(Расхождения.Упаковка.Коэффициент, 1) КАК Цена,
|	Расхождения.Сумма,
|	Расхождения.СтавкаНДС,
|	Расхождения.СуммаНДС,
|	Расхождения.СуммаСНДС,
|	Расхождения.ВариантОтраженияРасхождений,
|	Расхождения.Характеристика,
|	1 КАК Коэффициент,
|	ЗНАЧЕНИЕ(Справочник.НомераГТД.ПустаяСсылка) КАК НомерГТД,
|	ЗНАЧЕНИЕ(Справочник.СтраныМира.ПустаяСсылка) КАК СтранаПроисхождения,
|	Расхождения.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения
|ПОМЕСТИТЬ Расхождения
|ИЗ
|	Документ.ПоступлениеТоваровУслуг.Расхождения КАК Расхождения
|ГДЕ
|	(Расхождения.Ссылка = &amp;Ссылка
|				И Расхождения.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
|				И Расхождения.ВариантРасхождений = ЗНАЧЕНИЕ(Перечисление.ВариантыРасхождений.Недостачи)
|				И Расхождения.ВариантОтраженияРасхождений = ЗНАЧЕНИЕ(Перечисление.ВариантыОтраженияРасхождений.НедостачиЗаСчетПоставщика)
|				И Расхождения.Ссылка.Контрагент = &amp;КонтрагентПретензии
|			ИЛИ Расхождения.ВариантОтраженияРасхождений = ЗНАЧЕНИЕ(Перечисление.ВариантыОтраженияРасхождений.НедостачиЗаСчетСтороннейКомпании)
|				И Расхождения.Ссылка.КонтрагентСтороннейКомпании = &amp;КонтрагентПретензии)
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ЦеныВРознице.Цена / ЕСТЬNULL(ЦеныВРознице.Упаковка.Коэффициент, 1) * ВЫБОР
|		КОГДА ЕСТЬNULL(КурсВалютыДокумента.Кратность, 0) &gt; 0
|				И ЕСТЬNULL(КурсВалютыДокумента.Курс, 0) &gt; 0
|				И ЕСТЬNULL(КурсыВалютВидовЦены.Кратность, 0) &gt; 0
|				И ЕСТЬNULL(КурсыВалютВидовЦены.Курс, 0) &gt; 0
|			ТОГДА КурсыВалютВидовЦены.Курс * КурсВалютыДокумента.Кратность / (КурсыВалютВидовЦены.Кратность * КурсВалютыДокумента.Курс)
|	КОНЕЦ КАК Цена,
|	ЦеныВРознице.Номенклатура КАК Номенклатура,
|	ЦеныВРознице.Характеристика КАК Характеристика
|ПОМЕСТИТЬ ЦеныВРознице
|ИЗ
|	РегистрСведений.ЦеныНоменклатуры.СрезПоследних(
|			&amp;Дата,
|			ВидЦены В
|					(ВЫБРАТЬ РАЗЛИЧНЫЕ
|						ДанныеШапкиДокумента.РозничныйВидЦены
|					ИЗ
|						ДанныеШапкиДокумента КАК ДанныеШапкиДокумента)
|				И Номенклатура В
|					(ВЫБРАТЬ РАЗЛИЧНЫЕ
|						ТоварыДокумента.Номенклатура
|					ИЗ
|						Расхождения КАК ТоварыДокумента)
|				И Характеристика В
|					(ВЫБРАТЬ РАЗЛИЧНЫЕ
|						ТоварыДокумента.Характеристика
|					ИЗ
|						Расхождения КАК ТоварыДокумента)) КАК ЦеныВРознице
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, ) КАК КурсыВалютВидовЦены
|		ПО ЦеныВРознице.Валюта = КурсыВалютВидовЦены.Валюта
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(
|				&amp;Дата,
|				Валюта В
|					(ВЫБРАТЬ
|						ДанныеШапкиДокумента.Валюта
|					ИЗ
|						ДанныеШапкиДокумента КАК ДанныеШапкиДокумента)) КАК КурсВалютыДокумента
|		ПО (ИСТИНА)
|
|ИНДЕКСИРОВАТЬ ПО
|	Номенклатура,
|	Характеристика
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ЕСТЬNULL(КурсВалютыДокумента.Курс, 1) КАК КурсВзаиморасчетов,
|	ЕСТЬNULL(КурсВалютыДокумента.Кратность, 1) КАК КратностьВзаиморасчетов
|ИЗ
|	ДанныеШапкиДокумента КАК ДанныеШапкиДокумента
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(
|				&amp;Дата,
|				Валюта В
|					(ВЫБРАТЬ
|						Док.ВалютаВзаиморасчетов
|					ИЗ
|						ДанныеШапкиДокумента КАК Док)) КАК КурсВалютыДокумента
|		ПО ДанныеШапкиДокумента.ВалютаВзаиморасчетов = КурсВалютыДокумента.Валюта
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	Расхождения.ДокументОприходования,
|	Расхождения.Номенклатура,
|	Расхождения.Количество,
|	Расхождения.Цена,
|	Расхождения.Сумма,
|	Расхождения.СтавкаНДС,
|	Расхождения.СуммаНДС,
|	Расхождения.СуммаСНДС,
|	Расхождения.Характеристика,
|	1 КАК Коэффициент,
|	ЕСТЬNULL(ЦеныВРознице.Цена, 0) КАК ЦенаВРознице,
|	Расхождения.Количество * ЕСТЬNULL(ЦеныВРознице.Цена, 0) КАК СуммаВРознице,
|	Расхождения.НомерГТД,
|	Расхождения.СтранаПроисхождения,
|	Расхождения.ЕдиницаИзмерения
|ИЗ
|	Расхождения КАК Расхождения
|		ЛЕВОЕ СОЕДИНЕНИЕ ЦеныВРознице КАК ЦеныВРознице
|		ПО Расхождения.Номенклатура = ЦеныВРознице.Номенклатура
|			И Расхождения.Характеристика = ЦеныВРознице.Характеристика");

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата", Источник.Дата);
Запрос.УстановитьПараметр("КонтрагентПретензии", ВходящиеДанные.Контрагент);

РезультатыЗапроса = Запрос.ВыполнитьПакет();

ДанныеШапкиДокумента = РезультатыЗапроса[3].Выбрать();
ТабТовары = РезультатыЗапроса[4].Выгрузить();

ДанныеШапкиДокумента.Следующий();
ВходящиеДанные.Вставить("КурсВзаиморасчетов", ДанныеШапкиДокумента.КурсВзаиморасчетов);
ВходящиеДанные.Вставить("КратностьВзаиморасчетов", ДанныеШапкиДокумента.КратностьВзаиморасчетов);

ВходящиеДанные.Вставить("Товары", ТабТовары);
ВходящиеДанные.Вставить("СуммаДокумента", ТабТовары.Итог("СуммаСНДС"));</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем параметры, зависящие от режима налогообложения
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	// Определяем признак включения НДС в стоимость
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		Если УчетнаяПолитика.УСН Тогда
			Объект.НДСВключенВСтоимость = Истина;
		КонецЕсли;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
							<Источник>ДокументСсылка.ПоступлениеТоваровУслуг</Источник>
							<Приемник>ДокументСсылка.ВозвратТоваровПоставщику</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<ПриВыгрузке>Значение = КонецДня(Значение);</ПриВыгрузке>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<ПриВыгрузке>ДопПрефикс = ?(ВходящиеДанные.Контрагент = Источник.КонтрагентСтороннейКомпании, "РТ", "РП");
Значение = Лев(Значение, 5) + ДопПрефикс + Сред(Значение, 8);</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийВозвратТоваровПоставщику"/>
									<ПередВыгрузкой>Значение = "ПокупкаКомиссия";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>44</Код>
									<Наименование> --&gt; Сделка</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сделка" Вид="Реквизит" Тип="ДокументСсылка.ПоступлениеТоваровУслуг"/>
									<КодПравилаКонвертации>ПТУ_ЗакупкаТоваровУслуг                           </КодПравилаКонвертации>
									<ПередВыгрузкой>Значение = Источник.Ссылка;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Склад --&gt; Склад</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
									<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
									<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
									<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
									<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>43</Код>
									<Наименование> --&gt; СуммаДокумента</Наименование>
									<Порядок>600</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
									<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
									<ПриВыгрузке>Значение = Значение = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; Контрагент</Наименование>
									<Порядок>700</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
									<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
									<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
									<ПриВыгрузке>Если ВходящиеДанные.Контрагент = Источник.КонтрагентСтороннейКомпании Тогда
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.ВалютаВзаиморасчетовСоСтороннейКомпанией);
	Значение.Вставить("ВидДоговора",				"СПоставщиком");
	Значение.Вставить("Владелец",					ВходящиеДанные.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.СторонняяКомпания);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; Источник.ВалютаВзаиморасчетовСоСтороннейКомпанией;
	
	ВыгрузитьТолькоСсылку = Ложь;
	
ИначеЕсли ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				"СПоставщиком");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Источник.Соглашение);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Источник.ЗаказПоставщику);
	
	Если ЗначениеЗаполнено(Источник.Соглашение) Тогда
		Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Источник.Соглашение);
	Иначе
		Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; Источник.ВалютаВзаиморасчетов;
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
	
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
									<Порядок>800</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
									<Порядок>850</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Менеджер --&gt; Ответственный</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Группа>
									<Код>29</Код>
									<Наименование> --&gt; Товары</Наименование>
									<Порядок>1000</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>31</Код>
										<Наименование> --&gt; Номенклатура</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>30</Код>
										<Наименование> --&gt; Количество</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>39</Код>
										<Наименование> --&gt; Коэффициент</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>38</Код>
										<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									</Свойство>
									<Свойство>
										<Код>36</Код>
										<Наименование> --&gt; Цена</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>34</Код>
										<Наименование> --&gt; Сумма</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>33</Код>
										<Наименование> --&gt; СтавкаНДС</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
										<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>35</Код>
										<Наименование> --&gt; СуммаНДС</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>42</Код>
										<Наименование> --&gt; ЦенаВРознице</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ЦенаВРознице" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>41</Код>
										<Наименование> --&gt; СуммаВРознице</Наименование>
										<Порядок>500</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаВРознице" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>37</Код>
										<Наименование> --&gt; ДокументОприходования</Наименование>
										<Порядок>550</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДокументОприходования" Вид="Реквизит"/>
										<КодПравилаКонвертации>ПТУ_ЗакупкаТоваровУслуг                           </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>32</Код>
										<Наименование> --&gt; НомерГТД</Наименование>
										<Порядок>600</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
										<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>40</Код>
										<Наименование> --&gt; СтранаПроисхождения</Наименование>
										<Порядок>650</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
										<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПТУ_РасхожденияВСписание</Код>
							<Наименование>Документ: Поступление товаров услуг</Наименование>
							<Порядок>100</Порядок>
							<ПередВыгрузкой>Запрос = Новый Запрос("ВЫБРАТЬ
|	ВЫБОР
|		КОГДА ЕСТЬNULL(КурсыВалютДок.Курс, 0) &gt; 0
|				И ЕСТЬNULL(КурсыВалютДок.Кратность, 0) &gt; 0
|				И ЕСТЬNULL(КурсыВалютРег.Курс, 0) &gt; 0
|				И ЕСТЬNULL(КурсыВалютРег.Кратность, 0) &gt; 0
|			ТОГДА КурсыВалютДок.Курс * КурсыВалютРег.Кратность / (КурсыВалютДок.Кратность * КурсыВалютРег.Курс)
|		ИНАЧЕ 0
|	КОНЕЦ КАК Коэффициент
|ПОМЕСТИТЬ КоэффициентПересчетаВВалютуРег
|ИЗ
|	РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;ВалютаДок) КАК КурсыВалютДок
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;ВалютаРег) КАК КурсыВалютРег
|		ПО (ИСТИНА)
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	Расхождения.Номенклатура,
|	Расхождения.Ссылка КАК ДокументОприходования,
|	Расхождения.Количество,
|	(Расхождения.СуммаСНДС - Расхождения.СуммаНДС) * ЕСТЬNULL(КоэффициентПересчетаВВалютуРег.Коэффициент, 0) КАК Себестоимость,
|	ВЫБОР
|		КОГДА Расхождения.Количество = 0
|			ТОГДА 0
|		ИНАЧЕ (Расхождения.СуммаСНДС - Расхождения.СуммаНДС) / Расхождения.Количество
|	КОНЕЦ * ЕСТЬNULL(КоэффициентПересчетаВВалютуРег.Коэффициент, 0) КАК Цена,
|	1 КАК Коэффициент,
|	ЗНАЧЕНИЕ(Справочник.НомераГТД.ПустаяСсылка) КАК НомерГТД,
|	ЗНАЧЕНИЕ(Справочник.СтраныМира.ПустаяСсылка) КАК СтранаПроисхождения,
|	Расхождения.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения
|ИЗ
|	Документ.ПоступлениеТоваровУслуг.Расхождения КАК Расхождения
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ КоэффициентПересчетаВВалютуРег КАК КоэффициентПересчетаВВалютуРег
|		ПО (ИСТИНА)
|ГДЕ
|	Расхождения.Ссылка = &amp;Ссылка
|	И Расхождения.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
|	И Расхождения.ВариантРасхождений = ЗНАЧЕНИЕ(Перечисление.ВариантыРасхождений.Недостачи)
|	И Расхождения.ВариантОтраженияРасхождений = ЗНАЧЕНИЕ(Перечисление.ВариантыОтраженияРасхождений.НедостачиНаПрочиеРасходы)");

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата", Источник.Дата);
Запрос.УстановитьПараметр("ВалютаДок", Источник.Валюта);
Запрос.УстановитьПараметр("ВалютаРег", Константы.ВалютаРегламентированногоУчета.Получить());

РезультатыЗапроса = Запрос.ВыполнитьПакет();

ТабТовары = РезультатыЗапроса[1].Выгрузить();

ВходящиеДанные.Вставить("Товары", ТабТовары);
ВходящиеДанные.Вставить("СуммаДокумента", ТабТовары.Итог("Себестоимость"));</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем признак "Отражение в УСН" значением по умолчанию
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = ?(УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы,
								Перечисления.ОтражениеВУСН.НеПринимаются, Перечисления.ОтражениеВУСН.ПустаяСсылка());
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
							<Источник>ДокументСсылка.ПоступлениеТоваровУслуг</Источник>
							<Приемник>ДокументСсылка.СписаниеТоваров</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>5</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<ПриВыгрузке>Значение = КонецДня(Значение);</ПриВыгрузке>
								</Свойство>
								<Свойство Поиск="true">
									<Код>6</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<ПриВыгрузке>Значение = 	Лев(Значение, 5) + "Р" + Сред(Значение, 7);</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеТоваров"/>
									<ПередВыгрузкой>Значение = "ТоварыПродукция";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Склад --&gt; Склад</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
									<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
									<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
									<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование> --&gt; СуммаДокумента</Наименование>
									<Порядок>450</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Менеджер --&gt; Ответственный</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование> --&gt; Основание</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
									<ПередВыгрузкой>Значение = "Поступление товаров и услуг № " + ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Ложь)
	+ " от " + Формат(Источник.Дата, "ДФ='дд ММММ гггг'")+ " г.";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Группа>
									<Код>13</Код>
									<Наименование> --&gt; Товары</Наименование>
									<Порядок>650</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; Номенклатура</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; Количество</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>21</Код>
										<Наименование> --&gt; Коэффициент</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
										<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; Цена</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование> --&gt; ДокументОприходования</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДокументОприходования" Вид="Реквизит"/>
										<КодПравилаКонвертации>ПТУ_ЗакупкаТоваровУслуг                           </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>22</Код>
										<Наименование> --&gt; Себестоимость</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Себестоимость" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование> --&gt; НомерГТД</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
										<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>23</Код>
										<Наименование> --&gt; СтранаПроисхождения</Наименование>
										<Порядок>500</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									</Свойство>
								</Группа>
							</Свойства>
							<Значения/>
						</Правило>
					</Группа>
					<Группа>
						<Код>ПоступлениеТоваровУслугБезРасхождений</Код>
						<Наименование>ПКО для выгрузки документа "Поступление товаров и услуг" без учета расхождений</Наименование>
						<Порядок>100</Порядок>
						<Правило>
							<Код>ПТУ_ЗакупкаТоваровУслуг</Код>
							<Наименование>Документ: Поступление товаров услуг</Наименование>
							<Порядок>50</Порядок>
							<ПередВыгрузкой>Запрос = Новый Запрос("ВЫБРАТЬ
|	ДанныеШапкиДокумента.Склад.РозничныйВидЦены КАК РозничныйВидЦены,
|	ДанныеШапкиДокумента.Валюта,
|	ДанныеШапкиДокумента.ВалютаВзаиморасчетов
|ПОМЕСТИТЬ ДанныеШапкиДокумента
|ИЗ
|	Документ.ПоступлениеТоваровУслуг КАК ДанныеШапкиДокумента
|ГДЕ
|	ДанныеШапкиДокумента.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	Товары.Номенклатура,
|	Товары.Характеристика,
|	Товары.Количество,
|	Товары.СтавкаНДС,
|	Товары.СуммаНДС,
|	Товары.Цена / ЕСТЬNULL(Товары.Упаковка.Коэффициент, 1) КАК Цена,
|	Товары.Сумма,
|	Товары.НомерСтроки КАК НомерСтрокиДокумента,
|	Товары.СтатьяРасходов,
|	1 КАК Коэффициент,
|	Товары.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
|	Товары.НомерГТД,
|	Товары.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
|	Товары.СтатьяРасходов.КорреспондирующийСчет КАК КорреспондирующийСчет,
|	Товары.СуммаСНДС
|ПОМЕСТИТЬ ТоварыИУслугиДокумента
|ИЗ
|	Документ.ПоступлениеТоваровУслуг.Товары КАК Товары
|ГДЕ
|	Товары.Ссылка = &amp;Ссылка
|	И (НЕ Товары.Ссылка.ЕстьРасхождения
|			ИЛИ Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга))
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	Товары.Номенклатура,
|	Товары.Характеристика,
|	Товары.Количество,
|	Товары.СтавкаНДС,
|	Товары.СуммаНДС,
|	Товары.Цена / ЕСТЬNULL(Товары.Упаковка.Коэффициент, 1) КАК Цена,
|	Товары.Сумма,
|	Товары.НомерСтроки,
|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка),
|	1,
|	Товары.Номенклатура.ЕдиницаИзмерения,
|	Товары.НомерГТД,
|	Товары.НомерГТД.СтранаПроисхождения,
|	NULL,
|	Товары.СуммаСНДС
|ИЗ
|	Документ.ПоступлениеТоваровУслуг.ТоварыПоДаннымПоставщика КАК Товары
|ГДЕ
|	Товары.Ссылка = &amp;Ссылка
|	И Товары.Ссылка.ЕстьРасхождения
|	И Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ЦеныВРознице.Цена / ЕСТЬNULL(ЦеныВРознице.Упаковка.Коэффициент, 1) * ВЫБОР
|		КОГДА ЕСТЬNULL(КурсВалютыДокумента.Кратность, 0) &gt; 0
|				И ЕСТЬNULL(КурсВалютыДокумента.Курс, 0) &gt; 0
|				И ЕСТЬNULL(КурсыВалютВидовЦены.Кратность, 0) &gt; 0
|				И ЕСТЬNULL(КурсыВалютВидовЦены.Курс, 0) &gt; 0
|			ТОГДА КурсыВалютВидовЦены.Курс * КурсВалютыДокумента.Кратность / (КурсыВалютВидовЦены.Кратность * КурсВалютыДокумента.Курс)
|	КОНЕЦ КАК Цена,
|	ЦеныВРознице.Номенклатура КАК Номенклатура,
|	ЦеныВРознице.Характеристика КАК Характеристика
|ПОМЕСТИТЬ ЦеныВРознице
|ИЗ
|	РегистрСведений.ЦеныНоменклатуры.СрезПоследних(
|			&amp;Дата,
|			ВидЦены В
|					(ВЫБРАТЬ РАЗЛИЧНЫЕ
|						ДанныеШапкиДокумента.РозничныйВидЦены
|					ИЗ
|						ДанныеШапкиДокумента КАК ДанныеШапкиДокумента)
|				И Номенклатура В
|					(ВЫБРАТЬ РАЗЛИЧНЫЕ
|						ТоварыИУслугиДокумента.Номенклатура
|					ИЗ
|						ТоварыИУслугиДокумента КАК ТоварыИУслугиДокумента)
|				И Характеристика В
|					(ВЫБРАТЬ РАЗЛИЧНЫЕ
|						ТоварыИУслугиДокумента.Характеристика
|					ИЗ
|						ТоварыИУслугиДокумента КАК ТоварыИУслугиДокумента)) КАК ЦеныВРознице
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, ) КАК КурсыВалютВидовЦены
|		ПО ЦеныВРознице.Валюта = КурсыВалютВидовЦены.Валюта
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(
|				&amp;Дата,
|				Валюта В
|					(ВЫБРАТЬ
|						ДанныеШапкиДокумента.Валюта
|					ИЗ
|						ДанныеШапкиДокумента КАК ДанныеШапкиДокумента)) КАК КурсВалютыДокумента
|		ПО (ИСТИНА)
|
|ИНДЕКСИРОВАТЬ ПО
|	Номенклатура,
|	Характеристика
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ТоварыИУслугиДокумента.Номенклатура,
|	ТоварыИУслугиДокумента.Характеристика,
|	ТоварыИУслугиДокумента.Количество,
|	ТоварыИУслугиДокумента.СтавкаНДС,
|	ТоварыИУслугиДокумента.СуммаНДС,
|	ТоварыИУслугиДокумента.Цена,
|	ТоварыИУслугиДокумента.Сумма,
|	ТоварыИУслугиДокумента.НомерСтрокиДокумента,
|	ТоварыИУслугиДокумента.СтатьяРасходов,
|	ТоварыИУслугиДокумента.Коэффициент,
|	ЕСТЬNULL(ЦеныВРознице.Цена, 0) КАК ЦенаВРознице,
|	ТоварыИУслугиДокумента.Количество * ЕСТЬNULL(ЦеныВРознице.Цена, 0) КАК СуммаВРознице,
|	ТоварыИУслугиДокумента.ЕдиницаИзмерения,
|	ТоварыИУслугиДокумента.НомерГТД,
|	ТоварыИУслугиДокумента.СтранаПроисхождения,
|	ТоварыИУслугиДокумента.СуммаСНДС
|ПОМЕСТИТЬ ТоварыИУслугиДокументаСЦенамиРозницы
|ИЗ
|	ТоварыИУслугиДокумента КАК ТоварыИУслугиДокумента
|		ЛЕВОЕ СОЕДИНЕНИЕ ЦеныВРознице КАК ЦеныВРознице
|		ПО ТоварыИУслугиДокумента.Номенклатура = ЦеныВРознице.Номенклатура
|			И ТоварыИУслугиДокумента.Характеристика = ЦеныВРознице.Характеристика
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ЕСТЬNULL(КурсВалютыДокумента.Курс, 1) КАК КурсВзаиморасчетов,
|	ЕСТЬNULL(КурсВалютыДокумента.Кратность, 1) КАК КратностьВзаиморасчетов
|ИЗ
|	ДанныеШапкиДокумента КАК ДанныеШапкиДокумента
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(
|				&amp;Дата,
|				Валюта В
|					(ВЫБРАТЬ
|						Док.ВалютаВзаиморасчетов
|					ИЗ
|						ДанныеШапкиДокумента КАК Док)) КАК КурсВалютыДокумента
|		ПО ДанныеШапкиДокумента.ВалютаВзаиморасчетов = КурсВалютыДокумента.Валюта
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ТоварыДокумента.Номенклатура,
|	ТоварыДокумента.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
|	ТоварыДокумента.Характеристика,
|	ТоварыДокумента.Количество,
|	ТоварыДокумента.Цена,
|	ТоварыДокумента.Сумма,
|	ТоварыДокумента.СтавкаНДС,
|	ТоварыДокумента.СтавкаНДС КАК СтавкаНДСВРознице,
|	ТоварыДокумента.СуммаНДС,
|	ТоварыДокумента.Коэффициент,
|	ТоварыДокумента.ЦенаВРознице,
|	ТоварыДокумента.СуммаВРознице,
|	ТоварыДокумента.НомерГТД,
|	ТоварыДокумента.СтранаПроисхождения,
|	ТоварыДокумента.СуммаСНДС
|ИЗ
|	ТоварыИУслугиДокументаСЦенамиРозницы КАК ТоварыДокумента
|ГДЕ
|	ТоварыДокумента.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
|
|УПОРЯДОЧИТЬ ПО
|	ТоварыДокумента.НомерСтрокиДокумента
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ТоварыДокумента.Номенклатура,
|	ТоварыДокумента.Количество,
|	ТоварыДокумента.СтавкаНДС,
|	ТоварыДокумента.СуммаНДС,
|	ТоварыДокумента.Цена,
|	ТоварыДокумента.Сумма,
|	ТоварыДокумента.СтатьяРасходов.КорреспондирующийСчет КАК КорреспондирующийСчет,
|	ТоварыДокумента.СтатьяРасходов,
|	ТоварыДокумента.СуммаСНДС
|ИЗ
|	ТоварыИУслугиДокументаСЦенамиРозницы КАК ТоварыДокумента
|ГДЕ
|	ТоварыДокумента.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
|	И ТоварыДокумента.СтатьяРасходов.ВариантРаспределенияРасходов &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаСебестоимостьТоваров)");

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата", Источник.Дата);

РезультатыЗапроса = Запрос.ВыполнитьПакет();

ДанныеШапкиДокумента = РезультатыЗапроса[4].Выбрать();
ТабТовары = РезультатыЗапроса[5].Выгрузить();
ТабУслуги = РезультатыЗапроса[6].Выгрузить();

ДанныеШапкиДокумента.Следующий();
ВходящиеДанные.Вставить("КурсВзаиморасчетов", ДанныеШапкиДокумента.КурсВзаиморасчетов);
ВходящиеДанные.Вставить("КратностьВзаиморасчетов", ДанныеШапкиДокумента.КратностьВзаиморасчетов);

ВходящиеДанные.Вставить("Товары", ТабТовары);
ВходящиеДанные.Вставить("Услуги", ТабУслуги);
ВходящиеДанные.Вставить("СуммаДокумента", ТабТовары.Итог("СуммаСНДС") + ТабУслуги.Итог("СуммаСНДС"));</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);
Выполнить(Алгоритмы.УпрощенныйУчетНДС);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		
		ТаблицаСтатейРасходов = ПараметрыОбъекта.Получить("УслугиТабличнаяЧасть");
		Для Каждого СтрокаТЧ Из Объект.Услуги Цикл
			
			СчетЗатрат	   = СтрокаТЧ.СчетЗатрат;
			СчетЗатратНУ   = СтрокаТЧ.СчетЗатратНУ;
			СтатьяРасходов = ТаблицаСтатейРасходов[СтрокаТЧ.НомерСтроки - 1].СтатьяРасходов;
			Если ЗначениеЗаполнено(СчетЗатрат) Тогда
				
				Для Каждого СтрокаВидаСубконто Из СчетЗатрат.ВидыСубконто Цикл
					
					ТипСубконто = СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
					Если ТипСубконто.СодержитТип(ТипЗнч(СтатьяРасходов)) Тогда
						СтрокаТЧ["Субконто" + СтрокаВидаСубконто.НомерСтроки] = СтатьяРасходов;
					КонецЕсли;
				КонецЦикла;
			КонецЕсли;
			
			Если ЗначениеЗаполнено(СчетЗатратНУ) Тогда
				
				Для Каждого СтрокаВидаСубконто Из СчетЗатрат.ВидыСубконто Цикл
					
					ТипСубконто = СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
					Если ТипСубконто.СодержитТип(ТипЗнч(СтатьяРасходов)) Тогда
						СтрокаТЧ["СубконтоНУ" + СтрокаВидаСубконто.НомерСтроки] = СтатьяРасходов;
					КонецЕсли;
				КонецЦикла;
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем параметры, зависящие от режима налогообложения
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		Если УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы Тогда
			ВариантОтраженияУСН = ?(ПараметрыОбъекта["ЭтоЕНВД"], Перечисления.ОтражениеВУСН.НеПринимаются, Перечисления.ОтражениеВУСН.Принимаются);
		Иначе
			ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка();
		КонецЕсли;
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН &lt;&gt; Перечисления.ОтражениеВУСН.Принимаются Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
		// Заполняем отражение в УСН для ТЧ Услуги
		Для Каждого СтрокаТЧ Из Объект.Услуги Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН &lt;&gt; Перечисления.ОтражениеВУСН.Принимаются Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
		// Определяем признак включения НДС в стоимость
		Если УчетнаяПолитика.УСН ИЛИ ПараметрыОбъекта["ЭтоЕНВД"] Тогда
			Объект.НДСВключенВСтоимость = Истина;
		КонецЕсли;
	КонецЕсли;
	
	Если НЕ Объект.НДСВключенВСтоимость И ПараметрыОбъекта["ЭтоЕНВД"] Тогда
		Объект.НДСВключенВСтоимость = Истина;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПоступлениеТоваровУслуг</Источник>
							<Приемник>ДокументСсылка.ПоступлениеТоваровУслуг</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование> --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеТоваровУслуг"/>
									<ПередВыгрузкой>Значение = "ПокупкаКомиссия";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
									<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
									<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
									<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				"СПоставщиком");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Источник.Соглашение);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Источник.ЗаказПоставщику);
	
	Если ЗначениеЗаполнено(Источник.Соглашение) Тогда
		Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Источник.Соглашение);
	Иначе
		Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; Источник.ВалютаВзаиморасчетов;
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<НеЗамещать>true</НеЗамещать>
									<Код>26</Код>
									<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
									<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>34</Код>
									<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
									<Порядок>550</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>35</Код>
									<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
									<Порядок>600</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>Склад --&gt; Склад</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
									<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
									<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
									<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
									<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
									<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>ПредъявленСчетФактура --&gt; ПредъявленСчетФактура</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
									<Приемник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>45</Код>
									<Наименование>ДатаСчетаФактуры --&gt; ДатаВходящегоСчетаФактуры</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>46</Код>
									<Наименование>НомерСчетаФактуры --&gt; НомерВходящегоСчетаФактуры</Наименование>
									<Порядок>1000</Порядок>
									<Источник Имя="НомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>52</Код>
									<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
									<Порядок>1050</Порядок>
									<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>53</Код>
									<Наименование>Менеджер --&gt; Ответственный</Наименование>
									<Порядок>1100</Порядок>
									<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>1150</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>67</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>1200</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>72</Код>
									<Наименование>ЗакупкаПодДеятельностьОблагаемуюЕНВД --&gt;</Наименование>
									<Порядок>1250</Порядок>
									<Источник Имя="ЗакупкаПодДеятельностьОблагаемуюЕНВД" Вид="Реквизит" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>ЭтоЕНВД</ИмяПараметраДляПередачи>
								</Свойство>
								<Группа>
									<Код>15</Код>
									<Наименование> --&gt; Товары</Наименование>
									<Порядок>1300</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>20</Код>
										<Наименование> --&gt; Номенклатура</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
										<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; Количество</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование> --&gt; Коэффициент</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>25</Код>
										<Наименование> --&gt; Цена</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>24</Код>
										<Наименование> --&gt; Сумма</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>22</Код>
										<Наименование> --&gt; СтавкаНДС</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
										<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>36</Код>
										<Наименование> --&gt; СуммаНДС</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>21</Код>
										<Наименование> --&gt; НомерГТД</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
										<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>23</Код>
										<Наименование> --&gt; СтранаПроисхождения</Наименование>
										<Порядок>500</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
										<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>68</Код>
										<Наименование> --&gt; СтавкаНДСВРознице</Наименование>
										<Порядок>550</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтавкаНДСВРознице" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
										<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>69</Код>
										<Наименование> --&gt; СуммаВРознице</Наименование>
										<Порядок>600</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаВРознице" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>70</Код>
										<Наименование> --&gt; ЦенаВРознице</Наименование>
										<Порядок>650</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ЦенаВРознице" Вид="Реквизит" Тип="Число"/>
									</Свойство>
								</Группа>
								<Группа>
									<Код>38</Код>
									<Наименование> --&gt; Услуги</Наименование>
									<Порядок>1350</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>39</Код>
										<Наименование> --&gt; Номенклатура</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>40</Код>
										<Наименование> --&gt; Количество</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>41</Код>
										<Наименование> --&gt; СтавкаНДС</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
										<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>42</Код>
										<Наименование> --&gt; Сумма</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>43</Код>
										<Наименование> --&gt; СуммаНДС</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>44</Код>
										<Наименование> --&gt; Цена</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>64</Код>
										<Наименование> --&gt; СчетЗатрат</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетЗатрат" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ОбъектКоллекции.КорреспондирующийСчет;
Отказ = НЕ ЗначениеЗаполнено(Значение);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>65</Код>
										<Наименование> --&gt; СчетЗатратНУ</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетЗатратНУ" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ОбъектКоллекции.КорреспондирующийСчет;
Отказ = НЕ ЗначениеЗаполнено(Значение);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>66</Код>
										<Наименование> --&gt;</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="" Вид=""/>
										<ИмяПараметраДляПередачи>СтатьяРасходов</ИмяПараметраДляПередачи>
										<ПередВыгрузкой>Значение = ОбъектКоллекции.СтатьяРасходов;

Если ЗначениеЗаполнено(Значение) Тогда
	
	КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет");
	Если ЗначениеЗаполнено(КоррСчет) Тогда
		ИмяПКО = ?(Найти(КоррСчет, "91.02") &gt; 0, "СтатьиРасходовВПрочиеДоходыИРасходы", "СтатьиРасходовВСтатьиЗатрат");
	Иначе
		Пусто = Истина;
	КонецЕсли;
	
Иначе
	Пусто = Истина;	
КонецЕсли;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>71</Код>
									<Наименование>Соглашение --&gt;</Наименование>
									<Порядок>1400</Порядок>
									<Источник Имя="Соглашение" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСПоставщиками"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>73</Код>
									<Наименование>СуммаДокумента --&gt;</Наименование>
									<Порядок>1450</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Группа Отключить="true">
									<Код>54</Код>
									<Наименование>Товары --&gt;</Наименование>
									<Порядок>1500</Порядок>
									<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>55</Код>
										<Наименование>Количество --&gt;</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>56</Код>
										<Наименование>КоличествоУпаковок --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="КоличествоУпаковок" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>57</Код>
										<Наименование>Номенклатура --&gt;</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>58</Код>
										<Наименование>НомерГТД --&gt;</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>59</Код>
										<Наименование>СтавкаНДС --&gt;</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>60</Код>
										<Наименование>Сумма --&gt;</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>61</Код>
										<Наименование>СуммаНДС --&gt;</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>62</Код>
										<Наименование>Упаковка --&gt;</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="Упаковка" Вид="Реквизит" Тип="СправочникСсылка.УпаковкиНоменклатуры"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>63</Код>
										<Наименование>Цена --&gt;</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>75</Код>
										<Наименование>СтатьяРасходов --&gt;</Наименование>
										<Порядок>500</Порядок>
										<Источник Имя="СтатьяРасходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиРасходов"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>74</Код>
									<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
									<Порядок>1550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПТУ_ПриемНаКомиссию</Код>
							<Наименование>Документ: Поступление товаров услуг</Наименование>
							<Порядок>100</Порядок>
							<ПередВыгрузкой>Запрос = Новый Запрос("ВЫБРАТЬ
|	ДанныеШапкиДокумента.Склад.РозничныйВидЦены КАК РозничныйВидЦены,
|	ДанныеШапкиДокумента.Валюта,
|	ДанныеШапкиДокумента.ВалютаВзаиморасчетов
|ПОМЕСТИТЬ ДанныеШапкиДокумента
|ИЗ
|	Документ.ПоступлениеТоваровУслуг КАК ДанныеШапкиДокумента
|ГДЕ
|	ДанныеШапкиДокумента.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	Товары.Номенклатура,
|	Товары.Характеристика,
|	Товары.Количество,
|	Товары.СтавкаНДС,
|	Товары.СуммаНДС,
|	Товары.Цена / ЕСТЬNULL(Товары.Упаковка.Коэффициент, 1) КАК Цена,
|	Товары.Сумма,
|	Товары.НомерСтроки КАК НомерСтрокиДокумента,
|	Товары.СтатьяРасходов,
|	1 КАК Коэффициент,
|	Товары.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
|	Товары.НомерГТД,
|	Товары.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
|	Товары.СтатьяРасходов.КорреспондирующийСчет КАК КорреспондирующийСчет,
|	Товары.СуммаСНДС
|ПОМЕСТИТЬ ТоварыДокумента
|ИЗ
|	Документ.ПоступлениеТоваровУслуг.Товары КАК Товары
|ГДЕ
|	Товары.Ссылка = &amp;Ссылка
|	И НЕ Товары.Ссылка.ЕстьРасхождения
|	И Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	Товары.Номенклатура,
|	Товары.Характеристика,
|	Товары.Количество,
|	Товары.СтавкаНДС,
|	Товары.СуммаНДС,
|	Товары.Цена / ЕСТЬNULL(Товары.Упаковка.Коэффициент, 1) КАК Цена,
|	Товары.Сумма,
|	Товары.НомерСтроки,
|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка),
|	1,
|	Товары.Номенклатура.ЕдиницаИзмерения,
|	Товары.НомерГТД,
|	Товары.НомерГТД.СтранаПроисхождения,
|	NULL,
|	Товары.СуммаСНДС
|ИЗ
|	Документ.ПоступлениеТоваровУслуг.ТоварыПоДаннымПоставщика КАК Товары
|ГДЕ
|	Товары.Ссылка = &amp;Ссылка
|	И Товары.Ссылка.ЕстьРасхождения
|	И Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ЦеныВРознице.Цена / ЕСТЬNULL(ЦеныВРознице.Упаковка.Коэффициент, 1) * ВЫБОР
|		КОГДА ЕСТЬNULL(КурсВалютыДокумента.Кратность, 0) &gt; 0
|				И ЕСТЬNULL(КурсВалютыДокумента.Курс, 0) &gt; 0
|				И ЕСТЬNULL(КурсыВалютВидовЦены.Кратность, 0) &gt; 0
|				И ЕСТЬNULL(КурсыВалютВидовЦены.Курс, 0) &gt; 0
|			ТОГДА КурсыВалютВидовЦены.Курс * КурсВалютыДокумента.Кратность / (КурсыВалютВидовЦены.Кратность * КурсВалютыДокумента.Курс)
|	КОНЕЦ КАК Цена,
|	ЦеныВРознице.Номенклатура КАК Номенклатура,
|	ЦеныВРознице.Характеристика КАК Характеристика
|ПОМЕСТИТЬ ЦеныВРознице
|ИЗ
|	РегистрСведений.ЦеныНоменклатуры.СрезПоследних(
|			&amp;Дата,
|			ВидЦены В
|					(ВЫБРАТЬ РАЗЛИЧНЫЕ
|						ДанныеШапкиДокумента.РозничныйВидЦены
|					ИЗ
|						ДанныеШапкиДокумента КАК ДанныеШапкиДокумента)
|				И Номенклатура В
|					(ВЫБРАТЬ РАЗЛИЧНЫЕ
|						ТоварыДокумента.Номенклатура
|					ИЗ
|						ТоварыДокумента КАК ТоварыДокумента)
|				И Характеристика В
|					(ВЫБРАТЬ РАЗЛИЧНЫЕ
|						ТоварыДокумента.Характеристика
|					ИЗ
|						ТоварыДокумента КАК ТоварыДокумента)) КАК ЦеныВРознице
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, ) КАК КурсыВалютВидовЦены
|		ПО ЦеныВРознице.Валюта = КурсыВалютВидовЦены.Валюта
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(
|				&amp;Дата,
|				Валюта В
|					(ВЫБРАТЬ
|						ДанныеШапкиДокумента.Валюта
|					ИЗ
|						ДанныеШапкиДокумента КАК ДанныеШапкиДокумента)) КАК КурсВалютыДокумента
|		ПО (ИСТИНА)
|
|ИНДЕКСИРОВАТЬ ПО
|	Номенклатура,
|	Характеристика
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ЕСТЬNULL(КурсВалютыДокумента.Курс, 1) КАК КурсВзаиморасчетов,
|	ЕСТЬNULL(КурсВалютыДокумента.Кратность, 1) КАК КратностьВзаиморасчетов
|ИЗ
|	ДанныеШапкиДокумента КАК ДанныеШапкиДокумента
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(
|				&amp;Дата,
|				Валюта В
|					(ВЫБРАТЬ
|						Док.ВалютаВзаиморасчетов
|					ИЗ
|						ДанныеШапкиДокумента КАК Док)) КАК КурсВалютыДокумента
|		ПО ДанныеШапкиДокумента.ВалютаВзаиморасчетов = КурсВалютыДокумента.Валюта
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ТоварыИУслугиДокумента.Номенклатура,
|	ТоварыИУслугиДокумента.Характеристика,
|	ТоварыИУслугиДокумента.Количество,
|	ТоварыИУслугиДокумента.СтавкаНДС,
|	ТоварыИУслугиДокумента.СтавкаНДС КАК СтавкаНДСВРознице,
|	ТоварыИУслугиДокумента.СуммаНДС,
|	ТоварыИУслугиДокумента.Цена,
|	ТоварыИУслугиДокумента.Сумма,
|	ТоварыИУслугиДокумента.НомерСтрокиДокумента,
|	ТоварыИУслугиДокумента.СтатьяРасходов,
|	ТоварыИУслугиДокумента.Коэффициент,
|	ЕСТЬNULL(ЦеныВРознице.Цена, 0) КАК ЦенаВРознице,
|	ТоварыИУслугиДокумента.Количество * ЕСТЬNULL(ЦеныВРознице.Цена, 0) КАК СуммаВРознице,
|	ТоварыИУслугиДокумента.ЕдиницаИзмерения,
|	ТоварыИУслугиДокумента.НомерГТД,
|	ТоварыИУслугиДокумента.СтранаПроисхождения,
|	ТоварыИУслугиДокумента.СуммаСНДС
|ИЗ
|	ТоварыДокумента КАК ТоварыИУслугиДокумента
|		ЛЕВОЕ СОЕДИНЕНИЕ ЦеныВРознице КАК ЦеныВРознице
|		ПО ТоварыИУслугиДокумента.Номенклатура = ЦеныВРознице.Номенклатура
|			И ТоварыИУслугиДокумента.Характеристика = ЦеныВРознице.Характеристика");
	
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата", Источник.Дата);

РезультатыЗапроса = Запрос.ВыполнитьПакет();

ДанныеШапкиДокумента = РезультатыЗапроса[3].Выбрать();
ТабТовары = РезультатыЗапроса[4].Выгрузить();

ДанныеШапкиДокумента.Следующий();
ВходящиеДанные.Вставить("КурсВзаиморасчетов", ДанныеШапкиДокумента.КурсВзаиморасчетов);
ВходящиеДанные.Вставить("КратностьВзаиморасчетов", ДанныеШапкиДокумента.КратностьВзаиморасчетов);

ВходящиеДанные.Вставить("Товары", ТабТовары);
ВходящиеДанные.Вставить("СуммаДокумента", ТабТовары.Итог("СуммаСНДС"));</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПоступлениеТоваровУслуг</Источник>
							<Приемник>ДокументСсылка.ПоступлениеТоваровУслуг</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование> --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеТоваровУслуг"/>
									<ПередВыгрузкой>Значение = "ПокупкаКомиссия";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
									<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
									<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
									<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
	Значение.Вставить("ВидДоговора",				"СКомитентом");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Источник.Соглашение);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<НеЗамещать>true</НеЗамещать>
									<Код>32</Код>
									<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
									<ПередВыгрузкой>Значение = "НеЗачитывать";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>33</Код>
									<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
									<Порядок>550</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>34</Код>
									<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
									<Порядок>600</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование>Склад --&gt; Склад</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
									<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
									<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>35</Код>
									<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
									<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>36</Код>
									<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
									<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>54</Код>
									<Наименование>ПредъявленСчетФактура --&gt; ПредъявленСчетФактура</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
									<Приемник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>59</Код>
									<Наименование>ДатаСчетаФактуры --&gt; ДатаВходящегоСчетаФактуры</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>60</Код>
									<Наименование>НомерСчетаФактуры --&gt; НомерВходящегоСчетаФактуры</Наименование>
									<Порядок>1000</Порядок>
									<Источник Имя="НомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>61</Код>
									<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
									<Порядок>1050</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>51</Код>
									<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
									<Порядок>1100</Порядок>
									<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>52</Код>
									<Наименование>Менеджер --&gt; Ответственный</Наименование>
									<Порядок>1150</Порядок>
									<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>1200</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>53</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>1250</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Группа>
									<Код>13</Код>
									<Наименование> --&gt; Товары</Наименование>
									<Порядок>1300</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; Номенклатура</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>29</Код>
										<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
										<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>14</Код>
										<Наименование> --&gt; Количество</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>30</Код>
										<Наименование> --&gt; Коэффициент</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование> --&gt; Цена</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; Сумма</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; СтавкаНДС</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
										<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование> --&gt; СуммаНДС</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>16</Код>
										<Наименование> --&gt; НомерГТД</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
										<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>31</Код>
										<Наименование> --&gt; СтранаПроисхождения</Наименование>
										<Порядок>500</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
										<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>55</Код>
										<Наименование> --&gt; СтавкаНДСВРознице</Наименование>
										<Порядок>550</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтавкаНДСВРознице" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
										<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>56</Код>
										<Наименование> --&gt; СуммаВРознице</Наименование>
										<Порядок>600</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаВРознице" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>57</Код>
										<Наименование> --&gt; ЦенаВРознице</Наименование>
										<Порядок>650</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ЦенаВРознице" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>63</Код>
										<Наименование> --&gt; ОтражениеВУСН</Наименование>
										<Порядок>700</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ОтражениеВУСН" Вид="Реквизит" Тип="ПеречислениеСсылка.ОтражениеВУСН"/>
										<ПередВыгрузкой>Значение = "НеПринимаются";</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>62</Код>
									<Наименование>Соглашение --&gt;</Наименование>
									<Порядок>1350</Порядок>
									<Источник Имя="Соглашение" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСПоставщиками"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПТУ_ЗакупкаИмпорт</Код>
							<Наименование>Документ: Поступление товаров услуг</Наименование>
							<Порядок>150</Порядок>
							<ПередВыгрузкой>Запрос = Новый Запрос("ВЫБРАТЬ
|	ДанныеШапкиДокумента.Склад.РозничныйВидЦены КАК РозничныйВидЦены,
|	ДанныеШапкиДокумента.Валюта,
|	ДанныеШапкиДокумента.ВалютаВзаиморасчетов
|ПОМЕСТИТЬ ДанныеШапкиДокумента
|ИЗ
|	Документ.ПоступлениеТоваровУслуг КАК ДанныеШапкиДокумента
|ГДЕ
|	ДанныеШапкиДокумента.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	Товары.Номенклатура,
|	Товары.Характеристика,
|	Товары.Количество,
|	Товары.СтавкаНДС,
|	Товары.СуммаНДС,
|	Товары.Цена / ЕСТЬNULL(Товары.Упаковка.Коэффициент, 1) КАК Цена,
|	Товары.Сумма,
|	Товары.НомерСтроки КАК НомерСтрокиДокумента,
|	Товары.СтатьяРасходов,
|	1 КАК Коэффициент
|ПОМЕСТИТЬ ТоварыДокумента
|ИЗ
|	Документ.ПоступлениеТоваровУслуг.Товары КАК Товары
|ГДЕ
|	Товары.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ДвиженияДокумента.Организация КАК Организация,
|	ДвиженияДокумента.Поставщик КАК Поставщик,
|	ДвиженияДокумента.Номенклатура КАК Номенклатура,
|	ДвиженияДокумента.Характеристика КАК Характеристика,
|	ДвиженияДокумента.Склад КАК Склад,
|	ДвиженияДокумента.ВидЗапасов КАК ВидЗапасов,
|	СУММА(ДвиженияДокумента.Количество) КАК Количество
|ПОМЕСТИТЬ ДвиженияДокумента
|ИЗ
|	РегистрНакопления.ТоварыОрганизацийКОформлению КАК ДвиженияДокумента
|ГДЕ
|	ДвиженияДокумента.Регистратор = &amp;Ссылка
|	И ДвиженияДокумента.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход)
|
|СГРУППИРОВАТЬ ПО
|	ДвиженияДокумента.Организация,
|	ДвиженияДокумента.Поставщик,
|	ДвиженияДокумента.Номенклатура,
|	ДвиженияДокумента.Характеристика,
|	ДвиженияДокумента.Склад,
|	ДвиженияДокумента.ВидЗапасов
|
|ИНДЕКСИРОВАТЬ ПО
|	Характеристика,
|	Номенклатура,
|	ВидЗапасов,
|	Поставщик,
|	Склад,
|	Организация
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ЕСТЬNULL(КурсВалютыДокумента.Курс, 1) КАК КурсВзаиморасчетов,
|	ЕСТЬNULL(КурсВалютыДокумента.Кратность, 1) КАК КратностьВзаиморасчетов
|ИЗ
|	ДанныеШапкиДокумента КАК ДанныеШапкиДокумента
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(
|				&amp;Дата,
|				Валюта В
|					(ВЫБРАТЬ
|						Док.ВалютаВзаиморасчетов
|					ИЗ
|						ДанныеШапкиДокумента КАК Док)) КАК КурсВалютыДокумента
|		ПО ДанныеШапкиДокумента.ВалютаВзаиморасчетов = КурсВалютыДокумента.Валюта
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ТоварыДокумента.Номенклатура,
|	ТоварыДокумента.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
|	ТоварыДокумента.Характеристика,
|	ТоварыДокумента.Количество,
|	ТоварыДокумента.Цена,
|	ТоварыДокумента.Сумма,
|	ВЫБОР
|		КОГДА ЦеныВРознице.Цена ЕСТЬ NULL 
|			ТОГДА 0
|		ИНАЧЕ ЦеныВРознице.Цена / ЕСТЬNULL(ЦеныВРознице.Упаковка.Коэффициент, 1) * ВЫБОР
|				КОГДА ЕСТЬNULL(КурсВалютыДокумента.Кратность, 0) &gt; 0
|						И ЕСТЬNULL(КурсВалютыДокумента.Курс, 0) &gt; 0
|						И ЕСТЬNULL(КурсыВалютВидовЦены.Кратность, 0) &gt; 0
|						И ЕСТЬNULL(КурсыВалютВидовЦены.Курс, 0) &gt; 0
|					ТОГДА КурсыВалютВидовЦены.Курс * КурсВалютыДокумента.Кратность / (КурсыВалютВидовЦены.Кратность * КурсВалютыДокумента.Курс)
|			КОНЕЦ
|	КОНЕЦ КАК ЦенаВРознице,
|	0 КАК СуммаВРознице,
|	ТоварыДокумента.СтавкаНДС,
|	ТоварыДокумента.СтавкаНДС КАК СтавкаНДСВРознице,
|	ТоварыДокумента.СуммаНДС,
|	ТоварыДокумента.НомерСтрокиДокумента,
|	ТоварыДокумента.Коэффициент
|ИЗ
|	ТоварыДокумента КАК ТоварыДокумента
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры.СрезПоследних(
|				&amp;Дата,
|				ВидЦены В
|						(ВЫБРАТЬ РАЗЛИЧНЫЕ
|							ДанныеШапкиДокумента.РозничныйВидЦены
|						ИЗ
|							ДанныеШапкиДокумента КАК ДанныеШапкиДокумента)
|					И Номенклатура В
|						(ВЫБРАТЬ РАЗЛИЧНЫЕ
|							ТоварыДокумента.Номенклатура
|						ИЗ
|							ТоварыДокумента КАК ТоварыДокумента)
|					И Характеристика В
|						(ВЫБРАТЬ РАЗЛИЧНЫЕ
|							ТоварыДокумента.Характеристика
|						ИЗ
|							ТоварыДокумента КАК ТоварыДокумента)) КАК ЦеныВРознице
|		ПО ТоварыДокумента.Номенклатура = ЦеныВРознице.Номенклатура
|			И ТоварыДокумента.Характеристика = ЦеныВРознице.Характеристика
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(
|				&amp;Дата,
|				Валюта В
|					(ВЫБРАТЬ
|						ДанныеШапкиДокумента.Валюта
|					ИЗ
|						ДанныеШапкиДокумента КАК ДанныеШапкиДокумента)) КАК КурсВалютыДокумента
|		ПО (ИСТИНА)
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, ) КАК КурсыВалютВидовЦены
|		ПО (ЦеныВРознице.Валюта = КурсыВалютВидовЦены.Валюта)
|ГДЕ
|	ТоварыДокумента.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ОстаткиНеоформленныхТоваров.Организация,
|	ОстаткиНеоформленныхТоваров.Поставщик,
|	ОстаткиНеоформленныхТоваров.Номенклатура,
|	ОстаткиНеоформленныхТоваров.Характеристика,
|	ОстаткиНеоформленныхТоваров.Склад,
|	ОстаткиНеоформленныхТоваров.ВидЗапасов,
|	ОстаткиНеоформленныхТоваров.КоличествоОстаток КАК Количество
|ИЗ
|	РегистрНакопления.ТоварыОрганизацийКОформлению.Остатки(&amp;Дата, ) КАК ОстаткиНеоформленныхТоваров
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ДвиженияДокумента КАК ДвиженияДокумента
|		ПО ОстаткиНеоформленныхТоваров.Характеристика = ДвиженияДокумента.Характеристика
|			И ОстаткиНеоформленныхТоваров.Номенклатура = ДвиженияДокумента.Номенклатура
|			И ОстаткиНеоформленныхТоваров.ВидЗапасов = ДвиженияДокумента.ВидЗапасов
|			И ОстаткиНеоформленныхТоваров.Поставщик = ДвиженияДокумента.Поставщик
|			И ОстаткиНеоформленныхТоваров.Склад = ДвиженияДокумента.Склад
|			И ОстаткиНеоформленныхТоваров.Организация = ДвиженияДокумента.Организация
|ГДЕ
|	ОстаткиНеоформленныхТоваров.КоличествоОстаток &gt; 0
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ОформлениеГТД.Организация,
|	ОформлениеГТД.Поставщик,
|	ОформлениеГТД.Номенклатура,
|	ОформлениеГТД.Характеристика,
|	ОформлениеГТД.Склад,
|	ОформлениеГТД.ВидЗапасов,
|	СУММА(ОформлениеГТД.Количество) КАК Количество,
|	ОформлениеГТД.Период КАК Период,
|	ОформлениеГТД.НомерГТД,
|	ОформлениеГТД.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения
|ИЗ
|	РегистрНакопления.ТоварыОрганизацийКОформлению КАК ОформлениеГТД
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ДвиженияДокумента КАК ДвиженияДокумента
|		ПО ОформлениеГТД.Характеристика = ДвиженияДокумента.Характеристика
|			И ОформлениеГТД.Номенклатура = ДвиженияДокумента.Номенклатура
|			И ОформлениеГТД.ВидЗапасов = ДвиженияДокумента.ВидЗапасов
|			И ОформлениеГТД.Поставщик = ДвиженияДокумента.Поставщик
|			И ОформлениеГТД.Организация = ДвиженияДокумента.Организация
|ГДЕ
|	ОформлениеГТД.МоментВремени &gt; &amp;Дата
|	И ОформлениеГТД.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход)
|
|СГРУППИРОВАТЬ ПО
|	ОформлениеГТД.Организация,
|	ОформлениеГТД.Поставщик,
|	ОформлениеГТД.Номенклатура,
|	ОформлениеГТД.Характеристика,
|	ОформлениеГТД.Склад,
|	ОформлениеГТД.ВидЗапасов,
|	ОформлениеГТД.Период,
|	ОформлениеГТД.НомерГТД,
|	ОформлениеГТД.НомерГТД.СтранаПроисхождения
|
|УПОРЯДОЧИТЬ ПО
|	Период
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ТоварыДокумента.Номенклатура,
|	ТоварыДокумента.Количество,
|	ТоварыДокумента.СтавкаНДС,
|	ТоварыДокумента.СуммаНДС,
|	ТоварыДокумента.Цена,
|	ТоварыДокумента.Сумма,
|	ТоварыДокумента.НомерСтрокиДокумента КАК НомерСтрокиДокумента,
|	ТоварыДокумента.СтатьяРасходов.КорреспондирующийСчет КАК КорреспондирующийСчет
|ИЗ
|	ТоварыДокумента КАК ТоварыДокумента
|ГДЕ
|	ТоварыДокумента.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
|	И ТоварыДокумента.СтатьяРасходов.ВариантРаспределенияРасходов &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаСебестоимостьТоваров)
|
|УПОРЯДОЧИТЬ ПО
|	НомерСтрокиДокумента");

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата", Источник.МоментВремени());

РезультатыЗапроса = Запрос.ВыполнитьПакет();

ДанныеШапкиДокумента = РезультатыЗапроса[3].Выбрать();

ТабТоварыДокумента = РезультатыЗапроса[4].Выгрузить();
ТабТоварыДокумента.Колонки.Добавить("НомерГТД", Новый ОписаниеТипов("СправочникСсылка.НомераГТД"));
ТабТоварыДокумента.Колонки.Добавить("СтранаПроисхождения", Новый ОписаниеТипов("СправочникСсылка.СтраныМира"));
ТабТоварыДокумента.Колонки.Добавить("ЕстьНомерГТД", Новый ОписаниеТипов("Булево"));
ТабТоварыДокумента.Колонки.Добавить("НетКоличества", Новый ОписаниеТипов("Булево"));

ТабОстаткиНеоформленныхТоваров = РезультатыЗапроса[5].Выгрузить();
ТабОстаткиНеоформленныхТоваров.Колонки.Добавить("ОстаткиЗакрыты", Новый ОписаниеТипов("Булево"));

ДанныеШапкиДокумента.Следующий();
ВходящиеДанные.Вставить("КурсВзаиморасчетов", ДанныеШапкиДокумента.КурсВзаиморасчетов);
ВходящиеДанные.Вставить("КратностьВзаиморасчетов", ДанныеШапкиДокумента.КратностьВзаиморасчетов);

// Распределение номеров ГТД
ВыборкаОформлениеГТДКРаспределению = РезультатыЗапроса[6].Выбрать();
Пока ВыборкаОформлениеГТДКРаспределению.Следующий() Цикл
	
	КоличествоКРаспределению = ВыборкаОформлениеГТДКРаспределению.Количество;
	
	СтруктураОтбора = Новый Структура("Организация,Поставщик,Номенклатура,Характеристика,Склад,ВидЗапасов,ОстаткиЗакрыты");
	ЗаполнитьЗначенияСвойств(СтруктураОтбора, ВыборкаОформлениеГТДКРаспределению);
	СтруктураОтбора.ОстаткиЗакрыты = Ложь;
	
	ОстаткиНеоформленногоТовараЗакрыты = Истина;
	НеоформленныеТовары = ТабОстаткиНеоформленныхТоваров.НайтиСтроки(СтруктураОтбора);
	Для Каждого Строка Из НеоформленныеТовары Цикл
		
		КоличествоКСписанию = Мин(Строка.Количество, КоличествоКРаспределению);
		Строка.Количество = Строка.Количество - КоличествоКСписанию;
		КоличествоКРаспределению = КоличествоКРаспределению - КоличествоКСписанию;
		
		Если Строка.Количество = 0 Тогда
			Строка.ОстаткиЗакрыты = Истина;
		КонецЕсли;
	КонецЦикла;
	
	СтруктураОтбораСтрокДокумента = Новый Структура("Номенклатура, Характеристика, ЕстьНомерГТД, НетКоличества",
		СтруктураОтбора.Номенклатура, СтруктураОтбора.Характеристика, Ложь, Ложь);
	
	СтрокиДокумента = ТабТоварыДокумента.НайтиСтроки(СтруктураОтбораСтрокДокумента);
	
	Для Каждого СтрокаДокумента Из СтрокиДокумента Цикл
		
		Если КоличествоКРаспределению = 0 Тогда
			Прервать;
		КонецЕсли;
		
		КоличествоКСписанию = Мин(СтрокаДокумента.Количество, КоличествоКРаспределению);
		КоличествоКРаспределению = КоличествоКРаспределению - КоличествоКСписанию;
		
		СуммаКСписанию = ?(СтрокаДокумента.Количество &lt;= КоличествоКСписанию,
		СтрокаДокумента.Сумма, Окр(СтрокаДокумента.Сумма / СтрокаДокумента.Количество * КоличествоКСписанию));
		
		СтрокаДокумента.Количество = СтрокаДокумента.Количество - КоличествоКСписанию;
		СтрокаДокумента.Сумма = СтрокаДокумента.Сумма - СуммаКСписанию;
		
		СтрокаДокументаГТД = ТабТоварыДокумента.Добавить();
		ЗаполнитьЗначенияСвойств(СтрокаДокументаГТД, СтрокаДокумента);
		
		СтрокаДокументаГТД.Количество          = КоличествоКСписанию;
		СтрокаДокументаГТД.Сумма               = СуммаКСписанию;
		СтрокаДокументаГТД.СуммаВРознице       = КоличествоКСписанию * СтрокаДокументаГТД.ЦенаВРознице;
		СтрокаДокументаГТД.НомерГТД            = ВыборкаОформлениеГТДКРаспределению.НомерГТД;
		СтрокаДокументаГТД.СтранаПроисхождения = ВыборкаОформлениеГТДКРаспределению.СтранаПроисхождения;
		СтрокаДокументаГТД.ЕстьНомерГТД        = Истина;
		
		Если СтрокаДокумента.Количество = 0 Тогда
			СтрокаДокумента.НетКоличества = Истина;
		КонецЕсли;
	КонецЦикла;
КонецЦикла;

СтруктураОтбора = Новый Структура("НетКоличества", Ложь);
ТабТовары = ТабТоварыДокумента.Скопировать(СтруктураОтбора);
ТабТовары.Сортировать("НомерСтрокиДокумента, НомерГТД");
ВходящиеДанные.Вставить("Товары", ТабТовары);

ТабУслуги = РезультатыЗапроса[7].Выгрузить();
ВходящиеДанные.Вставить("Услуги", ТабУслуги);

ВходящиеДанные.Вставить("СуммаДокумента", ТабТовары.Итог("Сумма") + ТабУслуги.Итог("Сумма"));</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);
Выполнить(Алгоритмы.УпрощенныйУчетНДС);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		
		ТаблицаСтатейРасходов = ПараметрыОбъекта.Получить("УслугиТабличнаяЧасть");
		Для Каждого СтрокаТЧ Из Объект.Услуги Цикл
			
			СчетЗатрат	   = СтрокаТЧ.СчетЗатрат;
			СчетЗатратНУ   = СтрокаТЧ.СчетЗатратНУ;
			СтатьяРасходов = ТаблицаСтатейРасходов[СтрокаТЧ.НомерСтроки - 1].СтатьяРасходов;
			Если ЗначениеЗаполнено(СчетЗатрат) Тогда
				
				Для Каждого СтрокаВидаСубконто Из СчетЗатрат.ВидыСубконто Цикл
					
					ТипСубконто = СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
					Если ТипСубконто.СодержитТип(ТипЗнч(СтатьяРасходов)) Тогда
						СтрокаТЧ["Субконто" + СтрокаВидаСубконто.НомерСтроки] = СтатьяРасходов;
					КонецЕсли;
				КонецЦикла;
			КонецЕсли;
			
			Если ЗначениеЗаполнено(СчетЗатратНУ) Тогда
				
				Для Каждого СтрокаВидаСубконто Из СчетЗатрат.ВидыСубконто Цикл
					
					ТипСубконто = СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
					Если ТипСубконто.СодержитТип(ТипЗнч(СтатьяРасходов)) Тогда
						СтрокаТЧ["СубконтоНУ" + СтрокаВидаСубконто.НомерСтроки] = СтатьяРасходов;
					КонецЕсли;
				КонецЦикла;
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем параметры, зависящие от режима налогообложения
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		Если УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы Тогда
			ВариантОтраженияУСН = ?(ПараметрыОбъекта["ЭтоЕНВД"], Перечисления.ОтражениеВУСН.НеПринимаются, Перечисления.ОтражениеВУСН.Принимаются);
		Иначе
			ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка();
		КонецЕсли;
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН &lt;&gt; Перечисления.ОтражениеВУСН.Принимаются Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
		// Заполняем отражение в УСН для ТЧ Услуги
		Для Каждого СтрокаТЧ Из Объект.Услуги Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН &lt;&gt; Перечисления.ОтражениеВУСН.Принимаются Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
		// Определяем признак включения НДС в стоимость
		Если УчетнаяПолитика.УСН ИЛИ ПараметрыОбъекта["ЭтоЕНВД"] Тогда
			Объект.НДСВключенВСтоимость = Истина;
		КонецЕсли;
	КонецЕсли;
	
	Если НЕ Объект.НДСВключенВСтоимость И ПараметрыОбъекта["ЭтоЕНВД"] Тогда
		Объект.НДСВключенВСтоимость = Истина;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПоступлениеТоваровУслуг</Источник>
							<Приемник>ДокументСсылка.ПоступлениеТоваровУслуг</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование> --&gt; СуммаДокумента</Наименование>
									<Порядок>300</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; ВидОперации</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеТоваровУслуг"/>
									<ПередВыгрузкой>Значение = "ПокупкаКомиссия";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
									<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
									<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
									<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				"СПоставщиком");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Источник.Соглашение);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Источник.ЗаказПоставщику);
	
	Если ЗначениеЗаполнено(Источник.Соглашение) Тогда
		Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Источник.Соглашение);
	Иначе
		Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; Источник.ВалютаВзаиморасчетов;
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<НеЗамещать>true</НеЗамещать>
									<Код>29</Код>
									<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
									<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>32</Код>
									<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
									<Порядок>550</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>33</Код>
									<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
									<Порядок>600</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>Склад --&gt; Склад</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
									<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
									<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
									<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
									<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>31</Код>
									<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
									<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>ПредъявленСчетФактура --&gt; ПредъявленСчетФактура</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
									<Приемник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>44</Код>
									<Наименование>ДатаСчетаФактуры --&gt; ДатаВходящегоСчетаФактуры</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>45</Код>
									<Наименование>НомерСчетаФактуры --&gt; НомерВходящегоСчетаФактуры</Наименование>
									<Порядок>1000</Порядок>
									<Источник Имя="НомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>46</Код>
									<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
									<Порядок>1050</Порядок>
									<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>47</Код>
									<Наименование>Менеджер --&gt; Ответственный</Наименование>
									<Порядок>1100</Порядок>
									<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>1150</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>59</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>1200</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>61</Код>
									<Наименование>ЗакупкаПодДеятельностьОблагаемуюЕНВД --&gt;</Наименование>
									<Порядок>1250</Порядок>
									<Источник Имя="ЗакупкаПодДеятельностьОблагаемуюЕНВД" Вид="Реквизит" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>ЭтоЕНВД</ИмяПараметраДляПередачи>
								</Свойство>
								<Группа>
									<Код>14</Код>
									<Наименование> --&gt; Товары</Наименование>
									<Порядок>1300</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>16</Код>
										<Наименование> --&gt; Номенклатура</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
										<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>17</Код>
										<Наименование> --&gt; Количество</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>27</Код>
										<Наименование> --&gt; Коэффициент</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>25</Код>
										<Наименование> --&gt; Цена</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>24</Код>
										<Наименование> --&gt; Сумма</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>23</Код>
										<Наименование> --&gt; СтавкаНДС</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
										<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>22</Код>
										<Наименование> --&gt; СуммаНДС</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>21</Код>
										<Наименование> --&gt; НомерГТД</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
										<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>20</Код>
										<Наименование> --&gt; СтранаПроисхождения</Наименование>
										<Порядок>500</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
										<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование> --&gt; СтавкаНДСВРознице</Наименование>
										<Порядок>550</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтавкаНДСВРознице" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
										<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>18</Код>
										<Наименование> --&gt; СуммаВРознице</Наименование>
										<Порядок>600</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаВРознице" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>26</Код>
										<Наименование> --&gt; ЦенаВРознице</Наименование>
										<Порядок>650</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ЦенаВРознице" Вид="Реквизит" Тип="Число"/>
									</Свойство>
								</Группа>
								<Группа>
									<Код>34</Код>
									<Наименование> --&gt; Услуги</Наименование>
									<Порядок>1350</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>37</Код>
										<Наименование> --&gt; Номенклатура</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>35</Код>
										<Наименование> --&gt; Количество</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>39</Код>
										<Наименование> --&gt; СтавкаНДС</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
										<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>38</Код>
										<Наименование> --&gt; Сумма</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>41</Код>
										<Наименование> --&gt; СуммаНДС</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>40</Код>
										<Наименование> --&gt; Цена</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>36</Код>
										<Наименование> --&gt; СчетЗатрат</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетЗатрат" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ОбъектКоллекции.КорреспондирующийСчет;
Отказ = НЕ ЗначениеЗаполнено(Значение);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>42</Код>
										<Наименование> --&gt; СчетЗатратНУ</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СчетЗатратНУ" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
										<ПередВыгрузкой>Значение = ОбъектКоллекции.КорреспондирующийСчет;
Отказ = НЕ ЗначениеЗаполнено(Значение);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>43</Код>
										<Наименование> --&gt;</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="" Вид=""/>
										<ИмяПараметраДляПередачи>СтатьяРасходов</ИмяПараметраДляПередачи>
										<ПередВыгрузкой>Значение = ОбъектКоллекции.СтатьяРасходов;

Если ЗначениеЗаполнено(Значение) Тогда
	
	КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет");
	Если ЗначениеЗаполнено(КоррСчет) Тогда
		ИмяПКО = ?(Найти(КоррСчет, "91.02") &gt; 0, "СтатьиРасходовВПрочиеДоходыИРасходы", "СтатьиРасходовВСтатьиЗатрат");
	Иначе
		Пусто = Истина;
	КонецЕсли;
	
Иначе
	Пусто = Истина;	
КонецЕсли;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>60</Код>
									<Наименование>Соглашение --&gt;</Наименование>
									<Порядок>1400</Порядок>
									<Источник Имя="Соглашение" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСПоставщиками"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>62</Код>
									<Наименование>СуммаДокумента --&gt;</Наименование>
									<Порядок>1450</Порядок>
									<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Группа Отключить="true">
									<Код>48</Код>
									<Наименование>Товары --&gt;</Наименование>
									<Порядок>1500</Порядок>
									<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>57</Код>
										<Наименование>Количество --&gt;</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>58</Код>
										<Наименование>КоличествоУпаковок --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="КоличествоУпаковок" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>51</Код>
										<Наименование>Номенклатура --&gt;</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>56</Код>
										<Наименование>НомерГТД --&gt;</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>50</Код>
										<Наименование>СтавкаНДС --&gt;</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>49</Код>
										<Наименование>Сумма --&gt;</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>52</Код>
										<Наименование>СуммаНДС --&gt;</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>53</Код>
										<Наименование>Упаковка --&gt;</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="Упаковка" Вид="Реквизит" Тип="СправочникСсылка.УпаковкиНоменклатуры"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>54</Код>
										<Наименование>Цена --&gt;</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>55</Код>
										<Наименование>СтатьяРасходов --&gt;</Наименование>
										<Порядок>500</Порядок>
										<Источник Имя="СтатьяРасходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиРасходов"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>63</Код>
									<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
									<Порядок>1550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПТУ_ПоступлениеДопРасходов</Код>
							<Наименование>Документ: Поступление товаров услуг</Наименование>
							<Порядок>200</Порядок>
							<ПередВыгрузкой>Если Не ТолькоПолучитьУзелСсылки Тогда

	ВходящиеДанные = Новый Структура();
	ВходящиеДанные.Вставить("ДатаВходящегоСчетаФактуры");
	ВходящиеДанные.Вставить("КодВидаОперации");
	ВходящиеДанные.Вставить("КодСпособаПолучения", 1);
	ВходящиеДанные.Вставить("НомерВходящегоСчетаФактуры");
	ВходящиеДанные.Вставить("ПредъявленСчетФактура");
	ВходящиеДанные.Вставить("СуммаДокумента");
	ВходящиеДанные.Вставить("Содержание", "");
	ВходящиеДанные.Вставить("Товары");

	// Номенклатура, Количество, СтоимостьТоваров, Сумма, СуммаНДС, ДокументПоступления
	Товары = ДоходыИРасходыСервер.ПолучитьТаблицуРаспределенияРасходовНаСебестоимостьТоваров(Источник.Ссылка);
	Если Товары.Количество() &gt; 0 Тогда
		
		ВходящиеДанные.Товары		  = Товары;
		ВходящиеДанные.СуммаДокумента = Товары.Итог("Сумма") + ?(Источник.ЦенаВключаетНДС, 0, Товары.Итог("СуммаНДС"));

		Запрос = Новый Запрос("ВЫБРАТЬ ПЕРВЫЕ 1
		|	Основания.Ссылка,
		|	Основания.Ссылка.Дата КАК ДатаВходящегоСчетаФактуры,
		|	Основания.Ссылка.КодВидаОперации,
		|	ВЫБОР
		|		КОГДА Основания.Ссылка.ПолученВЭлектронномВиде
		|			ТОГДА 2
		|		ИНАЧЕ 1
		|	КОНЕЦ КАК КодСпособаПолучения,
		|	Основания.Ссылка.Номер КАК НомерВходящегоСчетаФактуры,
		|	ИСТИНА КАК ПредъявленСчетФактура
		|ИЗ
		|	Документ.СчетФактураПолученный.ДокументыОснования КАК Основания
		|ГДЕ
		|	Основания.ДокументОснование = &amp;Ссылка
		|	И Основания.Ссылка.Проведен
		|
		|УПОРЯДОЧИТЬ ПО
		|	Основания.Ссылка.НомерИсправления УБЫВ
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	Товары.Номенклатура.Наименование КАК Наименование
		|ИЗ
		|	Документ.ПоступлениеТоваровУслуг.Товары КАК Товары
		|ГДЕ
		|	Товары.Ссылка = &amp;Ссылка
		|	И Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
		|	И Товары.СтатьяРасходов.ВариантРаспределенияРасходов = ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаСебестоимостьТоваров)
		|
		|СГРУППИРОВАТЬ ПО
		|	Товары.Номенклатура.Наименование");

		Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
		РезультатыЗапроса = Запрос.ВыполнитьПакет();

		Выборка = РезультатыЗапроса[0].Выбрать();
		Если Выборка.Следующий() Тогда
			ЗаполнитьЗначенияСвойств(ВходящиеДанные, Выборка);
		КонецЕсли;

		Выборка = РезультатыЗапроса[1].Выбрать();

		Пока Выборка.Следующий() Цикл
			ВходящиеДанные.Содержание = ВходящиеДанные.Содержание + Выборка.Наименование + "; ";
		КонецЦикла;
		ВходящиеДанные.Содержание = Лев(ВходящиеДанные.Содержание, СтрДлина(ВходящиеДанные.Содержание) - 2);
		
	Иначе
		
		Отказ = Истина;
		
		СсылкаНаУдаляемыйОбъект = Источник.Ссылка;
		ТипИсточника = "ДокументСсылка.ПоступлениеТоваровУслуг";
		ТипПриемника = "ДокументСсылка.ПоступлениеДопРасходов";
		Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
		
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкой>
							<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);
Выполнить(Алгоритмы.УпрощенныйУчетНДС);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	СчетаУчета = БухгалтерскийУчетРасчетовСКонтрагентами.ПолучитьСчетаРасчетовСКонтрагентом(Объект.Организация, Объект.Контрагент, Объект.ДоговорКонтрагента);
	Объект.СчетУчетаРасчетовСКонтрагентом = СчетаУчета.СчетРасчетов;
	Объект.СчетУчетаРасчетовПоАвансам     = СчетаУчета.СчетАвансов;

	// Заполняем признак "Отражение в УСН" значением по умолчанию
	Для Каждого СтрокаТЧ Из Объект.Товары Цикл
		
		Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) Тогда
			СтрокаТЧ.ОтражениеВУСН = Перечисления.ОтражениеВУСН.Принимаются;
		КонецЕсли;
		
		// Заполнение счетов учета номенклатуры
		
		Склад = Неопределено;
		Если ЗначениеЗаполнено(СтрокаТЧ.ДокументПартии) И ОбщегоНазначения.ЕстьРеквизитДокумента("Склад", СтрокаТЧ.ДокументПартии.Метаданные()) Тогда
			Склад = СтрокаТЧ.ДокументПартии.Склад;
		КонецЕсли;
		
		СчетаУчета = БухгалтерскийУчет.ПолучитьСчетаУчетаНоменклатуры(Объект.Организация, СтрокаТЧ.Номенклатура, Склад);
		
		Если НЕ ЗначениеЗаполнено(СтрокаТЧ.СчетУчета) Тогда
			СтрокаТЧ.СчетУчета = СчетаУчета.СчетУчета;
		КонецЕсли;
		
		Если НЕ ЗначениеЗаполнено(СтрокаТЧ.СчетУчетаНДС) Тогда
			СтрокаТЧ.СчетУчетаНДС = ПланыСчетов.Хозрасчетный.НДСпоПриобретеннымУслугам;
		КонецЕсли;
		
		Если НЕ ЗначениеЗаполнено(СтрокаТЧ.СчетУчетаНУ) Тогда
			СтрокаТЧ.СчетУчетаНУ = СчетаУчета.СчетУчета;
		КонецЕсли;
	КонецЦикла;
	
	// Заполняем параметры, зависящие от режима налогообложения
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		Если УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы Тогда
			ВариантОтраженияУСН = ?(ПараметрыОбъекта["ЭтоЕНВД"], Перечисления.ОтражениеВУСН.НеПринимаются, Перечисления.ОтражениеВУСН.Принимаются);
		Иначе
			ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка();
		КонецЕсли;
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН &lt;&gt; Перечисления.ОтражениеВУСН.Принимаются Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
		// Определяем признак включения НДС в стоимость
		Если УчетнаяПолитика.УСН ИЛИ ПараметрыОбъекта["ЭтоЕНВД"] Тогда
			Объект.НДСВключенВСтоимость = Истина;
		КонецЕсли;
	КонецЕсли;
	
	Если НЕ Объект.НДСВключенВСтоимость И ПараметрыОбъекта["ЭтоЕНВД"] Тогда
		Объект.НДСВключенВСтоимость = Истина;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
							<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
							<Источник>ДокументСсылка.ПоступлениеТоваровУслуг</Источник>
							<Приемник>ДокументСсылка.ПоступлениеДопРасходов</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>8</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Поиск="true">
									<Код>9</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<ПриВыгрузке>Значение = 	Лев(Значение, 5) + "П" + Сред(Значение, 7);</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>35</Код>
									<Наименование> --&gt; Содержание</Наименование>
									<Порядок>300</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; СуммаДокумента</Наименование>
									<Порядок>350</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<НеЗамещать>true</НеЗамещать>
									<Код>36</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<ПередВыгрузкой>Значение = "НДС18";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Контрагент --&gt; Контрагент</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
									<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
									<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
									<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
									<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				"СПоставщиком");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Источник.Соглашение);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Источник.ЗаказПоставщику);
	
	Если ЗначениеЗаполнено(Источник.Соглашение) Тогда
		Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Источник.Соглашение);
	Иначе
		Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; Источник.ВалютаВзаиморасчетов;
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
									<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									<ПриВыгрузке>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Значение, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
									<ПриВыгрузке>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Значение, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
									<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
									<ПриВыгрузке>Значение = Значение = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
									<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>1</Код>
									<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование> --&gt; ПредъявленСчетФактура</Наименование>
									<Порядок>1000</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование> --&gt; ДатаВходящегоСчетаФактуры</Наименование>
									<Порядок>1050</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДатаВходящегоСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование> --&gt; НомерВходящегоСчетаФактуры</Наименование>
									<Порядок>1100</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерВходящегоСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>42</Код>
									<Наименование> --&gt; КодВидаОперации</Наименование>
									<Порядок>1150</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КодВидаОперации" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>43</Код>
									<Наименование> --&gt; КодСпособаПолучения</Наименование>
									<Порядок>1200</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КодСпособаПолучения" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование> --&gt; СпособРаспределения</Наименование>
									<Порядок>1250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СпособРаспределения" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыРаспределенияДопРасходов"/>
									<ПередВыгрузкой>Значение = "ПоСумме";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование>Менеджер --&gt; Ответственный</Наименование>
									<Порядок>1300</Порядок>
									<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>1350</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>1400</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование>ЗакупкаПодДеятельностьОблагаемуюЕНВД --&gt;</Наименование>
									<Порядок>1450</Порядок>
									<Источник Имя="ЗакупкаПодДеятельностьОблагаемуюЕНВД" Вид="Реквизит" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>ЭтоЕНВД</ИмяПараметраДляПередачи>
								</Свойство>
								<Группа>
									<Код>30</Код>
									<Наименование> --&gt; Товары</Наименование>
									<Порядок>1500</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>32</Код>
										<Наименование> --&gt; Номенклатура</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									</Свойство>
									<Свойство>
										<Код>31</Код>
										<Наименование> --&gt; Количество</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>33</Код>
										<Наименование> --&gt; Сумма</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>34</Код>
										<Наименование> --&gt; СуммаНДС</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>39</Код>
										<Наименование> --&gt; СуммаТовара</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаТовара" Вид="Реквизит" Тип="Число"/>
										<ПередВыгрузкой>Значение = ОбъектКоллекции.СтоимостьТоваров;</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>40</Код>
										<Наименование> --&gt; ДокументПартии</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="ДокументПартии" Вид="Реквизит"/>
										<ПередВыгрузкой>Значение = ОбъектКоллекции.ДокументПоступления;
Если ЗначениеЗаполнено(Значение) Тогда
	
	Если ТипЗнч(Значение) = Тип("ДокументСсылка.ПоступлениеТоваровУслуг") Тогда
		
		Если Значение.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ЗакупкаЧерезПодотчетноеЛицо Тогда
			
			Запрос = Новый Запрос("ВЫБРАТЬ ПЕРВЫЕ 1
			|	Закупки.Ссылка
			|ИЗ
			|	Документ.АвансовыйОтчет.ЗакупкаЗаНаличныйРасчет КАК Закупки
			|ГДЕ
			|	Закупки.ДокументПоступления = &amp;ДокументПоступления
			|	И Закупки.Ссылка.Проведен");
			
			Запрос.УстановитьПараметр("ДокументПоступления", Значение);
			Результат = Запрос.Выполнить();
			Если Результат.Пустой() Тогда
				Пусто = Истина;
			Иначе
				Выборка = Результат.Выбрать();
				Выборка.Следующий();
				Значение = Выборка.Ссылка;
				ИмяПКО = "АО_АвансовыйОтчетЗакупкаТоваровУслуг";
			КонецЕсли;
			
		Иначе
			ИмяПКО = "ПТУ_ЗакупкаТоваровУслуг";
		КонецЕсли;
	Иначе
		ИмяПКО = "ПДТ_ПередачаТоваровПокупка";
	КонецЕсли;
Иначе
	Пусто = Истина;
КонецЕсли;</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Свойство Отключить="true">
									<Код>41</Код>
									<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
									<Порядок>1550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
					</Группа>
				</Группа>
				<Группа>
					<Код>ПоступлениеУслугПрочихАктивов</Код>
					<Наименование>ПКО для документа "Поступление услуг и прочих активов"</Наименование>
					<Порядок>100</Порядок>
					<Правило>
						<Код>ПУВА_ПоступлениеУслуг</Код>
						<Наименование>Документ: Поступление услуг и прочих активов</Наименование>
						<Порядок>50</Порядок>
						<ПередВыгрузкой>Запрос = Новый Запрос("ВЫБРАТЬ
                      |	Расходы.СуммаСНДС,
                      |	Расходы.Содержание,
                      |	Расходы.Количество,
                      |	Расходы.Цена,
                      |	Расходы.Сумма,
                      |	Расходы.СтавкаНДС,
                      |	Расходы.СуммаНДС,
                      |	Расходы.СтатьяРасходов
                      |ИЗ
                      |	Документ.ПоступлениеУслугПрочихАктивов.Расходы КАК Расходы
                      |ГДЕ
                      |	Расходы.Ссылка = &amp;Ссылка
                      |	И Расходы.СтатьяРасходов.ВариантРаспределенияРасходов &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаСебестоимостьТоваров)");
					  
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Услуги = Запрос.Выполнить().Выгрузить();

ВходящиеДанные.Вставить("Услуги", Услуги);
ВходящиеДанные.Вставить("СуммаДокумента", Услуги.Итог("СуммаСНДС"));</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);
Выполнить(Алгоритмы.УпрощенныйУчетНДС);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		
		ТаблицаСтатейРасходов = ПараметрыОбъекта.Получить("УслугиТабличнаяЧасть");
		Для Каждого СтрокаТЧ Из Объект.Услуги Цикл
			
			СчетЗатрат	   = СтрокаТЧ.СчетЗатрат;
			СчетЗатратНУ   = СтрокаТЧ.СчетЗатратНУ;
			СтатьяРасходов = ТаблицаСтатейРасходов[СтрокаТЧ.НомерСтроки - 1].СтатьяРасходов;
			Если ЗначениеЗаполнено(СчетЗатрат) Тогда
				
				Для Каждого СтрокаВидаСубконто Из СчетЗатрат.ВидыСубконто Цикл
					
					ТипСубконто = СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
					Если ТипСубконто.СодержитТип(ТипЗнч(СтатьяРасходов)) Тогда
						СтрокаТЧ["Субконто" + СтрокаВидаСубконто.НомерСтроки] = СтатьяРасходов;
					КонецЕсли;
				КонецЦикла;
			КонецЕсли;
			
			Если ЗначениеЗаполнено(СчетЗатратНУ) Тогда
				
				Для Каждого СтрокаВидаСубконто Из СчетЗатрат.ВидыСубконто Цикл
					
					ТипСубконто = СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
					Если ТипСубконто.СодержитТип(ТипЗнч(СтатьяРасходов)) Тогда
						СтрокаТЧ["СубконтоНУ" + СтрокаВидаСубконто.НомерСтроки] = СтатьяРасходов;
					КонецЕсли;
				КонецЦикла;
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем параметры, зависящие от режима налогообложения
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = ?(УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы,
								Перечисления.ОтражениеВУСН.Принимаются, Перечисления.ОтражениеВУСН.ПустаяСсылка());
			
		// Заполняем отражение в УСН для ТЧ Услуги
		Для Каждого СтрокаТЧ Из Объект.Услуги Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
		// Определяем признак включения НДС в стоимость
		Если УчетнаяПолитика.УСН Тогда
			Объект.НДСВключенВСтоимость = Истина;
		КонецЕсли;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<Источник>ДокументСсылка.ПоступлениеУслугПрочихАктивов</Источник>
						<Приемник>ДокументСсылка.ПоступлениеТоваровУслуг</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>8</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>9</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПриВыгрузке>Значение = 	Лев(Значение, 5) + "У" + Сред(Значение, 7);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование> --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеТоваровУслуг"/>
								<ПередВыгрузкой>Значение = "ПокупкаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Контрагент --&gt; Контрагент</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				"СПоставщиком");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Источник.Соглашение);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	Если ЗначениеЗаполнено(Источник.Соглашение) Тогда
		Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Источник.Соглашение);
	Иначе
		Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; Источник.ВалютаВзаиморасчетов;
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>15</Код>
								<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
								<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>ПредъявленСчетФактура --&gt; ПредъявленСчетФактура</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>ДатаСчетаФактуры --&gt; ДатаВходящегоСчетаФактуры</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаВходящегоСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование>НомерСчетаФактуры --&gt; НомерВходящегоСчетаФактуры</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="НомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерВходящегоСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>23</Код>
								<Наименование> --&gt; Услуги</Наименование>
								<Порядок>1150</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>25</Код>
									<Наименование> --&gt; Содержание</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование> --&gt; СчетЗатрат</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетЗатрат" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.СтатьяРасходов) Тогда
	Значение = ОбщегоНазначения.ПолучитьЗначениеРеквизита(ОбъектКоллекции.СтатьяРасходов, "КорреспондирующийСчет");
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>31</Код>
									<Наименование> --&gt; СчетЗатратНУ</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетЗатратНУ" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.СтатьяРасходов) Тогда
	Значение = ОбщегоНазначения.ПолучитьЗначениеРеквизита(ОбъектКоллекции.СтатьяРасходов, "КорреспондирующийСчет");
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>32</Код>
									<Наименование> --&gt;</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>СтатьяРасходов</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>Значение = ОбъектКоллекции.СтатьяРасходов;

Если ЗначениеЗаполнено(Значение) Тогда
	
	КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет");
	Если ЗначениеЗаполнено(КоррСчет) Тогда
		ИмяПКО = ?(Найти(КоррСчет, "91.02") &gt; 0, "СтатьиРасходовВПрочиеДоходыИРасходы", "СтатьиРасходовВСтатьиЗатрат");
	Иначе
		Пусто = Истина;
	КонецЕсли;
	
Иначе
	Пусто = Истина;	
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>33</Код>
								<Наименование>СуммаДокумента --&gt;</Наименование>
								<Порядок>1200</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Группа Отключить="true">
								<Код>35</Код>
								<Наименование>Расходы --&gt;</Наименование>
								<Порядок>1250</Порядок>
								<Источник Имя="Расходы" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>36</Код>
									<Наименование>АналитикаРасходов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="АналитикаРасходов" Вид="Реквизит"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>37</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>38</Код>
									<Наименование>Содержание --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>39</Код>
									<Наименование>СтавкаНДС --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>40</Код>
									<Наименование>СтатьяРасходов --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СтатьяРасходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиРасходов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>41</Код>
									<Наименование>Сумма --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>42</Код>
									<Наименование>СуммаНДС --&gt;</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>43</Код>
									<Наименование>СуммаСНДС --&gt;</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>44</Код>
									<Наименование>Цена --&gt;</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>34</Код>
								<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
								<Порядок>1300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ПУВА_ПоступлениеДопРасходов</Код>
						<Наименование>Документ: Поступление услуг и прочих активов</Наименование>
						<Порядок>100</Порядок>
						<ПередВыгрузкой>Если Не ТолькоПолучитьУзелСсылки Тогда

	ВходящиеДанные = Новый Структура();
	ВходящиеДанные.Вставить("ДатаВходящегоСчетаФактуры");
	ВходящиеДанные.Вставить("КодВидаОперации");
	ВходящиеДанные.Вставить("КодСпособаПолучения", 1);
	ВходящиеДанные.Вставить("НомерВходящегоСчетаФактуры");
	ВходящиеДанные.Вставить("ПредъявленСчетФактура");
	ВходящиеДанные.Вставить("СуммаДокумента");
	ВходящиеДанные.Вставить("Содержание", "");
	ВходящиеДанные.Вставить("Товары");

	// Номенклатура, Количество, СтоимостьТоваров, Сумма, СуммаНДС, ДокументПоступления
	Товары = ДоходыИРасходыСервер.ПолучитьТаблицуРаспределенияРасходовНаСебестоимостьТоваров(Источник.Ссылка);
	
	Если Товары.Количество() &gt; 0 Тогда
		
		ВходящиеДанные.Товары		  = Товары;
		ВходящиеДанные.СуммаДокумента = Товары.Итог("Сумма") + ?(Источник.ЦенаВключаетНДС, 0, Товары.Итог("СуммаНДС"));

		Запрос = Новый Запрос("ВЫБРАТЬ ПЕРВЫЕ 1
		|	Основания.Ссылка,
		|	Основания.Ссылка.Дата КАК ДатаВходящегоСчетаФактуры,
		|	Основания.Ссылка.КодВидаОперации,
		|	ВЫБОР
		|		КОГДА Основания.Ссылка.ПолученВЭлектронномВиде
		|			ТОГДА 2
		|		ИНАЧЕ 1
		|	КОНЕЦ КАК КодСпособаПолучения,
		|	Основания.Ссылка.Номер КАК НомерВходящегоСчетаФактуры,
		|	ИСТИНА КАК ПредъявленСчетФактура
		|ИЗ
		|	Документ.СчетФактураПолученный.ДокументыОснования КАК Основания
		|ГДЕ
		|	Основания.ДокументОснование = &amp;Ссылка
		|	И Основания.Ссылка.Проведен
		|
		|УПОРЯДОЧИТЬ ПО
		|	Основания.Ссылка.НомерИсправления УБЫВ
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	Расходы.Содержание КАК Наименование
		|ИЗ
		|	Документ.ПоступлениеУслугПрочихАктивов.Расходы КАК Расходы
		|ГДЕ
		|	Расходы.Ссылка = &amp;Ссылка
		|	И Расходы.СтатьяРасходов.ВариантРаспределенияРасходов = ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаСебестоимостьТоваров)
		|
		|СГРУППИРОВАТЬ ПО
		|	Расходы.Содержание");

		Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
		РезультатыЗапроса = Запрос.ВыполнитьПакет();

		Выборка = РезультатыЗапроса[0].Выбрать();
		Если Выборка.Следующий() Тогда
			ЗаполнитьЗначенияСвойств(ВходящиеДанные, Выборка);
		КонецЕсли;

		Выборка = РезультатыЗапроса[1].Выбрать();

		Пока Выборка.Следующий() Цикл
			ВходящиеДанные.Содержание = ВходящиеДанные.Содержание + Выборка.Наименование + "; ";
		КонецЦикла;
		ВходящиеДанные.Содержание = Лев(ВходящиеДанные.Содержание, СтрДлина(ВходящиеДанные.Содержание) - 2);
		
	Иначе
		
		Отказ = Истина;
		
		СсылкаНаУдаляемыйОбъект = Источник.Ссылка;
		ТипИсточника = "ДокументСсылка.ПоступлениеУслугПрочихАктивов";
		ТипПриемника = "ДокументСсылка.ПоступлениеДопРасходов";
		Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
		
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);
Выполнить(Алгоритмы.УпрощенныйУчетНДС);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	СчетаУчета = БухгалтерскийУчетРасчетовСКонтрагентами.ПолучитьСчетаРасчетовСКонтрагентом(Объект.Организация, Объект.Контрагент, Объект.ДоговорКонтрагента);
	Объект.СчетУчетаРасчетовСКонтрагентом = СчетаУчета.СчетРасчетов;
	Объект.СчетУчетаРасчетовПоАвансам     = СчетаУчета.СчетАвансов;

	// Заполняем признак "Отражение в УСН" значением по умолчанию
	Для Каждого СтрокаТЧ Из Объект.Товары Цикл
		
		Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) Тогда
			СтрокаТЧ.ОтражениеВУСН = Перечисления.ОтражениеВУСН.Принимаются;
		КонецЕсли;
		
		// Заполнение счетов учета номенклатуры
		
		Склад = Неопределено;
		Если ЗначениеЗаполнено(СтрокаТЧ.ДокументПартии) И ОбщегоНазначения.ЕстьРеквизитДокумента("Склад", СтрокаТЧ.ДокументПартии.Метаданные()) Тогда
			Склад = СтрокаТЧ.ДокументПартии.Склад;
		КонецЕсли;
		
		СчетаУчета = БухгалтерскийУчет.ПолучитьСчетаУчетаНоменклатуры(Объект.Организация, СтрокаТЧ.Номенклатура, Склад);
		
		Если НЕ ЗначениеЗаполнено(СтрокаТЧ.СчетУчета) Тогда
			СтрокаТЧ.СчетУчета = СчетаУчета.СчетУчета;
		КонецЕсли;
		
		Если НЕ ЗначениеЗаполнено(СтрокаТЧ.СчетУчетаНДС) Тогда
			СтрокаТЧ.СчетУчетаНДС = ПланыСчетов.Хозрасчетный.НДСпоПриобретеннымУслугам;
		КонецЕсли;
		
		Если НЕ ЗначениеЗаполнено(СтрокаТЧ.СчетУчетаНУ) Тогда
			СтрокаТЧ.СчетУчетаНУ = СчетаУчета.СчетУчета;
		КонецЕсли;
	КонецЦикла;
	
	// Заполняем параметры, зависящие от режима налогообложения
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = ?(УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы,
								Перечисления.ОтражениеВУСН.Принимаются, Перечисления.ОтражениеВУСН.ПустаяСсылка());
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
		// Определяем признак включения НДС в стоимость
		Если УчетнаяПолитика.УСН Тогда
			Объект.НДСВключенВСтоимость = Истина;
		КонецЕсли;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<Источник>ДокументСсылка.ПоступлениеУслугПрочихАктивов</Источник>
						<Приемник>ДокументСсылка.ПоступлениеДопРасходов</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>8</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>9</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПриВыгрузке>Значение = 	Лев(Значение, 5) + "У" + Сред(Значение, 7);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование> --&gt; Содержание</Наименование>
								<Порядок>300</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование> --&gt; СуммаДокумента</Наименование>
								<Порядок>350</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>32</Код>
								<Наименование> --&gt; СтавкаНДС</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<ПередВыгрузкой>Значение = "НДС18";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Контрагент --&gt; Контрагент</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				"СПоставщиком");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Источник.Соглашение);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	Если ЗначениеЗаполнено(Источник.Соглашение) Тогда
		Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Источник.Соглашение);
	Иначе
		Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; Источник.ВалютаВзаиморасчетов;
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
								<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПриВыгрузке>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Значение, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПриВыгрузке>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Значение, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПриВыгрузке>Значение = Значение = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование> --&gt; ПредъявленСчетФактура</Наименование>
								<Порядок>900</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование> --&gt; ДатаВходящегоСчетаФактуры</Наименование>
								<Порядок>950</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаВходящегоСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование> --&gt; НомерВходящегоСчетаФактуры</Наименование>
								<Порядок>1000</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НомерВходящегоСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>34</Код>
								<Наименование> --&gt; КодВидаОперации</Наименование>
								<Порядок>1050</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КодВидаОперации" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>35</Код>
								<Наименование> --&gt; КодСпособаПолучения</Наименование>
								<Порядок>1100</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КодСпособаПолучения" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование> --&gt; СпособРаспределения</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СпособРаспределения" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыРаспределенияДопРасходов"/>
								<ПередВыгрузкой>Значение = "ПоСумме";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>1200</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1250</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1300</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>24</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1350</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>27</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование> --&gt; СуммаТовара</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаТовара" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>Значение = ОбъектКоллекции.СтоимостьТоваров;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование> --&gt; ДокументПартии</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДокументПартии" Вид="Реквизит"/>
									<ПередВыгрузкой>Значение = ОбъектКоллекции.ДокументПоступления;
Если ЗначениеЗаполнено(Значение) Тогда
	
	Если ТипЗнч(Значение) = Тип("ДокументСсылка.ПоступлениеТоваровУслуг") Тогда
		
		Если Значение.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ЗакупкаЧерезПодотчетноеЛицо Тогда
			
			Запрос = Новый Запрос("ВЫБРАТЬ ПЕРВЫЕ 1
			|	Закупки.Ссылка
			|ИЗ
			|	Документ.АвансовыйОтчет.ЗакупкаЗаНаличныйРасчет КАК Закупки
			|ГДЕ
			|	Закупки.ДокументПоступления = &amp;ДокументПоступления
			|	И Закупки.Ссылка.Проведен");
			
			Запрос.УстановитьПараметр("ДокументПоступления", Значение);
			Результат = Запрос.Выполнить();
			Если Результат.Пустой() Тогда
				Пусто = Истина;
			Иначе
				Выборка = Результат.Выбрать();
				Выборка.Следующий();
				Значение = Выборка.Ссылка;
				ИмяПКО = "АО_АвансовыйОтчетЗакупкаТоваровУслуг";
			КонецЕсли;
			
		Иначе
			ИмяПКО = "ПТУ_ЗакупкаТоваровУслуг";
		КонецЕсли;
	Иначе
		ИмяПКО = "ПДТ_ПередачаТоваровПокупка";
	КонецЕсли;
Иначе
	Пусто = Истина;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>33</Код>
								<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
								<Порядок>1400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>КорректировкаПоступления</Код>
					<Наименование>ПКО для документа "Корректировка поступления"</Наименование>
					<Порядок>150</Порядок>
					<Правило>
						<Код>КорректировкаПоступления_КорректировкаПоступления</Код>
						<Наименование>Документ: Корректировка поступления</Наименование>
						<Порядок>50</Порядок>
						<ПередВыгрузкой>Если Не ТолькоПолучитьУзелСсылки Тогда
	
	ВходящиеДанные = Новый Структура();
	ВходящиеДанные.Вставить("ВидОперации");
	ВходящиеДанные.Вставить("Грузоотправитель");
	ВходящиеДанные.Вставить("ДокументПоступления");
	ВходящиеДанные.Вставить("ЗаказПоставщику");
	ВходящиеДанные.Вставить("ИсправляемыйДокументПоступления");
	ВходящиеДанные.Вставить("СуммаДокумента");
	ВходящиеДанные.Вставить("Товары");
	ВходящиеДанные.Вставить("Услуги");
	ВходящиеДанные.Вставить("ЭтоЕНВД", Ложь);
	
	Запрос = Новый Запрос();
	Запрос.УстановитьПараметр("ДокументОснование", Источник.ДокументОснование);
	Запрос.УстановитьПараметр("МоментВремени", Источник.МоментВремени());
	Запрос.УстановитьПараметр("ПоступлениеУслуг", ТипЗнч(Источник.ДокументОснование) = Тип("ДокументСсылка.ПоступлениеУслугПрочихАктивов"));
	Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
	
	// Данные исходного документа поступления
	
	Запрос.Текст = "ВЫБРАТЬ
	|	Док.ЗаказПоставщику,
	|	Док.Грузоотправитель,
	|	Док.ЗакупкаПодДеятельностьОблагаемуюЕНВД КАК ЭтоЕНВД
	|ИЗ
	|	Документ.ПоступлениеТоваровУслуг КАК Док
	|ГДЕ
	|	Док.Ссылка = &amp;ДокументОснование
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|";
	
	// Ссылка на исправляемый документ
	
	Запрос.Текст = Запрос.Текст + "ВЫБРАТЬ
	|	Док.Ссылка,
	|	Док.МоментВремени,
	|	ЛОЖЬ КАК ЭтоДокументОснование
	|ПОМЕСТИТЬ ПоследовательностьДокументов
	|ИЗ
	|	Документ.КорректировкаПоступления КАК Док
	|ГДЕ
	|	Док.ДокументОснование = &amp;ДокументОснование
	|	И Док.МоментВремени &lt;= &amp;МоментВремени
	|	И Док.Проведен
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	Док.ДокументОснование,
	|	Док.ДокументОснование.МоментВремени,
	|	ИСТИНА
	|ИЗ
	|	Документ.КорректировкаПоступления КАК Док
	|ГДЕ
	|	Док.Ссылка = &amp;Ссылка
	|
	|ИНДЕКСИРОВАТЬ ПО
	|	Док.Ссылка
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ПоследовательностьДокументов.Ссылка,
	|	ПоследовательностьДокументов.МоментВремени,
	|	ПоследовательностьДокументов.ЭтоДокументОснование,
	|	МАКСИМУМ(ВЫБОР
	|			КОГДА СчетФактураПолученный.Ссылка ЕСТЬ NULL 
	|				ТОГДА ЛОЖЬ
	|			ИНАЧЕ ИСТИНА
	|		КОНЕЦ) КАК Корректировочный
	|ПОМЕСТИТЬ ПараметрыДокументовПоследовательности
	|ИЗ
	|	ПоследовательностьДокументов КАК ПоследовательностьДокументов
	|		ЛЕВОЕ СОЕДИНЕНИЕ Документ.СчетФактураПолученный.ДокументыОснования КАК СчетФактураПолученный
	|		ПО ПоследовательностьДокументов.Ссылка = СчетФактураПолученный.ДокументОснование
	|			И (СчетФактураПолученный.Ссылка.Корректировочный)
	|			И (СчетФактураПолученный.Ссылка.Проведен)
	|
	|СГРУППИРОВАТЬ ПО
	|	ПоследовательностьДокументов.Ссылка,
	|	ПоследовательностьДокументов.МоментВремени,
	|	ПоследовательностьДокументов.ЭтоДокументОснование
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	Параметры1.Ссылка,
	|	Параметры1.Корректировочный,
	|	МИНИМУМ(ВЫБОР
	|			КОГДА Параметры1.Корректировочный
	|					И НЕ Параметры2.Корректировочный
	|				ТОГДА ИСТИНА
	|			ИНАЧЕ ЛОЖЬ
	|		КОНЕЦ) КАК ИсходныйКорректировочный
	|ПОМЕСТИТЬ ПараметрыОтбора
	|ИЗ
	|	ПараметрыДокументовПоследовательности КАК Параметры1
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПараметрыДокументовПоследовательности КАК Параметры2
	|		ПО (Параметры1.Ссылка = &amp;Ссылка)
	|			И (Параметры2.Ссылка &lt;&gt; &amp;Ссылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	Параметры1.Ссылка,
	|	Параметры1.Корректировочный
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ ПЕРВЫЕ 1
	|	ИсправляемыеДокументы.Ссылка
	|ПОМЕСТИТЬ ИсправляемыйДокумент
	|ИЗ
	|	ПараметрыДокументовПоследовательности КАК ИсправляемыеДокументы
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПараметрыОтбора КАК ПараметрыОтбора
	|		ПО (ИсправляемыеДокументы.Корректировочный = ПараметрыОтбора.Корректировочный
	|				ИЛИ ПараметрыОтбора.ИсходныйКорректировочный
	|				ИЛИ ИсправляемыеДокументы.ЭтоДокументОснование)
	|			И ИсправляемыеДокументы.Ссылка &lt;&gt; ПараметрыОтбора.Ссылка
	|
	|УПОРЯДОЧИТЬ ПО
	|	ИсправляемыеДокументы.МоментВремени УБЫВ
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ИсправляемыйДокумент.Ссылка
	|ИЗ
	|	ИсправляемыйДокумент КАК ИсправляемыйДокумент
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|";
	
	// Вид операции
	
	Запрос.Текст = Запрос.Текст + "ВЫБРАТЬ
	|	ПараметрыОтбора.ИсходныйКорректировочный
	|ИЗ
	|	ПараметрыОтбора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|";
	
	// Ссылка на основание исправления (корректировки) и документ до корректировки
	
	Запрос.Текст = Запрос.Текст + "ВЫБРАТЬ ПЕРВЫЕ 1
	|	ИсправляемыеДокументы.Ссылка
	|ИЗ
	|	ПараметрыДокументовПоследовательности КАК ИсправляемыеДокументы
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПараметрыОтбора КАК ПараметрыОтбора
	|		ПО (ИсправляемыеДокументы.Корректировочный = ПараметрыОтбора.Корректировочный
	|				ИЛИ ИсправляемыеДокументы.ЭтоДокументОснование)
	|			И ИсправляемыеДокументы.Ссылка &lt;&gt; ПараметрыОтбора.Ссылка
	|
	|УПОРЯДОЧИТЬ ПО
	|	ИсправляемыеДокументы.ЭтоДокументОснование,
	|	ИсправляемыеДокументы.МоментВремени
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ ПЕРВЫЕ 1
	|	ИсправляемыеДокументы.Ссылка
	|ПОМЕСТИТЬ ДокументДоКорректировки
	|ИЗ
	|	ПараметрыДокументовПоследовательности КАК ИсправляемыеДокументы
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПараметрыОтбора КАК ПараметрыОтбора
	|		ПО ПараметрыОтбора.Корректировочный И Не ПараметрыОтбора.ИсходныйКорректировочный
	|			И ИсправляемыеДокументы.Корректировочный = Ложь
	|			И ИсправляемыеДокументы.Ссылка &lt;&gt; ПараметрыОтбора.Ссылка
	|
	|УПОРЯДОЧИТЬ ПО
	|	ИсправляемыеДокументы.ЭтоДокументОснование,
	|	ИсправляемыеДокументы.МоментВремени УБЫВ
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|";
	
	// Табличные части Товары и Услуги исправляемого документа
	
	Запрос.Текст = Запрос.Текст + "ВЫБРАТЬ
	|	Товары.Номенклатура,
	|	"""" КАК Содержание,
	|	Товары.СтавкаНДС,
	|	Товары.НомерГТД,
	|	Товары.Количество,
	|	Товары.Сумма,
	|	Товары.СуммаНДС,
	|	Товары.СуммаСНДС,
	|	Товары.СтатьяРасходов,
	|	Товары.НомерСтроки
	|ПОМЕСТИТЬ ТоварыУслугиИсправляемогоДокументаРазвернутые
	|ИЗ
	|	Документ.ПоступлениеТоваровУслуг.Товары КАК Товары
	|ГДЕ
	|	Товары.Ссылка В
	|			(ВЫБРАТЬ
	|				ИсправляемыйДокумент.Ссылка
	|			ИЗ
	|				ИсправляемыйДокумент КАК ИсправляемыйДокумент)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка),
	|	Расходы.Содержание,
	|	Расходы.СтавкаНДС,
	|	ЗНАЧЕНИЕ(Справочник.НомераГТД.ПустаяСсылка),
	|	Расходы.Количество,
	|	Расходы.Сумма,
	|	Расходы.СуммаНДС,
	|	Расходы.СуммаСНДС,
	|	Расходы.СтатьяРасходов,
	|	Расходы.НомерСтроки
	|ИЗ
	|	Документ.ПоступлениеУслугПрочихАктивов.Расходы КАК Расходы
	|ГДЕ
	|	Расходы.Ссылка В
	|			(ВЫБРАТЬ
	|				ИсправляемыйДокумент.Ссылка
	|			ИЗ
	|				ИсправляемыйДокумент КАК ИсправляемыйДокумент)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	Товары.Номенклатура,
	|	Товары.Содержание,
	|	Товары.СтавкаНДС,
	|	Товары.НомерГТД,
	|	Товары.Количество,
	|	Товары.Сумма,
	|	Товары.СуммаНДС,
	|	Товары.СуммаСНДС,
	|	Товары.СтатьяРасходов,
	|	Товары.НомерСтроки
	|ИЗ
	|	Документ.КорректировкаПоступления.Товары КАК Товары
	|ГДЕ
	|	Товары.Ссылка В
	|			(ВЫБРАТЬ
	|				ИсправляемыйДокумент.Ссылка
	|			ИЗ
	|				ИсправляемыйДокумент КАК ИсправляемыйДокумент)
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|";
	
	// Табличные части Товары и Услуги документа до корректировки
	
	Запрос.Текст = Запрос.Текст + "ВЫБРАТЬ
	|	Товары.Номенклатура,
	|	"""" КАК Содержание,
	|	Товары.СтавкаНДС,
	|	Товары.НомерГТД,
	|	Товары.Количество,
	|	Товары.Сумма,
	|	Товары.СуммаНДС,
	|	Товары.СуммаСНДС,
	|	Товары.СтатьяРасходов,
	|	Товары.НомерСтроки
	|ПОМЕСТИТЬ ТоварыУслугиДокументаДоКорректировкиРазвернутые
	|ИЗ
	|	Документ.ПоступлениеТоваровУслуг.Товары КАК Товары
	|ГДЕ
	|	Товары.Ссылка В
	|			(ВЫБРАТЬ
	|				ДокументДоКорректировки.Ссылка
	|			ИЗ
	|				ДокументДоКорректировки КАК ДокументДоКорректировки)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка),
	|	Расходы.Содержание,
	|	Расходы.СтавкаНДС,
	|	ЗНАЧЕНИЕ(Справочник.НомераГТД.ПустаяСсылка),
	|	Расходы.Количество,
	|	Расходы.Сумма,
	|	Расходы.СуммаНДС,
	|	Расходы.СуммаСНДС,
	|	Расходы.СтатьяРасходов,
	|	Расходы.НомерСтроки
	|ИЗ
	|	Документ.ПоступлениеУслугПрочихАктивов.Расходы КАК Расходы
	|ГДЕ
	|	Расходы.Ссылка В
	|			(ВЫБРАТЬ
	|				ДокументДоКорректировки.Ссылка
	|			ИЗ
	|				ДокументДоКорректировки КАК ДокументДоКорректировки)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	Товары.Номенклатура,
	|	Товары.Содержание,
	|	Товары.СтавкаНДС,
	|	Товары.НомерГТД,
	|	Товары.Количество,
	|	Товары.Сумма,
	|	Товары.СуммаНДС,
	|	Товары.СуммаСНДС,
	|	Товары.СтатьяРасходов,
	|	Товары.НомерСтроки
	|ИЗ
	|	Документ.КорректировкаПоступления.Товары КАК Товары
	|ГДЕ
	|	Товары.Ссылка В
	|			(ВЫБРАТЬ
	|				ДокументДоКорректировки.Ссылка
	|			ИЗ
	|				ДокументДоКорректировки КАК ДокументДоКорректировки)
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|";
	
	// Результирующие табличные части Товары и Услуги
	
	Запрос.Текст = Запрос.Текст + "ВЫБРАТЬ
	|	Товары.Номенклатура,
	|	Товары.СтавкаНДС,
	|	Товары.НомерГТД,
	|	СУММА(Товары.Количество) КАК Количество,
	|	СУММА(Товары.Сумма) КАК Сумма,
	|	СУММА(Товары.СуммаНДС) КАК СуммаНДС
	|ПОМЕСТИТЬ ТоварыИсправляемогоДокумента
	|ИЗ
	|	ТоварыУслугиИсправляемогоДокументаРазвернутые КАК Товары
	|ГДЕ
	|	Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
	|
	|СГРУППИРОВАТЬ ПО
	|	Товары.Номенклатура,
	|	Товары.СтавкаНДС,
	|	Товары.НомерГТД
	|
	|ИНДЕКСИРОВАТЬ ПО
	|	Товары.Номенклатура,
	|	Товары.СтавкаНДС,
	|	Товары.НомерГТД
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	Товары.Номенклатура,
	|	Товары.СтавкаНДС,
	|	Товары.НомерГТД,
	|	СУММА(Товары.Количество) КАК Количество,
	|	СУММА(Товары.Сумма) КАК Сумма,
	|	СУММА(Товары.СуммаНДС) КАК СуммаНДС
	|ПОМЕСТИТЬ ТоварыДокументаДоКорректировки
	|ИЗ
	|	ТоварыУслугиДокументаДоКорректировкиРазвернутые КАК Товары
	|ГДЕ
	|	Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
	|
	|СГРУППИРОВАТЬ ПО
	|	Товары.Номенклатура,
	|	Товары.СтавкаНДС,
	|	Товары.НомерГТД
	|
	|ИНДЕКСИРОВАТЬ ПО
	|	Товары.Номенклатура,
	|	Товары.СтавкаНДС,
	|	Товары.НомерГТД
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	Товары.Номенклатура,
	|	Товары.СтавкаНДС,
	|	Товары.НомерГТД,
	|	СУММА(Товары.Количество) КАК Количество,
	|	СУММА(Товары.Сумма) КАК Сумма,
	|	СУММА(Товары.СуммаНДС) КАК СуммаНДС,
	|	СУММА(Товары.СуммаСНДС) КАК СуммаСНДС
	|ПОМЕСТИТЬ ТоварыИсправительногоДокумента
	|ИЗ
	|	Документ.КорректировкаПоступления.Товары КАК Товары
	|ГДЕ
	|	Товары.Ссылка = &amp;Ссылка
	|	И Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
	|
	|СГРУППИРОВАТЬ ПО
	|	Товары.Номенклатура,
	|	Товары.СтавкаНДС,
	|	Товары.НомерГТД
	|
	|ИНДЕКСИРОВАТЬ ПО
	|	Товары.Номенклатура,
	|	Товары.СтавкаНДС,
	|	Товары.НомерГТД
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ЕСТЬNULL(ЕСТЬNULL(ТоварыИсправляемогоДокумента.Номенклатура, ТоварыИсправительногоДокумента.Номенклатура), ТоварыДокументаДоКорректировки.Номенклатура) КАК Номенклатура,
	|	ЕСТЬNULL(ЕСТЬNULL(ТоварыИсправляемогоДокумента.СтавкаНДС, ТоварыИсправительногоДокумента.СтавкаНДС), ТоварыДокументаДоКорректировки.СтавкаНДС) КАК СтавкаНДС,
	|	ЕСТЬNULL(ЕСТЬNULL(ТоварыИсправляемогоДокумента.НомерГТД, ТоварыИсправительногоДокумента.НомерГТД), ТоварыДокументаДоКорректировки.НомерГТД) КАК НомерГТД,
	|	ТоварыДокументаДоКорректировки.Количество КАК КоличествоДоКорректировки,
	|	ТоварыДокументаДоКорректировки.Сумма КАК СуммаДоКорректировки,
	|	ТоварыДокументаДоКорректировки.СуммаНДС КАК СуммаНДСДоКорректировки,
	|	ТоварыИсправляемогоДокумента.Количество КАК КоличествоДоИзменения,
	|	ТоварыИсправляемогоДокумента.Сумма КАК СуммаДоИзменения,
	|	ТоварыИсправляемогоДокумента.СуммаНДС КАК СуммаНДСДоИзменения,
	|	ТоварыИсправительногоДокумента.Количество,
	|	ТоварыИсправительногоДокумента.Сумма,
	|	ТоварыИсправительногоДокумента.СуммаНДС,
	|	ТоварыИсправительногоДокумента.СуммаСНДС,
	|	ВЫБОР
	|		КОГДА ЕСТЬNULL(ТоварыДокументаДоКорректировки.Номенклатура, ТоварыИсправляемогоДокумента.Номенклатура) ЕСТЬ NULL 
	|			ТОГДА ЛОЖЬ
	|		ИНАЧЕ ИСТИНА
	|	КОНЕЦ КАК ЕстьВДокументеПоступления
	|ПОМЕСТИТЬ РезультатСопоставленияТоваров
	|ИЗ
	|	ТоварыИсправляемогоДокумента КАК ТоварыИсправляемогоДокумента
	|		ПОЛНОЕ СОЕДИНЕНИЕ ТоварыИсправительногоДокумента КАК ТоварыИсправительногоДокумента
	|		ПО ТоварыИсправляемогоДокумента.Номенклатура = ТоварыИсправительногоДокумента.Номенклатура
	|			И ТоварыИсправляемогоДокумента.СтавкаНДС = ТоварыИсправительногоДокумента.СтавкаНДС
	|			И ТоварыИсправляемогоДокумента.НомерГТД = ТоварыИсправительногоДокумента.НомерГТД
	|		ПОЛНОЕ СОЕДИНЕНИЕ ТоварыДокументаДоКорректировки КАК ТоварыДокументаДоКорректировки
	|		ПО (ТоварыДокументаДоКорректировки.Номенклатура = ТоварыИсправляемогоДокумента.Номенклатура
	|				ИЛИ ТоварыДокументаДоКорректировки.Номенклатура = ТоварыИсправительногоДокумента.Номенклатура)
	|			И (ТоварыДокументаДоКорректировки.СтавкаНДС = ТоварыИсправляемогоДокумента.СтавкаНДС
	|				ИЛИ ТоварыДокументаДоКорректировки.СтавкаНДС = ТоварыИсправительногоДокумента.СтавкаНДС)
	|			И (ТоварыДокументаДоКорректировки.НомерГТД = ТоварыИсправляемогоДокумента.НомерГТД
	|				ИЛИ ТоварыДокументаДоКорректировки.НомерГТД = ТоварыИсправительногоДокумента.НомерГТД)
	|
	|ИНДЕКСИРОВАТЬ ПО
	|	Номенклатура
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	Товары.Номенклатура КАК Номенклатура,
	|	Товары.Содержание КАК Содержание,
	|	МАКСИМУМ(Товары.НомерСтроки) КАК НомерСтроки
	|ПОМЕСТИТЬ НомерСтрок
	|ИЗ
	|	ТоварыУслугиИсправляемогоДокументаРазвернутые КАК Товары
	|
	|СГРУППИРОВАТЬ ПО
	|	Товары.Номенклатура,
	|	Товары.Содержание
	|
	|ИНДЕКСИРОВАТЬ ПО
	|	Номенклатура,
	|	Содержание
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	РезультатСопоставления.Номенклатура,
	|	РезультатСопоставления.СтавкаНДС,
	|	РезультатСопоставления.СтавкаНДС КАК СтавкаНДСДоИзменения,
	|	РезультатСопоставления.НомерГТД,
	|	РезультатСопоставления.НомерГТД КАК НомерГТДДоИзменения,
	|	РезультатСопоставления.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	|	РезультатСопоставления.НомерГТД.СтранаПроисхождения КАК СтранаПроисхожденияДоИзменения,
	|	РезультатСопоставления.КоличествоДоКорректировки,
	|	РезультатСопоставления.СуммаДоКорректировки,
	|	РезультатСопоставления.СуммаНДСДоКорректировки,
	|	РезультатСопоставления.КоличествоДоИзменения,
	|	РезультатСопоставления.СуммаДоИзменения,
	|	РезультатСопоставления.СуммаНДСДоИзменения,
	|	РезультатСопоставления.Количество,
	|	РезультатСопоставления.Сумма,
	|	РезультатСопоставления.СуммаНДС,
	|	РезультатСопоставления.СуммаСНДС,
	|	ВЫБОР
	|		КОГДА НЕ(РезультатСопоставления.КоличествоДоКорректировки ЕСТЬ NULL 
	|					ИЛИ РезультатСопоставления.КоличествоДоКорректировки = 0)
	|			ТОГДА РезультатСопоставления.СуммаДоКорректировки / РезультатСопоставления.КоличествоДоКорректировки
	|		ИНАЧЕ 0
	|	КОНЕЦ КАК ЦенаДоКорректировки,
	|	ВЫБОР
	|		КОГДА НЕ(РезультатСопоставления.КоличествоДоИзменения ЕСТЬ NULL 
	|					ИЛИ РезультатСопоставления.КоличествоДоИзменения = 0)
	|			ТОГДА РезультатСопоставления.СуммаДоИзменения / РезультатСопоставления.КоличествоДоИзменения
	|		ИНАЧЕ 0
	|	КОНЕЦ КАК ЦенаДоИзменения,
	|	ВЫБОР
	|		КОГДА НЕ(РезультатСопоставления.Количество ЕСТЬ NULL 
	|					ИЛИ РезультатСопоставления.Количество = 0)
	|			ТОГДА РезультатСопоставления.Сумма / РезультатСопоставления.Количество
	|		ИНАЧЕ 0
	|	КОНЕЦ КАК Цена,
	|	РезультатСопоставления.ЕстьВДокументеПоступления
	|ИЗ
	|	РезультатСопоставленияТоваров КАК РезультатСопоставления
	|		ЛЕВОЕ СОЕДИНЕНИЕ НомерСтрок КАК НомерСтрок
	|		ПО РезультатСопоставления.Номенклатура = НомерСтрок.НомерСтроки
	|
	|УПОРЯДОЧИТЬ ПО
	|	РезультатСопоставления.ЕстьВДокументеПоступления УБЫВ,
	|	НомерСтрок.НомерСтроки
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	Услуги.Номенклатура,
	|	Услуги.Содержание,
	|	Услуги.СтавкаНДС,
	|	Услуги.СтатьяРасходов КАК СтатьяРасходов,
	|	СУММА(Услуги.Количество) КАК Количество,
	|	СУММА(Услуги.Сумма) КАК Сумма,
	|	СУММА(Услуги.СуммаНДС) КАК СуммаНДС
	|ПОМЕСТИТЬ УслугиИсправляемогоДокумента
	|ИЗ
	|	ТоварыУслугиИсправляемогоДокументаРазвернутые КАК Услуги
	|ГДЕ
	|	(Услуги.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
	|			ИЛИ &amp;ПоступлениеУслуг)
	|	И ЕСТЬNULL(Услуги.СтатьяРасходов.ВариантРаспределенияРасходов, НЕОПРЕДЕЛЕНО) &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаСебестоимостьТоваров)
	|
	|СГРУППИРОВАТЬ ПО
	|	Услуги.Номенклатура,
	|	Услуги.Содержание,
	|	Услуги.СтавкаНДС,
	|	Услуги.СтатьяРасходов
	|
	|ИНДЕКСИРОВАТЬ ПО
	|	Услуги.Номенклатура,
	|	Услуги.Содержание,
	|	Услуги.СтавкаНДС,
	|	СтатьяРасходов
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	Услуги.Номенклатура,
	|	Услуги.Содержание,
	|	Услуги.СтавкаНДС,
	|	Услуги.СтатьяРасходов КАК СтатьяРасходов,
	|	СУММА(Услуги.Количество) КАК Количество,
	|	СУММА(Услуги.Сумма) КАК Сумма,
	|	СУММА(Услуги.СуммаНДС) КАК СуммаНДС
	|ПОМЕСТИТЬ УслугиДокументаДоКорректировки
	|ИЗ
	|	ТоварыУслугиДокументаДоКорректировкиРазвернутые КАК Услуги
	|ГДЕ
	|	(Услуги.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
	|			ИЛИ &amp;ПоступлениеУслуг)
	|	И ЕСТЬNULL(Услуги.СтатьяРасходов.ВариантРаспределенияРасходов, НЕОПРЕДЕЛЕНО) &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаСебестоимостьТоваров)
	|
	|СГРУППИРОВАТЬ ПО
	|	Услуги.Номенклатура,
	|	Услуги.Содержание,
	|	Услуги.СтавкаНДС,
	|	Услуги.СтатьяРасходов
	|
	|ИНДЕКСИРОВАТЬ ПО
	|	Услуги.Номенклатура,
	|	Услуги.Содержание,
	|	Услуги.СтавкаНДС,
	|	СтатьяРасходов
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	КорректировкаПоступленияТовары.Номенклатура КАК Номенклатура,
	|	КорректировкаПоступленияТовары.Содержание КАК Содержание,
	|	КорректировкаПоступленияТовары.СтавкаНДС КАК СтавкаНДС,
	|	КорректировкаПоступленияТовары.СтатьяРасходов КАК СтатьяРасходов,
	|	СУММА(КорректировкаПоступленияТовары.Количество) КАК Количество,
	|	СУММА(КорректировкаПоступленияТовары.Сумма) КАК Сумма,
	|	СУММА(КорректировкаПоступленияТовары.СуммаНДС) КАК СуммаНДС,
	|	СУММА(КорректировкаПоступленияТовары.СуммаСНДС) КАК СуммаСНДС
	|ПОМЕСТИТЬ УслугиИсправительногоДокумента
	|ИЗ
	|	Документ.КорректировкаПоступления.Товары КАК КорректировкаПоступленияТовары
	|ГДЕ
	|	КорректировкаПоступленияТовары.Ссылка = &amp;Ссылка
	|	И (КорректировкаПоступленияТовары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
	|			ИЛИ &amp;ПоступлениеУслуг)
	|	И ЕСТЬNULL(КорректировкаПоступленияТовары.СтатьяРасходов.ВариантРаспределенияРасходов, НЕОПРЕДЕЛЕНО) &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаСебестоимостьТоваров)
	|
	|СГРУППИРОВАТЬ ПО
	|	КорректировкаПоступленияТовары.Номенклатура,
	|	КорректировкаПоступленияТовары.Содержание,
	|	КорректировкаПоступленияТовары.СтавкаНДС,
	|	КорректировкаПоступленияТовары.СтатьяРасходов
	|
	|ИНДЕКСИРОВАТЬ ПО
	|	Номенклатура,
	|	Содержание,
	|	СтавкаНДС,
	|	СтатьяРасходов
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ЕСТЬNULL(ЕСТЬNULL(УслугиИсправляемогоДокумента.Номенклатура, УслугиИсправительногоДокумента.Номенклатура), УслугиДокументаДоКорректировки.Номенклатура) КАК Номенклатура,
	|	ЕСТЬNULL(ЕСТЬNULL(УслугиИсправляемогоДокумента.Содержание, УслугиИсправительногоДокумента.Содержание), УслугиДокументаДоКорректировки.Содержание) КАК Содержание,
	|	ЕСТЬNULL(ЕСТЬNULL(УслугиИсправляемогоДокумента.СтавкаНДС, УслугиИсправительногоДокумента.СтавкаНДС), УслугиДокументаДоКорректировки.СтавкаНДС) КАК СтавкаНДС,
	|	ЕСТЬNULL(ЕСТЬNULL(УслугиИсправляемогоДокумента.СтатьяРасходов, УслугиИсправительногоДокумента.СтатьяРасходов), УслугиДокументаДоКорректировки.СтатьяРасходов) КАК СтатьяРасходов,
	|	УслугиДокументаДоКорректировки.Количество КАК КоличествоДоКорректировки,
	|	УслугиДокументаДоКорректировки.Сумма КАК СуммаДоКорректировки,
	|	УслугиДокументаДоКорректировки.СуммаНДС КАК СуммаНДСДоКорректировки,
	|	УслугиИсправляемогоДокумента.Количество КАК КоличествоДоИзменения,
	|	УслугиИсправляемогоДокумента.Сумма КАК СуммаДоИзменения,
	|	УслугиИсправляемогоДокумента.СуммаНДС КАК СуммаНДСДоИзменения,
	|	УслугиИсправительногоДокумента.Количество,
	|	УслугиИсправительногоДокумента.Сумма,
	|	УслугиИсправительногоДокумента.СуммаНДС,
	|	УслугиИсправительногоДокумента.СуммаСНДС,
	|	ВЫБОР
	|		КОГДА ЕСТЬNULL(УслугиИсправляемогоДокумента.Номенклатура, УслугиДокументаДоКорректировки.Номенклатура) ЕСТЬ NULL 
	|			ТОГДА ЛОЖЬ
	|		ИНАЧЕ ИСТИНА
	|	КОНЕЦ КАК ЕстьВДокументеПоступления
	|ПОМЕСТИТЬ РезультатСопоставленияУслуг
	|ИЗ
	|	УслугиИсправляемогоДокумента КАК УслугиИсправляемогоДокумента
	|		ПОЛНОЕ СОЕДИНЕНИЕ УслугиИсправительногоДокумента КАК УслугиИсправительногоДокумента
	|		ПО УслугиИсправляемогоДокумента.Номенклатура = УслугиИсправительногоДокумента.Номенклатура
	|			И УслугиИсправляемогоДокумента.СтавкаНДС = УслугиИсправительногоДокумента.СтавкаНДС
	|			И УслугиИсправляемогоДокумента.СтатьяРасходов = УслугиИсправительногоДокумента.СтатьяРасходов
	|		ПОЛНОЕ СОЕДИНЕНИЕ УслугиДокументаДоКорректировки КАК УслугиДокументаДоКорректировки
	|		ПО (УслугиДокументаДоКорректировки.Номенклатура = УслугиИсправительногоДокумента.Номенклатура
	|				ИЛИ УслугиДокументаДоКорректировки.Номенклатура = УслугиИсправляемогоДокумента.Номенклатура)
	|			И (УслугиДокументаДоКорректировки.СтавкаНДС = УслугиИсправительногоДокумента.СтавкаНДС
	|				ИЛИ УслугиДокументаДоКорректировки.СтавкаНДС = УслугиИсправляемогоДокумента.СтавкаНДС)
	|			И (УслугиДокументаДоКорректировки.СтатьяРасходов = УслугиИсправительногоДокумента.СтатьяРасходов
	|				ИЛИ УслугиДокументаДоКорректировки.СтатьяРасходов = УслугиИсправляемогоДокумента.СтатьяРасходов)
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	РезультатСопоставления.Номенклатура,
	|	РезультатСопоставления.Содержание,
	|	РезультатСопоставления.Содержание КАК СодержаниеДоИзменения,
	|	РезультатСопоставления.СтавкаНДС,
	|	РезультатСопоставления.СтавкаНДС КАК СтавкаНДСДоИзменения,
	|	РезультатСопоставления.КоличествоДоКорректировки,
	|	РезультатСопоставления.СуммаДоКорректировки,
	|	РезультатСопоставления.СуммаНДСДоКорректировки,
	|	РезультатСопоставления.КоличествоДоИзменения,
	|	РезультатСопоставления.СуммаДоИзменения,
	|	РезультатСопоставления.СуммаНДСДоИзменения,
	|	РезультатСопоставления.Количество,
	|	РезультатСопоставления.Сумма,
	|	РезультатСопоставления.СуммаНДС,
	|	РезультатСопоставления.СуммаСНДС,
	|	ВЫБОР
	|		КОГДА НЕ(РезультатСопоставления.Количество ЕСТЬ NULL 
	|					ИЛИ РезультатСопоставления.Количество = 0)
	|			ТОГДА РезультатСопоставления.Сумма / РезультатСопоставления.Количество
	|		ИНАЧЕ 0
	|	КОНЕЦ КАК Цена,
	|	ВЫБОР
	|		КОГДА НЕ(РезультатСопоставления.КоличествоДоИзменения ЕСТЬ NULL 
	|					ИЛИ РезультатСопоставления.КоличествоДоИзменения = 0)
	|			ТОГДА РезультатСопоставления.СуммаДоИзменения / РезультатСопоставления.КоличествоДоИзменения
	|		ИНАЧЕ 0
	|	КОНЕЦ КАК ЦенаДоИзменения,
	|	ВЫБОР
	|		КОГДА НЕ(РезультатСопоставления.КоличествоДоКорректировки ЕСТЬ NULL 
	|					ИЛИ РезультатСопоставления.КоличествоДоКорректировки = 0)
	|			ТОГДА РезультатСопоставления.СуммаДоКорректировки / РезультатСопоставления.КоличествоДоКорректировки
	|		ИНАЧЕ 0
	|	КОНЕЦ КАК ЦенаДоКорректировки,
	|	РезультатСопоставления.СтатьяРасходов,
	|	РезультатСопоставления.СтатьяРасходов.КорреспондирующийСчет КАК СчетЗатрат,
	|	РезультатСопоставления.СтатьяРасходов.КорреспондирующийСчет КАК СчетЗатратНУ,
	|	РезультатСопоставления.ЕстьВДокументеПоступления КАК ЕстьВДокументеПоступления,
	|	НомерСтрок.НомерСтроки КАК НомерСтроки
	|ИЗ
	|	РезультатСопоставленияУслуг КАК РезультатСопоставления
	|		ЛЕВОЕ СОЕДИНЕНИЕ НомерСтрок КАК НомерСтрок
	|		ПО РезультатСопоставления.Номенклатура = НомерСтрок.Номенклатура
	|			И РезультатСопоставления.Содержание = НомерСтрок.Содержание
	|
	|УПОРЯДОЧИТЬ ПО
	|	ЕстьВДокументеПоступления УБЫВ,
	|	НомерСтроки";
	
	РезультатыЗапроса = Запрос.ВыполнитьПакет();
	
	Выборка = РезультатыЗапроса[0].Выбрать();
	Если Выборка.Следующий() Тогда
		ЗаполнитьЗначенияСвойств(ВходящиеДанные, Выборка);
	КонецЕсли;
	
	ВыборкаДанных = РезультатыЗапроса[5].Выбрать();
	Если ВыборкаДанных.Следующий() Тогда
		ВходящиеДанные.ДокументПоступления = ВыборкаДанных.Ссылка;
	КонецЕсли;
	
	ВыборкаДанных = РезультатыЗапроса[6].Выбрать();
	Если ВыборкаДанных.Следующий() Тогда
		ВходящиеДанные.ВидОперации = ?(ВыборкаДанных.ИсходныйКорректировочный, "СогласованноеИзменение", "ИсправлениеОшибки");
	КонецЕсли;
	
	ВыборкаДанных = РезультатыЗапроса[7].Выбрать();
	Если ВыборкаДанных.Следующий() Тогда
		ВходящиеДанные.ИсправляемыйДокументПоступления = ВыборкаДанных.Ссылка;
	КонецЕсли;
	
	ВходящиеДанные.Товары = РезультатыЗапроса[16].Выгрузить();
	ВходящиеДанные.Услуги = РезультатыЗапроса[21].Выгрузить();
	ВходящиеДанные.СуммаДокумента = ВходящиеДанные.Товары.Итог("СуммаСНДС") + ВходящиеДанные.Услуги.Итог("СуммаСНДС");
	
КонецЕсли;</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	Параметры.ЗагруженныеКорректировкиПоступления.Добавить(Объект);
	
	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		
		ТаблицаСтатейРасходов = ПараметрыОбъекта.Получить("УслугиТабличнаяЧасть");
		Для Каждого СтрокаТЧ Из Объект.Услуги Цикл
			
			СчетЗатрат	   = СтрокаТЧ.СчетЗатрат;
			СчетЗатратНУ   = СтрокаТЧ.СчетЗатратНУ;
			СтатьяРасходов = ТаблицаСтатейРасходов[СтрокаТЧ.НомерСтроки - 1].СтатьяРасходов;
			Если ЗначениеЗаполнено(СчетЗатрат) Тогда
				
				Для Каждого СтрокаВидаСубконто Из СчетЗатрат.ВидыСубконто Цикл
					
					ТипСубконто = СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
					Если ТипСубконто.СодержитТип(ТипЗнч(СтатьяРасходов)) Тогда
						СтрокаТЧ["Субконто" + СтрокаВидаСубконто.НомерСтроки] = СтатьяРасходов;
					КонецЕсли;
				КонецЦикла;
			КонецЕсли;
			
			Если ЗначениеЗаполнено(СчетЗатратНУ) Тогда
				
				Для Каждого СтрокаВидаСубконто Из СчетЗатрат.ВидыСубконто Цикл
					
					ТипСубконто = СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
					Если ТипСубконто.СодержитТип(ТипЗнч(СтатьяРасходов)) Тогда
						СтрокаТЧ["СубконтоНУ" + СтрокаВидаСубконто.НомерСтроки] = СтатьяРасходов;
					КонецЕсли;
				КонецЦикла;
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;
	
	// Заполняем параметры, зависящие от режима налогообложения
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		Если УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы Тогда
			ВариантОтраженияУСН = ?(ПараметрыОбъекта["ЭтоЕНВД"], Перечисления.ОтражениеВУСН.НеПринимаются, Перечисления.ОтражениеВУСН.Принимаются);
		Иначе
			ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка();
		КонецЕсли;
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН &lt;&gt; Перечисления.ОтражениеВУСН.Принимаются Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
		// Заполняем отражение в УСН для ТЧ Услуги
		Для Каждого СтрокаТЧ Из Объект.Услуги Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН &lt;&gt; Перечисления.ОтражениеВУСН.Принимаются Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
		// Определяем признак включения НДС в стоимость
		Если УчетнаяПолитика.УСН ИЛИ ПараметрыОбъекта["ЭтоЕНВД"] Тогда
			Объект.НДСВключенВСтоимость = Истина;
		КонецЕсли;
	КонецЕсли;
	
	Если НЕ Объект.НДСВключенВСтоимость И ПараметрыОбъекта["ЭтоЕНВД"] Тогда
		Объект.НДСВключенВСтоимость = Истина;
	КонецЕсли;
	
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.КорректировкаПоступления</Источник>
						<Приемник>ДокументСсылка.КорректировкаПоступления</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>29</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>30</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>32</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>33</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование> --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>36</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийИсправленияПоступленияРеализации"/>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>66</Код>
								<Наименование> --&gt; ВосстановитьНДС</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВосстановитьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Если ВходящиеДанные.ВидОперации = "СогласованноеИзменение"
	Или ТипЗнч(ВходящиеДанные.ИсправляемыйДокументПоступления) = Тип("ДокументСсылка.КорректировкаПоступления") Тогда
	Значение = Истина;
Иначе
	Значение = Ложь;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование>Контрагент --&gt; Контрагент</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>41</Код>
								<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				"СПоставщиком");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Источник.Соглашение);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		ВходящиеДанные.ЗаказПоставщику);
	
	Если ЗначениеЗаполнено(Источник.Соглашение) Тогда
		Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Источник.Соглашение);
	Иначе
		Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; Источник.ВалютаВзаиморасчетов;
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>34</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПриВыгрузке>Значение = Значение = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>35</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>37</Код>
								<Наименование> --&gt; Грузоотправитель</Наименование>
								<Порядок>850</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							</Свойство>
							<Свойство>
								<Код>38</Код>
								<Наименование> --&gt; ДокументПоступления</Наименование>
								<Порядок>900</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДокументПоступления" Вид="Реквизит"/>
								<ПриВыгрузке>Если ТипЗнч(Значение) = Тип("ДокументСсылка.КорректировкаПоступления") Тогда
	ИмяПКО = "КорректировкаПоступления_КорректировкаПоступления";
ИначеЕсли ТипЗнч(Значение) = Тип("ДокументСсылка.ПоступлениеУслугПрочихАктивов") Тогда
	ИмяПКО = "ПУВА_ПоступлениеУслуг";
Иначе
	ИмяПКО = "ПТУ_ЗакупкаТоваровУслуг";
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>39</Код>
								<Наименование> --&gt; ИсправляемыйДокументПоступления</Наименование>
								<Порядок>950</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИсправляемыйДокументПоступления" Вид="Реквизит"/>
								<ПриВыгрузке>Если ТипЗнч(Значение) = Тип("ДокументСсылка.КорректировкаПоступления") Тогда
	ИмяПКО = "КорректировкаПоступления_КорректировкаПоступления";
ИначеЕсли ТипЗнч(Значение) = Тип("ДокументСсылка.ПоступлениеУслугПрочихАктивов") Тогда
	ИмяПКО = "ПУВА_ПоступлениеУслуг";
Иначе
	ИмяПКО = "ПТУ_ЗакупкаТоваровУслуг";
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>42</Код>
								<Наименование> --&gt; КорректироватьБУиНУ</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КорректироватьБУиНУ" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>40</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>1</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1150</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>2</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; СтавкаНДСДоИзменения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДСДоИзменения" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование> --&gt; КоличествоДоКорректировки</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КоличествоДоКорректировки" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; КоличествоДоИзменения</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КоличествоДоИзменения" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; ЦенаДоКорректировки</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЦенаДоКорректировки" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование> --&gt; ЦенаДоИзменения</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЦенаДоИзменения" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; СуммаДоКорректировки</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаДоКорректировки" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; СуммаДоИзменения</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаДоИзменения" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; СуммаНДСДоКорректировки</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДСДоКорректировки" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt; СуммаНДСДоИзменения</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДСДоИзменения" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование> --&gt; НомерГТДДоИзменения</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТДДоИзменения" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование> --&gt; СтранаПроисхожденияДоИзменения</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхожденияДоИзменения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; ЕстьВДокументеПоступления</Наименование>
									<Порядок>1000</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕстьВДокументеПоступления" Вид="Реквизит" Тип="Булево"/>
								</Свойство>
							</Группа>
							<Группа>
								<Код>43</Код>
								<Наименование> --&gt; Услуги</Наименование>
								<Порядок>1200</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>47</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>46</Код>
									<Наименование> --&gt; Содержание</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>45</Код>
									<Наименование> --&gt; СодержаниеДоИзменения</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СодержаниеДоИзменения" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>44</Код>
									<Наименование> --&gt; СтавкаНДСДоИзменения</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДСДоИзменения" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>48</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>61</Код>
									<Наименование> --&gt; КоличествоДоКорректировки</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КоличествоДоКорректировки" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>49</Код>
									<Наименование> --&gt; КоличествоДоИзменения</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КоличествоДоИзменения" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>57</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>62</Код>
									<Наименование> --&gt; СуммаДоКорректировки</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаДоКорректировки" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>58</Код>
									<Наименование> --&gt; СуммаДоИзменения</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаДоИзменения" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>55</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>63</Код>
									<Наименование> --&gt; СуммаНДСДоКорректировки</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДСДоКорректировки" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>54</Код>
									<Наименование> --&gt; СуммаНДСДоИзменения</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДСДоИзменения" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>53</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>64</Код>
									<Наименование> --&gt; ЦенаДоКорректировки</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЦенаДоКорректировки" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>56</Код>
									<Наименование> --&gt; ЦенаДоИзменения</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЦенаДоИзменения" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>51</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>59</Код>
									<Наименование> --&gt; СчетЗатрат</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетЗатрат" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПриВыгрузке>Отказ = Не ЗначениеЗаполнено(Значение);</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>52</Код>
									<Наименование> --&gt; СчетЗатратНУ</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетЗатратНУ" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПриВыгрузке>Отказ = Не ЗначениеЗаполнено(Значение);</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>50</Код>
									<Наименование> --&gt; ЕстьВДокументеПоступления</Наименование>
									<Порядок>1000</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕстьВДокументеПоступления" Вид="Реквизит" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>60</Код>
									<Наименование> --&gt;</Наименование>
									<Порядок>1050</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>СтатьяРасходов</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.СчетЗатрат) Тогда
	Значение = ОбъектКоллекции.СтатьяРасходов;
	ИмяПКО = ?(Найти(ОбъектКоллекции.СчетЗатрат, "91.02") &gt; 0, "СтатьиРасходовВПрочиеДоходыИРасходы", "СтатьиРасходовВСтатьиЗатрат");
Иначе
	Пусто = Истина;
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
							</Группа>
							<Свойство>
								<Код>65</Код>
								<Наименование> --&gt;</Наименование>
								<Порядок>1250</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ЭтоЕНВД</ИмяПараметраДляПередачи>
							</Свойство>
							<Свойство Отключить="true">
								<Код>67</Код>
								<Наименование>ДокументОснование --&gt;</Наименование>
								<Порядок>1300</Порядок>
								<Источник Имя="ДокументОснование" Вид="Реквизит"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>КорректировкаПоступления_ОприходованиеТоваров</Код>
						<Наименование>Документ: Корректировка поступления -&gt; Документ: Оприходование товаров</Наименование>
						<Порядок>100</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<Источник>ДокументСсылка.КорректировкаПоступления</Источник>
						<Приемник>ДокументСсылка.ОприходованиеТоваров</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>12</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>13</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПриВыгрузке>Значение = Лев(Значение, 5) + "КП" + Сред(Значение, 8);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование> --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ВходящиеДанные.Товары.Итог("Сумма");</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>СтатьяДоходов --&gt; СтатьяПрочихДоходовРасходов</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="СтатьяДоходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиДоходов"/>
								<Приемник Имя="СтатьяПрочихДоходовРасходов" Вид="Реквизит" Тип="СправочникСсылка.ПрочиеДоходыИРасходы"/>
								<КодПравилаКонвертации>СтатьиРасходовВСтатьиЗатрат                       </КодПравилаКонвертации>
								<ПриВыгрузке>КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет");
Пусто = (Найти(КоррСчет, "91.01") = 0);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование> --&gt; Основание</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Значение = "Корректировка поступления № " + ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Ложь)
	+ " от " + Формат(Источник.Дата, "ДФ='дд ММММ гггг'")+ " г.";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>1</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>550</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>2</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>КорректировкаПоступления_СписаниеТоваров</Код>
						<Наименование>Документ: Корректировка поступления -&gt; Документ: Списание товаров</Наименование>
						<Порядок>150</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем признак "Отражение в УСН" значением по умолчанию
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = ?(УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы,
								Перечисления.ОтражениеВУСН.НеПринимаются, Перечисления.ОтражениеВУСН.ПустаяСсылка());
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<Источник>ДокументСсылка.КорректировкаПоступления</Источник>
						<Приемник>ДокументСсылка.СписаниеТоваров</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>13</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>14</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПриВыгрузке>Значение = Лев(Значение, 5) + "КП" + Сред(Значение, 8);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеТоваров"/>
								<ПередВыгрузкой>Значение = "ТоварыПродукция";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование> --&gt; СуммаДокумента</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ВходящиеДанные.Товары.Итог("Себестоимость");</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование> --&gt; Основание</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Значение = "Корректировка поступления № " + ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Ложь)
	+ " от " + Формат(Источник.Дата, "ДФ='дд ММММ гггг'")+ " г.";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>1</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>600</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; Себестоимость</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Себестоимость" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>ВозвратТоваровПоставщику</Код>
					<Наименование>ПКО для документа "Возврат товаров поставщику"</Наименование>
					<Порядок>200</Порядок>
					<Правило>
						<Код>ВТП_ВозвратТоваровПоставщику</Код>
						<Наименование>Документ: Возврат товаров поставщику</Наименование>
						<Порядок>200</Порядок>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Соглашение) Тогда
	ВходящиеДанные.Вставить("ВалютаВзаиморасчетов", ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.Соглашение, "Валюта"));
ИначеЕсли Источник.РасшифровкаПлатежа.Количество() &gt; 0 Тогда
	ВходящиеДанные.Вставить("ВалютаВзаиморасчетов", Источник.РасшифровкаПлатежа[0].ВалютаВзаиморасчетов);
Иначе
	ВходящиеДанные.Вставить("ВалютаВзаиморасчетов", Источник.Валюта);
КонецЕсли;</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем параметры, зависящие от режима налогообложения
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	// Определяем признак включения НДС в стоимость
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		Если УчетнаяПолитика.УСН Тогда
			Объект.НДСВключенВСтоимость = Истина;
		КонецЕсли;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВозвратТоваровПоставщику</Источник>
						<Приемник>ДокументСсылка.ВозвратТоваровПоставщику</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийВозвратТоваровПоставщику"/>
								<ПередВыгрузкой>Значение = "ПокупкаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>Контрагент --&gt; Контрагент</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		ВходящиеДанные.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				"СПоставщиком");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Источник.Соглашение);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	// Заказ поставщику берем из табличной части "Расшифровка платежа"
	// Если там указано несколько заказов или в качестве заказа указан документ, не являющийся заказом, то ничего не далаем
	Запрос = Новый Запрос("ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	РасшифровкаПлатежа.Заказ
	|ИЗ
	|	Документ.ВозвратТоваровПоставщику.РасшифровкаПлатежа КАК РасшифровкаПлатежа
	|ГДЕ
	|	РасшифровкаПлатежа.Ссылка = &amp;Ссылка");
	
	Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
	ТабЗаказов = Запрос.Выполнить().Выгрузить();
	Если ТабЗаказов.Количество() = 1 Тогда
		ЗаказПоставщику = ТабЗаказов[0].Заказ;
		Если ТипЗнч(ЗаказПоставщику) = Тип("ДокументСсылка.ЗаказПоставщику") Тогда
			Значение.ЗаказПоставщикуУТ11 = ЗаказПоставщику;
		КонецЕсли;
	КонецЕсли;
	
	Если ЗначениеЗаполнено(Источник.Соглашение) Тогда
		Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Источник.Соглашение);
	Иначе
		Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ВходящиеДанные.ВалютаВзаиморасчетов;
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ВходящиеДанные.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ВходящиеДанные.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>37</Код>
								<Наименование> --&gt; ПоставщикуВыставляетсяСчетФактураНаВозврат</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ПоставщикуВыставляетсяСчетФактураНаВозврат" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = (Документы.СчетФактураВыданный.СчетаФактурыПоОснованию(Источник.Ссылка).Количество() &gt; 0);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование> --&gt; Сделка</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сделка" Вид="Реквизит" Тип="ДокументСсылка.ПоступлениеТоваровУслуг"/>
								<КодПравилаКонвертации>ПТУ_ЗакупкаТоваровУслуг                           </КодПравилаКонвертации>
								<ПередВыгрузкой>ТабДокументовПоступления = Источник.Товары.Выгрузить(, "ДокументПоступления");
ТабДокументовПоступления.Свернуть("ДокументПоступления");

Если ТабДокументовПоступления.Количество() = 1 Тогда
	
	ДокументПоступления = ТабДокументовПоступления[0].ДокументПоступления;
	Если ДокументПоступления.ХозяйственнаяОперация &lt;&gt; Перечисления.ХозяйственныеОперации.ЗакупкаЧерезПодотчетноеЛицо Тогда
		Значение = ДокументПоступления;
	Иначе
		Пусто = Истина;
	КонецЕсли;
	
Иначе
	Пусто = Истина;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>38</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>49</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>20</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Запросы.ТоварыИзВидовЗапасовДляВозвратаПоставщику.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запросы.ТоварыИзВидовЗапасовДляВозвратаПоставщику.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>50</Код>
								<Наименование> --&gt; СчетУчетаДоходов</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчетаДоходов" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>51</Код>
								<Наименование> --&gt; СчетУчетаРасходов</Наименование>
								<Порядок>1200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчетаРасходов" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>52</Код>
								<Наименование>ДокументПоступления --&gt;</Наименование>
								<Порядок>1250</Порядок>
								<Источник Имя="ДокументПоступления" Вид="Реквизит" Тип="ДокументСсылка.ПоступлениеТоваровУслуг"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Группа Отключить="true">
								<Код>39</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>1300</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>43</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>44</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>45</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>46</Код>
									<Наименование>СтавкаНДС --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>47</Код>
									<Наименование>СуммаНДС --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>48</Код>
									<Наименование>СуммаСНДС --&gt;</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>40</Код>
								<Наименование>РасшифровкаПлатежа --&gt;</Наименование>
								<Порядок>1350</Порядок>
								<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>41</Код>
									<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>53</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>1400</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>54</Код>
									<Наименование>ДокументПоступления --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ДокументПоступления" Вид="Реквизит" Тип="ДокументСсылка.ПоступлениеТоваровУслуг"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ВТП_ВозвратТоваровКомитенту</Код>
						<Наименование>Документ: Возврат товаров поставщику</Наименование>
						<Порядок>250</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВозвратТоваровПоставщику</Источник>
						<Приемник>ДокументСсылка.ВозвратТоваровПоставщику</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>19</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>20</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийВозвратТоваровПоставщику"/>
								<ПередВыгрузкой>Значение = "ПокупкаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>Контрагент --&gt; Контрагент</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
	Значение.Вставить("ВидДоговора",				"СКомитентом");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Источник.Соглашение);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование> --&gt; УчитыватьНДС</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>35</Код>
								<Наименование> --&gt; Сделка</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сделка" Вид="Реквизит" Тип="ДокументСсылка.ПоступлениеТоваровУслуг"/>
								<КодПравилаКонвертации>ПТУ_ПриемНаКомиссию                               </КодПравилаКонвертации>
								<ПередВыгрузкой>ТабДокументовПоступления = Источник.Товары.Выгрузить(, "ДокументПоступления");
ТабДокументовПоступления.Свернуть("ДокументПоступления");

Если ТабДокументовПоступления.Количество() = 1 Тогда
	
	ДокументПоступления = ТабДокументовПоступления[0].ДокументПоступления;
	Если ДокументПоступления.ХозяйственнаяОперация &lt;&gt; Перечисления.ХозяйственныеОперации.ЗакупкаЧерезПодотчетноеЛицо Тогда
		Значение = ДокументПоступления;
	Иначе
		Пусто = Истина;
	КонецЕсли;
	
Иначе
	Пусто = Истина;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>36</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>44</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>1</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>ЗапросТовары = Запросы.ТоварыИзВидовЗапасовДляВозвратаКомитенту;
ЗапросТовары.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросТовары.УстановитьПараметр("Дата", Источник.Дата);

КоллекцияОбъектов = ЗапросТовары.ВыполнитьПакет()[2].Выгрузить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>2</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>45</Код>
								<Наименование>ДокументПоступления --&gt;</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="ДокументПоступления" Вид="Реквизит" Тип="ДокументСсылка.ПоступлениеТоваровУслуг"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Группа Отключить="true">
								<Код>37</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>38</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>39</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>40</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>41</Код>
									<Наименование>СтавкаНДС --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>42</Код>
									<Наименование>СуммаНДС --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>43</Код>
									<Наименование>СуммаСНДС --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>46</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>47</Код>
									<Наименование>ДокументПоступления --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ДокументПоступления" Вид="Реквизит" Тип="ДокументСсылка.ПоступлениеТоваровУслуг"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>ТаможеннаяДекларацияИмпорт</Код>
					<Наименование>ПКО для документа "Таможенная декларация импорт"</Наименование>
					<Порядок>250</Порядок>
					<Правило>
						<Код>ТаможеннаяДекларацияИмпорт_ГТДИмпорт</Код>
						<Наименование>Документ: Таможенная декларация на импорт</Наименование>
						<Порядок>50</Порядок>
						<ПередВыгрузкой>ВходящиеДанные = Новый Структура;
ВходящиеДанные.Вставить("РасчетыВУсловныхЕдиницах");
ВходящиеДанные.Вставить("КурсДокумента");
ВходящиеДанные.Вставить("КратностьДокумента");
ВходящиеДанные.Вставить("КурсВзаиморасчетов");
ВходящиеДанные.Вставить("КратностьВзаиморасчетов");
ВходящиеДанные.Вставить("СтранаПроисхождения");
ВходящиеДанные.Вставить("КоррСчет");

Запрос = Новый Запрос("ВЫБРАТЬ
|	КурсыВалют.Валюта КАК Валюта,
|	КурсыВалют.Курс,
|	КурсыВалют.Кратность
|ПОМЕСТИТЬ КурсыВалют
|ИЗ
|	РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, ) КАК КурсыВалют
|
|ИНДЕКСИРОВАТЬ ПО
|	Валюта
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ВЫБОР
|		КОГДА Док.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА Док.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА Док.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ КАК РасчетыВУсловныхЕдиницах,
|	ЕСТЬNULL(КурсВалютыВзаиморасчетов.Курс, 1) КАК КурсВзаиморасчетов,
|	ЕСТЬNULL(КурсВалютыВзаиморасчетов.Кратность, 1) КАК КратностьВзаиморасчетов,
|	ЕСТЬNULL(КурсВалютыДокумента.Курс, 1) КАК КурсДокумента,
|	ЕСТЬNULL(КурсВалютыДокумента.Кратность, 1) КАК КратностьДокумента,
|	Док.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
|	Док.СтатьяРасходовШтраф.КорреспондирующийСчет КАК КоррСчет
|ИЗ
|	Документ.ТаможеннаяДекларацияИмпорт КАК Док
|		ЛЕВОЕ СОЕДИНЕНИЕ КурсыВалют КАК КурсВалютыДокумента
|		ПО Док.Валюта = КурсВалютыДокумента.Валюта
|		ЛЕВОЕ СОЕДИНЕНИЕ КурсыВалют КАК КурсВалютыВзаиморасчетов
|		ПО (Док.ВалютаВзаиморасчетов = КурсВалютыВзаиморасчетов.Валюта)");

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата", Источник.Дата);
Запрос.УстановитьПараметр("ВалютаРег", Константы.ВалютаРегламентированногоУчета.Получить());

РезультатыЗапроса = Запрос.ВыполнитьПакет();

ДанныеШапки = РезультатыЗапроса[1].Выбрать();
Если ДанныеШапки.Следующий() Тогда
	ЗаполнитьЗначенияСвойств(ВходящиеДанные, ДанныеШапки,
		"РасчетыВУсловныхЕдиницах,
		|КурсДокумента,
		|КратностьДокумента,
		|КурсВзаиморасчетов,
		|КратностьВзаиморасчетов,
		|СтранаПроисхождения,
		|КоррСчет");
КонецЕсли;
	
ВходящиеДанные.Вставить("ДокументВВалюте", Источник.Валюта &lt;&gt; Константы.ВалютаРегламентированногоУчета.Получить());</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	Параметры.ЗагруженныеГТДИмпорт.Добавить(Объект);
	
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<Источник>ДокументСсылка.ТаможеннаяДекларацияИмпорт</Источник>
						<Приемник>ДокументСсылка.ГТДИмпорт</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>22</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>23</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Контрагент --&gt; Контрагент</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование>Договор --&gt; ДоговорКонтрагентаРегл</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<Приемник Имя="ДоговорКонтрагентаРегл" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение)
	И Не ВходящиеДанные.ДокументВВалюте Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Константы.ВалютаРегламентированногоУчета.Получить());
	Значение.Вставить("ВидДоговора",				"Прочее");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах",	ВходящиеДанные.РасчетыВУсловныхЕдиницах);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11", Источник.Соглашение);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	ИмяПКО = "ДоговорыКонтрагентов";
	ВыгрузитьТолькоСсылку = Ложь;
		
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>42</Код>
								<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	
	Если Не ВходящиеДанные.ДокументВВалюте Тогда
		Пусто = Истина;
	Иначе
		ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
	КонецЕсли;
	
Иначе
	
	Если Не ВходящиеДанные.ДокументВВалюте Тогда
		Пусто = Истина;
	Иначе
		
		// Инициализируем структуру договора
		Значение = Новый Структура;
		
		// Реквизиты договора
		Значение.Вставить("Ссылка");
		Значение.Вставить("ВалютаВзаиморасчетов",		Источник.ВалютаВзаиморасчетов);
		Значение.Вставить("ВидДоговора",				"Прочее");
		Значение.Вставить("Владелец",					Источник.Контрагент);
		Значение.Вставить("Организация",				Источник.Организация);
		Значение.Вставить("РасчетыВУсловныхЕдиницах",	ВходящиеДанные.РасчетыВУсловныхЕдиницах);
		
		// Дополнительные свойства договора
		Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
		Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
		Значение.Вставить("СоглашениеСПоставщикомУТ11", Источник.Соглашение);
		Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
		Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
		Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
		
		ИмяПКО = "ДоговорыКонтрагентов";
		ВыгрузитьТолькоСсылку = Ложь;
		
	КонецЕсли;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>НомерГТД --&gt; НомерГТД</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
								<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
								<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>ТаможенныйСбор --&gt; ТаможенныйСбор</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="ТаможенныйСбор" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="ТаможенныйСбор" Вид="Реквизит" Тип="Число"/>
								<ПриВыгрузке>Если ВходящиеДанные.ДокументВВалюте Тогда
	Значение = 0;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование>ТаможенныйШтраф --&gt; ТаможенныйШтраф</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="ТаможенныйШтраф" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="ТаможенныйШтраф" Вид="Реквизит" Тип="Число"/>
								<ПриВыгрузке>Если ВходящиеДанные.ДокументВВалюте Тогда
	Значение = 0;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>43</Код>
								<Наименование>ТаможенныйСбор --&gt; ТаможенныйСборВал</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="ТаможенныйСбор" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="ТаможенныйСборВал" Вид="Реквизит" Тип="Число"/>
								<ПриВыгрузке>Если Не ВходящиеДанные.ДокументВВалюте Тогда
	Значение = 0;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>44</Код>
								<Наименование>ТаможенныйШтраф --&gt; ТаможенныйШтрафВал</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="ТаможенныйШтраф" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="ТаможенныйШтрафВал" Вид="Реквизит" Тип="Число"/>
								<ПриВыгрузке>Если Не ВходящиеДанные.ДокументВВалюте Тогда
	Значение = 0;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>32</Код>
								<Наименование> --&gt; КурсДокумента</Наименование>
								<Порядок>800</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КурсДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>30</Код>
								<Наименование> --&gt; КратностьДокумента</Наименование>
								<Порядок>850</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КратностьДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>900</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>950</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>38</Код>
								<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>40</Код>
								<Наименование> --&gt; СчетУчетаРасходов</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчетаРасходов" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								<ПередВыгрузкой>Значение = "91.02";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>41</Код>
								<Наименование> --&gt; СчетУчетаРасходовНУ</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчетаРасходовНУ" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								<ПередВыгрузкой>Значение = "91.02";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>39</Код>
								<Наименование>СтатьяРасходовШтраф --&gt; СтатьяПрочихДоходовРасходов</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="СтатьяРасходовШтраф" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиРасходов"/>
								<Приемник Имя="СтатьяПрочихДоходовРасходов" Вид="Реквизит" Тип="СправочникСсылка.ПрочиеДоходыИРасходы"/>
								<КодПравилаКонвертации>СтатьиРасходовВПрочиеДоходыИРасходы               </КодПравилаКонвертации>
								<ПередВыгрузкой>Пусто = (Найти(ВходящиеДанные.КоррСчет, "91.02") = 0);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1200</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Группа>
								<Код>1</Код>
								<Наименование>Разделы --&gt; Разделы</Наименование>
								<Порядок>1250</Порядок>
								<Источник Имя="Разделы" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="Разделы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>2</Код>
									<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>СтавкаПошлины --&gt; СтавкаПошлины</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="СтавкаПошлины" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СтавкаПошлины" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>СуммаПошлины --&gt; СуммаПошлины</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="СуммаПошлины" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаПошлины" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>ТаможеннаяСтоимость --&gt; ТаможеннаяСтоимость</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="ТаможеннаяСтоимость" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="ТаможеннаяСтоимость" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>45</Код>
									<Наименование> --&gt; НДСВВалюте</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НДСВВалюте" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = ВходящиеДанные.ДокументВВалюте;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>46</Код>
									<Наименование> --&gt; ПошлинаВВалюте</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ПошлинаВВалюте" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = ВходящиеДанные.ДокументВВалюте;</ПередВыгрузкой>
								</Свойство>
							</Группа>
							<Группа>
								<Код>7</Код>
								<Наименование>Товары --&gt; Товары</Наименование>
								<Порядок>1300</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>9</Код>
									<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Количество --&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>НомерРаздела --&gt; НомерРаздела</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="НомерРаздела" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="НомерРаздела" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>СуммаПошлины --&gt; СуммаПошлины</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СуммаПошлины" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаПошлины" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование> --&gt; ДокументПартии</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДокументПартии" Вид="Реквизит" Тип="ДокументСсылка.ПоступлениеТоваровУслуг"/>
									<КодПравилаКонвертации>ПТУ_ЗакупкаИмпорт                                 </КодПравилаКонвертации>
									<ПередВыгрузкой>Значение = Источник.ПоступлениеТоваров;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<ПередВыгрузкой>Значение = ВходящиеДанные.СтранаПроисхождения;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>ТаможеннаяСтоимость --&gt; ФактурнаяСтоимость</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="ТаможеннаяСтоимость" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="ФактурнаяСтоимость" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>34</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
								<Порядок>1350</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>35</Код>
								<Наименование>Партнер --&gt;</Наименование>
								<Порядок>1400</Порядок>
								<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>36</Код>
								<Наименование>Соглашение --&gt;</Наименование>
								<Порядок>1450</Порядок>
								<Источник Имя="Соглашение" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСПоставщиками"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>37</Код>
								<Наименование>ПоступлениеТоваров --&gt;</Наименование>
								<Порядок>1500</Порядок>
								<Источник Имя="ПоступлениеТоваров" Вид="Реквизит" Тип="ДокументСсылка.ПоступлениеТоваровУслуг"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
			</Группа>
			<Группа>
				<Код>Продажа</Код>
				<Наименование>ПКО для документов реализации</Наименование>
				<Порядок>400</Порядок>
				<Группа>
					<Код>РеализацияТоваровУслуг</Код>
					<Наименование>ПКО для документа "Реализация товаров и услуг"</Наименование>
					<Порядок>50</Порядок>
					<Правило>
						<Код>РТУ_ПродажаТоваровУслуг</Код>
						<Наименование>Документ: Реализация товаров услуг</Наименование>
						<Порядок>50</Порядок>
						<ПередВыгрузкой>Запросы.ТоварыИзВидовЗапасовДляРеализацииТУПродажа.УстановитьПараметр("Ссылка", Источник.Ссылка);
РезультатыЗапроса = Запросы.ТоварыИзВидовЗапасовДляРеализацииТУПродажа.ВыполнитьПакет();
ВходящиеДанные.Вставить("Услуги", РезультатыЗапроса[2].Выгрузить());
ВходящиеДанные.Вставить("Товары", РезультатыЗапроса[3].Выгрузить());</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.РеализацияТоваровУслуг</Источник>
						<Приемник>ДокументСсылка.РеализацияТоваровУслуг</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРеализацияТоваров"/>
								<ПередВыгрузкой>Значение = "ПродажаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>БанковскийСчетОрганизации --&gt; БанковскийСчетОрганизации</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
								<Приемник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
								<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение)
	И Значение.Владелец &lt;&gt; Источник.Организация Тогда
	Отказ = Истина;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>Контрагент --&gt; Контрагент</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>//Если ЗначениеЗаполнено(Значение) Тогда
//	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
//Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				"СПокупателем");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Источник.Соглашение);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Источник.Сделка);
	Значение.Вставить("ЗаказКлиентаУТ11",			Источник.ЗаказКлиента);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Источник.Соглашение);
	
	ВыгрузитьТолькоСсылку = Ложь;
//КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>19</Код>
								<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
								<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>59</Код>
								<Наименование>ЗаказКлиента --&gt; СчетНаОплатуПокупателю</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="ЗаказКлиента" Вид="Реквизит"/>
								<Приемник Имя="СчетНаОплатуПокупателю" Вид="Реквизит" Тип="ДокументСсылка.СчетНаОплатуПокупателю"/>
								<КодПравилаКонвертации>СНОП_СчетНаОплатуПокупателю                       </КодПравилаКонвертации>
								<ПередВыгрузкой>Отказ = ТипЗнч(Источник.ЗаказКлиента) &lt;&gt; Тип("ДокументСсылка.ЗаказКлиента");</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>АдресДоставки --&gt; АдресДоставки</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>42</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>60</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>22</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1250</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>24</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								</Свойство>
								<Свойство>
									<Код>31</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>32</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>41</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Отказ = ОбъектКоллекции.СчетУчета = Неопределено;</ПередВыгрузкой>
								</Свойство>
							</Группа>
							<Группа>
								<Код>33</Код>
								<Наименование> --&gt; Услуги</Наименование>
								<Порядок>1300</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>35</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>36</Код>
									<Наименование> --&gt; Содержание</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>34</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>40</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>37</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>38</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>39</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>61</Код>
								<Наименование>Соглашение --&gt;</Наименование>
								<Порядок>1350</Порядок>
								<Источник Имя="Соглашение" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСКлиентами"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Группа Отключить="true">
								<Код>44</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>1400</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>45</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>46</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>47</Код>
									<Наименование>СтавкаНДС --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>48</Код>
									<Наименование>Сумма --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>49</Код>
									<Наименование>СуммаНДС --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>50</Код>
									<Наименование>Цена --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>51</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>1450</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>52</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>53</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>54</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>55</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>56</Код>
									<Наименование>СтавкаНДС --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>57</Код>
									<Наименование>СуммаНДС --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>58</Код>
									<Наименование>СуммаСНДС --&gt;</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>РТУ_ПередачаТоваровНаКомиссию</Код>
						<Наименование>Документ: Реализация товаров услуг</Наименование>
						<Порядок>100</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.РеализацияТоваровУслуг</Источник>
						<Приемник>ДокументСсылка.РеализацияТоваровУслуг</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>21</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>22</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРеализацияТоваров"/>
								<ПередВыгрузкой>Значение = "ПродажаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>БанковскийСчетОрганизации --&gt; БанковскийСчетОрганизации</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
								<Приемник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
								<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение)
	И Значение.Владелец &lt;&gt; Источник.Организация Тогда
	Отказ = Истина;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>32</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Контрагент --&gt; Контрагент</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
	Значение.Вставить("ВидДоговора",				"СКомиссионером");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Источник.Соглашение);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>30</Код>
								<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
								<ПередВыгрузкой>Значение = "НеЗачитывать";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>52</Код>
								<Наименование>ЗаказКлиента --&gt; СчетНаОплатуПокупателю</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="ЗаказКлиента" Вид="Реквизит"/>
								<Приемник Имя="СчетНаОплатуПокупателю" Вид="Реквизит" Тип="ДокументСсылка.СчетНаОплатуПокупателю"/>
								<КодПравилаКонвертации>СНОП_СчетНаОплатуПокупателю                       </КодПравилаКонвертации>
								<ПередВыгрузкой>Отказ = ТипЗнч(Источник.ЗаказКлиента) &lt;&gt; Тип("ДокументСсылка.ЗаказКлиента");</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>АдресДоставки --&gt; АдресДоставки</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>41</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>53</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>1</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Запросы.ТоварыИзВидовЗапасовДляРеализацииТУКомиссия.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запросы.ТоварыИзВидовЗапасовДляРеализацииТУКомиссия.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>2</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>33</Код>
									<Наименование> --&gt; ПереданныеСчетУчета</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ПереданныеСчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Отказ = ОбъектКоллекции.ПереданныеСчетУчета = Неопределено;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>34</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Отказ = ОбъектКоллекции.СчетУчета = Неопределено;</ПередВыгрузкой>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>54</Код>
								<Наименование>Соглашение --&gt;</Наименование>
								<Порядок>1250</Порядок>
								<Источник Имя="Соглашение" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСКлиентами"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Группа Отключить="true">
								<Код>44</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>1300</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>45</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>46</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>47</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>48</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>49</Код>
									<Наименование>СтавкаНДС --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>50</Код>
									<Наименование>СуммаНДС --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>51</Код>
									<Наименование>СуммаСНДС --&gt;</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>ВозвратОтПокупателя</Код>
					<Наименование>ВозвратОтПокупателя</Наименование>
					<Порядок>100</Порядок>
					<Правило>
						<Код>ВТОП_ВозвратТоваровОтРозничногоПокупателя</Код>
						<Наименование>Документ: Возврат товаров от клиента</Наименование>
						<Порядок>50</Порядок>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Соглашение) Тогда
	ВходящиеДанные.Вставить("ВалютаВзаиморасчетов", ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.Соглашение, "Валюта"));
ИначеЕсли Источник.РасшифровкаПлатежа.Количество() &gt; 0 Тогда
	ВходящиеДанные.Вставить("ВалютаВзаиморасчетов", Источник.РасшифровкаПлатежа[0].ВалютаВзаиморасчетов);
Иначе
	ВходящиеДанные.Вставить("ВалютаВзаиморасчетов", Источник.Валюта);
КонецЕсли;</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);
Выполнить(Алгоритмы.УпрощенныйУчетНДС);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем признак "Отражение в УСН" значением по умолчанию
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка();
		Если УчетнаяПолитика.УСН
			И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы
			И НЕ ЗначениеЗаполнено(Объект.Сделка) Тогда
			ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.Принимаются;
		КонецЕсли;
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) 
				ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВозвратТоваровОтКлиента</Источник>
						<Приемник>ДокументСсылка.ВозвратТоваровОтПокупателя</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>16</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>17</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийВозвратТоваровОтПокупателя"/>
								<ПередВыгрузкой>Значение = "ПродажаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>Контрагент --&gt; Контрагент</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"СПокупателем");
Значение.Вставить("Владелец",					Источник.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Источник.Соглашение);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>Соглашение --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Соглашение" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСКлиентами"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ВходящиеДанные.ВалютаВзаиморасчетов, Источник.Дата).Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование>Соглашение --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="Соглашение" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСКлиентами"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ВходящиеДанные.ВалютаВзаиморасчетов, Источник.Дата).Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование> --&gt; Сделка</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сделка" Вид="Реквизит"/>
								<КодПравилаКонвертации>ОРП_ОтчетОРозничныхПродажах                       </КодПравилаКонвертации>
								<ПередВыгрузкой>Если Источник.ВозвратПорчи Тогда
	Пусто = Истина;
Иначе
	
	ТабДокументовРеализации = Источник.Товары.Выгрузить(, "ДокументРеализации");
	ТабДокументовРеализации.Свернуть("ДокументРеализации");
	
	Если ТабДокументовРеализации.Количество() = 1 Тогда
		Значение = ТабДокументовРеализации[0].ДокументРеализации;
	Иначе
		Пусто = Истина;
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>51</Код>
								<Наименование>ПредъявленСчетФактура --&gt; ПокупателемВыставляетсяСчетФактураНаВозврат</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="ПокупателемВыставляетсяСчетФактураНаВозврат" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>47</Код>
								<Наименование>ПредъявленСчетФактура --&gt; ПредъявленСчетФактура</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>48</Код>
								<Наименование>ДатаСчетаФактуры --&gt; ДатаВходящегоСчетаФактуры</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаВходящегоСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>49</Код>
								<Наименование>НомерСчетаФактуры --&gt; НомерВходящегоСчетаФактуры</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="НомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерВходящегоСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>41</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>1</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Запросы.ТоварыИзВидовЗапасовДляВозвратаОтКлиента.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запросы.ТоварыИзВидовЗапасовДляВозвратаОтКлиента.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
								<Свойство>
									<Код>42</Код>
									<Наименование> --&gt; Себестоимость</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Себестоимость" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>43</Код>
								<Наименование>ВозвратПорчи --&gt;</Наименование>
								<Порядок>1200</Порядок>
								<Источник Имя="ВозвратПорчи" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>52</Код>
								<Наименование>Партнер --&gt;</Наименование>
								<Порядок>1250</Порядок>
								<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>53</Код>
								<Наименование>ДокументРеализации --&gt;</Наименование>
								<Порядок>1300</Порядок>
								<Источник Имя="ДокументРеализации" Вид="Реквизит"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Группа Отключить="true">
								<Код>31</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>1350</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>32</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>33</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>34</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>35</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>36</Код>
									<Наименование>СтавкаНДС --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>37</Код>
									<Наименование>СуммаНДС --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>38</Код>
									<Наименование>СуммаСНДС --&gt;</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>39</Код>
								<Наименование>РасшифровкаПлатежа --&gt;</Наименование>
								<Порядок>1400</Порядок>
								<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>40</Код>
									<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>44</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>1450</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>45</Код>
									<Наименование>Порча --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Порча" Вид="Реквизит" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>46</Код>
									<Наименование>НоменклатураОприходование --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="НоменклатураОприходование" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>54</Код>
									<Наименование>ДокументРеализации --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ДокументРеализации" Вид="Реквизит"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>50</Код>
								<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
								<Порядок>1500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ВТОП_ВозвратТоваровОтПокупателя</Код>
						<Наименование>Документ: Возврат товаров от клиента</Наименование>
						<Порядок>100</Порядок>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Соглашение) Тогда
	ВходящиеДанные.Вставить("ВалютаВзаиморасчетов", ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.Соглашение, "Валюта"));
ИначеЕсли Источник.РасшифровкаПлатежа.Количество() &gt; 0 Тогда
	ВходящиеДанные.Вставить("ВалютаВзаиморасчетов", Источник.РасшифровкаПлатежа[0].ВалютаВзаиморасчетов);
Иначе
	ВходящиеДанные.Вставить("ВалютаВзаиморасчетов", Источник.Валюта);
КонецЕсли;

РеквизитыСчетФактуры = Неопределено;
Документы.СчетФактураПолученный.СчетаФактурыПоОснованию(Источник.Ссылка, Источник.Организация, РеквизитыСчетФактуры);
ВходящиеДанные.Вставить("ПокупателемВыставляетсяСчетФактураНаВозврат", ЗначениеЗаполнено(РеквизитыСчетФактуры.Ссылка));</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);
Выполнить(Алгоритмы.УпрощенныйУчетНДС);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем признак "Отражение в УСН" значением по умолчанию
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка();
		Если УчетнаяПолитика.УСН
			И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы
			И НЕ ЗначениеЗаполнено(Объект.Сделка) Тогда
			ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.Принимаются;
		КонецЕсли;
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) 
				ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВозвратТоваровОтКлиента</Источник>
						<Приемник>ДокументСсылка.ВозвратТоваровОтПокупателя</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийВозвратТоваровОтПокупателя"/>
								<ПередВыгрузкой>Значение = "ПродажаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Контрагент --&gt; Контрагент</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>//Если ЗначениеЗаполнено(Значение) Тогда
//	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
//Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		ВходящиеДанные.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				"СПокупателем");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Источник.Соглашение);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Источник.Сделка);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	// Заказ клиента берем из табличной части "Расшифровка платежа"
	// Если там указано несколько заказов или в качестве заказа указан документ, не являющийся заказом, то ничего не далаем
	Запрос = Новый Запрос("ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	РасшифровкаПлатежа.Заказ
	|ИЗ
	|	Документ.ВозвратТоваровОтКлиента.РасшифровкаПлатежа КАК РасшифровкаПлатежа
	|ГДЕ
	|	РасшифровкаПлатежа.Ссылка = &amp;Ссылка");
	
	Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
	ТабЗаказов = Запрос.Выполнить().Выгрузить();
	Если ТабЗаказов.Количество() = 1 Тогда
		ЗаказКлиента = ТабЗаказов[0].Заказ;
		Если ТипЗнч(ЗаказКлиента) = Тип("ДокументСсылка.ЗаказКлиента") Тогда
			Значение.ЗаказКлиентаУТ11 = ЗаказКлиента;
		КонецЕсли;
	КонецЕсли;
	
	Если ЗначениеЗаполнено(Источник.Соглашение) Тогда
		Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Источник.Соглашение);
	Иначе
		Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ВходящиеДанные.ВалютаВзаиморасчетов;
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
//КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ВходящиеДанные.ВалютаВзаиморасчетов, Источник.Дата).Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ВходящиеДанные.ВалютаВзаиморасчетов, Источник.Дата).Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование> --&gt; Сделка</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сделка" Вид="Реквизит"/>
								<КодПравилаКонвертации>РТУ_ПродажаТоваровУслуг                           </КодПравилаКонвертации>
								<ПередВыгрузкой>Если Источник.ВозвратПорчи Тогда
	Пусто = Истина;
Иначе
	
	ТабДокументовРеализации = Источник.Товары.Выгрузить(, "ДокументРеализации");
	ТабДокументовРеализации.Свернуть("ДокументРеализации");
	
	Если ТабДокументовРеализации.Количество() = 1 Тогда
		Значение = ТабДокументовРеализации[0].ДокументРеализации;
	Иначе
		Пусто = Истина;
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование> --&gt; ПокупателемВыставляетсяСчетФактураНаВозврат</Наименование>
								<Порядок>800</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ПокупателемВыставляетсяСчетФактураНаВозврат" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>36</Код>
								<Наименование>ПредъявленСчетФактура --&gt; ПредъявленСчетФактура</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>49</Код>
								<Наименование> --&gt; ОтразитьВКнигеПокупок</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтразитьВКнигеПокупок" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>34</Код>
								<Наименование>ДатаСчетаФактуры --&gt; ДатаВходящегоСчетаФактуры</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаВходящегоСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>35</Код>
								<Наименование>НомерСчетаФактуры --&gt; НомерВходящегоСчетаФактуры</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="НомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерВходящегоСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>38</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>42</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>19</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Запросы.ТоварыИзВидовЗапасовДляВозвратаОтКлиента.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запросы.ТоварыИзВидовЗапасовДляВозвратаОтКлиента.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>37</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
								<Свойство>
									<Код>47</Код>
									<Наименование> --&gt; Себестоимость</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Себестоимость" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>43</Код>
								<Наименование>Соглашение --&gt;</Наименование>
								<Порядок>1250</Порядок>
								<Источник Имя="Соглашение" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСКлиентами"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>44</Код>
								<Наименование>ВозвратПорчи --&gt;</Наименование>
								<Порядок>1300</Порядок>
								<Источник Имя="ВозвратПорчи" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>51</Код>
								<Наименование>ДокументРеализации --&gt;</Наименование>
								<Порядок>1350</Порядок>
								<Источник Имя="ДокументРеализации" Вид="Реквизит"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Группа Отключить="true">
								<Код>40</Код>
								<Наименование>РасшифровкаПлатежа --&gt;</Наименование>
								<Порядок>1400</Порядок>
								<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>41</Код>
									<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>45</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>1450</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>46</Код>
									<Наименование>Порча --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Порча" Вид="Реквизит" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>48</Код>
									<Наименование>НоменклатураОприходование --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="НоменклатураОприходование" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>52</Код>
									<Наименование>ДокументРеализации --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ДокументРеализации" Вид="Реквизит"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>50</Код>
								<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
								<Порядок>1500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ВТОП_ВозвратТоваровОтКомиссионера</Код>
						<Наименование>Документ: Возврат товаров от клиента</Наименование>
						<Порядок>150</Порядок>
						<ПослеВыгрузкиВФайл>Если Источник.ВозвратПорчи Тогда
	
	// формируем текст сообщения
	ТекстСообщения = НСтр("ru = 'Выгрузка документа выполнена с предупреждением
								|Причина: выгружен документ ""Возврат товаров от клиента"" с операцией ""Возврат от комиссионера"" отражающий возврат порчи 
								|Последствия: документ выгрузится в базу-приемник непроведенным 
								|Рекомендация: рекомендуется проконтролировать результат отражения операции в базе-приемнике'");
	
	// создаем структуру для записи протокола
	ЗП = ПолучитьСтруктуруЗаписиПротокола();
	
	// заполняем доступные в данном контексте ключи структуры
	ЗП.Объект     = Источник;
	ЗП.ТипОбъекта = ТипЗнч(Источник);
	
	// выполняем запись в протокол и ЖР
	ЗаписатьВПротоколВыполнения(ТекстСообщения, ЗП, Ложь,,,, Перечисления.РезультатыВыполненияОбмена.ВыполненоСПредупреждениями);
	
КонецЕсли;</ПослеВыгрузкиВФайл>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	Если ПараметрыОбъекта["ВозвратПорчи"] Тогда
		
		// формируем текст сообщения
		ТекстСообщения = НСтр("ru = 'Загрузка документа выполнена с предупреждением
							  |Причина: загружен документ ""Возврат товаров от покупателя"" на основании документа ""Возврат товаров от клиента"" с операцией ""Возврат от комиссионера"" отражающего возврат порчи
							  |Последствия: документ загрузился непроведенным
							  |Рекомендация: рекомендуется проконтролировать результат отражения операции в текущей базе'");
		
		// создаем структуру для записи протокола
		ЗП = ПолучитьСтруктуруЗаписиПротокола();
		
		// заполняем доступные в данном контексте ключи структуры
		ЗП.Объект     = Объект;
		ЗП.ТипОбъекта = ТипЗнч(Объект);
		
		// выполняем запись в протокол и ЖР
		ЗаписатьВПротоколВыполнения(ТекстСообщения, ЗП, Ложь,,,, Перечисления.РезультатыВыполненияОбмена.ВыполненоСПредупреждениями);
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВозвратТоваровОтКлиента</Источник>
						<Приемник>ДокументСсылка.ВозвратТоваровОтПокупателя</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<ПередВыгрузкой>Если Источник.ВозвратПорчи Тогда
	Значение = Ложь;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийВозвратТоваровОтПокупателя"/>
								<ПередВыгрузкой>Значение = "ПродажаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Контрагент --&gt; Контрагент</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование> --&gt; УчитыватьНДС</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>//Если ЗначениеЗаполнено(Значение) Тогда
//	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
//Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
	Значение.Вставить("ВидДоговора",				"СКомиссионером");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Источник.Соглашение);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	ВыгрузитьТолькоСсылку = Ложь;
//КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование> --&gt; Сделка</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сделка" Вид="Реквизит"/>
								<КодПравилаКонвертации>РТУ_ПередачаТоваровНаКомиссию                     </КодПравилаКонвертации>
								<ПередВыгрузкой>ТабДокументовРеализации = Источник.Товары.Выгрузить(, "ДокументРеализации");
ТабДокументовРеализации.Свернуть("ДокументРеализации");

Если ТабДокументовРеализации.Количество() = 1 Тогда
	Значение = ТабДокументовРеализации[0].ДокументРеализации;
Иначе
	Пусто = Истина;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>49</Код>
								<Наименование>ПредъявленСчетФактура --&gt; ПокупателемВыставляетсяСчетФактураНаВозврат</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="ПокупателемВыставляетсяСчетФактураНаВозврат" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>45</Код>
								<Наименование>ПредъявленСчетФактура --&gt; ПредъявленСчетФактура</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>46</Код>
								<Наименование>ДатаСчетаФактуры --&gt; ДатаВходящегоСчетаФактуры</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаВходящегоСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>47</Код>
								<Наименование>НомерСчетаФактуры --&gt; НомерВходящегоСчетаФактуры</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="НомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерВходящегоСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>39</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>41</Код>
								<Наименование>ВозвратПорчи --&gt;</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="ВозвратПорчи" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ВозвратПорчи</ИмяПараметраДляПередачи>
							</Свойство>
							<Группа>
								<Код>18</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Запросы.ТоварыИзВидовЗапасовДляВозвратаОтКомиссионера.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запросы.ТоварыИзВидовЗапасовДляВозвратаОтКомиссионера.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование> --&gt; ПереданныеСчетУчета</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ПереданныеСчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
								<Свойство>
									<Код>50</Код>
									<Наименование> --&gt; ОтражениеВУСН</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражениеВУСН" Вид="Реквизит" Тип="ПеречислениеСсылка.ОтражениеВУСН"/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>40</Код>
								<Наименование>Соглашение --&gt;</Наименование>
								<Порядок>1200</Порядок>
								<Источник Имя="Соглашение" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСКлиентами"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>51</Код>
								<Наименование>ДокументРеализации --&gt;</Наименование>
								<Порядок>1250</Порядок>
								<Источник Имя="ДокументРеализации" Вид="Реквизит"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Группа Отключить="true">
								<Код>31</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>1300</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>32</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>33</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>34</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>35</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>36</Код>
									<Наименование>СтавкаНДС --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>37</Код>
									<Наименование>СуммаНДС --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>38</Код>
									<Наименование>СуммаСНДС --&gt;</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>42</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>1350</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>43</Код>
									<Наименование>Порча --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Порча" Вид="Реквизит" Тип="Булево"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>44</Код>
									<Наименование>НоменклатураОприходование --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="НоменклатураОприходование" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>52</Код>
									<Наименование>ДокументРеализации --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ДокументРеализации" Вид="Реквизит"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>48</Код>
								<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
								<Порядок>1400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>КорректировкаРеализации</Код>
					<Наименование>ПКО для документа "Корректировка реализации"</Наименование>
					<Порядок>150</Порядок>
					<Правило>
						<Код>КорректировкаРеализации_КорректировкаРеализации</Код>
						<Наименование>Документ: Корректировка реализации</Наименование>
						<Порядок>50</Порядок>
						<ПередВыгрузкой>Если Не ТолькоПолучитьУзелСсылки Тогда
	
	ВходящиеДанные = Новый Структура();
	ВходящиеДанные.Вставить("ВидОперации");
	ВходящиеДанные.Вставить("ДокументРеализации");
	ВходящиеДанные.Вставить("ЗаказКлиента");
	ВходящиеДанные.Вставить("ИсправляемыйДокументРеализации");
	ВходящиеДанные.Вставить("СуммаДокумента");
	ВходящиеДанные.Вставить("Товары");
	ВходящиеДанные.Вставить("Услуги");
	
	// Данные исходного документа реализации
	
	Запрос = Новый Запрос();
	Запрос.УстановитьПараметр("ДокументОснование", Источник.ДокументОснование);
	Запрос.УстановитьПараметр("МоментВремени", Источник.МоментВремени());
	Запрос.УстановитьПараметр("РеализацияУслуг", ТипЗнч(Источник.ДокументОснование) = Тип("ДокументСсылка.АктВыполненныхРабот"));
	Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
	Запрос.УстановитьПараметр("ЦенаВключаетНДС", Источник.ЦенаВключаетНДС);

	// Данные исходного документа реализации
	
	Запрос.Текст = "ВЫБРАТЬ
	|	Док.ЗаказКлиента
	|ИЗ
	|	Документ.РеализацияТоваровУслуг КАК Док
	|ГДЕ
	|	Док.Ссылка = &amp;ДокументОснование
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	Док.ЗаказКлиента
	|ИЗ
	|	Документ.АктВыполненныхРабот КАК Док
	|ГДЕ
	|	Док.Ссылка = &amp;ДокументОснование
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|";
	
	// Ссылка на исправляемый документ
	
	Запрос.Текст = Запрос.Текст + "ВЫБРАТЬ
	|	Док.Ссылка,
	|	Док.МоментВремени,
	|	ЛОЖЬ КАК ЭтоДокументОснование
	|ПОМЕСТИТЬ ПоследовательностьДокументов
	|ИЗ
	|	Документ.КорректировкаРеализации КАК Док
	|ГДЕ
	|	Док.ДокументОснование = &amp;ДокументОснование
	|	И Док.МоментВремени &lt;= &amp;МоментВремени
	|	И Док.Проведен
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	Док.ДокументОснование,
	|	Док.ДокументОснование.МоментВремени,
	|	ИСТИНА
	|ИЗ
	|	Документ.КорректировкаРеализации КАК Док
	|ГДЕ
	|	Док.Ссылка = &amp;Ссылка
	|
	|ИНДЕКСИРОВАТЬ ПО
	|	Док.Ссылка
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ПоследовательностьДокументов.Ссылка,
	|	ПоследовательностьДокументов.МоментВремени,
	|	ПоследовательностьДокументов.ЭтоДокументОснование,
	|	МАКСИМУМ(ВЫБОР
	|			КОГДА СчетФактураВыданный.Ссылка ЕСТЬ NULL 
	|				ТОГДА ЛОЖЬ
	|			ИНАЧЕ ИСТИНА
	|		КОНЕЦ) КАК Корректировочный
	|ПОМЕСТИТЬ ПараметрыДокументовПоследовательности
	|ИЗ
	|	ПоследовательностьДокументов КАК ПоследовательностьДокументов
	|		ЛЕВОЕ СОЕДИНЕНИЕ Документ.СчетФактураВыданный КАК СчетФактураВыданный
	|		ПО ПоследовательностьДокументов.Ссылка = СчетФактураВыданный.ДокументОснование
	|			И (СчетФактураВыданный.Корректировочный)
	|			И (НЕ СчетФактураВыданный.ПометкаУдаления)
	|
	|СГРУППИРОВАТЬ ПО
	|	ПоследовательностьДокументов.Ссылка,
	|	ПоследовательностьДокументов.МоментВремени,
	|	ПоследовательностьДокументов.ЭтоДокументОснование
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	Параметры1.Ссылка,
	|	Параметры1.Корректировочный,
	|	МИНИМУМ(ВЫБОР
	|			КОГДА Параметры1.Корректировочный
	|					И НЕ Параметры2.Корректировочный
	|				ТОГДА ИСТИНА
	|			ИНАЧЕ ЛОЖЬ
	|		КОНЕЦ) КАК ИсходныйКорректировочный
	|ПОМЕСТИТЬ ПараметрыОтбора
	|ИЗ
	|	ПараметрыДокументовПоследовательности КАК Параметры1
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПараметрыДокументовПоследовательности КАК Параметры2
	|		ПО (Параметры1.Ссылка = &amp;Ссылка)
	|			И (Параметры2.Ссылка &lt;&gt; &amp;Ссылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	Параметры1.Ссылка,
	|	Параметры1.Корректировочный
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ ПЕРВЫЕ 1
	|	ИсправляемыеДокументы.Ссылка,
	|	ИсправляемыеДокументы.МоментВремени
	|ПОМЕСТИТЬ ИсправляемыйДокумент
	|ИЗ
	|	ПараметрыДокументовПоследовательности КАК ИсправляемыеДокументы
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПараметрыОтбора КАК ПараметрыОтбора
	|		ПО (ИсправляемыеДокументы.Корректировочный = ПараметрыОтбора.Корректировочный
	|				ИЛИ ПараметрыОтбора.ИсходныйКорректировочный
	|				ИЛИ ИсправляемыеДокументы.ЭтоДокументОснование)
	|			И ИсправляемыеДокументы.Ссылка &lt;&gt; ПараметрыОтбора.Ссылка
	|
	|УПОРЯДОЧИТЬ ПО
	|	ИсправляемыеДокументы.МоментВремени УБЫВ
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ИсправляемыйДокумент.Ссылка
	|ИЗ
	|	ИсправляемыйДокумент КАК ИсправляемыйДокумент
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|";
	
	// Вид операции
	
	Запрос.Текст = Запрос.Текст + "ВЫБРАТЬ
	|	ПараметрыОтбора.ИсходныйКорректировочный
	|ИЗ
	|	ПараметрыОтбора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|";
	
	// Ссылка на основание исправления (корректировки) и документ до корректировки
	
	Запрос.Текст = Запрос.Текст + "ВЫБРАТЬ ПЕРВЫЕ 1
	|	ИсправляемыеДокументы.Ссылка
	|ИЗ
	|	ПараметрыДокументовПоследовательности КАК ИсправляемыеДокументы
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПараметрыОтбора КАК ПараметрыОтбора
	|		ПО (ИсправляемыеДокументы.Корректировочный = ПараметрыОтбора.Корректировочный
	|				ИЛИ ИсправляемыеДокументы.ЭтоДокументОснование)
	|			И ИсправляемыеДокументы.Ссылка &lt;&gt; ПараметрыОтбора.Ссылка
	|
	|УПОРЯДОЧИТЬ ПО
	|	ИсправляемыеДокументы.ЭтоДокументОснование,
	|	ИсправляемыеДокументы.МоментВремени
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ ПЕРВЫЕ 1
	|	ИсправляемыеДокументы.Ссылка,
	|	ИсправляемыеДокументы.МоментВремени
	|ПОМЕСТИТЬ ДокументДоКорректировки
	|ИЗ
	|	ПараметрыДокументовПоследовательности КАК ИсправляемыеДокументы
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПараметрыОтбора КАК ПараметрыОтбора
	|		ПО ПараметрыОтбора.Корректировочный И Не ПараметрыОтбора.ИсходныйКорректировочный
	|			И ИсправляемыеДокументы.Корректировочный = Ложь
	|			И ИсправляемыеДокументы.Ссылка &lt;&gt; ПараметрыОтбора.Ссылка
	|
	|УПОРЯДОЧИТЬ ПО
	|	ИсправляемыеДокументы.ЭтоДокументОснование,
	|	ИсправляемыеДокументы.МоментВремени УБЫВ
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|";
	
	// Товары исходной реализации
	
	Запрос.Текст = Запрос.Текст + "ВЫБРАТЬ
	|	Товары.Номенклатура,
	|	Товары.СтавкаНДС,
	|	Товары.НомерГТД,
	|	Товары.ВидЗапасов.ТипЗапасов КАК ТипЗапасов,
	|	СУММА(Товары.Количество) КАК Количество,
	|	СУММА(Товары.СуммаСНДС) КАК СуммаСНДС,
	|	СУММА(Товары.СуммаНДС) КАК СуммаНДС
	|ПОМЕСТИТЬ ТоварыИсходнойРеализации
	|ИЗ
	|	Документ.РеализацияТоваровУслуг.ВидыЗапасов КАК Товары
	|ГДЕ
	|	Товары.Ссылка = &amp;ДокументОснование
	|
	|СГРУППИРОВАТЬ ПО
	|	Товары.Номенклатура,
	|	Товары.СтавкаНДС,
	|	Товары.НомерГТД,
	|	Товары.ВидЗапасов.ТипЗапасов
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|";
	
	// Изменения в товарах
	
	Запрос.Текст = Запрос.Текст + "ВЫБРАТЬ
	|	КорректировкаВыручки.Ссылка,
	|	КорректировкаВыручки.Номенклатура,
	|	КорректировкаВыручки.НомерГТД,
	|	КорректировкаВыручки.СтавкаНДС,
	|	КорректировкаВыручки.ВидЗапасов.ТипЗапасов КАК ТипЗапасов,
	|	0 КАК Количество,
	|	КорректировкаВыручки.СуммаНДС КАК СуммаНДС,
	|	КорректировкаВыручки.СуммаСНДС КАК СуммаСНДС
	|ПОМЕСТИТЬ ИзмененияВТоварахНеФильтрованые
	|ИЗ
	|	Документ.КорректировкаРеализации.ВидыЗапасовКорректировкаВыручки КАК КорректировкаВыручки
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ТоварыКОприходованию.Ссылка,
	|	ТоварыКОприходованию.Номенклатура,
	|	ТоварыКОприходованию.НомерГТД,
	|	ТоварыКОприходованию.СтавкаНДС,
	|	ТоварыКОприходованию.ВидЗапасов.ТипЗапасов,
	|	-ТоварыКОприходованию.Количество,
	|	-ТоварыКОприходованию.СуммаНДС,
	|	-ТоварыКОприходованию.СуммаСНДС
	|ИЗ
	|	Документ.КорректировкаРеализации.ВидыЗапасовОприходование КАК ТоварыКОприходованию
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ТоварыКСписанию.Ссылка,
	|	ТоварыКСписанию.Номенклатура,
	|	ТоварыКСписанию.НомерГТД,
	|	ТоварыКСписанию.СтавкаНДС,
	|	ТоварыКСписанию.ВидЗапасов.ТипЗапасов,
	|	ТоварыКСписанию.Количество,
	|	ТоварыКСписанию.СуммаНДС,
	|	ТоварыКСписанию.СуммаСНДС
	|ИЗ
	|	Документ.КорректировкаРеализации.ВидыЗапасовСписание КАК ТоварыКСписанию
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	Изменения.Номенклатура,
	|	Изменения.НомерГТД,
	|	Изменения.СтавкаНДС,
	|	Изменения.ТипЗапасов,
	|	Изменения.Количество,
	|	Изменения.СуммаНДС,
	|	Изменения.СуммаСНДС,
	|	ВЫБОР
	|		КОГДА НЕ Последовательность.Корректировочный
	|				И Последовательность.МоментВремени &lt;= ДокументДоКорректировки.МоментВремени
	|			ТОГДА ИСТИНА
	|		ИНАЧЕ ЛОЖЬ
	|	КОНЕЦ КАК ИзмененияДоКорректировки,
	|	ВЫБОР
	|		КОГДА Последовательность.МоментВремени &lt;= ИсправляемыйДокумент.МоментВремени
	|			ТОГДА ИСТИНА
	|		ИНАЧЕ ЛОЖЬ
	|	КОНЕЦ КАК ИзмененияДоИсправления
	|ПОМЕСТИТЬ ИзмененияВТоварах
	|ИЗ
	|	ИзмененияВТоварахНеФильтрованые КАК Изменения
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПараметрыДокументовПоследовательности КАК Последовательность
	|		ПО (НЕ Последовательность.ЭтоДокументОснование)
	|			И Изменения.Ссылка = Последовательность.Ссылка
	|		ЛЕВОЕ СОЕДИНЕНИЕ ДокументДоКорректировки КАК ДокументДоКорректировки
	|		ПО (ИСТИНА),
	|	ИсправляемыйДокумент КАК ИсправляемыйДокумент
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|";
	
	// Табличные части Товары (до корректировки, до исправления, после исправления)
	
	Запрос.Текст = Запрос.Текст + "ВЫБРАТЬ
	|	ТоварыИсходнойРеализации.Номенклатура,
	|	ТоварыИсходнойРеализации.СтавкаНДС,
	|	ТоварыИсходнойРеализации.НомерГТД,
	|	ТоварыИсходнойРеализации.ТипЗапасов,
	|	ТоварыИсходнойРеализации.Количество,
	|	ТоварыИсходнойРеализации.СуммаСНДС,
	|	ТоварыИсходнойРеализации.СуммаНДС
	|ПОМЕСТИТЬ ТоварыДоКорректировкиРазвернутые
	|ИЗ
	|	ТоварыИсходнойРеализации КАК ТоварыИсходнойРеализации
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ИзмененияВТоварах.Номенклатура,
	|	ИзмененияВТоварах.СтавкаНДС,
	|	ИзмененияВТоварах.НомерГТД,
	|	ИзмененияВТоварах.ТипЗапасов,
	|	ИзмененияВТоварах.Количество,
	|	ИзмененияВТоварах.СуммаСНДС,
	|	ИзмененияВТоварах.СуммаНДС
	|ИЗ
	|	ИзмененияВТоварах КАК ИзмененияВТоварах
	|ГДЕ
	|	ИзмененияВТоварах.ИзмененияДоКорректировки
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ТоварыДоКорректировкиРазвернутые.Номенклатура КАК Номенклатура,
	|	ТоварыДоКорректировкиРазвернутые.СтавкаНДС КАК СтавкаНДС,
	|	ТоварыДоКорректировкиРазвернутые.НомерГТД КАК НомерГТД,
	|	ТоварыДоКорректировкиРазвернутые.ТипЗапасов КАК ТипЗапасов,
	|	СУММА(ТоварыДоКорректировкиРазвернутые.Количество) КАК Количество,
	|	СУММА(ТоварыДоКорректировкиРазвернутые.СуммаСНДС) КАК СуммаСНДС,
	|	СУММА(ТоварыДоКорректировкиРазвернутые.СуммаНДС) КАК СуммаНДС
	|ПОМЕСТИТЬ ТоварыДоКорректировки
	|ИЗ
	|	ТоварыДоКорректировкиРазвернутые КАК ТоварыДоКорректировкиРазвернутые
	|
	|СГРУППИРОВАТЬ ПО
	|	ТоварыДоКорректировкиРазвернутые.Номенклатура,
	|	ТоварыДоКорректировкиРазвернутые.СтавкаНДС,
	|	ТоварыДоКорректировкиРазвернутые.НомерГТД,
	|	ТоварыДоКорректировкиРазвернутые.ТипЗапасов
	|
	|ИНДЕКСИРОВАТЬ ПО
	|	Номенклатура,
	|	СтавкаНДС,
	|	НомерГТД,
	|	ТипЗапасов
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ТоварыИсходнойРеализации.Номенклатура,
	|	ТоварыИсходнойРеализации.СтавкаНДС,
	|	ТоварыИсходнойРеализации.НомерГТД,
	|	ТоварыИсходнойРеализации.ТипЗапасов,
	|	ТоварыИсходнойРеализации.Количество,
	|	ТоварыИсходнойРеализации.СуммаСНДС,
	|	ТоварыИсходнойРеализации.СуммаНДС
	|ПОМЕСТИТЬ ТоварыДоИсправленияРазвернутые
	|ИЗ
	|	ТоварыИсходнойРеализации КАК ТоварыИсходнойРеализации
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ИзмененияВТоварах.Номенклатура,
	|	ИзмененияВТоварах.СтавкаНДС,
	|	ИзмененияВТоварах.НомерГТД,
	|	ИзмененияВТоварах.ТипЗапасов,
	|	ИзмененияВТоварах.Количество,
	|	ИзмененияВТоварах.СуммаСНДС,
	|	ИзмененияВТоварах.СуммаНДС
	|ИЗ
	|	ИзмененияВТоварах КАК ИзмененияВТоварах
	|ГДЕ
	|	ИзмененияВТоварах.ИзмененияДоИсправления
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ТоварыДоИсправленияРазвернутые.Номенклатура КАК Номенклатура,
	|	ТоварыДоИсправленияРазвернутые.СтавкаНДС КАК СтавкаНДС,
	|	ТоварыДоИсправленияРазвернутые.НомерГТД КАК НомерГТД,
	|	ТоварыДоИсправленияРазвернутые.ТипЗапасов КАК ТипЗапасов,
	|	СУММА(ТоварыДоИсправленияРазвернутые.Количество) КАК Количество,
	|	СУММА(ТоварыДоИсправленияРазвернутые.СуммаСНДС) КАК СуммаСНДС,
	|	СУММА(ТоварыДоИсправленияРазвернутые.СуммаНДС) КАК СуммаНДС
	|ПОМЕСТИТЬ ТоварыДоИсправления
	|ИЗ
	|	ТоварыДоИсправленияРазвернутые КАК ТоварыДоИсправленияРазвернутые
	|
	|СГРУППИРОВАТЬ ПО
	|	ТоварыДоИсправленияРазвернутые.Номенклатура,
	|	ТоварыДоИсправленияРазвернутые.СтавкаНДС,
	|	ТоварыДоИсправленияРазвернутые.НомерГТД,
	|	ТоварыДоИсправленияРазвернутые.ТипЗапасов
	|
	|ИНДЕКСИРОВАТЬ ПО
	|	Номенклатура,
	|	СтавкаНДС,
	|	НомерГТД,
	|	ТипЗапасов
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ТоварыИсходнойРеализации.Номенклатура,
	|	ТоварыИсходнойРеализации.СтавкаНДС,
	|	ТоварыИсходнойРеализации.НомерГТД,
	|	ТоварыИсходнойРеализации.ТипЗапасов,
	|	ТоварыИсходнойРеализации.Количество,
	|	ТоварыИсходнойРеализации.СуммаСНДС,
	|	ТоварыИсходнойРеализации.СуммаНДС
	|ПОМЕСТИТЬ ТоварыКонечныеРазвернутые
	|ИЗ
	|	ТоварыИсходнойРеализации КАК ТоварыИсходнойРеализации
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ИзмененияВТоварах.Номенклатура,
	|	ИзмененияВТоварах.СтавкаНДС,
	|	ИзмененияВТоварах.НомерГТД,
	|	ИзмененияВТоварах.ТипЗапасов,
	|	ИзмененияВТоварах.Количество,
	|	ИзмененияВТоварах.СуммаСНДС,
	|	ИзмененияВТоварах.СуммаНДС
	|ИЗ
	|	ИзмененияВТоварах КАК ИзмененияВТоварах
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ТоварыКонечныеРазвернутые.Номенклатура КАК Номенклатура,
	|	ТоварыКонечныеРазвернутые.СтавкаНДС КАК СтавкаНДС,
	|	ТоварыКонечныеРазвернутые.НомерГТД КАК НомерГТД,
	|	ТоварыКонечныеРазвернутые.ТипЗапасов КАК ТипЗапасов,
	|	СУММА(ТоварыКонечныеРазвернутые.Количество) КАК Количество,
	|	СУММА(ТоварыКонечныеРазвернутые.СуммаСНДС) КАК СуммаСНДС,
	|	СУММА(ТоварыКонечныеРазвернутые.СуммаНДС) КАК СуммаНДС
	|ПОМЕСТИТЬ ТоварыКонечные
	|ИЗ
	|	ТоварыКонечныеРазвернутые КАК ТоварыКонечныеРазвернутые
	|
	|СГРУППИРОВАТЬ ПО
	|	ТоварыКонечныеРазвернутые.Номенклатура,
	|	ТоварыКонечныеРазвернутые.СтавкаНДС,
	|	ТоварыКонечныеРазвернутые.НомерГТД,
	|	ТоварыКонечныеРазвернутые.ТипЗапасов
	|
	|ИНДЕКСИРОВАТЬ ПО
	|	Номенклатура,
	|	СтавкаНДС,
	|	НомерГТД,
	|	ТипЗапасов
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|";
	
	// Результирующая табличная часть Товары
	Запрос.Текст = Запрос.Текст + "ВЫБРАТЬ
	|	Товары.Номенклатура,
	|	"""" КАК Содержание,
	|	Товары.НомерСтроки
	|ПОМЕСТИТЬ НомераСтрокРазвернутые
	|ИЗ
	|	Документ.РеализацияТоваровУслуг.Товары КАК Товары
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ИсправляемыйДокумент КАК ИсправляемыйДокумент
	|		ПО Товары.Ссылка = ИсправляемыйДокумент.Ссылка
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка),
	|	Услуги.Содержание,
	|	Услуги.НомерСтроки
	|ИЗ
	|	Документ.АктВыполненныхРабот.Услуги КАК Услуги
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ИсправляемыйДокумент КАК ИсправляемыйДокумент
	|		ПО Услуги.Ссылка = ИсправляемыйДокумент.Ссылка
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	Товары.Номенклатура,
	|	Товары.Содержание,
	|	Товары.НомерСтроки
	|ИЗ
	|	Документ.КорректировкаРеализации.Товары КАК Товары
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ИсправляемыйДокумент КАК ИсправляемыйДокумент
	|		ПО Товары.Ссылка = ИсправляемыйДокумент.Ссылка
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	НомераСтрокРазвернутые.Номенклатура,
	|	НомераСтрокРазвернутые.Содержание,
	|	МАКСИМУМ(НомераСтрокРазвернутые.НомерСтроки) КАК НомерСтроки
	|ПОМЕСТИТЬ НомераСтрок
	|ИЗ
	|	НомераСтрокРазвернутые КАК НомераСтрокРазвернутые
	|
	|СГРУППИРОВАТЬ ПО
	|	НомераСтрокРазвернутые.Номенклатура,
	|	НомераСтрокРазвернутые.Содержание
	|
	|ИНДЕКСИРОВАТЬ ПО
	|	НомераСтрокРазвернутые.Номенклатура,
	|	НомераСтрокРазвернутые.Содержание
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ЕСТЬNULL(ЕСТЬNULL(ТоварыКонечные.Номенклатура, ТоварыДоИсправления.Номенклатура), ТоварыДоКорректировки.Номенклатура) КАК Номенклатура,
	|	ЕСТЬNULL(ЕСТЬNULL(ТоварыКонечные.СтавкаНДС, ТоварыДоИсправления.СтавкаНДС), ТоварыДоКорректировки.СтавкаНДС) КАК СтавкаНДС,
	|	ВЫРАЗИТЬ(ЕСТЬNULL(ЕСТЬNULL(ТоварыКонечные.НомерГТД, ТоварыДоИсправления.НомерГТД), ТоварыДоКорректировки.НомерГТД) КАК Справочник.НомераГТД) КАК НомерГТД,
	|	ВЫБОР
	|		КОГДА ЕСТЬNULL(ЕСТЬNULL(ТоварыКонечные.ТипЗапасов, ТоварыДоИсправления.ТипЗапасов), ТоварыДоКорректировки.ТипЗапасов) = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
	|			ТОГДА ""ТоварыНаСкладе""
	|		ИНАЧЕ НЕОПРЕДЕЛЕНО
	|	КОНЕЦ КАК СчетУчета,
	|	ТоварыДоКорректировки.Количество КАК КоличествоДоКорректировки,
	|	ТоварыДоКорректировки.СуммаСНДС - Выбор Когда &amp;ЦенаВключаетНДС Тогда 0 Иначе ТоварыДоКорректировки.СуммаНДС Конец КАК СуммаДоКорректировки,
	|	ТоварыДоКорректировки.СуммаНДС КАК СуммаНДСДоКорректировки,
	|	ТоварыДоИсправления.Количество КАК КоличествоДоИзменения,
	|	ТоварыДоИсправления.СуммаСНДС - Выбор Когда &amp;ЦенаВключаетНДС Тогда 0 Иначе ТоварыДоИсправления.СуммаНДС Конец КАК СуммаДоИзменения,
	|	ТоварыДоИсправления.СуммаНДС КАК СуммаНДСДоИзменения,
	|	ТоварыКонечные.СуммаСНДС,
	|	ТоварыКонечные.Количество,
	|	ТоварыКонечные.СуммаСНДС - Выбор Когда &amp;ЦенаВключаетНДС Тогда 0 Иначе ТоварыКонечные.СуммаНДС Конец КАК Сумма,
	|	ТоварыКонечные.СуммаНДС,
	|	ВЫБОР
	|		КОГДА ТоварыДоИсправления.Номенклатура ЕСТЬ NULL 
	|			ТОГДА ЛОЖЬ
	|		ИНАЧЕ ИСТИНА
	|	КОНЕЦ КАК ЕстьВДокументеРеализации
	|ПОМЕСТИТЬ РезультатСопоставленияТоваров
	|ИЗ
	|	ТоварыКонечные КАК ТоварыКонечные
	|		ПОЛНОЕ СОЕДИНЕНИЕ ТоварыДоИсправления КАК ТоварыДоИсправления
	|		ПО ТоварыКонечные.Номенклатура = ТоварыДоИсправления.Номенклатура
	|			И ТоварыКонечные.НомерГТД = ТоварыДоИсправления.НомерГТД
	|			И ТоварыКонечные.СтавкаНДС = ТоварыДоИсправления.СтавкаНДС
	|			И ТоварыКонечные.ТипЗапасов = ТоварыДоИсправления.ТипЗапасов
	|		ПОЛНОЕ СОЕДИНЕНИЕ ТоварыДоКорректировки КАК ТоварыДоКорректировки
	|		ПО (ТоварыКонечные.Номенклатура = ТоварыДоКорректировки.Номенклатура
	|				ИЛИ ТоварыДоИсправления.Номенклатура = ТоварыДоКорректировки.Номенклатура)
	|			И (ТоварыКонечные.НомерГТД = ТоварыДоКорректировки.НомерГТД
	|				ИЛИ ТоварыДоИсправления.НомерГТД = ТоварыДоКорректировки.НомерГТД)
	|			И (ТоварыКонечные.СтавкаНДС = ТоварыДоКорректировки.СтавкаНДС
	|				ИЛИ ТоварыДоИсправления.СтавкаНДС = ТоварыДоКорректировки.СтавкаНДС)
	|			И (ТоварыКонечные.ТипЗапасов = ТоварыДоКорректировки.ТипЗапасов
	|				ИЛИ ТоварыДоИсправления.ТипЗапасов = ТоварыДоКорректировки.ТипЗапасов)
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	РезультатСопоставления.Номенклатура,
	|	РезультатСопоставления.СтавкаНДС,
	|	РезультатСопоставления.СтавкаНДС КАК СтавкаНДСДоИзменения,
	|	РезультатСопоставления.НомерГТД,
	|	РезультатСопоставления.НомерГТД КАК НомерГТДДоИзменения,
	|	РезультатСопоставления.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	|	РезультатСопоставления.НомерГТД.СтранаПроисхождения КАК СтранаПроисхожденияДоИзменения,
	|	РезультатСопоставления.КоличествоДоКорректировки,
	|	РезультатСопоставления.КоличествоДоИзменения,
	|	РезультатСопоставления.Количество,
	|	РезультатСопоставления.СуммаДоКорректировки,
	|	РезультатСопоставления.СуммаДоИзменения,
	|	РезультатСопоставления.Сумма,
	|	РезультатСопоставления.СуммаНДСДоКорректировки,
	|	РезультатСопоставления.СуммаНДСДоИзменения,
	|	РезультатСопоставления.СуммаНДС,
	|	ВЫБОР
	|		КОГДА ЕСТЬNULL(РезультатСопоставления.КоличествоДоКорректировки, 0) = 0
	|			ТОГДА 0
	|		ИНАЧЕ РезультатСопоставления.СуммаДоКорректировки / РезультатСопоставления.КоличествоДоКорректировки
	|	КОНЕЦ КАК ЦенаДоКорректировки,
	|	ВЫБОР
	|		КОГДА ЕСТЬNULL(РезультатСопоставления.КоличествоДоИзменения, 0) = 0
	|			ТОГДА 0
	|		ИНАЧЕ РезультатСопоставления.СуммаДоИзменения / РезультатСопоставления.КоличествоДоИзменения
	|	КОНЕЦ КАК ЦенаДоИзменения,
	|	ВЫБОР
	|		КОГДА ЕСТЬNULL(РезультатСопоставления.Количество, 0) = 0
	|			ТОГДА 0
	|		ИНАЧЕ РезультатСопоставления.Сумма / РезультатСопоставления.Количество
	|	КОНЕЦ КАК Цена,
	|	РезультатСопоставления.СчетУчета,
	|	РезультатСопоставления.СуммаСНДС,
	|	РезультатСопоставления.ЕстьВДокументеРеализации
	|ИЗ
	|	РезультатСопоставленияТоваров КАК РезультатСопоставления
	|		ЛЕВОЕ СОЕДИНЕНИЕ НомераСтрок КАК НомераСтрок
	|		ПО РезультатСопоставления.Номенклатура = НомераСтрок.Номенклатура
	|
	|УПОРЯДОЧИТЬ ПО
	|	РезультатСопоставления.ЕстьВДокументеРеализации УБЫВ,
	|	НомераСтрок.НомерСтроки
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|";
	
	// Табличные части Услуги (до корректировки, до исправления, после исправления)
	
	Запрос.Текст = Запрос.Текст + "ВЫБРАТЬ
	|	Товары.Номенклатура,
	|	"""" КАК Содержание,
	|	Товары.СтавкаНДС,
	|	Товары.Количество,
	|	Товары.Сумма,
	|	Товары.СуммаНДС
	|ПОМЕСТИТЬ УслугиДоКорректировкиРазвернутые
	|ИЗ
	|	Документ.РеализацияТоваровУслуг.Товары КАК Товары
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ДокументДоКорректировки КАК ДокументДоКорректировки
	|		ПО Товары.Ссылка = ДокументДоКорректировки.Ссылка
	|			И (Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга))
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	Услуги.Номенклатура,
	|	Услуги.Содержание,
	|	Услуги.СтавкаНДС,
	|	Услуги.Количество,
	|	Услуги.Сумма,
	|	Услуги.СуммаНДС
	|ИЗ
	|	Документ.АктВыполненныхРабот.Услуги КАК Услуги
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ДокументДоКорректировки КАК ДокументДоКорректировки
	|		ПО Услуги.Ссылка = ДокументДоКорректировки.Ссылка
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	Товары.Номенклатура,
	|	Товары.Содержание,
	|	Товары.СтавкаНДС,
	|	Товары.Количество,
	|	Товары.Сумма,
	|	Товары.СуммаНДС
	|ИЗ
	|	Документ.КорректировкаРеализации.Товары КАК Товары
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ДокументДоКорректировки КАК ДокументДоКорректировки
	|		ПО Товары.Ссылка = ДокументДоКорректировки.Ссылка
	|			И (Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
	|				ИЛИ &amp;РеализацияУслуг)
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	УслугиДоКорректировкиРазвернутые.Номенклатура,
	|	УслугиДоКорректировкиРазвернутые.Содержание,
	|	УслугиДоКорректировкиРазвернутые.СтавкаНДС,
	|	СУММА(УслугиДоКорректировкиРазвернутые.Количество) КАК Количество,
	|	СУММА(УслугиДоКорректировкиРазвернутые.Сумма) КАК Сумма,
	|	СУММА(УслугиДоКорректировкиРазвернутые.СуммаНДС) КАК СуммаНДС
	|ПОМЕСТИТЬ УслугиДоКорректировки
	|ИЗ
	|	УслугиДоКорректировкиРазвернутые КАК УслугиДоКорректировкиРазвернутые
	|
	|СГРУППИРОВАТЬ ПО
	|	УслугиДоКорректировкиРазвернутые.Номенклатура,
	|	УслугиДоКорректировкиРазвернутые.Содержание,
	|	УслугиДоКорректировкиРазвернутые.СтавкаНДС
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	Товары.Номенклатура,
	|	"""" КАК Содержание,
	|	Товары.СтавкаНДС,
	|	Товары.Количество,
	|	Товары.Сумма,
	|	Товары.СуммаНДС
	|ПОМЕСТИТЬ УслугиДоИсправленияРазвернутые
	|ИЗ
	|	Документ.РеализацияТоваровУслуг.Товары КАК Товары
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ИсправляемыйДокумент КАК ИсправляемыйДокумент
	|		ПО Товары.Ссылка = ИсправляемыйДокумент.Ссылка
	|			И (Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга))
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	Услуги.Номенклатура,
	|	Услуги.Содержание,
	|	Услуги.СтавкаНДС,
	|	Услуги.Количество,
	|	Услуги.Сумма,
	|	Услуги.СуммаНДС
	|ИЗ
	|	Документ.АктВыполненныхРабот.Услуги КАК Услуги
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ИсправляемыйДокумент КАК ИсправляемыйДокумент
	|		ПО Услуги.Ссылка = ИсправляемыйДокумент.Ссылка
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	Товары.Номенклатура,
	|	Товары.Содержание,
	|	Товары.СтавкаНДС,
	|	Товары.Количество,
	|	Товары.Сумма,
	|	Товары.СуммаНДС
	|ИЗ
	|	Документ.КорректировкаРеализации.Товары КАК Товары
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ИсправляемыйДокумент КАК ИсправляемыйДокумент
	|		ПО Товары.Ссылка = ИсправляемыйДокумент.Ссылка
	|			И (Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
	|				ИЛИ &amp;РеализацияУслуг)
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	УслугиДоИсправленияРазвернутые.Номенклатура,
	|	УслугиДоИсправленияРазвернутые.Содержание,
	|	УслугиДоИсправленияРазвернутые.СтавкаНДС,
	|	СУММА(УслугиДоИсправленияРазвернутые.Количество) КАК Количество,
	|	СУММА(УслугиДоИсправленияРазвернутые.Сумма) КАК Сумма,
	|	СУММА(УслугиДоИсправленияРазвернутые.СуммаНДС) КАК СуммаНДС
	|ПОМЕСТИТЬ УслугиДоИсправления
	|ИЗ
	|	УслугиДоИсправленияРазвернутые КАК УслугиДоИсправленияРазвернутые
	|
	|СГРУППИРОВАТЬ ПО
	|	УслугиДоИсправленияРазвернутые.Номенклатура,
	|	УслугиДоИсправленияРазвернутые.Содержание,
	|	УслугиДоИсправленияРазвернутые.СтавкаНДС
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	Товары.Номенклатура,
	|	Товары.Содержание,
	|	Товары.СтавкаНДС,
	|	СУММА(Товары.Количество) КАК Количество,
	|	СУММА(Товары.Сумма) КАК Сумма,
	|	СУММА(Товары.СуммаНДС) КАК СуммаНДС,
	|	СУММА(Товары.СуммаСНДС) КАК СуммаСНДС
	|ПОМЕСТИТЬ УслугиКонечные
	|ИЗ
	|	Документ.КорректировкаРеализации.Товары КАК Товары
	|ГДЕ
	|	Товары.Ссылка = &amp;Ссылка
	|	И (Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
	|			ИЛИ &amp;РеализацияУслуг)
	|
	|СГРУППИРОВАТЬ ПО
	|	Товары.Номенклатура,
	|	Товары.Содержание,
	|	Товары.СтавкаНДС
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|";
		
	// Результирующая табличная часть Услуги
	Запрос.Текст = Запрос.Текст + "ВЫБРАТЬ
	|	ЕСТЬNULL(ЕСТЬNULL(УслугиКонечные.Номенклатура, УслугиДоИсправления.Номенклатура), УслугиДоКорректировки.Номенклатура) КАК Номенклатура,
	|	ЕСТЬNULL(ЕСТЬNULL(УслугиКонечные.Содержание, УслугиДоИсправления.Содержание), УслугиДоКорректировки.Содержание) КАК Содержание,
	|	ЕСТЬNULL(ЕСТЬNULL(УслугиКонечные.СтавкаНДС, УслугиДоИсправления.СтавкаНДС), УслугиДоКорректировки.СтавкаНДС) КАК СтавкаНДС,
	|	УслугиДоКорректировки.Количество КАК КоличествоДоКорректировки,
	|	УслугиДоКорректировки.Сумма КАК СуммаДоКорректировки,
	|	УслугиДоКорректировки.СуммаНДС КАК СуммаНДСДоКорректировки,
	|	УслугиДоИсправления.Количество КАК КоличествоДоИзменения,
	|	УслугиДоИсправления.Сумма КАК СуммаДоИзменения,
	|	УслугиДоИсправления.СуммаНДС КАК СуммаНДСДоИзменения,
	|	УслугиКонечные.СуммаСНДС,
	|	УслугиКонечные.Количество,
	|	УслугиКонечные.Сумма,
	|	УслугиКонечные.СуммаНДС,
	|	ВЫБОР
	|		КОГДА УслугиДоИсправления.Номенклатура ЕСТЬ NULL 
	|			ТОГДА ЛОЖЬ
	|		ИНАЧЕ ИСТИНА
	|	КОНЕЦ КАК ЕстьВДокументеРеализации
	|ПОМЕСТИТЬ РезультатСопоставленияУслуг
	|ИЗ
	|	УслугиКонечные КАК УслугиКонечные
	|		ПОЛНОЕ СОЕДИНЕНИЕ УслугиДоИсправления КАК УслугиДоИсправления
	|		ПО УслугиКонечные.Номенклатура = УслугиДоИсправления.Номенклатура
	|			И УслугиКонечные.Содержание = УслугиДоИсправления.Содержание
	|			И УслугиКонечные.СтавкаНДС = УслугиДоИсправления.СтавкаНДС
	|		ПОЛНОЕ СОЕДИНЕНИЕ УслугиДоКорректировки КАК УслугиДоКорректировки
	|		ПО (УслугиКонечные.Номенклатура = УслугиДоКорректировки.Номенклатура
	|				ИЛИ УслугиДоИсправления.Номенклатура = УслугиДоКорректировки.Номенклатура)
	|			И (УслугиКонечные.Содержание = УслугиДоКорректировки.Содержание
	|				ИЛИ УслугиДоИсправления.Содержание = УслугиДоКорректировки.Содержание)
	|			И (УслугиКонечные.СтавкаНДС = УслугиДоКорректировки.СтавкаНДС
	|				ИЛИ УслугиДоИсправления.СтавкаНДС = УслугиДоКорректировки.СтавкаНДС)
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	РезультатСопоставления.Номенклатура,
	|	РезультатСопоставления.Содержание,
	|	РезультатСопоставления.Содержание КАК СодержаниеДоИзменения,
	|	РезультатСопоставления.СтавкаНДС,
	|	РезультатСопоставления.СтавкаНДС КАК СтавкаНДСДоИзменения,
	|	РезультатСопоставления.КоличествоДоКорректировки,
	|	РезультатСопоставления.КоличествоДоИзменения,
	|	РезультатСопоставления.Количество,
	|	РезультатСопоставления.СуммаДоКорректировки,
	|	РезультатСопоставления.СуммаДоИзменения,
	|	РезультатСопоставления.Сумма,
	|	РезультатСопоставления.СуммаНДСДоКорректировки,
	|	РезультатСопоставления.СуммаНДСДоИзменения,
	|	РезультатСопоставления.СуммаНДС,
	|	ВЫБОР
	|		КОГДА ЕСТЬNULL(РезультатСопоставления.КоличествоДоКорректировки, 0) = 0
	|			ТОГДА 0
	|		ИНАЧЕ РезультатСопоставления.СуммаДоКорректировки / РезультатСопоставления.КоличествоДоКорректировки
	|	КОНЕЦ КАК ЦенаДоКорректировки,
	|	ВЫБОР
	|		КОГДА ЕСТЬNULL(РезультатСопоставления.КоличествоДоИзменения, 0) = 0
	|			ТОГДА 0
	|		ИНАЧЕ РезультатСопоставления.СуммаДоИзменения / РезультатСопоставления.КоличествоДоИзменения
	|	КОНЕЦ КАК ЦенаДоИзменения,
	|	ВЫБОР
	|		КОГДА ЕСТЬNULL(РезультатСопоставления.Количество, 0) = 0
	|			ТОГДА 0
	|		ИНАЧЕ РезультатСопоставления.Сумма / РезультатСопоставления.Количество
	|	КОНЕЦ КАК Цена,
	|	РезультатСопоставления.СуммаСНДС,
	|	РезультатСопоставления.ЕстьВДокументеРеализации
	|ИЗ
	|	РезультатСопоставленияУслуг КАК РезультатСопоставления
	|		ЛЕВОЕ СОЕДИНЕНИЕ НомераСтрок КАК НомераСтрок
	|		ПО РезультатСопоставления.Номенклатура = НомераСтрок.Номенклатура
	|			И РезультатСопоставления.Содержание = НомераСтрок.Содержание
	|
	|УПОРЯДОЧИТЬ ПО
	|	РезультатСопоставления.ЕстьВДокументеРеализации УБЫВ,
	|	НомераСтрок.НомерСтроки";
	
	
	РезультатыЗапроса = Запрос.ВыполнитьПакет();
	
	Выборка = РезультатыЗапроса[0].Выбрать();
	Если Выборка.Следующий() Тогда
		ЗаполнитьЗначенияСвойств(ВходящиеДанные, Выборка);
	КонецЕсли;
	
	ВыборкаДанных = РезультатыЗапроса[5].Выбрать();
	Если ВыборкаДанных.Следующий() Тогда
		ВходящиеДанные.ДокументРеализации = ВыборкаДанных.Ссылка;
	КонецЕсли;
	
	ВыборкаДанных = РезультатыЗапроса[6].Выбрать();
	Если ВыборкаДанных.Следующий() Тогда
		ВходящиеДанные.ВидОперации = ?(ВыборкаДанных.ИсходныйКорректировочный, "СогласованноеИзменение", "ИсправлениеОшибки");
	КонецЕсли;
	
	ВыборкаДанных = РезультатыЗапроса[7].Выбрать();
	Если ВыборкаДанных.Следующий() Тогда
		ВходящиеДанные.ИсправляемыйДокументРеализации = ВыборкаДанных.Ссылка;
	КонецЕсли;
	
	ВходящиеДанные.Товары = РезультатыЗапроса[21].Выгрузить();
	ВходящиеДанные.Услуги = РезультатыЗапроса[28].Выгрузить();
	
	ВходящиеДанные.СуммаДокумента = ВходящиеДанные.Товары.Итог("СуммаСНДС") + ВходящиеДанные.Услуги.Итог("СуммаСНДС");
	
КонецЕсли;</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	Параметры.ЗагруженныеКорректировкиРеализации.Добавить(Объект);
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<Источник>ДокументСсылка.КорректировкаРеализации</Источник>
						<Приемник>ДокументСсылка.КорректировкаРеализации</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>31</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>32</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>34</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>35</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>30</Код>
								<Наименование> --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>40</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийИсправленияПоступленияРеализации"/>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование>Контрагент --&gt; Контрагент</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>36</Код>
								<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				"СПокупателем");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Источник.Соглашение);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Источник.Сделка);
	Значение.Вставить("ЗаказКлиентаУТ11",			ВходящиеДанные.ЗаказКлиента);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Источник.Соглашение);
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>БанковскийСчетОрганизации --&gt; БанковскийСчетОрганизации</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
								<Приемник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
								<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение)
	И Значение.Владелец &lt;&gt; Источник.Организация Тогда
	Отказ = Истина;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>38</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПриВыгрузке>Значение = Значение = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>39</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование>АдресДоставки --&gt; АдресДоставки</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>41</Код>
								<Наименование> --&gt; ДокументРеализации</Наименование>
								<Порядок>900</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДокументРеализации" Вид="Реквизит"/>
								<ПриВыгрузке>Если ТипЗнч(Значение) = Тип("ДокументСсылка.КорректировкаРеализации") Тогда
	ИмяПКО = "КорректировкаРеализации_КорректировкаРеализации";
ИначеЕсли ТипЗнч(Значение) = Тип("ДокументСсылка.АктВыполненныхРабот") Тогда
	ИмяПКО = "ВыполнениеРабот_РеализацияТоваровУслуг";
ИначеЕсли ТипЗнч(Значение) = Тип("ДокументСсылка.РеализацияТоваровУслуг") Тогда
	ИмяПКО = "РТУ_ПродажаТоваровУслуг";
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>42</Код>
								<Наименование> --&gt; ИсправляемыйДокументРеализации</Наименование>
								<Порядок>950</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИсправляемыйДокументРеализации" Вид="Реквизит"/>
								<ПриВыгрузке>Если ТипЗнч(Значение) = Тип("ДокументСсылка.КорректировкаРеализации") Тогда
	ИмяПКО = "КорректировкаРеализации_КорректировкаРеализации";
ИначеЕсли ТипЗнч(Значение) = Тип("ДокументСсылка.АктВыполненныхРабот") Тогда
	ИмяПКО = "ВыполнениеРабот_РеализацияТоваровУслуг";
ИначеЕсли ТипЗнч(Значение) = Тип("ДокументСсылка.РеализацияТоваровУслуг") Тогда
	ИмяПКО = "РТУ_ПродажаТоваровУслуг";
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>43</Код>
								<Наименование> --&gt; КорректироватьБУиНУ</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КорректироватьБУиНУ" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>37</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>33</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>1</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1150</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>12</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование> --&gt; СтавкаНДСДоИзменения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДСДоИзменения" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование> --&gt; КоличествоДоКорректировки</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КоличествоДоКорректировки" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование> --&gt; КоличествоДоИзменения</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КоличествоДоИзменения" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; ЦенаДоКорректировки</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЦенаДоКорректировки" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование> --&gt; ЦенаДоИзменения</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЦенаДоИзменения" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; СуммаДоКорректировки</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаДоКорректировки" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование> --&gt; СуммаДоИзменения</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаДоИзменения" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; СуммаНДСДоКорректировки</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДСДоКорректировки" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование> --&gt; СуммаНДСДоИзменения</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДСДоИзменения" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование> --&gt; НомерГТДДоИзменения</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТДДоИзменения" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование> --&gt; СтранаПроисхожденияДоИзменения</Наименование>
									<Порядок>950</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхожденияДоИзменения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; ЕстьВДокументеРеализации</Наименование>
									<Порядок>1000</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕстьВДокументеРеализации" Вид="Реквизит" Тип="Булево"/>
								</Свойство>
							</Группа>
							<Группа>
								<Код>44</Код>
								<Наименование> --&gt; Услуги</Наименование>
								<Порядок>1200</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>52</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>51</Код>
									<Наименование> --&gt; Содержание</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>50</Код>
									<Наименование> --&gt; СодержаниеДоИзменения</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СодержаниеДоИзменения" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>49</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>48</Код>
									<Наименование> --&gt; СтавкаНДСДоИзменения</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДСДоИзменения" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>59</Код>
									<Наименование> --&gt; КоличествоДоКорректировки</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КоличествоДоКорректировки" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>46</Код>
									<Наименование> --&gt; КоличествоДоИзменения</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КоличествоДоИзменения" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>47</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>60</Код>
									<Наименование> --&gt; СуммаДоКорректировки</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаДоКорректировки" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>53</Код>
									<Наименование> --&gt; СуммаДоИзменения</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаДоИзменения" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>45</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>61</Код>
									<Наименование> --&gt; СуммаНДСДоКорректировки</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДСДоКорректировки" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>54</Код>
									<Наименование> --&gt; СуммаНДСДоИзменения</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДСДоИзменения" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>55</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>62</Код>
									<Наименование> --&gt; ЦенаДоКорректировки</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЦенаДоКорректировки" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>57</Код>
									<Наименование> --&gt; ЦенаДоИзменения</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЦенаДоИзменения" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>56</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>58</Код>
									<Наименование> --&gt; ЕстьВДокументеРеализации</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕстьВДокументеРеализации" Вид="Реквизит" Тип="Булево"/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>63</Код>
								<Наименование>ДокументОснование --&gt;</Наименование>
								<Порядок>1250</Порядок>
								<Источник Имя="ДокументОснование" Вид="Реквизит"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>КорректировкаРеализации_ОприходованиеТоваров</Код>
						<Наименование>Документ: Корректировка реализации</Наименование>
						<Порядок>100</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<Источник>ДокументСсылка.КорректировкаРеализации</Источник>
						<Приемник>ДокументСсылка.ОприходованиеТоваров</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПриВыгрузке>Значение = Лев(Значение, 5) + "КР" + Сред(Значение, 8);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование> --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ВходящиеДанные.Товары.Итог("Сумма");</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>СтатьяДоходов --&gt; СтатьяПрочихДоходовРасходов</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="СтатьяДоходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиДоходов"/>
								<Приемник Имя="СтатьяПрочихДоходовРасходов" Вид="Реквизит" Тип="СправочникСсылка.ПрочиеДоходыИРасходы"/>
								<КодПравилаКонвертации>СтатьиРасходовВСтатьиЗатрат                       </КодПравилаКонвертации>
								<ПриВыгрузке>КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет");
Пусто = (Найти(КоррСчет, "91.01") = 0);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование> --&gt; Основание</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Значение = "Корректировка реализации № " + ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Ложь)
	+ " от " + Формат(Источник.Дата, "ДФ='дд ММММ гггг'")+ " г.";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>10</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>550</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>18</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>КорректировкаРеализации_СписаниеТоваров</Код>
						<Наименование>Документ: Корректировка реализации</Наименование>
						<Порядок>150</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем признак "Отражение в УСН" значением по умолчанию
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = ?(УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы,
								Перечисления.ОтражениеВУСН.НеПринимаются, Перечисления.ОтражениеВУСН.ПустаяСсылка());
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<Источник>ДокументСсылка.КорректировкаРеализации</Источник>
						<Приемник>ДокументСсылка.СписаниеТоваров</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПриВыгрузке>Значение = Лев(Значение, 5) + "КР" + Сред(Значение, 8);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование> --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ВходящиеДанные.Товары.Итог("Себестоимость");</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование> --&gt; Основание</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Значение = "Корректировка реализации № " + ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Источник.Номер, Ложь, Ложь)
	+ " от " + Формат(Источник.Дата, "ДФ='дд ММММ гггг'")+ " г.";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>10</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>550</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>17</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование> --&gt; Себестоимость</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Себестоимость" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>ПрочаяРеализация</Код>
					<Наименование>ПКО для документов прочей реализации</Наименование>
					<Порядок>200</Порядок>
					<Правило>
						<Код>ВыполнениеРабот_РеализацияТоваровУслуг</Код>
						<Наименование>Документ: Выполнение работ</Наименование>
						<Порядок>50</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.АктВыполненныхРабот</Источник>
						<Приемник>ДокументСсылка.РеализацияТоваровУслуг</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПриВыгрузке>Значение = 	Лев(Значение, 5) + "У" + Сред(Значение, 7);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРеализацияТоваров"/>
								<ПередВыгрузкой>Значение = "ПродажаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>БанковскийСчетОрганизации --&gt; БанковскийСчетОрганизации</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
								<Приемник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
								<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение)
	И Значение.Владелец &lt;&gt; Источник.Организация Тогда
	Отказ = Истина;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПриВыгрузке>Значение = Значение = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>Контрагент --&gt; Контрагент</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				"СПокупателем");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Источник.Соглашение);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Источник.Сделка);
	Значение.Вставить("ЗаказКлиентаУТ11",			Источник.ЗаказКлиента);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Источник.Соглашение);
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<НеЗамещать>true</НеЗамещать>
								<Код>18</Код>
								<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
								<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>57</Код>
								<Наименование>ЗаказКлиента --&gt; СчетНаОплатуПокупателю</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="ЗаказКлиента" Вид="Реквизит"/>
								<Приемник Имя="СчетНаОплатуПокупателю" Вид="Реквизит" Тип="ДокументСсылка.СчетНаОплатуПокупателю"/>
								<КодПравилаКонвертации>СНОП_СчетНаОплатуПокупателю                       </КодПравилаКонвертации>
								<ПередВыгрузкой>Отказ = ТипЗнч(Источник.ЗаказКлиента) &lt;&gt; Тип("ДокументСсылка.ЗаказКлиента");</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>41</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>58</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>33</Код>
								<Наименование>Услуги --&gt; Услуги</Наименование>
								<Порядок>1250</Порядок>
								<Источник Имя="Услуги" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>40</Код>
									<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>39</Код>
									<Наименование>Содержание --&gt; Содержание</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>38</Код>
									<Наименование>Количество --&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>37</Код>
									<Наименование>Цена --&gt; Цена</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>36</Код>
									<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>35</Код>
									<Наименование>Сумма --&gt; Сумма</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>34</Код>
									<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>59</Код>
								<Наименование>Соглашение --&gt;</Наименование>
								<Порядок>1300</Порядок>
								<Источник Имя="Соглашение" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСКлиентами"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>60</Код>
								<Наименование>Партнер --&gt;</Наименование>
								<Порядок>1350</Порядок>
								<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>РеализацияУслугПрочихАкт_РеализацияТоваровУслуг</Код>
						<Наименование>Документ: Реализация услуг и прочих активов</Наименование>
						<Порядок>100</Порядок>
						<ПередВыгрузкой>ВходящиеДанные = Новый Структура;
ВходящиеДанные.Вставить("РасчетыВУсловныхЕдиницах");
ВходящиеДанные.Вставить("КурсВзаиморасчетов");
ВходящиеДанные.Вставить("КратностьВзаиморасчетов");

Запрос = Новый Запрос("ВЫБРАТЬ
|	КурсыВалют.Валюта КАК Валюта,
|	КурсыВалют.Курс,
|	КурсыВалют.Кратность
|ПОМЕСТИТЬ КурсыВалют
|ИЗ
|	РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, ) КАК КурсыВалют
|
|ИНДЕКСИРОВАТЬ ПО
|	Валюта
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ВЫБОР
|		КОГДА Док.Соглашение.ПорядокОплаты ЕСТЬ NULL 
|			ТОГДА ВЫБОР
|					КОГДА Док.ВалютаВзаиморасчетов &lt;&gt; &amp;ВалютаРег
|						ТОГДА ИСТИНА
|					ИНАЧЕ ЛОЖЬ
|				КОНЕЦ
|		ИНАЧЕ ВЫБОР
|				КОГДА Док.Соглашение.ПорядокОплаты = ЗНАЧЕНИЕ(Перечисление.ПорядокОплатыПоСоглашениям.РасчетыВВалютеОплатаВРублях)
|					ТОГДА ИСТИНА
|				ИНАЧЕ ЛОЖЬ
|			КОНЕЦ
|	КОНЕЦ КАК РасчетыВУсловныхЕдиницах,
|	ЕСТЬNULL(КурсВалютыВзаиморасчетов.Курс, 1) КАК КурсВзаиморасчетов,
|	ЕСТЬNULL(КурсВалютыВзаиморасчетов.Кратность, 1) КАК КратностьВзаиморасчетов
|ИЗ
|	Документ.РеализацияУслугПрочихАктивов КАК Док
|		ЛЕВОЕ СОЕДИНЕНИЕ КурсыВалют КАК КурсВалютыВзаиморасчетов
|		ПО (Док.ВалютаВзаиморасчетов = КурсВалютыВзаиморасчетов.Валюта)");

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата", Источник.Дата);
Запрос.УстановитьПараметр("ВалютаРег", Константы.ВалютаРегламентированногоУчета.Получить());

РезультатыЗапроса = Запрос.ВыполнитьПакет();

ДанныеШапки = РезультатыЗапроса[1].Выбрать();
Если ДанныеШапки.Следующий() Тогда
	ЗаполнитьЗначенияСвойств(ВходящиеДанные, ДанныеШапки,
		"РасчетыВУсловныхЕдиницах,
		|КурсВзаиморасчетов,
		|КратностьВзаиморасчетов");
КонецЕсли;</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<Источник>ДокументСсылка.РеализацияУслугПрочихАктивов</Источник>
						<Приемник>ДокументСсылка.РеализацияТоваровУслуг</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>8</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПриВыгрузке>Значение = 	Лев(Значение, 5) + "П" + Сред(Значение, 7);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРеализацияТоваров"/>
								<ПередВыгрузкой>Значение = "ПродажаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Контрагент --&gt; Контрагент</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Источник.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				"СПокупателем");
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	ВходящиеДанные.РасчетыВУсловныхЕдиницах);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Источник.Соглашение);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>33</Код>
								<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
								<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПриВыгрузке>Значение = Значение = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>750</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>800</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>АдресДоставки --&gt; АдресДоставки</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>БанковскийСчетОрганизации --&gt; БанковскийСчетОрганизации</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
								<Приемник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
								<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение)
	И Значение.Владелец &lt;&gt; Источник.Организация Тогда
	Отказ = Истина;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Группа>
								<Код>22</Код>
								<Наименование>Доходы --&gt; Услуги</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="Доходы" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>24</Код>
									<Наименование>Содержание --&gt; Содержание</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>Количество --&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование>Сумма --&gt; Сумма</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование>Цена --&gt; Цена</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>29</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
								<Порядок>1200</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>30</Код>
								<Наименование>Партнер --&gt;</Наименование>
								<Порядок>1250</Порядок>
								<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>31</Код>
								<Наименование>Соглашение --&gt;</Наименование>
								<Порядок>1300</Порядок>
								<Источник Имя="Соглашение" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСКлиентами"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>32</Код>
								<Наименование>ХозяйственнаяОперация --&gt;</Наименование>
								<Порядок>1350</Порядок>
								<Источник Имя="ХозяйственнаяОперация" Вид="Реквизит" Тип="ПеречислениеСсылка.ХозяйственныеОперации"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Правило>
					<Код>СНОП_СчетНаОплатуПокупателю</Код>
					<Наименование>Документ: Счет на оплату клиенту</Наименование>
					<Порядок>250</Порядок>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ЗаказКлиента</Источник>
					<Приемник>ДокументСсылка.СчетНаОплатуПокупателю</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>14</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>15</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>Контрагент --&gt; Контрагент</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
							<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		Неопределено);
	Значение.Вставить("ВидДоговора",				Неопределено);
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				Источник.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Источник.Соглашение);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	Значение.ВидДоговора			= ВзаиморасчетыСервер.ВидДоговораКонтрагента(Источник.Ссылка, Источник.Соглашение, Источник.ХозяйственнаяОперация);
	Значение.ВалютаВзаиморасчетов	= ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.Соглашение, "Валюта");
	
	Если Значение.ВидДоговора = "СКомиссионером" Тогда
		// Договора по комиссии выгружаются без разделения по сделкам и заказам и всегда не в у.е.
		Значение.РасчетыВУсловныхЕдиницах = Ложь;
	Иначе
		Значение.РасчетыВУсловныхЕдиницах	= ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Источник.Соглашение);
		Значение.СделкаСКлиентомУТ11		= Источник.Сделка;
		Значение.ЗаказКлиентаУТ11			= Источник.Ссылка;
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>Соглашение --&gt; КратностьВзаиморасчетов</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Соглашение" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСКлиентами"/>
							<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Соглашение) Тогда
	СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Соглашение.Валюта, Источник.Дата);
	Значение	   = СтруктураКурса.Кратность;
Иначе
	// Документ оформлен в валюте взаиморасчетов
	Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>Соглашение --&gt; КурсВзаиморасчетов</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Соглашение" Вид="Реквизит" Тип="СправочникСсылка.СоглашенияСКлиентами"/>
							<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Соглашение) Тогда
	СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Соглашение.Валюта, Источник.Дата);
	Значение	   = СтруктураКурса.Курс;
Иначе
	// Документ оформлен в валюте взаиморасчетов
	Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>31</Код>
							<Наименование>Организация --&gt; ОрганизацияПолучатель</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>30</Код>
							<Наименование>БанковскийСчет --&gt; СтруктурнаяЕдиница</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
							<Приемник Имя="СтруктурнаяЕдиница" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
							<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
							<ПриВыгрузке>Если ЗначениеЗаполнено(Значение)
	И Значение.Владелец &lt;&gt; Источник.Организация Тогда
	Отказ = Истина;
КонецЕсли;</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>Склад --&gt; Склад</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
							<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
							<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
							<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
							<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>АдресДоставки --&gt; АдресДоставки</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>Менеджер --&gt; Ответственный</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>37</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа>
							<Код>1</Код>
							<Наименование>Товары --&gt; Товары</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>Запрос = Новый Запрос("ВЫБРАТЬ
|	Товары.НомерСтроки КАК НомерСтроки,
|	Товары.Номенклатура,
|	Товары.Количество,
|	Товары.Сумма / Товары.Количество КАК Цена,
|	Товары.Сумма,
|	Товары.СтавкаНДС,
|	Товары.СуммаНДС
|ИЗ
|	Документ.ЗаказКлиента.Товары КАК Товары
|ГДЕ
|	Товары.Ссылка = &amp;Ссылка
|	И Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
|	И Товары.Отменено = ЛОЖЬ
|
|УПОРЯДОЧИТЬ ПО
|	НомерСтроки");
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>3</Код>
								<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Количество --&gt; Количество</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Цена --&gt; Цена</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Сумма --&gt; Сумма</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							</Свойство>
						</Группа>
						<Группа>
							<Код>22</Код>
							<Наименование>Товары --&gt; Услуги</Наименование>
							<Порядок>1000</Порядок>
							<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>Запрос = Новый Запрос("ВЫБРАТЬ
|	Товары.НомерСтроки КАК НомерСтроки,
|	Товары.Номенклатура,
|	Товары.Количество,
|	Товары.Цена,
|	Товары.Сумма,
|	Товары.СтавкаНДС,
|	Товары.СуммаНДС
|ИЗ
|	Документ.ЗаказКлиента.Товары КАК Товары
|ГДЕ
|	Товары.Ссылка = &amp;Ссылка
|	И Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
|	И Товары.Отменено = ЛОЖЬ
|
|УПОРЯДОЧИТЬ ПО
|	НомерСтроки");
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>24</Код>
								<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>Количество --&gt; Количество</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование>Цена --&gt; Цена</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование>Сумма --&gt; Сумма</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование>Номенклатура --&gt; Содержание</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Значение = Строка(ОбъектКоллекции.Номенклатура);</ПередВыгрузкой>
							</Свойство>
						</Группа>
						<Свойство Отключить="true">
							<Код>38</Код>
							<Наименование>Статус --&gt;</Наименование>
							<Порядок>1050</Порядок>
							<Источник Имя="Статус" Вид="Реквизит" Тип="ПеречислениеСсылка.СтатусыЗаказовКлиентов"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Группа Отключить="true">
							<Код>35</Код>
							<Наименование>Товары --&gt;</Наименование>
							<Порядок>1100</Порядок>
							<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>34</Код>
								<Наименование>СтавкаНДС --&gt;</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство Отключить="true">
								<Код>36</Код>
								<Наименование>Отменено --&gt;</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Отменено" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ОРП_ОтчетОРозничныхПродажах</Код>
					<Наименование>Документ: Отчет о розничных продажах</Наименование>
					<Порядок>300</Порядок>
					<ПередВыгрузкой>// Получаем параметры эквайринговых операций
СписокЭквайринговыхТерминалов = Источник.ОплатаПлатежнымиКартами.Выгрузить(, "ЭквайринговыйТерминал");
СписокЭквайринговыхТерминалов.Свернуть("ЭквайринговыйТерминал");
СписокЭквайринговыхТерминалов = СписокЭквайринговыхТерминалов.ВыгрузитьКолонку("ЭквайринговыйТерминал");

Запрос = Новый Запрос("ВЫБРАТЬ
|	ЭквайринговыеТерминалы.Ссылка КАК ЭквайринговыйТерминал,
|	ЭквайринговыеТерминалы.Владелец КАК ДоговорЭквайринга,
|	ЭквайринговыеТерминалы.Владелец.Эквайрер КАК Эквайрер,
|	ЭквайринговыеТерминалы.Владелец.БанковскийСчет.ВалютаДенежныхСредств КАК ВалютаВзаиморасчетов,
|	ЭквайринговыеТерминалы.Владелец.Контрагент КАК Контрагент
|ИЗ
|	Справочник.ЭквайринговыеТерминалы КАК ЭквайринговыеТерминалы
|ГДЕ
|	ЭквайринговыеТерминалы.Ссылка В (&amp;СписокЭквайринговыхТерминалов)");
Запрос.УстановитьПараметр("СписокЭквайринговыхТерминалов", СписокЭквайринговыхТерминалов);
ВходящиеДанные.Вставить("ДанныеОплатПлатежнымиКартами", Запрос.Выполнить().Выгрузить());</ПередВыгрузкой>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	Параметры.ЗагруженныеОтчетыОРозничныхПродажах.Добавить(Объект);
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ОтчетОРозничныхПродажах</Источник>
					<Приемник>ДокументСсылка.ОтчетОРозничныхПродажах</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>6</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>7</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>Валюта --&gt; КратностьДокумента</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КратностьДокумента" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>Валюта --&gt; КурсДокумента</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КурсДокумента" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Склад --&gt; Склад</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
							<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
							<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
							<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>СтатьяДвиженияДенежныхСредств --&gt; СтатьяДвиженияДенежныхСредств</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
							<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
							<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование> --&gt; ВидОперации</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийОтчетОРозничныхПродажах"/>
							<ПередВыгрузкой>Значение = "ОтчетККМОПродажах";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
							<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
							<ПриВыгрузке>Запрос = Новый Запрос("ВЫБРАТЬ
                      |	Товары.Ссылка
                      |ИЗ
                      |	Документ.ОтчетОРозничныхПродажах.Товары КАК Товары
                      |ГДЕ
                      |	Товары.Ссылка = &amp;Ссылка
                      |	И Товары.СтавкаНДС &lt;&gt; ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.БезНДС)");
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
ВыборкаРезультата = Запрос.Выполнить().Выбрать();
Значение = Значение = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС ИЛИ ВыборкаРезультата.Следующий();</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>30</Код>
							<Наименование>Ответственный --&gt; Ответственный</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>40</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа>
							<Код>15</Код>
							<Наименование> --&gt; Товары</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>Запросы.ТоварыИзВидовЗапасовДляОтчетаОРозничныхПродажах.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запросы.ТоварыИзВидовЗапасовДляОтчетаОРозничныхПродажах.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>17</Код>
								<Наименование> --&gt; Номенклатура</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование> --&gt; Количество</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование> --&gt; Цена</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование> --&gt; Сумма</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование> --&gt; СтавкаНДС</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование> --&gt; СуммаНДС</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование> --&gt; НомерГТД</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
								<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование> --&gt; СтранаПроисхождения</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
								<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование> --&gt; СчетУчета</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							</Свойство>
						</Группа>
						<Группа>
							<Код>24</Код>
							<Наименование>ОплатаПлатежнымиКартами --&gt; Оплата</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="ОплатаПлатежнымиКартами" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="Оплата" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>25</Код>
								<Наименование>ЭквайринговыйТерминал --&gt; ВидОплаты</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ЭквайринговыйТерминал" Вид="Реквизит" Тип="СправочникСсылка.ЭквайринговыеТерминалы"/>
								<Приемник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатОрганизаций"/>
								<КодПравилаКонвертации>ДоговорыЭквайринга                                </КодПравилаКонвертации>
								<ПередВыгрузкой>ДанныеОплатПлатежнымиКартами  = ВходящиеДанные.ДанныеОплатПлатежнымиКартами;
ДанныеОплатыПлатежнымиКартами = ДанныеОплатПлатежнымиКартами.Найти(ОбъектКоллекции.ЭквайринговыйТерминал, "ЭквайринговыйТерминал");
Значение = ДанныеОплатыПлатежнымиКартами.ДоговорЭквайринга;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПередВыгрузкой>ДанныеОплатПлатежнымиКартами  = ВходящиеДанные.ДанныеОплатПлатежнымиКартами;
ДанныеОплатыПлатежнымиКартами = ДанныеОплатПлатежнымиКартами.Найти(ОбъектКоллекции.ЭквайринговыйТерминал, "ЭквайринговыйТерминал");

// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		ДанныеОплатыПлатежнымиКартами.ВалютаВзаиморасчетов);
Значение.Вставить("ВидДоговора",				"Прочее");
Значение.Вставить("Владелец",					ДанныеОплатыПлатежнымиКартами.Контрагент);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				ДанныеОплатыПлатежнымиКартами.Эквайрер);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование>ЭквайринговыйТерминал --&gt; Контрагент</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ЭквайринговыйТерминал" Вид="Реквизит" Тип="СправочникСсылка.ЭквайринговыеТерминалы"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<ПередВыгрузкой>ДанныеОплатПлатежнымиКартами  = ВходящиеДанные.ДанныеОплатПлатежнымиКартами;
ДанныеОплатыПлатежнымиКартами = ДанныеОплатПлатежнымиКартами.Найти(ОбъектКоллекции.ЭквайринговыйТерминал, "ЭквайринговыйТерминал");
Значение = ДанныеОплатыПлатежнымиКартами.Контрагент;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>Сумма --&gt; СуммаОплаты</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаОплаты" Вид="Реквизит" Тип="Число"/>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>32</Код>
							<Наименование>ВидыЗапасов --&gt;</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>33</Код>
								<Наименование>ВидЗапасов --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>34</Код>
								<Наименование>Количество --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>35</Код>
								<Наименование>Номенклатура --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>36</Код>
								<Наименование>НомерГТД --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>37</Код>
								<Наименование>СтавкаНДС --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>38</Код>
								<Наименование>СуммаНДС --&gt;</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>39</Код>
								<Наименование>СуммаСНДС --&gt;</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
					</Свойства>
					<Значения/>
				</Правило>
			</Группа>
			<Группа>
				<Код>Ценообразование</Код>
				<Наименование>Продажа</Наименование>
				<Порядок>450</Порядок>
				<Правило>
					<Код>ЦеныНоменклатуры_УстановкаЦенНоменклатуры</Код>
					<Наименование>:</Наименование>
					<Порядок>100</Порядок>
					<ПослеЗагрузки>Если Объект.ПометкаУдаления И Объект.ЭтоНовый() Тогда
	Отказ = Истина;
Иначе
	Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки)
КонецЕсли;</ПослеЗагрузки>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Приемник>ДокументСсылка.УстановкаЦенНоменклатуры</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>3</Код>
							<Наименование> --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование> --&gt; ТипЦен</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
							<КодПравилаКонвертации>ТипыЦенНоменклатуры                               </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование> --&gt; Проведен</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование> --&gt; НеПроводитьНулевыеЗначения</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НеПроводитьНулевыеЗначения" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование> --&gt; ПометкаУдаления</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа>
							<Код>6</Код>
							<Наименование> --&gt; Товары</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>7</Код>
								<Наименование> --&gt; Валюта</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование> --&gt; Номенклатура</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование> --&gt; Цена</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							</Свойство>
						</Группа>
					</Свойства>
					<Значения/>
				</Правило>
			</Группа>
			<Группа>
				<Код>Интеркампани</Код>
				<Наименование>Интеркампани</Наименование>
				<Порядок>500</Порядок>
				<Группа>
					<Код>ПокупкаПродажа</Код>
					<Наименование>ПокупкаПродажа</Наименование>
					<Порядок>50</Порядок>
					<Правило>
						<Код>ПДТ_ПередачаТоваровПродажа</Код>
						<Наименование>Документ: Передача товаров между организациями</Наименование>
						<Порядок>50</Порядок>
						<ПередВыгрузкой>Запросы.ТоварыИУслугиИзВидовЗапасовИКПродажа.УстановитьПараметр("Ссылка", Источник.Ссылка);
РезультатыЗапроса = Запросы.ТоварыИУслугиИзВидовЗапасовИКПродажа.ВыполнитьПакет();
ВходящиеДанные.Вставить("Услуги", РезультатыЗапроса[1].Выгрузить());
ВходящиеДанные.Вставить("Товары", РезультатыЗапроса[3].Выгрузить());</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ПередачаТоваровМеждуОрганизациями</Источник>
						<Приемник>ДокументСсылка.РеализацияТоваровУслуг</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>33</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "И" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРеализацияТоваров"/>
								<ПередВыгрузкой>Значение = "ПродажаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>БанковскийСчетОрганизации --&gt; БанковскийСчетОрганизации</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
								<Приемник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
								<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение)
	И Значение.Владелец &lt;&gt; Источник.Организация Тогда
	Отказ = Истина;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>ОрганизацияПолучатель --&gt; Контрагент</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								<ПередВыгрузкой>Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение = Источник.Контрагент;
	
Иначе
	
	ОрганизацияКонтрагента = Источник.ОрганизацияПолучатель;
	НовыйКонтрагент		   = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение = НовыйКонтрагент;
	
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.ВалютаВзаиморасчетов);
Значение.Вставить("ВидДоговора",				"СПокупателем");
Значение.Вставить("Владелец",					Неопределено);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение.Владелец	 = Источник.Контрагент;
	Значение.ПартнерУТ11 = Источник.Партнер;
	
Иначе
	
	ОрганизацияКонтрагента = Источник.ОрганизацияПолучатель;
	НовыйКонтрагент = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение.Владелец = НовыйКонтрагент;
	
КонецЕсли;

Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; Источник.ВалютаВзаиморасчетов;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
								<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>АдресДоставки --&gt; АдресДоставки</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>43</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>21</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1100</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>25</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>31</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>32</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
							</Группа>
							<Группа>
								<Код>44</Код>
								<Наименование> --&gt; Услуги</Наименование>
								<Порядок>1150</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>46</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>47</Код>
									<Наименование> --&gt; Содержание</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>45</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>51</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>48</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								</Свойство>
								<Свойство>
									<Код>49</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>50</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>35</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>1200</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>36</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>37</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>38</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>39</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>40</Код>
									<Наименование>СтавкаНДС --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>41</Код>
									<Наименование>СуммаНДС --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>42</Код>
									<Наименование>СуммаСНДС --&gt;</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ПДТ_ПередачаТоваровПокупка</Код>
						<Наименование>Документ: Передача товаров между организациями</Наименование>
						<Порядок>100</Порядок>
						<ПередВыгрузкой>ВходящиеДанные = Новый Структура();
ВходящиеДанные.Вставить("ДатаВходящегоСчетаФактуры");
ВходящиеДанные.Вставить("КодВидаОперации");
ВходящиеДанные.Вставить("КодСпособаПолучения", 1);
ВходящиеДанные.Вставить("НомерВходящегоСчетаФактуры");
ВходящиеДанные.Вставить("ПредъявленСчетФактура");

Если Не Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Запрос = Новый Запрос("ВЫБРАТЬ ПЕРВЫЕ 1
	|	Док.Дата КАК ДатаВходящегоСчетаФактуры,
	|	Док.КодВидаОперации,
	|	ВЫБОР
	|		КОГДА Док.ВыставленВЭлектронномВиде
	|			ТОГДА 2
	|		ИНАЧЕ 1
	|	КОНЕЦ КАК КодСпособаПолучения,
	|	Док.Номер КАК НомерВходящегоСчетаФактуры,
	|	ИСТИНА КАК ПредъявленСчетФактура
	|ИЗ
	|	Документ.СчетФактураВыданный КАК Док
	|ГДЕ
	|	Док.ДокументОснование = &amp;Ссылка
	|
	|УПОРЯДОЧИТЬ ПО
	|	Док.НомерИсправления УБЫВ");
	
	Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
	
	Выборка = Запрос.Выполнить().Выбрать();
	Если Выборка.Следующий() Тогда
		ЗаполнитьЗначенияСвойств(ВходящиеДанные, Выборка);
	КонецЕсли;
	
КонецЕсли;

Запросы.ТоварыИУслугиИзВидовЗапасовИКПокупка.УстановитьПараметр("Ссылка", Источник.Ссылка);
РезультатыЗапроса = Запросы.ТоварыИУслугиИзВидовЗапасовИКПокупка.ВыполнитьПакет();
ВходящиеДанные.Вставить("Услуги", РезультатыЗапроса[1].Выгрузить());
ВходящиеДанные.Вставить("Товары", РезультатыЗапроса[3].Выгрузить());</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);
Выполнить(Алгоритмы.УпрощенныйУчетНДС);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		
		ТаблицаСтатейРасходов = ПараметрыОбъекта.Получить("УслугиТабличнаяЧасть");
		Для Каждого СтрокаТЧ Из Объект.Услуги Цикл
			
			СчетЗатрат	   = СтрокаТЧ.СчетЗатрат;
			СчетЗатратНУ   = СтрокаТЧ.СчетЗатратНУ;
			СтатьяРасходов = ТаблицаСтатейРасходов[СтрокаТЧ.НомерСтроки - 1].СтатьяРасходов;
			Если ЗначениеЗаполнено(СчетЗатрат) Тогда
				
				Для Каждого СтрокаВидаСубконто Из СчетЗатрат.ВидыСубконто Цикл
					
					ТипСубконто = СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
					Если ТипСубконто.СодержитТип(ТипЗнч(СтатьяРасходов)) Тогда
						СтрокаТЧ["Субконто" + СтрокаВидаСубконто.НомерСтроки] = СтатьяРасходов;
					КонецЕсли;
				КонецЦикла;
			КонецЕсли;
			
			Если ЗначениеЗаполнено(СчетЗатратНУ) Тогда
				
				Для Каждого СтрокаВидаСубконто Из СчетЗатрат.ВидыСубконто Цикл
					
					ТипСубконто = СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
					Если ТипСубконто.СодержитТип(ТипЗнч(СтатьяРасходов)) Тогда
						СтрокаТЧ["СубконтоНУ" + СтрокаВидаСубконто.НомерСтроки] = СтатьяРасходов;
					КонецЕсли;
				КонецЦикла;
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем параметры, зависящие от режима налогообложения
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		Если УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы Тогда
			ВариантОтраженияУСН = ?(ПараметрыОбъекта["ЭтоЕНВД"], Перечисления.ОтражениеВУСН.НеПринимаются, Перечисления.ОтражениеВУСН.Принимаются);
		Иначе
			ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка();
		КонецЕсли;
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
		// Заполняем отражение в УСН для ТЧ Услуги
		Для Каждого СтрокаТЧ Из Объект.Услуги Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
		// Определяем признак включения НДС в стоимость
		Если УчетнаяПолитика.УСН ИЛИ ПараметрыОбъекта["ЭтоЕНВД"] Тогда
			Объект.НДСВключенВСтоимость = Истина;
		КонецЕсли;
	КонецЕсли;
	
	Если НЕ Объект.НДСВключенВСтоимость И ПараметрыОбъекта["ЭтоЕНВД"] Тогда
		Объект.НДСВключенВСтоимость = Истина;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ПередачаТоваровМеждуОрганизациями</Источник>
						<Приемник>ДокументСсылка.ПоступлениеТоваровУслуг</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование>НачалоПериода --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="НачалоПериода" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<ПриВыгрузке>Если Не ЗначениеЗаполнено(Значение) Тогда
	Значение = Источник.Дата;
КонецЕсли;

Значение = НачалоДня(Значение);</ПриВыгрузке>
							</Свойство>
							<Свойство Поиск="true">
								<Код>34</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Значение = Лев(Источник.Номер, 5) + "И" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>ОрганизацияПолучатель --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеТоваровУслуг"/>
								<ПередВыгрузкой>Значение = "ПокупкаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Организация --&gt; Контрагент</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								<ПередВыгрузкой>Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение = Источник.Контрагент;
	
Иначе

	ОрганизацияКонтрагента = Источник.Организация;
	НовыйКонтрагент		   = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение = НовыйКонтрагент;
	
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>33</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.ВалютаВзаиморасчетов);
Значение.Вставить("ВидДоговора",				"СПоставщиком");
Значение.Вставить("Владелец",					Неопределено);
Значение.Вставить("Организация",				Источник.ОрганизацияПолучатель);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение.Владелец	 = Источник.Контрагент;
	Значение.ПартнерУТ11 = Источник.Партнер;
	
Иначе
	
	ОрганизацияКонтрагента = Источник.Организация;
	НовыйКонтрагент = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение.Владелец = НовыйКонтрагент;
	
КонецЕсли;

Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; Источник.ВалютаВзаиморасчетов;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
								<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>Дата --&gt; ДатаВходящегоДокумента</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>Номер --&gt; НомерВходящегоДокумента</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>НомерВхДокумента	= Лев(Источник.Номер, 5) + "И" + Сред(Источник.Номер, 7);
Значение			= ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(НомерВхДокумента, Ложь, Истина);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование> --&gt; ПредъявленСчетФактура</Наименование>
								<Порядок>900</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование> --&gt; ДатаВходящегоСчетаФактуры</Наименование>
								<Порядок>950</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаВходящегоСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование> --&gt; НомерВходящегоСчетаФактуры</Наименование>
								<Порядок>1000</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НомерВходящегоСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Значение, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>58</Код>
								<Наименование> --&gt; КодВидаОперации</Наименование>
								<Порядок>1050</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КодВидаОперации" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>59</Код>
								<Наименование> --&gt; КодСпособаПолучения</Наименование>
								<Порядок>1100</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КодСпособаПолучения" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
								<Порядок>1200</Порядок>
								<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1250</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>43</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1300</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>44</Код>
								<Наименование>ПередачаПодДеятельностьОблагаемуюЕНВД --&gt;</Наименование>
								<Порядок>1350</Порядок>
								<Источник Имя="ПередачаПодДеятельностьОблагаемуюЕНВД" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ЭтоЕНВД</ИмяПараметраДляПередачи>
							</Свойство>
							<Группа>
								<Код>23</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1400</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>27</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>31</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>32</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>57</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
								</Свойство>
							</Группа>
							<Группа>
								<Код>46</Код>
								<Наименование> --&gt; Услуги</Наименование>
								<Порядок>1450</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>48</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>47</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>55</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>51</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>50</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								</Свойство>
								<Свойство>
									<Код>52</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>53</Код>
									<Наименование> --&gt; СчетЗатрат</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетЗатрат" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Значение = ОбъектКоллекции.КорреспондирующийСчет;
Отказ = НЕ ЗначениеЗаполнено(Значение);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>54</Код>
									<Наименование> --&gt; СчетЗатратНУ</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетЗатратНУ" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Значение = ОбъектКоллекции.КорреспондирующийСчет;
Отказ = НЕ ЗначениеЗаполнено(Значение);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>56</Код>
									<Наименование> --&gt;</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>СтатьяРасходов</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>Значение = ОбъектКоллекции.СтатьяРасходов;

Если ЗначениеЗаполнено(Значение) Тогда
	
	КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет");
	Если ЗначениеЗаполнено(КоррСчет) Тогда
		ИмяПКО = ?(Найти(КоррСчет, "91.02") &gt; 0, "СтатьиРасходовВПрочиеДоходыИРасходы", "СтатьиРасходовВСтатьиЗатрат");
	Иначе
		Пусто = Истина;
	КонецЕсли;
	
Иначе
	Пусто = Истина;	
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>61</Код>
								<Наименование>Дата --&gt;</Наименование>
								<Порядок>1500</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Группа Отключить="true">
								<Код>36</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>1550</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>37</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>38</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>39</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>40</Код>
									<Наименование>СтавкаНДС --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>41</Код>
									<Наименование>СуммаНДС --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>42</Код>
									<Наименование>СуммаСНДС --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>45</Код>
								<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
								<Порядок>1600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ПДТ_ПередачаТоваровПередачаНаКомиссию</Код>
						<Наименование>Документ: Передача товаров между организациями</Наименование>
						<Порядок>150</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ПередачаТоваровМеждуОрганизациями</Источник>
						<Приемник>ДокументСсылка.РеализацияТоваровУслуг</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>34</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "И" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРеализацияТоваров"/>
								<ПередВыгрузкой>Значение = "ПродажаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>БанковскийСчетОрганизации --&gt; БанковскийСчетОрганизации</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчетаОрганизаций"/>
								<Приемник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
								<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение)
	И Значение.Владелец &lt;&gt; Источник.Организация Тогда
	Отказ = Истина;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>ОрганизацияПолучатель --&gt; Контрагент</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								<ПередВыгрузкой>Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение = Источник.Контрагент;
	
Иначе

	ОрганизацияКонтрагента = Источник.ОрганизацияПолучатель;
	НовыйКонтрагент		   = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение = НовыйКонтрагент;
	
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"СКомиссионером");
Значение.Вставить("Владелец",					Неопределено);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение.Владелец	 = Источник.Контрагент;
	Значение.ПартнерУТ11 = Источник.Партнер;
	
Иначе
	
	ОрганизацияКонтрагента = Источник.ОрганизацияПолучатель;
	НовыйКонтрагент = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение.Владелец = НовыйКонтрагент;
	
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
								<ПередВыгрузкой>Значение = "НеЗачитывать";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>АдресДоставки --&gt; АдресДоставки</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>44</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>21</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Запросы.ТоварыИзВидовЗапасовИКПередачаКомиссионеру.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запросы.ТоварыИзВидовЗапасовИКПередачаКомиссионеру.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>25</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>32</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>33</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование> --&gt; ПереданныеСчетУчета</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ПереданныеСчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
								<Свойство>
									<Код>31</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>36</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>37</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>38</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>39</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>40</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>41</Код>
									<Наименование>СтавкаНДС --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>42</Код>
									<Наименование>СуммаНДС --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>43</Код>
									<Наименование>СуммаСНДС --&gt;</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ПДТ_ПередачаТоваровПриемНаКомиссию</Код>
						<Наименование>Документ: Передача товаров между организациями</Наименование>
						<Порядок>200</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ПередачаТоваровМеждуОрганизациями</Источник>
						<Приемник>ДокументСсылка.ПоступлениеТоваровУслуг</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>НачалоПериода --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="НачалоПериода" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<ПриВыгрузке>Если Не ЗначениеЗаполнено(Значение) Тогда
	Значение = Источник.Дата;
КонецЕсли;

Значение = НачалоДня(Значение);</ПриВыгрузке>
							</Свойство>
							<Свойство Поиск="true">
								<Код>46</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "И" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>ОрганизацияПолучатель --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеТоваровУслуг"/>
								<ПередВыгрузкой>Значение = "ПокупкаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Организация --&gt; Контрагент</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								<ПередВыгрузкой>Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение = Источник.Контрагент;
	
Иначе

	ОрганизацияКонтрагента = Источник.Организация;
	НовыйКонтрагент		   = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение = НовыйКонтрагент;
	
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"СКомитентом");
Значение.Вставить("Владелец",					Неопределено);
Значение.Вставить("Организация",				Источник.ОрганизацияПолучатель);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение.Владелец	 = Источник.Контрагент;
	Значение.ПартнерУТ11 = Источник.Партнер;
	
Иначе
	
	ОрганизацияКонтрагента = Источник.Организация;
	НовыйКонтрагент = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение.Владелец = НовыйКонтрагент;
	
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
								<ПередВыгрузкой>Значение = "НеЗачитывать"</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>44</Код>
								<Наименование>Дата --&gt; ДатаВходящегоДокумента</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>45</Код>
								<Наименование>Номер --&gt; НомерВходящегоДокумента</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>НомерВхДокумента	= Лев(Источник.Номер, 5) + "И" + Сред(Источник.Номер, 7);
Значение			= ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(НомерВхДокумента, Ложь, Истина);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>55</Код>
								<Наименование> --&gt; ПредъявленСчетФактура</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>56</Код>
								<Наименование> --&gt; ДатаВходящегоСчетаФактуры</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаВходящегоСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
								<ПередВыгрузкой>Пусто = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>58</Код>
								<Наименование> --&gt; НомерВходящегоСчетаФактуры</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НомерВходящегоСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Пусто = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>57</Код>
								<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>30</Код>
								<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1200</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>54</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1250</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>32</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Запросы.ТоварыИУслугиИзВидовЗапасовИКПокупка.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запросы.ТоварыИУслугиИзВидовЗапасовИКПокупка.ВыполнитьПакет()[3].Выгрузить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>36</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>33</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>34</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>35</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>43</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>40</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>38</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>41</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>37</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>39</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>59</Код>
									<Наименование> --&gt; ОтражениеВУСН</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ОтражениеВУСН" Вид="Реквизит" Тип="ПеречислениеСсылка.ОтражениеВУСН"/>
									<ПередВыгрузкой>Значение = "НеПринимаются";</ПередВыгрузкой>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>61</Код>
								<Наименование>Дата --&gt;</Наименование>
								<Порядок>1350</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Группа Отключить="true">
								<Код>47</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>1400</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>48</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>49</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>50</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>51</Код>
									<Наименование>СтавкаНДС --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>52</Код>
									<Наименование>СуммаНДС --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>53</Код>
									<Наименование>СуммаСНДС --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>Возврат</Код>
					<Наименование>Возврат</Наименование>
					<Порядок>100</Порядок>
					<Правило>
						<Код>ВТМО_ВозвратПоставщику</Код>
						<Наименование>Документ: Возврат товаров между организациями</Наименование>
						<Порядок>50</Порядок>
						<ПередВыгрузкой>Если Источник.РасшифровкаПлатежа.Количество() &gt; 0 Тогда
	ВходящиеДанные.Вставить("ВалютаВзаиморасчетов", Источник.РасшифровкаПлатежа[0].ВалютаВзаиморасчетов);
Иначе
	ВходящиеДанные.Вставить("ВалютаВзаиморасчетов", Источник.Валюта);
КонецЕсли;</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем параметры, зависящие от режима налогообложения
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		// Определяем признак включения НДС в стоимость
		Если УчетнаяПолитика.УСН Тогда
			Объект.НДСВключенВСтоимость = Истина;
		КонецЕсли;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВозвратТоваровМеждуОрганизациями</Источник>
						<Приемник>ДокументСсылка.ВозвратТоваровПоставщику</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>32</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПриВыгрузке>Значение = 	Лев(Значение, 5) + "И" + Сред(Значение, 7);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>ХозяйственнаяОперация --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ХозяйственнаяОперация" Вид="Реквизит" Тип="ПеречислениеСсылка.ХозяйственныеОперации"/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийВозвратТоваровПоставщику"/>
								<ПередВыгрузкой>Значение = "ПокупкаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>ОрганизацияПолучатель --&gt; Контрагент</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								<ПередВыгрузкой>Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение = Источник.Контрагент;
	
Иначе
	
	ОрганизацияКонтрагента = Источник.ОрганизацияПолучатель;
	НовыйКонтрагент		   = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение = НовыйКонтрагент;
	
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		ВходящиеДанные.ВалютаВзаиморасчетов);
Значение.Вставить("ВидДоговора",				"СПоставщиком");
Значение.Вставить("Владелец",					Неопределено);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение.Владелец	 = Источник.Контрагент;
	Значение.ПартнерУТ11 = Источник.Партнер;
	
Иначе
	
	ОрганизацияКонтрагента = Источник.ОрганизацияПолучатель;
	НовыйКонтрагент = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение.Владелец = НовыйКонтрагент;
	
КонецЕсли;

Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ВходящиеДанные.ВалютаВзаиморасчетов;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ВходящиеДанные.ВалютаВзаиморасчетов, Источник.Дата).Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ВходящиеДанные.ВалютаВзаиморасчетов, Источник.Дата).Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>42</Код>
								<Наименование>ДокументПоступления --&gt; Сделка</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="ДокументПоступления" Вид="Реквизит" Тип="ДокументСсылка.ПередачаТоваровМеждуОрганизациями"/>
								<Приемник Имя="Сделка" Вид="Реквизит" Тип="ДокументСсылка.ПоступлениеТоваровУслуг"/>
								<КодПравилаКонвертации>ПДТ_ПередачаТоваровПокупка                        </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>44</Код>
								<Наименование> --&gt; ПоставщикуВыставляетсяСчетФактураНаВозврат</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ПоставщикуВыставляетсяСчетФактураНаВозврат" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>СчетаФактуры = Документы.СчетФактураВыданный.СчетаФактурыПоОснованию(Источник.Ссылка, Источник.Организация);
Значение = СчетаФактуры.Количество() &gt; 0;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>43</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>41</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>20</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Запросы.ТоварыИзВидовЗапасовИКВозвратПоставщику.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запросы.ТоварыИзВидовЗапасовИКВозвратПоставщику.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>24</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>31</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>33</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>39</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>38</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>37</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>36</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>35</Код>
									<Наименование>СтавкаНДС --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>34</Код>
									<Наименование>СуммаНДС --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>40</Код>
									<Наименование>СуммаСНДС --&gt;</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ВТМО_ВозвратКомитенту</Код>
						<Наименование>Документ: Возврат товаров между организациями</Наименование>
						<Порядок>100</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВозвратТоваровМеждуОрганизациями</Источник>
						<Приемник>ДокументСсылка.ВозвратТоваровПоставщику</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>29</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПриВыгрузке>Значение = 	Лев(Значение, 5) + "И" + Сред(Значение, 7);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>ХозяйственнаяОперация --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ХозяйственнаяОперация" Вид="Реквизит" Тип="ПеречислениеСсылка.ХозяйственныеОперации"/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийВозвратТоваровПоставщику"/>
								<ПередВыгрузкой>Значение = "ПокупкаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПриВыгрузке>Значение = Значение = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>41</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>ОрганизацияПолучатель --&gt; Контрагент</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								<ПередВыгрузкой>Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение = Источник.Контрагент;
	
Иначе
	
	ОрганизацияКонтрагента = Источник.ОрганизацияПолучатель;
	НовыйКонтрагент		   = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение = НовыйКонтрагент;
	
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"СКомитентом");
Значение.Вставить("Владелец",					Неопределено);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение.Владелец	 = Источник.Контрагент;
	Значение.ПартнерУТ11 = Источник.Партнер;
	
Иначе
	
	ОрганизацияКонтрагента = Источник.ОрганизацияПолучатель;
	НовыйКонтрагент = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение.Владелец = НовыйКонтрагент;
	
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПриВыгрузке>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Значение, Источник.Дата).Кратность;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПриВыгрузке>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Значение, Источник.Дата).Курс;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>39</Код>
								<Наименование>ДокументПоступления --&gt; Сделка</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="ДокументПоступления" Вид="Реквизит" Тип="ДокументСсылка.ПередачаТоваровМеждуОрганизациями"/>
								<Приемник Имя="Сделка" Вид="Реквизит" Тип="ДокументСсылка.ПоступлениеТоваровУслуг"/>
								<КодПравилаКонвертации>ПДТ_ПередачаТоваровПриемНаКомиссию                </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>40</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>38</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>17</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Запросы.ТоварыИзВидовЗапасовИКВозвратПоставщику.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запросы.ТоварыИзВидовЗапасовИКВозвратПоставщику.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>25</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>30</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>36</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>35</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>34</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>33</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>32</Код>
									<Наименование>СтавкаНДС --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>31</Код>
									<Наименование>СуммаНДС --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>37</Код>
									<Наименование>СуммаСНДС --&gt;</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ВТМО_ВозвратОтПокупателя</Код>
						<Наименование>Документ: Возврат товаров от клиента</Наименование>
						<Порядок>150</Порядок>
						<ПередВыгрузкой>ВходящиеДанные = Новый Структура();
ВходящиеДанные.Вставить("ДатаВходящегоСчетаФактуры");
ВходящиеДанные.Вставить("КодВидаОперации");
ВходящиеДанные.Вставить("КодСпособаПолучения", 1);
ВходящиеДанные.Вставить("НомерВходящегоСчетаФактуры");
ВходящиеДанные.Вставить("ПокупателемВыставляетсяСчетФактураНаВозврат");
ВходящиеДанные.Вставить("ПредъявленСчетФактура");

Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	РеквизитыСчетФактуры = Неопределено;
	Документы.СчетФактураПолученный.СчетаФактурыПоОснованию(Источник.Ссылка, Источник.ОрганизацияПолучатель, РеквизитыСчетФактуры);
	ВходящиеДанные.ПокупателемВыставляетсяСчетФактураНаВозврат = ЗначениеЗаполнено(РеквизитыСчетФактуры.Ссылка);
	
Иначе
	
	Запрос = Новый Запрос("ВЫБРАТЬ ПЕРВЫЕ 1
	|	Док.Дата КАК ДатаВходящегоСчетаФактуры,
	|	Док.КодВидаОперации,
	|	ВЫБОР
	|		КОГДА Док.ВыставленВЭлектронномВиде
	|			ТОГДА 2
	|		ИНАЧЕ 1
	|	КОНЕЦ КАК КодСпособаПолучения,
	|	Док.Номер КАК НомерВходящегоСчетаФактуры,
	|	ИСТИНА КАК ПокупателемВыставляетсяСчетФактураНаВозврат,
	|	ИСТИНА КАК ПредъявленСчетФактура
	|ИЗ
	|	Документ.СчетФактураВыданный КАК Док
	|ГДЕ
	|	Док.ДокументОснование = &amp;Ссылка
	|
	|УПОРЯДОЧИТЬ ПО
	|	Док.НомерИсправления УБЫВ");
	
	Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
	
	Выборка = Запрос.Выполнить().Выбрать();
	Если Выборка.Следующий() Тогда
		ЗаполнитьЗначенияСвойств(ВходящиеДанные, Выборка);
	КонецЕсли;
КонецЕсли;

Если Источник.РасшифровкаПлатежа.Количество() &gt; 0 Тогда
	ВходящиеДанные.Вставить("ВалютаВзаиморасчетов", Источник.РасшифровкаПлатежа[0].ВалютаВзаиморасчетов);
Иначе
	ВходящиеДанные.Вставить("ВалютаВзаиморасчетов", Источник.Валюта);
КонецЕсли;</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);
Выполнить(Алгоритмы.УпрощенныйУчетНДС);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем признак "Отражение в УСН" значением по умолчанию
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка();
		Если УчетнаяПолитика.УСН
			И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы
			И НЕ ЗначениеЗаполнено(Объект.Сделка) Тогда
			ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.Принимаются;
		КонецЕсли;
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) 
				ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВозвратТоваровМеждуОрганизациями</Источник>
						<Приемник>ДокументСсылка.ВозвратТоваровОтПокупателя</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<ПриВыгрузке>Значение = НачалоДня(Значение);</ПриВыгрузке>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПриВыгрузке>Значение = 	Лев(Значение, 5) + "И" + Сред(Значение, 7);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>ОрганизацияПолучатель --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийВозвратТоваровОтПокупателя"/>
								<ПередВыгрузкой>Значение = "ПродажаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Организация --&gt; Контрагент</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								<ПередВыгрузкой>Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение = Источник.Контрагент;
	
Иначе

	ОрганизацияКонтрагента = Источник.Организация;
	НовыйКонтрагент		   = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение = НовыйКонтрагент;
	
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		ВходящиеДанные.ВалютаВзаиморасчетов);
Значение.Вставить("ВидДоговора",				"СПокупателем");
Значение.Вставить("Владелец",					Неопределено);
Значение.Вставить("Организация",				Источник.ОрганизацияПолучатель);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение.Владелец	 = Источник.Контрагент;
	Значение.ПартнерУТ11 = Источник.Партнер;
	
Иначе
	
	ОрганизацияКонтрагента = Источник.Организация;
	НовыйКонтрагент = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение.Владелец = НовыйКонтрагент;
	
КонецЕсли;

Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ВходящиеДанные.ВалютаВзаиморасчетов;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ВходящиеДанные.ВалютаВзаиморасчетов, Источник.Дата).Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ВходящиеДанные.ВалютаВзаиморасчетов, Источник.Дата).Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>ДокументПоступления --&gt; Сделка</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="ДокументПоступления" Вид="Реквизит" Тип="ДокументСсылка.ПередачаТоваровМеждуОрганизациями"/>
								<Приемник Имя="Сделка" Вид="Реквизит"/>
								<КодПравилаКонвертации>ПДТ_ПередачаТоваровПродажа                        </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>44</Код>
								<Наименование> --&gt; ОтразитьВКнигеПокупок</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтразитьВКнигеПокупок" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование> --&gt; ПокупателемВыставляетсяСчетФактураНаВозврат</Наименование>
								<Порядок>850</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ПокупателемВыставляетсяСчетФактураНаВозврат" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование> --&gt; ПредъявленСчетФактура</Наименование>
								<Порядок>900</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование> --&gt; ДатаВходящегоСчетаФактуры</Наименование>
								<Порядок>950</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаВходящегоСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>30</Код>
								<Наименование> --&gt; НомерВходящегоСчетаФактуры</Наименование>
								<Порядок>1000</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НомерВходящегоСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Значение, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>46</Код>
								<Наименование> --&gt; КодВидаОперации</Наименование>
								<Порядок>1050</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КодВидаОперации" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>47</Код>
								<Наименование> --&gt; КодСпособаПолучения</Наименование>
								<Порядок>1100</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КодСпособаПолучения" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>32</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1200</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>35</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1250</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>18</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Запросы.ТоварыИзВидовЗапасовИКВозвратОтПокупателя.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запросы.ТоварыИзВидовЗапасовИКВозвратОтПокупателя.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>27</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование> --&gt; Себестоимость</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Себестоимость" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>33</Код>
								<Наименование>РасшифровкаПлатежа --&gt;</Наименование>
								<Порядок>1350</Порядок>
								<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>34</Код>
									<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>36</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>1400</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>37</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>38</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>39</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>40</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>41</Код>
									<Наименование>СтавкаНДС --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>42</Код>
									<Наименование>СуммаНДС --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>43</Код>
									<Наименование>СуммаСНДС --&gt;</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>45</Код>
								<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
								<Порядок>1450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ВТМО_ВозвратОтКомиссионера</Код>
						<Наименование>Документ: Возврат товаров от клиента</Наименование>
						<Порядок>200</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВозвратТоваровМеждуОрганизациями</Источник>
						<Приемник>ДокументСсылка.ВозвратТоваровОтПокупателя</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<ПриВыгрузке>Значение = НачалоДня(Значение);</ПриВыгрузке>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПриВыгрузке>Значение = 	Лев(Значение, 5) + "И" + Сред(Значение, 7);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>ОрганизацияПолучатель --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийВозвратТоваровОтПокупателя"/>
								<ПередВыгрузкой>Значение = "ПродажаКомиссия";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Организация --&gt; Контрагент</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
								<ПередВыгрузкой>Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение = Источник.Контрагент;
	
Иначе

	ОрганизацияКонтрагента = Источник.Организация;
	НовыйКонтрагент		   = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение = НовыйКонтрагент;
	
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"СКомиссионером");
Значение.Вставить("Владелец",					Неопределено);
Значение.Вставить("Организация",				Источник.ОрганизацияПолучатель);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение.Владелец	 = Источник.Контрагент;
	Значение.ПартнерУТ11 = Источник.Партнер;
	
Иначе
	
	ОрганизацияКонтрагента = Источник.Организация;
	НовыйКонтрагент = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение.Владелец = НовыйКонтрагент;
	
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПриВыгрузке>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Значение, Источник.Дата).Кратность;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПриВыгрузке>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Значение, Источник.Дата).Курс;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
								<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
								<ПриВыгрузке>Значение = Значение = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>ДокументПоступления --&gt; Сделка</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="ДокументПоступления" Вид="Реквизит" Тип="ДокументСсылка.ПередачаТоваровМеждуОрганизациями"/>
								<Приемник Имя="Сделка" Вид="Реквизит"/>
								<КодПравилаКонвертации>ПДТ_ПередачаТоваровПередачаНаКомиссию             </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>45</Код>
								<Наименование> --&gt; ПредъявленСчетФактура</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>46</Код>
								<Наименование> --&gt; ДатаВходящегоСчетаФактуры</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаВходящегоСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
								<ПередВыгрузкой>Пусто = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>48</Код>
								<Наименование> --&gt; НомерВходящегоСчетаФактуры</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НомерВходящегоСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Пусто = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>47</Код>
								<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>32</Код>
								<Наименование>Менеджер --&gt; Ответственный</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>35</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>18</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Запросы.ТоварыИзВидовЗапасовИКВозвратОтКомиссионера.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запросы.ТоварыИзВидовЗапасовИКВозвратОтКомиссионера.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>27</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
								<Свойство>
									<Код>44</Код>
									<Наименование> --&gt; ПереданныеСчетУчета</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ПереданныеСчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>36</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>1200</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>40</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>39</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>38</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>37</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>41</Код>
									<Наименование>СтавкаНДС --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>42</Код>
									<Наименование>СуммаНДС --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>43</Код>
									<Наименование>СуммаСНДС --&gt;</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Правило>
					<Код>ОКОПМО_ОтчетКомиссионераОПродажах</Код>
					<Наименование>Документ: Отчет по комиссии между организациями</Наименование>
					<Порядок>150</Порядок>
					<ПередВыгрузкой>ВходящиеДанные = Новый Структура();
ВходящиеДанные.Вставить("ДатаВходящегоСчетаФактуры");
ВходящиеДанные.Вставить("КодВидаОперации");
ВходящиеДанные.Вставить("КодСпособаПолучения", 1);
ВходящиеДанные.Вставить("НомерВходящегоСчетаФактуры");
ВходящиеДанные.Вставить("ПредъявленСчетФактура");

Если Не Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Запрос = Новый Запрос("ВЫБРАТЬ ПЕРВЫЕ 1
	|	Док.Дата КАК ДатаВходящегоСчетаФактуры,
	|	Док.КодВидаОперации,
	|	ВЫБОР
	|		КОГДА Док.ВыставленВЭлектронномВиде
	|			ТОГДА 2
	|		ИНАЧЕ 1
	|	КОНЕЦ КАК КодСпособаПолучения,
	|	Док.Номер КАК НомерВходящегоСчетаФактуры,
	|	ИСТИНА КАК ПредъявленСчетФактура
	|ИЗ
	|	Документ.СчетФактураВыданный КАК Док
	|ГДЕ
	|	Док.ДокументОснование = &amp;Ссылка
	|
	|УПОРЯДОЧИТЬ ПО
	|	Док.НомерИсправления УБЫВ");
	
	Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
	
	Выборка = Запрос.Выполнить().Выбрать();
	Если Выборка.Следующий() Тогда
		ЗаполнитьЗначенияСвойств(ВходящиеДанные, Выборка);
	КонецЕсли;
КонецЕсли;

// Контрагент

Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда

	ВходящиеДанные.Вставить("Контрагент", Источник.Контрагент);
	
Иначе
	
	ОрганизацияКонтрагента = Источник.Комиссионер;
	НовыйКонтрагент		   = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	ВходящиеДанные.Вставить("Контрагент", НовыйКонтрагент);
	
КонецЕсли;

// Определяем наличие сторно и не сторно операций

ЕстьСторно	 = Ложь;
ЕстьНеСторно = Ложь;

Для Каждого Строка Из Источник.Товары Цикл
	Если Строка.Количество &lt; 0 Тогда
		ЕстьСторно	 = Истина;
	Иначе
		ЕстьНеСторно = Истина;
	КонецЕсли;
КонецЦикла;

ВходящиеДанные.Вставить("ЕстьСторно",	ЕстьСторно);
ВходящиеДанные.Вставить("ЕстьНеСторно", ЕстьНеСторно);

// Вычисление табличных частей документа

Запрос = Новый Запрос(
"ВЫБРАТЬ
|	Товары.НомерСтроки КАК НомерСтрокиДокумента,
|	Товары.Ссылка,
|	Товары.Ссылка.Организация КАК Организация,
|	Товары.Номенклатура,
|	Товары.Характеристика,
|	Товары.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
|	Товары.Количество,
|	Товары.СтавкаНДС,
|	Товары.СуммаСНДС / Товары.Количество КАК ЦенаПередачи,
|	Товары.СуммаСНДС КАК СуммаПередачи,
|	Товары.СуммаПродажи / Товары.Количество КАК Цена,
|	Товары.СуммаПродажи КАК Сумма,
|	Товары.СуммаПродажиНДС КАК СуммаНДС,
|	Товары.СуммаВознаграждения КАК СуммаВознаграждения,
|	Товары.Покупатель КАК Покупатель,
|	Товары.ДатаСчетаФактурыКомиссионера КАК ДатаСФ
|ПОМЕСТИТЬ Товары
|ИЗ
|	Документ.ОтчетПоКомиссииМеждуОрганизациями.Товары КАК Товары
|ГДЕ
|	Товары.Ссылка = &amp;Ссылка
|	И Товары.Количество &gt; 0
|
|СГРУППИРОВАТЬ ПО
|	Товары.НомерСтроки,
|	Товары.Ссылка,
|	Товары.Ссылка.Организация,
|	Товары.Номенклатура,
|	Товары.Характеристика,
|	Товары.Номенклатура.ЕдиницаИзмерения,
|	Товары.Количество,
|	Товары.СтавкаНДС,
|	Товары.СуммаСНДС / Товары.Количество,
|	Товары.СуммаСНДС,
|	Товары.СуммаПродажи / Товары.Количество,
|	Товары.СуммаПродажи,
|	Товары.СуммаПродажиНДС,
|	Товары.СуммаВознаграждения,
|	ВЫБОР
|		КОГДА Товары.Количество &lt; 0
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ,
|	Товары.Покупатель,
|	Товары.ДатаСчетаФактурыКомиссионера
|
|ИНДЕКСИРОВАТЬ ПО
|	Товары.Ссылка,
|	Организация,
|	Покупатель,
|	ДатаСФ
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	Товары.НомерСтрокиДокумента,
|	Товары.Номенклатура,
|	Товары.Характеристика,
|	Товары.ЕдиницаИзмерения,
|	Товары.Количество,
|	Товары.СтавкаНДС,
|	Товары.ЦенаПередачи,
|	Товары.СуммаПередачи,
|	Товары.Цена,
|	Товары.Сумма,
|	Товары.СуммаНДС,
|	Товары.СуммаВознаграждения,
|	Товары.Покупатель,
|	Товары.ДатаСФ,
|	ЛОЖЬ КАК ВидыЗапасовЗаполнены,
|	1 КАК Коэффициент,
|	1 КАК КлючСтроки,
|	ЗНАЧЕНИЕ(Справочник.НомераГТД.ПустаяСсылка) КАК НомерГТД,
|	ЗНАЧЕНИЕ(Справочник.СтраныМира.ПустаяСсылка) КАК СтранаПроисхождения,
|	"""" КАК СчетУчета,
|	0 КАК СуммаНДСВознаграждения
|ИЗ
|	Товары КАК Товары
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ВидыЗапасов.Номенклатура,
|	ВидыЗапасов.Характеристика,
|	ВидыЗапасов.Количество КАК Количество,
|	ВидыЗапасов.НомерГТД,
|	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
|	ВЫБОР
|		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
|			ТОГДА ""ТоварыПереданныеНаКомиссию""
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ КАК СчетУчета,
|	ВЫБОР
|		КОГДА ВидыЗапасов.Количество &lt; 0
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ КАК Сторно,
|	ВидыЗапасов.ДатаСчетаФактурыКомиссионера КАК ДатаСФ,
|	ВидыЗапасов.Покупатель
|ИЗ
|	Документ.ОтчетПоКомиссииМеждуОрганизациями.ВидыЗапасов КАК ВидыЗапасов
|ГДЕ
|	ВидыЗапасов.Ссылка = &amp;Ссылка
|	И ВидыЗапасов.Количество &gt; 0
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	1 КАК КлючСтроки,
|	Товары.Покупатель,
|	Товары.ДатаСФ,
|	МАКСИМУМ(ВЫБОР
|			КОГДА СчетФактураВыданный.Ссылка ЕСТЬ NULL 
|				ТОГДА ЛОЖЬ
|			ИНАЧЕ ИСТИНА
|		КОНЕЦ) КАК ВыставленСФ,
|	МАКСИМУМ(ЕСТЬNULL(СчетФактураВыданный.Ссылка, ЗНАЧЕНИЕ(Документ.СчетФактураВыданный.ПустаяСсылка))) КАК СчетФактура,
|	МИНИМУМ(Товары.НомерСтрокиДокумента) КАК ЗначениеУпорядочивания
|ИЗ
|	Товары КАК Товары
|		ЛЕВОЕ СОЕДИНЕНИЕ Документ.СчетФактураВыданный КАК СчетФактураВыданный
|		ПО Товары.Ссылка = СчетФактураВыданный.ДокументОснование
|			И Товары.Организация = СчетФактураВыданный.Организация
|			И (Товары.ДатаСФ = НАЧАЛОПЕРИОДА(СчетФактураВыданный.Дата, ДЕНЬ)
|				ИЛИ Товары.ДатаСФ = ДАТАВРЕМЯ(1, 1, 1))
|			И Товары.Покупатель = СчетФактураВыданный.Покупатель
|			И (НЕ СчетФактураВыданный.ПометкаУдаления)
|
|СГРУППИРОВАТЬ ПО
|	Товары.Покупатель,
|	Товары.ДатаСФ
|
|УПОРЯДОЧИТЬ ПО
|	ЗначениеУпорядочивания");

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
РезультатыЗапроса = Запрос.ВыполнитьПакет();

РеквизитыПоиска      = "Номенклатура,Характеристика,ДатаСФ,Покупатель";
ЗаполняемыеРеквизиты = "НомерГТД,СтранаПроисхождения,СчетУчета";

ТабТовары = РезультатыЗапроса[1].Выгрузить();

// Распределение НДС вознаграждения

БазаРаспределенияПоСуммеВознаграждения = ТабТовары.ВыгрузитьКолонку("СуммаВознаграждения");
РаспределениеНДСВознаграждения = ОбщегоНазначения.РаспределитьСуммуПропорциональноКоэффициентам(Источник.СуммаНДСВознаграждения, 
	БазаРаспределенияПоСуммеВознаграждения);

Если ЗначениеЗаполнено(РаспределениеНДСВознаграждения) Тогда
	ТабТовары.ЗагрузитьКолонку(РаспределениеНДСВознаграждения, "СуммаНДСВознаграждения");
КонецЕсли;

СтруктураПоиска = Новый Структура(РеквизитыПоиска + ",ВидыЗапасовЗаполнены");
ТабТовары.Индексы.Добавить(РеквизитыПоиска + ",ВидыЗапасовЗаполнены");

ВидыЗапасов = РезультатыЗапроса[2].Выбрать();
Пока ВидыЗапасов.Следующий() Цикл
	
	ЗаполнитьЗначенияСвойств(СтруктураПоиска, ВидыЗапасов, РеквизитыПоиска);
	СтруктураПоиска.ВидыЗапасовЗаполнены = Ложь;
	
	НайденныеСтроки = ТабТовары.НайтиСтроки(СтруктураПоиска);
	
	ОсталосьВидаЗапасов = ВидыЗапасов.Количество;
	Для Каждого СтрокаДокумента Из НайденныеСтроки Цикл
		
		Если ОсталосьВидаЗапасов = 0 Тогда
			Прервать;
		КонецЕсли;
		
		Если СтрокаДокумента.Количество &lt;= ОсталосьВидаЗапасов Тогда
			
			ЗаполнитьЗначенияСвойств(СтрокаДокумента, ВидыЗапасов, ЗаполняемыеРеквизиты);
			СтрокаДокумента.ВидыЗапасовЗаполнены = Истина;
			
			ОсталосьВидаЗапасов = ОсталосьВидаЗапасов - СтрокаДокумента.Количество;
			
		Иначе
			
			// Выделение новой строки с заполненным видом запасов
			НоваяСтрока = ТабТовары.Добавить();
			ЗаполнитьЗначенияСвойств(НоваяСтрока, СтрокаДокумента);
			
			ДоляВидаЗапасовВСтрокеДокумента = ОсталосьВидаЗапасов / СтрокаДокумента.Количество;
			
			НоваяСтрока.Количество             = ОсталосьВидаЗапасов;
			НоваяСтрока.СуммаПередачи          = Окр(СтрокаДокумента.СуммаПередачи * ДоляВидаЗапасовВСтрокеДокумента, 2);
			НоваяСтрока.Сумма                  = Окр(СтрокаДокумента.Сумма * ДоляВидаЗапасовВСтрокеДокумента, 2);
			НоваяСтрока.СуммаНДС               = Окр(СтрокаДокумента.СуммаНДС * ДоляВидаЗапасовВСтрокеДокумента, 2);
			НоваяСтрока.СуммаВознаграждения    = Окр(СтрокаДокумента.СуммаВознаграждения * ДоляВидаЗапасовВСтрокеДокумента, 2);
			НоваяСтрока.СуммаНДСВознаграждения = Окр(СтрокаДокумента.СуммаНДСВознаграждения * ДоляВидаЗапасовВСтрокеДокумента, 2);
			
			ЗаполнитьЗначенияСвойств(НоваяСтрока, ВидыЗапасов, ЗаполняемыеРеквизиты);
			
			СтрокаДокумента.Количество             = СтрокаДокумента.Количество - НоваяСтрока.Количество;
			СтрокаДокумента.СуммаПередачи          = СтрокаДокумента.СуммаПередачи - НоваяСтрока.СуммаПередачи;
			СтрокаДокумента.Сумма                  = СтрокаДокумента.Сумма - НоваяСтрока.Сумма;
			СтрокаДокумента.СуммаНДС               = СтрокаДокумента.СуммаНДС - НоваяСтрока.СуммаНДС;
			СтрокаДокумента.СуммаВознаграждения    = СтрокаДокумента.СуммаВознаграждения - НоваяСтрока.СуммаВознаграждения;
			СтрокаДокумента.СуммаНДСВознаграждения = СтрокаДокумента.СуммаНДСВознаграждения - НоваяСтрока.СуммаНДСВознаграждения;
			
			ОсталосьВидаЗапасов = 0;
			
		КонецЕсли;
		
	КонецЦикла;
	
КонецЦикла;

ТабТовары.Сортировать("НомерСтрокиДокумента Возр");

// Таблица покупателей

ТабПокупатели = РезультатыЗапроса[3].Выгрузить();

СтруктураПоиска = Новый Структура("Покупатель,ДатаСФ");

Для Каждого Строка Из ТабПокупатели Цикл
	
	Строка.КлючСтроки = ТабПокупатели.Индекс(Строка) + 1;
	
	ЗаполнитьЗначенияСвойств(СтруктураПоиска, Строка);
	НайденныйСтроки = ТабТовары.НайтиСтроки(СтруктураПоиска);
	
	Для Каждого СтрокаТоваров Из НайденныеСтроки Цикл
		СтрокаТоваров.КлючСтроки = Строка.КлючСтроки;
	КонецЦикла;
	
КонецЦикла;

ВходящиеДанные.Вставить("Товары", ТабТовары);
ВходящиеДанные.Вставить("Покупатели", ТабПокупатели);</ПередВыгрузкой>
					<ПослеВыгрузкиВФайл>Если ВходящиеДанные.ЕстьСторно Тогда
	
	Если ВходящиеДанные.ЕстьНеСторно Тогда
		
		ТекстСообщения = НСтр("ru = 'Выгрузка документа выполнена с предупреждением
									|Причина: выгружен документ ""Отчет комиссионера о продажах"" на основании документа ""Отчет по комиссии между организациями"", в котором присутствуют сторнирующие строки
									|Последствия: документ загрузится без учета сторнирующих строк 
									|Рекомендация: рекомендуется проконтролировать результат отражения операции в базе-приемнике'");
									
	Иначе

		ТекстСообщения = НСтр("ru = 'Выгрузка документа выполнена с предупреждением
									|Причина: выгружен документ ""Отчет комиссионера о продажах"" на основании документа ""Отчет по комиссии между организациями"", в котором присутствуют только сторнирующие строки
									|Последствия: документ загрузится пустым и непроведенным 
									|Рекомендация: рекомендуется проконтролировать результат отражения операции в базе-приемнике'");
									
	КонецЕсли;
	
	// создаем структуру для записи протокола
	ЗП = ПолучитьСтруктуруЗаписиПротокола();
	
	// заполняем доступные в данном контексте ключи структуры
	ЗП.Объект     = Источник;
	ЗП.ТипОбъекта = ТипЗнч(Источник);
	
	// выполняем запись в протокол и ЖР
	ЗаписатьВПротоколВыполнения(ТекстСообщения, ЗП, Ложь,,,, Перечисления.РезультатыВыполненияОбмена.ВыполненоСПредупреждениями);
	
КонецЕсли;</ПослеВыгрузкиВФайл>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);
Выполнить(Алгоритмы.УпрощенныйУчетНДС);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем параметры, зависящие от режима налогообложения
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		// Определяем признак включения НДС в стоимость
		Если УчетнаяПолитика.УСН Тогда
			Объект.НДСВключенВСтоимость = Истина;
		КонецЕсли;
	КонецЕсли;
	
	Если ПараметрыОбъекта["ЕстьСторно"] Тогда
		
		Если ПараметрыОбъекта["ЕстьНеСторно"] Тогда
		
		ТекстСообщения = НСтр("ru = 'Загрузка документа выполнена с предупреждением
							  |Причина: загружен документ ""Отчет комиссионера о продажах"" на основании документа ""Отчет по комиссии между организациями"", в котором в базе-источнике были сторнирующие строки
							  |Последствия: документ загрузился без учета сторнирующих строк
							  |Рекомендация: рекомендуется проконтролировать результат отражения операции в текущей базе'");
							  
		Иначе

		ТекстСообщения = НСтр("ru = 'Загрузка документа выполнена с предупреждением
							  |Причина: загружен документ ""Отчет комиссионера о продажах"" на основании документа ""Отчет по комиссии между организациями"", в котором в базе-источнике были только сторнирующие строки
							  |Последствия: документ загрузился пустым и непроведенным
							  |Рекомендация: рекомендуется проконтролировать результат отражения операции в текущей базе'");
							  
		КонецЕсли;
		
		// создаем структуру для записи протокола
		ЗП = ПолучитьСтруктуруЗаписиПротокола();
		
		// заполняем доступные в данном контексте ключи структуры
		ЗП.Объект     = Объект;
		ЗП.ТипОбъекта = ТипЗнч(Объект);
		
		// выполняем запись в протокол и ЖР
		ЗаписатьВПротоколВыполнения(ТекстСообщения, ЗП, Ложь,,,, Перечисления.РезультатыВыполненияОбмена.ВыполненоСПредупреждениями);
		
	КонецЕсли;
	
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями</Источник>
					<Приемник>ДокументСсылка.ОтчетКомиссионераОПродажах</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>7</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>42</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "И" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = ВходящиеДанные.ЕстьНеСторно И Источник.Проведен;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование> --&gt; Контрагент</Наименование>
							<Порядок>350</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование> --&gt; ДоговорКонтрагента</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
							<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"СКомиссионером");
Значение.Вставить("Владелец",					Неопределено);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение.Владелец	 = Источник.Контрагент;
	Значение.ПартнерУТ11 = Источник.Партнер;
	
Иначе
	
	ОрганизацияКонтрагента = Источник.Комиссионер;
	НовыйКонтрагент = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение.Владелец = НовыйКонтрагент;
	
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
							<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>СпособРасчетаВознаграждения --&gt; СпособРасчетаКомиссионногоВознаграждения</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="СпособРасчетаВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыРасчетаКомиссионногоВознаграждения"/>
							<Приемник Имя="СпособРасчетаКомиссионногоВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыРасчетаКомиссионногоВознаграждения"/>
							<КодПравилаКонвертации>СпособыРасчетаКомиссионногоВознаграждения         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>ПроцентВознаграждения --&gt; ПроцентКомиссионногоВознаграждения</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="ПроцентВознаграждения" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентКомиссионногоВознаграждения" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>СуммаВознаграждения --&gt; СуммаВознаграждения</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="СуммаВознаграждения" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаВознаграждения" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>СтавкаНДСВознаграждения --&gt; СтавкаНДСВознаграждения</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="СтавкаНДСВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДСВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование> --&gt; СуммаВключаетНДС</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>УдержатьВознаграждение --&gt; УдержатьВознаграждение</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="УдержатьВознаграждение" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="УдержатьВознаграждение" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
							<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование> --&gt; ПредъявленСчетФактура</Наименование>
							<Порядок>950</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование> --&gt; ДатаВходящегоСчетаФактуры</Наименование>
							<Порядок>1000</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДатаВходящегоСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование> --&gt; НомерВходящегоСчетаФактуры</Наименование>
							<Порядок>1050</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерВходящегоСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
							<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Значение, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>67</Код>
							<Наименование> --&gt; КодВидаОперации</Наименование>
							<Порядок>1100</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КодВидаОперации" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>68</Код>
							<Наименование> --&gt; КодСпособаПолучения</Наименование>
							<Порядок>1150</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КодСпособаПолучения" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>Дата --&gt; ДатаВходящегоДокумента</Наименование>
							<Порядок>1200</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>Номер --&gt; НомерВходящегоДокумента</Наименование>
							<Порядок>1250</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>НомерВхДокумента	= Лев(Источник.Номер, 5) + "И" + Сред(Источник.Номер, 7);
Значение			= ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(НомерВхДокумента, Ложь, Истина);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>Менеджер --&gt; Ответственный</Наименование>
							<Порядок>1300</Порядок>
							<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>1350</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>56</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>1400</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>58</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>1450</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ЕстьНеСторно</ИмяПараметраДляПередачи>
						</Свойство>
						<Свойство>
							<Код>57</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>1500</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ЕстьСторно</ИмяПараметраДляПередачи>
						</Свойство>
						<Группа>
							<Код>25</Код>
							<Наименование> --&gt; Товары</Наименование>
							<Порядок>1550</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>29</Код>
								<Наименование> --&gt; Номенклатура</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
								<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование> --&gt; Количество</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование> --&gt; Коэффициент</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>38</Код>
								<Наименование> --&gt; ЦенаПередачи</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЦенаПередачи" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>36</Код>
								<Наименование> --&gt; СуммаПередачи</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаПередачи" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>37</Код>
								<Наименование> --&gt; Цена</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>33</Код>
								<Наименование> --&gt; Сумма</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование> --&gt; СтавкаНДС</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>35</Код>
								<Наименование> --&gt; СуммаНДС</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>34</Код>
								<Наименование> --&gt; СуммаВознаграждения</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаВознаграждения" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>39</Код>
								<Наименование> --&gt; СуммаНДСВознаграждения</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДСВознаграждения" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>30</Код>
								<Наименование> --&gt; НомерГТД</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
								<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>32</Код>
								<Наименование> --&gt; СтранаПроисхождения</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
								<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>40</Код>
								<Наименование> --&gt; СчетУчета</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							</Свойство>
							<Свойство>
								<Код>60</Код>
								<Наименование> --&gt; КлючСтроки</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
							</Свойство>
						</Группа>
						<Группа>
							<Код>61</Код>
							<Наименование> --&gt; Покупатели</Наименование>
							<Порядок>1600</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Покупатели" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>65</Код>
								<Наименование> --&gt; Покупатель</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Покупатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>62</Код>
								<Наименование> --&gt; ВыставленСФ</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВыставленСФ" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>63</Код>
								<Наименование> --&gt; ДатаСФ</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаСФ" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>66</Код>
								<Наименование> --&gt; СчетФактура</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетФактура" Вид="Реквизит" Тип="ДокументСсылка.СчетФактураВыданный"/>
								<КодПравилаКонвертации>СФВ_СчетФактураВыданный                           </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>64</Код>
								<Наименование> --&gt; КлючСтроки</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>43</Код>
							<Наименование>Товары --&gt;</Наименование>
							<Порядок>1650</Порядок>
							<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>44</Код>
								<Наименование>Количество --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>45</Код>
								<Наименование>Номенклатура --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>46</Код>
								<Наименование>СтавкаНДС --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>47</Код>
								<Наименование>СуммаВознаграждения --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="СуммаВознаграждения" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>48</Код>
								<Наименование>СуммаПродажи --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="СуммаПродажи" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>49</Код>
								<Наименование>СуммаПродажиНДС --&gt;</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаПродажиНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>50</Код>
								<Наименование>СуммаСНДС --&gt;</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>69</Код>
								<Наименование>СуммаНДСВознаграждения --&gt;</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="СуммаНДСВознаграждения" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>51</Код>
							<Наименование>ВидыЗапасов --&gt;</Наименование>
							<Порядок>1700</Порядок>
							<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>52</Код>
								<Наименование>ВидЗапасов --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>53</Код>
								<Наименование>Количество --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>54</Код>
								<Наименование>Номенклатура --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>55</Код>
								<Наименование>НомерГТД --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Свойство Отключить="true">
							<Код>59</Код>
							<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
							<Порядок>1750</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ОКТОПМО_ОтчетКомитентуОПродажах</Код>
					<Наименование>Документ: Отчет по комиссии между организациями</Наименование>
					<Порядок>200</Порядок>
					<ПередВыгрузкой>Товары = Источник.Товары.Выгрузить();

Если Товары.Итог("СуммаНДСВознаграждения") &lt;&gt; Источник.СуммаНДСВознаграждения Тогда
	
	БазаРаспределенияПоСуммеВознаграждения = Товары.ВыгрузитьКолонку("СуммаВознаграждения");
	РаспределениеНДСВознаграждения = ОбщегоНазначения.РаспределитьСуммуПропорциональноКоэффициентам(Источник.СуммаНДСВознаграждения, 
		БазаРаспределенияПоСуммеВознаграждения);
		
	Если ЗначениеЗаполнено(РаспределениеНДСВознаграждения) Тогда
		Товары.ЗагрузитьКолонку(РаспределениеНДСВознаграждения, "СуммаНДСВознаграждения");
	КонецЕсли;
		
КонецЕсли;

ВходящиеДанные.Вставить("Товары", Товары);

// Определяем наличие сторно и не сторно операций

ЕстьСторно	 = Ложь;
ЕстьНеСторно = Ложь;

Для Каждого Строка Из Источник.Товары Цикл
	Если Строка.Количество &lt; 0 Тогда
		ЕстьСторно	 = Истина;
	Иначе
		ЕстьНеСторно = Истина;
	КонецЕсли;
КонецЦикла;

ВходящиеДанные.Вставить("ЕстьСторно",	ЕстьСторно);
ВходящиеДанные.Вставить("ЕстьНеСторно", ЕстьНеСторно);</ПередВыгрузкой>
					<ПослеВыгрузкиВФайл>Если ВходящиеДанные.ЕстьСторно Тогда
	
	Если ВходящиеДанные.ЕстьНеСторно Тогда
		
		ТекстСообщения = НСтр("ru = 'Выгрузка документа выполнена с предупреждением
									|Причина: выгружен документ ""Отчет комитенту о продажах"" на основании документа ""Отчет по комиссии между организациями"", в котором присутствуют сторнирующие строки
									|Последствия: документ загрузится без учета сторнирующих строк 
									|Рекомендация: рекомендуется проконтролировать результат отражения операции в базе-приемнике'");
									
	Иначе
	
		ТекстСообщения = НСтр("ru = 'Выгрузка документа выполнена с предупреждением
									|Причина: выгружен документ ""Отчет комитенту о продажах"" на основании документа ""Отчет по комиссии между организациями"", в котором присутствуют только сторнирующие строки
									|Последствия: документ загрузится пустым и непроведенным 
									|Рекомендация: рекомендуется проконтролировать результат отражения операции в базе-приемнике'");
									
	КонецЕсли;
									
	// создаем структуру для записи протокола
	ЗП = ПолучитьСтруктуруЗаписиПротокола();
	
	// заполняем доступные в данном контексте ключи структуры
	ЗП.Объект     = Источник;
	ЗП.ТипОбъекта = ТипЗнч(Источник);
	
	// выполняем запись в протокол и ЖР
	ЗаписатьВПротоколВыполнения(ТекстСообщения, ЗП, Ложь,,,, Перечисления.РезультатыВыполненияОбмена.ВыполненоСПредупреждениями);
	
КонецЕсли;</ПослеВыгрузкиВФайл>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	Если ПараметрыОбъекта["ЕстьСторно"] Тогда
		
		Если ПараметрыОбъекта["ЕстьНеСторно"] Тогда
		
			ТекстСообщения = НСтр("ru = 'Загрузка документа выполнена с предупреждением
								  |Причина: загружен документ ""Отчет комитенту о продажах"" на основании документа ""Отчет по комиссии между организациями"", в котором в базе-источнике были сторнирующие строки
								  |Последствия: документ загрузился без учета сторнирующих строк
								  |Рекомендация: рекомендуется проконтролировать результат отражения операции в текущей базе'");
								  
		Иначе

			ТекстСообщения = НСтр("ru = 'Загрузка документа выполнена с предупреждением
								  |Причина: загружен документ ""Отчет комитенту о продажах"" на основании документа ""Отчет по комиссии между организациями"", в котором в базе-источнике были только сторнирующие строки
								  |Последствия: документ загрузился пустым и непроведенным
								  |Рекомендация: рекомендуется проконтролировать результат отражения операции в текущей базе'");
								  
		КонецЕсли;	
			
		// создаем структуру для записи протокола
		ЗП = ПолучитьСтруктуруЗаписиПротокола();
		
		// заполняем доступные в данном контексте ключи структуры
		ЗП.Объект     = Объект;
		ЗП.ТипОбъекта = ТипЗнч(Объект);
		
		// выполняем запись в протокол и ЖР
		ЗаписатьВПротоколВыполнения(ТекстСообщения, ЗП, Ложь,,,, Перечисления.РезультатыВыполненияОбмена.ВыполненоСПредупреждениями);
		
	КонецЕсли;
	
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями</Источник>
					<Приемник>ДокументСсылка.ОтчетКомитентуОПродажах</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>33</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "И" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = ВходящиеДанные.ЕстьНеСторно И Источник.Проведен;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>48</Код>
							<Наименование> --&gt; ВидОперации</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийОтчетКомитентуОПродажах"/>
							<ПередВыгрузкой>Значение = "ОтчетОПродажах";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Комиссионер --&gt; Организация</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Комиссионер" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Организация --&gt; Контрагент</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							<ПередВыгрузкой>Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда

	Значение = Источник.Контрагент;
	
Иначе
	
	ОрганизацияКонтрагента = Источник.Организация;
	НовыйКонтрагент		   = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение = НовыйКонтрагент;
	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование> --&gt; ДоговорКонтрагента</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
							<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"СКомитентом");
Значение.Вставить("Владелец",					Неопределено);
Значение.Вставить("Организация",				Источник.Комиссионер);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

Если Источник.РасчетыЧерезОтдельногоКонтрагента Тогда
	
	Значение.Владелец	 = Источник.Контрагент;
	Значение.ПартнерУТ11 = Источник.Партнер;
	
Иначе
	
	ОрганизацияКонтрагента = Источник.Организация;
	НовыйКонтрагент = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	
	Значение.Владелец = НовыйКонтрагент;
	
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>СпособРасчетаВознаграждения --&gt; СпособРасчетаКомиссионногоВознаграждения</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="СпособРасчетаВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыРасчетаКомиссионногоВознаграждения"/>
							<Приемник Имя="СпособРасчетаКомиссионногоВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыРасчетаКомиссионногоВознаграждения"/>
							<КодПравилаКонвертации>СпособыРасчетаКомиссионногоВознаграждения         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>СтавкаНДСВознаграждения --&gt; СтавкаНДСВознаграждения</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="СтавкаНДСВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДСВознаграждения" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>СуммаВознаграждения --&gt; СуммаВознаграждения</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="СуммаВознаграждения" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаВознаграждения" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>ПроцентВознаграждения --&gt; ПроцентКомиссионногоВознаграждения</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="ПроцентВознаграждения" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентКомиссионногоВознаграждения" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>УдержатьВознаграждение --&gt; УдержатьВознаграждение</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="УдержатьВознаграждение" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="УдержатьВознаграждение" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>НалогообложениеНДС --&gt; УчитыватьНДС</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="НалогообложениеНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНалогообложенияНДС"/>
							<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Источник.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Услуга --&gt; УслугаПоВознаграждению</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="Услуга" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="УслугаПоВознаграждению" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>Менеджер --&gt; Ответственный</Наименование>
							<Порядок>1000</Порядок>
							<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>1050</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>1100</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>43</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>1150</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ЕстьНеСторно</ИмяПараметраДляПередачи>
						</Свойство>
						<Свойство>
							<Код>42</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>1200</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ЕстьСторно</ИмяПараметраДляПередачи>
						</Свойство>
						<Группа>
							<Код>19</Код>
							<Наименование> --&gt; Товары</Наименование>
							<Порядок>1250</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<ПередВыгрузкой>Если ОбъектКоллекции.Количество &lt; 0 Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
							<Свойство>
								<Код>23</Код>
								<Наименование> --&gt; Номенклатура</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура.ЕдиницаИзмерения;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование> --&gt; Количество</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование> --&gt; Коэффициент</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование> --&gt; ЦенаПоступления</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЦенаПоступления" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.СуммаСНДС / ОбъектКоллекции.Количество;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование> --&gt; СуммаПоступления</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаПоступления" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.СуммаСНДС;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>30</Код>
								<Наименование> --&gt; Цена</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.СуммаПродажи / ОбъектКоллекции.Количество;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование> --&gt; Сумма</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.СуммаПродажи;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование> --&gt; СтавкаНДС</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование> --&gt; СуммаНДС</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.СуммаПродажиНДС;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование> --&gt; СуммаВознаграждения</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаВознаграждения" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование> --&gt; СуммаНДСВознаграждения</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДСВознаграждения" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>46</Код>
								<Наименование> --&gt; ДатаРеализации</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаРеализации" Вид="Реквизит" Тип="Дата"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.ДатаСчетаФактурыКомиссионера;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>47</Код>
								<Наименование> --&gt; Покупатель</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Покупатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							</Свойство>
						</Группа>
						<Свойство Отключить="true">
							<Код>34</Код>
							<Наименование>СуммаНДСВознаграждения --&gt;</Наименование>
							<Порядок>1300</Порядок>
							<Источник Имя="СуммаНДСВознаграждения" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Группа Отключить="true">
							<Код>35</Код>
							<Наименование>Товары --&gt;</Наименование>
							<Порядок>1350</Порядок>
							<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>36</Код>
								<Наименование>Количество --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>37</Код>
								<Наименование>Номенклатура --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>38</Код>
								<Наименование>СуммаНДС --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>39</Код>
								<Наименование>СуммаПродажи --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="СуммаПродажи" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>40</Код>
								<Наименование>СуммаСНДС --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>44</Код>
								<Наименование>СуммаВознаграждения --&gt;</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаВознаграждения" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>45</Код>
								<Наименование>СуммаНДСВознаграждения --&gt;</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="СуммаНДСВознаграждения" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
					</Свойства>
					<Значения/>
				</Правило>
			</Группа>
			<Группа>
				<Код>СкладскиеОперации</Код>
				<Наименование>СкладскиеОперации</Наименование>
				<Порядок>550</Порядок>
				<Группа>
					<Код>КомплектацияРазукомплектация</Код>
					<Наименование>КомплектацияРазукомплектация</Наименование>
					<Порядок>50</Порядок>
					<Правило>
						<Код>СБТ_СборкаИзКомплектующих</Код>
						<Наименование>Документ: Сборка товаров</Наименование>
						<Порядок>50</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект)
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.СборкаТоваров</Источник>
						<Приемник>ДокументСсылка.КомплектацияНоменклатуры</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>6</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>7</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Количество --&gt; Количество</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование> --&gt; НДСвСтоимостиТоваров</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НДСвСтоимостиТоваров" Вид="Реквизит" Тип="ПеречислениеСсылка.ДействиеНДСВСтоимостиТоваров"/>
								<ПередВыгрузкой>Значение = "НеИзменять";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийКомплектацияНоменклатуры"/>
								<ПередВыгрузкой>Значение = "Комплектация";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>10</Код>
								<Наименование> --&gt; Комплектующие</Наименование>
								<Порядок>650</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Комплектующие" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>12</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>19</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>20</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>21</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>22</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>23</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>25</Код>
								<Наименование>Статус --&gt;</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="Статус" Вид="Реквизит" Тип="ПеречислениеСсылка.СтатусыСборокТоваров"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>РБТ_РазборкаНаКомплектующие</Код>
						<Наименование>Документ: Сборка товаров</Наименование>
						<Порядок>100</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект)
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.СборкаТоваров</Источник>
						<Приемник>ДокументСсылка.КомплектацияНоменклатуры</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>6</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>7</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийКомплектацияНоменклатуры"/>
								<ПередВыгрузкой>Значение = "Разукомплектация";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Количество --&gt; Количество</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = Источник.Количество;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование> --&gt; НДСвСтоимостиТоваров</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НДСвСтоимостиТоваров" Вид="Реквизит" Тип="ПеречислениеСсылка.ДействиеНДСВСтоимостиТоваров"/>
								<ПередВыгрузкой>Значение = "НеИзменять";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>11</Код>
								<Наименование>Товары --&gt; Комплектующие</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="Комплектующие" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>14</Код>
									<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>Количество --&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>ДоляСтоимости --&gt; ДоляСтоимости</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ДоляСтоимости" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="ДоляСтоимости" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>17</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>18</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>19</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>20</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>21</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>23</Код>
								<Наименование>Статус --&gt;</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="Статус" Вид="Реквизит" Тип="ПеречислениеСсылка.СтатусыСборокТоваров"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>СРТС_СписаниеТоваровПриСборкеРазборке</Код>
						<Наименование>Документ: Списание товаров</Наименование>
						<Порядок>150</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем признак "Отражение в УСН" значением по умолчанию
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = ?(УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы,
								Перечисления.ОтражениеВУСН.НеПринимаются, Перечисления.ОтражениеВУСН.ПустаяСсылка());
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.СборкаТоваров</Источник>
						<Приемник>ДокументСсылка.СписаниеТоваров</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "К" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеТоваров"/>
								<ПередВыгрузкой>Значение = "ТоварыПродукция";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование> --&gt; Основание</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Значение = Строка(Источник);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>8</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>550</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>18</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>21</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>20</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>19</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>22</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>24</Код>
								<Наименование>Статус --&gt;</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="Статус" Вид="Реквизит" Тип="ПеречислениеСсылка.СтатусыСборокТоваров"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>ПорчаТоваров</Код>
					<Наименование>Пересортица</Наименование>
					<Порядок>100</Порядок>
					<Правило>
						<Код>ПорчаТоваровВОприходованиеТоваров</Код>
						<Наименование>Документ: Пересортица товаров</Наименование>
						<Порядок>50</Порядок>
						<ПослеВыгрузкиВФайл>Если Источник.ПриходоватьТоварыПоСебестоимостиСписания Тогда
	
	// формируем текст сообщения
	ТекстСообщения = НСтр("ru = 'Выгрузка документа выполнена с предупреждением
								|Причина: выгружен документ ""Оприходование товаров"" на основании документа ""Порча товаров"" с признаком ""Товары приходуются по себестоимости списания""
								|Последствия: стоимость оприходования товаров будет установлена в соответствии с видом цен, указанном в документе 
								|Рекомендация: рекомендуется проконтролировать результат отражения операции в базе-приемнике'");
	
	// создаем структуру для записи протокола
	ЗП = ПолучитьСтруктуруЗаписиПротокола();
	
	// заполняем доступные в данном контексте ключи структуры
	ЗП.Объект     = Источник;
	ЗП.ТипОбъекта = ТипЗнч(Источник);
	
	// выполняем запись в протокол и ЖР
	ЗаписатьВПротоколВыполнения(ТекстСообщения, ЗП, Ложь,,,, Перечисления.РезультатыВыполненияОбмена.ВыполненоСПредупреждениями);
	
КонецЕсли;</ПослеВыгрузкиВФайл>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если НЕ ЗначениеЗаполнено(Объект.СтатьяПрочихДоходовРасходов) Тогда
	Объект.СтатьяПрочихДоходовРасходов = Параметры.СтатьяПрочихДоходовРасходов_ОприходованиеТоваров;	
КонецЕсли;

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	Если ПараметрыОбъекта["ПриходоватьТоварыПоСебестоимостиСписания"] Тогда
		
		// формируем текст сообщения
		ТекстСообщения = НСтр("ru = 'Загрузка документа выполнена с предупреждением
							  |Причина: загружен документ ""Оприходование товаров"" на основании документа ""Порча товаров"" с признаком ""Товары приходуются по себестоимости списания""
							  |Последствия: стоимость оприходования товаров установлена в соответствии с видом цен, указанным в операции
							  |Рекомендация: рекомендуется проконтролировать результат отражения операции в текущей базе'");
		
		// создаем структуру для записи протокола
		ЗП = ПолучитьСтруктуруЗаписиПротокола();
		
		// заполняем доступные в данном контексте ключи структуры
		ЗП.Объект     = Объект;
		ЗП.ТипОбъекта = ТипЗнч(Объект);
		
		// выполняем запись в протокол и ЖР
		ЗаписатьВПротоколВыполнения(ТекстСообщения, ЗП, Ложь,,,, Перечисления.РезультатыВыполненияОбмена.ВыполненоСПредупреждениями);
		
	КонецЕсли;
	
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ПорчаТоваров</Источник>
						<Приемник>ДокументСсылка.ОприходованиеТоваров</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>11</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>12</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "К" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование> --&gt; Основание</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Значение = Строка(Источник);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>ПриходоватьТоварыПоСебестоимостиСписания --&gt;</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ПриходоватьТоварыПоСебестоимостиСписания" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ПриходоватьТоварыПоСебестоимостиСписания</ИмяПараметраДляПередачи>
							</Свойство>
							<Группа>
								<Код>1</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Запрос = ?(Источник.ПриходоватьТоварыПоСебестоимостиСписания,
	Запросы["ТоварыИзВидовЗапасовДляПорчиТоваровПриходСебест"],
	Запросы["ТоварыИзВидовЗапасовДляПорчиТоваровПриходЦены"]);

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата",   Источник.Дата);
Запрос.УстановитьПараметр("ВидЦен", Источник.ВидЦены);
Запрос.УстановитьПараметр("РегВалюта", Константы.ВалютаРегламентированногоУчета.Получить());
Запрос.УстановитьПараметр("УпрВалюта", Константы.ВалютаУправленческогоУчета.Получить());
Запрос.Выполнить();

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>6</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>31</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>32</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>27</Код>
								<Наименование>ВидЦены --&gt;</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="ВидЦены" Вид="Реквизит" Тип="СправочникСсылка.ВидыЦен"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Группа Отключить="true">
								<Код>21</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>22</Код>
									<Наименование>НоменклатураОприходование --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="НоменклатураОприходование" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>23</Код>
									<Наименование>ХарактеристикаОприходование --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="ХарактеристикаОприходование" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>24</Код>
									<Наименование>Цена --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>25</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>28</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>29</Код>
									<Наименование>Характеристика --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="Характеристика" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ПорчаТоваровВСписаниеТоваров</Код>
						<Наименование>Документ: Порча товаров</Наименование>
						<Порядок>100</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем признак "Отражение в УСН" значением по умолчанию
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = ?(УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы,
								Перечисления.ОтражениеВУСН.НеПринимаются, Перечисления.ОтражениеВУСН.ПустаяСсылка());
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ПорчаТоваров</Источник>
						<Приемник>ДокументСсылка.СписаниеТоваров</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "К" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеТоваров"/>
								<ПередВыгрузкой>Значение = "ТоварыПродукция";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование> --&gt; Основание</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Значение = Строка(Источник);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>8</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Запросы.ТоварыИзВидовЗапасовДляПорчиТоваровСписание.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запросы.ТоварыИзВидовЗапасовДляПорчиТоваровСписание.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>18</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>22</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>21</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>20</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство Отключить="true">
									<Код>19</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>Пересортица</Код>
					<Наименование>Пересортица</Наименование>
					<Порядок>150</Порядок>
					<Правило>
						<Код>ПТ_ПересортицаТоваровОприходование</Код>
						<Наименование>Документ: Пересортица товаров</Наименование>
						<Порядок>50</Порядок>
						<ПослеВыгрузкиВФайл>Если Источник.ПриходоватьТоварыПоСебестоимостиСписания Тогда
	
	// формируем текст сообщения
	ТекстСообщения = НСтр("ru = 'Выгрузка документа выполнена с предупреждением
								|Причина: выгружен документ ""Оприходование товаров"" на основании документа ""Пересортица товаров"" с признаком ""Товары приходуются по себестоимости списания""
								|Последствия: стоимость оприходования товаров будет установлена в соответствии с видом цен, указанном в документе 
								|Рекомендация: рекомендуется проконтролировать результат отражения операции в базе-приемнике'");
	
	// создаем структуру для записи протокола
	ЗП = ПолучитьСтруктуруЗаписиПротокола();
	
	// заполняем доступные в данном контексте ключи структуры
	ЗП.Объект     = Источник;
	ЗП.ТипОбъекта = ТипЗнч(Источник);
	
	// выполняем запись в протокол и ЖР
	ЗаписатьВПротоколВыполнения(ТекстСообщения, ЗП, Ложь,,,, Перечисления.РезультатыВыполненияОбмена.ВыполненоСПредупреждениями);
	
КонецЕсли;</ПослеВыгрузкиВФайл>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если НЕ ЗначениеЗаполнено(Объект.СтатьяПрочихДоходовРасходов) Тогда
	Объект.СтатьяПрочихДоходовРасходов = Параметры.СтатьяПрочихДоходовРасходов_ОприходованиеТоваров;	
КонецЕсли;

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	Если ПараметрыОбъекта["ПриходоватьТоварыПоСебестоимостиСписания"] Тогда
		
		// формируем текст сообщения
		ТекстСообщения = НСтр("ru = 'Загрузка документа выполнена с предупреждением
							  |Причина: загружен документ ""Оприходование товаров"" на основании документа ""Пересортица товаров"" с признаком ""Товары приходуются по себестоимости списания""
							  |Последствия: стоимость оприходования товаров установлена в соответствии с видом цен, указанным в операции
							  |Рекомендация: рекомендуется проконтролировать результат отражения операции в текущей базе'");
		
		// создаем структуру для записи протокола
		ЗП = ПолучитьСтруктуруЗаписиПротокола();
		
		// заполняем доступные в данном контексте ключи структуры
		ЗП.Объект     = Объект;
		ЗП.ТипОбъекта = ТипЗнч(Объект);
		
		// выполняем запись в протокол и ЖР
		ЗаписатьВПротоколВыполнения(ТекстСообщения, ЗП, Ложь,,,, Перечисления.РезультатыВыполненияОбмена.ВыполненоСПредупреждениями);
		
	КонецЕсли;
	
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ПересортицаТоваров</Источник>
						<Приемник>ДокументСсылка.ОприходованиеТоваров</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>11</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>12</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "П" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование> --&gt; Основание</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Значение = Строка(Источник);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование>СтатьяДоходов --&gt; СтатьяПрочихДоходовРасходов</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="СтатьяДоходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиДоходов"/>
								<Приемник Имя="СтатьяПрочихДоходовРасходов" Вид="Реквизит" Тип="СправочникСсылка.ПрочиеДоходыИРасходы"/>
								<КодПравилаКонвертации>СтатьиДоходовВПрочиеДоходыИРасходы                </КодПравилаКонвертации>
								<ПередВыгрузкой>Если Источник.ПриходоватьТоварыПоСебестоимостиСписания Тогда
	Пусто = Истина;
КонецЕсли;</ПередВыгрузкой>
								<ПриВыгрузке>Если Источник.ПриходоватьТоварыПоСебестоимостиСписания  Тогда
	Пусто = Истина;
ИначеЕсли ЗначениеЗаполнено(Значение) Тогда
	Пусто = НЕ ЗначениеЗаполнено(ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет"));
Иначе
	Пусто = Истина;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование>ПриходоватьТоварыПоСебестоимостиСписания --&gt;</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="ПриходоватьТоварыПоСебестоимостиСписания" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ПриходоватьТоварыПоСебестоимостиСписания</ИмяПараметраДляПередачи>
							</Свойство>
							<Группа>
								<Код>1</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Запрос = Новый Запрос;
Запрос.МенеджерВременныхТаблиц = Новый МенеджерВременныхТаблиц;
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата",   Источник.Дата);
Запрос.УстановитьПараметр("ВидЦен", Источник.ВидЦены);
Запрос.УстановитьПараметр("РегВалюта", Константы.ВалютаРегламентированногоУчета.Получить());
Запрос.УстановитьПараметр("УпрВалюта", Константы.ВалютаУправленческогоУчета.Получить());

Запрос.Текст = "ВЫБРАТЬ
               |	Товары.НоменклатураОприходование КАК Номенклатура,
               |	Товары.ХарактеристикаОприходование КАК Характеристика,
               |	Товары.Номенклатура КАК НоменклатураСписание,
               |	Товары.Характеристика КАК ХарактеристикаСписание,
               |	Товары.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
               |	1 КАК Коэффициент,
               |	Товары.Количество,
               |	Товары.Цена,
               |	Товары.Цена * Товары.Количество КАК Сумма,
               |	Товары.НомерГТД,
               |	Товары.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
               |	Товары.НомерСтроки
               |ПОМЕСТИТЬ ВременнаяТаблицаТовары
               |ИЗ
               |	Документ.ПересортицаТоваров.Товары КАК Товары
               |ГДЕ
               |	Товары.Ссылка = &amp;Ссылка
               |
               |ИНДЕКСИРОВАТЬ ПО
               |	НоменклатураСписание,
               |	ХарактеристикаСписание";


Запрос.Выполнить();

Если Источник.ПриходоватьТоварыПоСебестоимостиСписания Тогда
	
	Запрос.Текст = "ВЫБРАТЬ
	               |	ВременнаяТаблицаТовары.Номенклатура КАК Номенклатура,
	               |	ВременнаяТаблицаТовары.Характеристика КАК Характеристика,
	               |	ЦеныНоменклатурыСрезПоследних.Цена / ЕСТЬNULL(ЦеныНоменклатурыСрезПоследних.Упаковка.Коэффициент, 1) * ВЫБОР
	               |		КОГДА &amp;РегВалюта &lt;&gt; ЦеныНоменклатурыСрезПоследних.Валюта
	               |			ТОГДА ВЫБОР
	               |					КОГДА ЕСТЬNULL(КурсыВалютыЦены.Кратность, 0) &gt; 0
	               |							И ЕСТЬNULL(КурсыВалютыЦены.Курс, 0) &gt; 0
	               |							И ЕСТЬNULL(КурсыВалюты.Кратность, 0) &gt; 0
	               |							И ЕСТЬNULL(КурсыВалюты.Курс, 0) &gt; 0
	               |						ТОГДА КурсыВалютыЦены.Курс * КурсыВалюты.Кратность / (КурсыВалюты.Курс * КурсыВалютыЦены.Кратность)
	               |					ИНАЧЕ 0
	               |				КОНЕЦ
	               |		ИНАЧЕ 1
	               |	КОНЕЦ КАК Цена,
	               |	ЦеныНоменклатурыСрезПоследних.Цена / ЕСТЬNULL(ЦеныНоменклатурыСрезПоследних.Упаковка.Коэффициент, 1) * ВЫБОР
	               |		КОГДА &amp;РегВалюта &lt;&gt; ЦеныНоменклатурыСрезПоследних.Валюта
	               |			ТОГДА ВЫБОР
	               |					КОГДА ЕСТЬNULL(КурсыВалютыЦены.Кратность, 0) &gt; 0
	               |							И ЕСТЬNULL(КурсыВалютыЦены.Курс, 0) &gt; 0
	               |							И ЕСТЬNULL(КурсыВалюты.Кратность, 0) &gt; 0
	               |							И ЕСТЬNULL(КурсыВалюты.Курс, 0) &gt; 0
	               |						ТОГДА КурсыВалютыЦены.Курс * КурсыВалюты.Кратность / (КурсыВалюты.Курс * КурсыВалютыЦены.Кратность)
	               |					ИНАЧЕ 0
	               |				КОНЕЦ
	               |		ИНАЧЕ 1
	               |	КОНЕЦ * ВременнаяТаблицаТовары.Количество КАК Сумма,
	               |	ВременнаяТаблицаТовары.НомерГТД,
	               |	ВременнаяТаблицаТовары.СтранаПроисхождения,
	               |	ВременнаяТаблицаТовары.ЕдиницаИзмерения,
	               |	ВременнаяТаблицаТовары.Коэффициент,
	               |	ВременнаяТаблицаТовары.Количество
	               |ИЗ
	               |	ВременнаяТаблицаТовары КАК ВременнаяТаблицаТовары
	               |		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры.СрезПоследних(
	               |				&amp;Дата,
	               |				ВидЦены = &amp;ВидЦен
	               |					И (Номенклатура, Характеристика) В
	               |						(ВЫБРАТЬ
	               |							ВременнаяТаблицаТовары.НоменклатураСписание,
	               |							ВременнаяТаблицаТовары.ХарактеристикаСписание
	               |						ИЗ
	               |							ВременнаяТаблицаТовары КАК ВременнаяТаблицаТовары)) КАК ЦеныНоменклатурыСрезПоследних
	               |		ПО ВременнаяТаблицаТовары.НоменклатураСписание = ЦеныНоменклатурыСрезПоследних.Номенклатура
	               |			И ВременнаяТаблицаТовары.ХарактеристикаСписание = ЦеныНоменклатурыСрезПоследних.Характеристика
	               |		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, ) КАК КурсыВалютыЦены
	               |		ПО (ЦеныНоменклатурыСрезПоследних.Валюта = КурсыВалютыЦены.Валюта)
	               |		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;РегВалюта) КАК КурсыВалюты
	               |		ПО (ИСТИНА)
	               |
	               |УПОРЯДОЧИТЬ ПО
	               |	ВременнаяТаблицаТовары.НомерСтроки";
	
	Запрос.УстановитьПараметр("Дата",   Источник.Дата);
	Запрос.УстановитьПараметр("ВидЦен", Источник.ВидЦены);
	Запрос.УстановитьПараметр("Валюта", Константы.ВалютаРегламентированногоУчета.Получить());
	
Иначе
	
	Запрос.Текст = "ВЫБРАТЬ
	               |	ВременнаяТаблицаТовары.Номенклатура,
	               |	ВременнаяТаблицаТовары.Характеристика,
	               |	ВременнаяТаблицаТовары.ЕдиницаИзмерения,
	               |	ВременнаяТаблицаТовары.Коэффициент,
	               |	ВременнаяТаблицаТовары.Количество,
	               |	ВременнаяТаблицаТовары.Цена * ВЫБОР
	               |		КОГДА &amp;РегВалюта &lt;&gt; &amp;УпрВалюта
	               |			ТОГДА ВЫБОР
	               |					КОГДА ЕСТЬNULL(КурсыВалютыЦены.Кратность, 0) &gt; 0
	               |							И ЕСТЬNULL(КурсыВалютыЦены.Курс, 0) &gt; 0
	               |							И ЕСТЬNULL(КурсыВалюты.Кратность, 0) &gt; 0
	               |							И ЕСТЬNULL(КурсыВалюты.Курс, 0) &gt; 0
	               |						ТОГДА КурсыВалютыЦены.Курс * КурсыВалюты.Кратность / (КурсыВалюты.Курс * КурсыВалютыЦены.Кратность)
	               |					ИНАЧЕ 0
	               |				КОНЕЦ
	               |		ИНАЧЕ 1
	               |	КОНЕЦ КАК Цена,
	               |	ВременнаяТаблицаТовары.Сумма * ВЫБОР
	               |		КОГДА &amp;РегВалюта &lt;&gt; &amp;УпрВалюта
	               |			ТОГДА ВЫБОР
	               |					КОГДА ЕСТЬNULL(КурсыВалютыЦены.Кратность, 0) &gt; 0
	               |							И ЕСТЬNULL(КурсыВалютыЦены.Курс, 0) &gt; 0
	               |							И ЕСТЬNULL(КурсыВалюты.Кратность, 0) &gt; 0
	               |							И ЕСТЬNULL(КурсыВалюты.Курс, 0) &gt; 0
	               |						ТОГДА КурсыВалютыЦены.Курс * КурсыВалюты.Кратность / (КурсыВалюты.Курс * КурсыВалютыЦены.Кратность)
	               |					ИНАЧЕ 0
	               |				КОНЕЦ
	               |		ИНАЧЕ 1
	               |	КОНЕЦ КАК Сумма,
	               |	ВременнаяТаблицаТовары.НомерГТД,
	               |	ВременнаяТаблицаТовары.СтранаПроисхождения
	               |ИЗ
	               |	ВременнаяТаблицаТовары КАК ВременнаяТаблицаТовары
	               |		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;УпрВалюта) КАК КурсыВалютыЦены
	               |		ПО (ИСТИНА)
	               |		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;РегВалюта) КАК КурсыВалюты
	               |		ПО (ИСТИНА)
	               |
	               |УПОРЯДОЧИТЬ ПО
	               |	ВременнаяТаблицаТовары.НомерСтроки";
	
КонецЕсли;

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>4</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; Цена</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>30</Код>
								<Наименование>ВидЦены --&gt;</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="ВидЦены" Вид="Реквизит" Тип="СправочникСсылка.ВидыЦен"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Группа Отключить="true">
								<Код>22</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>23</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>24</Код>
									<Наименование>НоменклатураОприходование --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="НоменклатураОприходование" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>25</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>26</Код>
									<Наименование>ХарактеристикаОприходование --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="ХарактеристикаОприходование" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>27</Код>
									<Наименование>Цена --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>31</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>32</Код>
									<Наименование>Характеристика --&gt;</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="Характеристика" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ПТ_ПересортицаТоваровСписание</Код>
						<Наименование>Документ: Пересортица товаров</Наименование>
						<Порядок>100</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем признак "Отражение в УСН" значением по умолчанию
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = ?(УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы,
								Перечисления.ОтражениеВУСН.НеПринимаются, Перечисления.ОтражениеВУСН.ПустаяСсылка());
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ПересортицаТоваров</Источник>
						<Приемник>ДокументСсылка.СписаниеТоваров</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "П" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеТоваров"/>
								<ПередВыгрузкой>Значение = "ТоварыПродукция";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование> --&gt; Основание</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Значение = Строка(Источник);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>8</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Запросы.ТоварыИзВидовЗапасовДляПересортицыСписание.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запросы.ТоварыИзВидовЗапасовДляПересортицыСписание.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>10</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>19</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>20</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>21</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>22</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>23</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>ВнутреннееПотреблениеТоваров</Код>
					<Наименование>Внутреннее потребление товаров</Наименование>
					<Порядок>200</Порядок>
					<Правило>
						<Код>ВПТ_ТребованиеНакладная</Код>
						<Наименование>Документ: Требование-накладная</Наименование>
						<Порядок>50</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	// Определяем подразделение затрат по умолчанию
	Организация = Объект.Организация;
	ПодразделениеОрганизации = Неопределено;
	Выполнить(Алгоритмы.ПолучитьПодразделениеОрганизацииПоУмолчанию);
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	Для Каждого СтрокаТЧ Из Объект.Материалы Цикл
		
		// Заполняем номенклатурную группу значением по умолчанию
		Если НЕ ЗначениеЗаполнено(СтрокаТЧ.НоменклатурнаяГруппа) Тогда
			СтрокаТЧ.НоменклатурнаяГруппа = СтрокаТЧ.Номенклатура.НоменклатурнаяГруппа;
		КонецЕсли;
		
		Если НЕ ЗначениеЗаполнено(СтрокаТЧ.НоменклатурнаяГруппа) ИЛИ СтрокаТЧ.НоменклатурнаяГруппа = Справочники.НоменклатурныеГруппы.ПустаяСсылка() Тогда
			СтрокаТЧ.НоменклатурнаяГруппа = Параметры.НоменклатурнаяГруппаПоУмолчанию;
		КонецЕсли;
		
		// Заполняем подразделение затрат значением по умолчанию
		Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ПодразделениеЗатрат) И ЗначениеЗаполнено(ПодразделениеОрганизации) Тогда
			СтрокаТЧ.ПодразделениеЗатрат = ПодразделениеОрганизации;
		КонецЕсли;
		
	КонецЦикла;
	
	// Заполняем признак "Отражение в УСН" значением по умолчанию
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = ?(УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы,
								Перечисления.ОтражениеВУСН.Принимаются, Перечисления.ОтражениеВУСН.ПустаяСсылка());
			
		// Заполняем отражение в УСН для ТЧ Материалы
		Для Каждого СтрокаТЧ Из Объект.Материалы Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВнутреннееПотреблениеТоваров</Источник>
						<Приемник>ДокументСсылка.ТребованиеНакладная</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование> --&gt; НДСвСтоимостиТоваров</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НДСвСтоимостиТоваров" Вид="Реквизит" Тип="ПеречислениеСсылка.ДействиеНДСВСтоимостиТоваров"/>
								<ПередВыгрузкой>Значение = "НеИзменять";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование> --&gt; СчетаУчетаЗатратВТаблице</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетаУчетаЗатратВТаблице" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = "Истина";</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>7</Код>
								<Наименование> --&gt; Материалы</Наименование>
								<Порядок>600</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>13</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
									<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>32</Код>
									<Наименование> --&gt; СчетЗатрат</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетЗатрат" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
									<ПередВыгрузкой>Значение = ОбщегоНазначения.ПолучитьЗначениеРеквизита(ОбъектКоллекции.СтатьяРасходов, "КорреспондирующийСчет");</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>30</Код>
									<Наименование> --&gt; СтатьяЗатрат</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтатьяЗатрат" Вид="Реквизит" Тип="СправочникСсылка.СтатьиЗатрат"/>
									<КодПравилаКонвертации>СтатьиРасходовВСтатьиЗатрат                       </КодПравилаКонвертации>
									<ПередВыгрузкой>Значение = ОбъектКоллекции.СтатьяРасходов;

Если ЗначениеЗаполнено(Значение) Тогда
	
	КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет");
	Пусто = НЕ ЗначениеЗаполнено(КоррСчет) ИЛИ Найти(КоррСчет, "91.02") &gt; 0;
	
Иначе
	Пусто = Истина;	
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>22</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>23</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>24</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>25</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство Отключить="true">
									<Код>26</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ВПТ_ПередачаМатериаловВЭксплуатацию</Код>
						<Наименование>Документ: Внутреннее потребление (списание) товаров</Наименование>
						<Порядок>100</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

// Заполняем местонахождение по умолчанию
Организация = Объект.Организация;
ПодразделениеОрганизации = Неопределено;
Выполнить(Алгоритмы.ПолучитьПодразделениеОрганизацииПоУмолчанию);

Если НЕ ЗначениеЗаполнено(Объект.Местонахождение) И ЗначениеЗаполнено(ПодразделениеОрганизации) Тогда
	Объект.Местонахождение = ПодразделениеОрганизации;
КонецЕсли;

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	// Заполняем табличные части по тому же алгоритму, как если бы вводили документ на основании документа "Поступление товаров и услуг"
	
	Счет10_09   = ПланыСчетов.Хозрасчетный.ИнвентарьИХозяйственныеПринадлежности;
	Счет10_11_2 = ПланыСчетов.Хозрасчетный.СпецоснасткаВЭксплуатации;
	
	Товары = ПараметрыОбъекта.Получить("СпецодеждаТабличнаяЧасть");
	
	Объект.ИнвентарьИХозяйственныеПринадлежности.Очистить();
	Объект.Спецоснастка.Очистить();
	Объект.Спецодежда.Очистить();
	
	Для Каждого ТекСтрокаТовары Из Товары Цикл
		
		СчетаУчета = БухгалтерскийУчет.ПолучитьСчетаУчетаНоменклатуры(Объект.Организация, ТекСтрокаТовары.Номенклатура, Объект.Склад);
		
		Если СчетаУчета.СчетУчета = Счет10_09 Тогда
			
			НоваяСтрока	= Объект.ИнвентарьИХозяйственныеПринадлежности.Добавить();
			НоваяСтрока.ФизЛицо					= ТекСтрокаТовары.ФизическоеЛицо;
			НоваяСтрока.СпособОтраженияРасходов = ТекСтрокаТовары.СпособОтраженияРасходов;
			
		ИначеЕсли ЗначениеЗаполнено(СчетаУчета.СчетПередачи)
			И (СчетаУчета.СчетПередачи = Счет10_11_2 ИЛИ СчетаУчета.СчетПередачи.ПринадлежитЭлементу(Счет10_11_2)) Тогда
			
			НоваяСтрока = Объект.Спецоснастка.Добавить();
			НоваяСтрока.СчетПередачи			= СчетаУчета.СчетПередачи;
			НоваяСтрока.НазначениеИспользования	= ТекСтрокаТовары.НазначениеИспользования;
			
		Иначе
			
			НоваяСтрока = Объект.Спецодежда.Добавить();
			НоваяСтрока.СчетПередачи			= СчетаУчета.СчетПередачи;
			НоваяСтрока.ФизЛицо					= ТекСтрокаТовары.ФизическоеЛицо;
			НоваяСтрока.НазначениеИспользования	= ТекСтрокаТовары.НазначениеИспользования;
			
		КонецЕсли;
		
		НоваяСтрока.Количество    = ТекСтрокаТовары.Количество;
		НоваяСтрока.Номенклатура  = ТекСтрокаТовары.Номенклатура;
		НоваяСтрока.СчетУчета     = СчетаУчета.СчетУчета;
	КонецЦикла;
	
	// Заполняем признак "Отражение в УСН" значением по умолчанию
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = ?(УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы,
								Перечисления.ОтражениеВУСН.Принимаются, Перечисления.ОтражениеВУСН.ПустаяСсылка());
			
		// Заполняем отражение в УСН для ТЧ Спецодежда
		Для Каждого СтрокаТЧ Из Объект.Спецодежда Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
		// Заполняем отражение в УСН для ТЧ Спецоснастка
		Для Каждого СтрокаТЧ Из Объект.Спецоснастка Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
		// Заполняем отражение в УСН для ТЧ ИнвентарьИХозяйственныеПринадлежности
		Для Каждого СтрокаТЧ Из Объект.ИнвентарьИХозяйственныеПринадлежности Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<Источник>ДокументСсылка.ВнутреннееПотреблениеТоваров</Источник>
						<Приемник>ДокументСсылка.ПередачаМатериаловВЭксплуатацию</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>6</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>9</Код>
								<Наименование>Товары --&gt; Спецодежда</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="Спецодежда" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>11</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									<ИмяПараметраДляПередачи>Номенклатура</ИмяПараметраДляПередачи>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>Количество</ИмяПараметраДляПередачи>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>ФизическоеЛицо --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="ФизическоеЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
									<Приемник Имя="" Вид=""/>
									<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
									<ИмяПараметраДляПередачи>ФизическоеЛицо</ИмяПараметраДляПередачи>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>СтатьяРасходов --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СтатьяРасходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиРасходов"/>
									<Приемник Имя="" Вид=""/>
									<КодПравилаКонвертации>СР_СпособыОтраженияРасходовПоАмортизации          </КодПравилаКонвертации>
									<ИмяПараметраДляПередачи>СпособОтраженияРасходов</ИмяПараметраДляПередачи>
									<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	Пусто = НЕ ЗначениеЗаполнено(ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет"));
Иначе
	Пусто = Истина;	
КонецЕсли;
ВыгрузитьТолькоСсылку = Ложь;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование>СтатьяРасходов --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="СтатьяРасходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиРасходов"/>
									<Приемник Имя="" Вид=""/>
									<КодПравилаКонвертации>СР_НазначенияИспользования                        </КодПравилаКонвертации>
									<ИмяПараметраДляПередачи>НазначениеИспользования</ИмяПараметраДляПередачи>
									<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда

	ИсходящиеДанные = Новый Структура;
	ИсходящиеДанные.Вставить("СрокПолезногоИспользования", ОбъектКоллекции.СрокЭксплуатации);
	ИсходящиеДанные.Вставить("Владелец", ОбъектКоллекции.Номенклатура);
	Пусто = НЕ ЗначениеЗаполнено(ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет"));
	
Иначе
	Пусто = Истина;	
КонецЕсли;

ВыгрузитьТолькоСсылку = Ложь;</ПриВыгрузке>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>Количество --&gt; Количество</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ПОТ_ВозвратМатериаловИзЭксплуатации</Код>
						<Наименование>Документ: Прочее оприходование товаров</Наименование>
						<Порядок>150</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

// Заполняем подразделение организации по умолчанию
Организация = Объект.Организация;
ПодразделениеОрганизации = Неопределено;
Выполнить(Алгоритмы.ПолучитьПодразделениеОрганизацииПоУмолчанию);

Если НЕ ЗначениеЗаполнено(Объект.ПодразделениеОрганизации) И ЗначениеЗаполнено(ПодразделениеОрганизации) Тогда
	Объект.ПодразделениеОрганизации = ПодразделениеОрганизации;
КонецЕсли;

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	// Заполняем табличные части по тому же алгоритму, как если бы вводили документ на основании документа "Поступление товаров и услуг"
	
	Счет10_09   = ПланыСчетов.Хозрасчетный.ИнвентарьИХозяйственныеПринадлежности;
	Счет10_11_2 = ПланыСчетов.Хозрасчетный.СпецоснасткаВЭксплуатации;
	
	Товары = ПараметрыОбъекта.Получить("СпецодеждаТабличнаяЧасть");
	
	Объект.Спецоснастка.Очистить();
	Объект.Спецодежда.Очистить();
	
	Для Каждого ТекСтрокаТовары Из Товары Цикл
		
		СчетаУчета = БухгалтерскийУчет.ПолучитьСчетаУчетаНоменклатуры(Объект.Организация, ТекСтрокаТовары.Номенклатура, Объект.Склад);
		
		Если ЗначениеЗаполнено(СчетаУчета.СчетПередачи)
			И (СчетаУчета.СчетПередачи = Счет10_11_2 ИЛИ СчетаУчета.СчетПередачи.ПринадлежитЭлементу(Счет10_11_2)) Тогда
			
			НоваяСтрока = Объект.Спецоснастка.Добавить();
			НоваяСтрока.СчетПередачи = СчетаУчета.СчетПередачи;
			
		Иначе
			
			НоваяСтрока = Объект.Спецодежда.Добавить();
			НоваяСтрока.СчетПередачи = СчетаУчета.СчетПередачи;
			НоваяСтрока.ФизЛицо		 = ТекСтрокаТовары.ФизическоеЛицо;
			
		КонецЕсли;
		
		НоваяСтрока.Количество						= ТекСтрокаТовары.Количество;
		НоваяСтрока.Номенклатура  					= ТекСтрокаТовары.Номенклатура;
		НоваяСтрока.ПартияМатериаловВЭксплуатации   = ТекСтрокаТовары.ПартияМатериаловВЭксплуатации;
		НоваяСтрока.СчетУчета						= СчетаУчета.СчетУчета;
		
	КонецЦикла;
	
	// Заполняем признак "Отражение в УСН" значением по умолчанию
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = ?(УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы,
								Перечисления.ОтражениеВУСН.Принимаются, Перечисления.ОтражениеВУСН.ПустаяСсылка());
			
		// Заполняем отражение в УСН для ТЧ Спецодежда
		Для Каждого СтрокаТЧ Из Объект.Спецодежда Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
		// Заполняем отражение в УСН для ТЧ Спецоснастка
		Для Каждого СтрокаТЧ Из Объект.Спецоснастка Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<Источник>ДокументСсылка.ПрочееОприходованиеТоваров</Источник>
						<Приемник>ДокументСсылка.ВозвратМатериаловИзЭксплуатации</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>6</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>9</Код>
								<Наименование>Товары --&gt; Спецодежда</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="Спецодежда" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>11</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									<ИмяПараметраДляПередачи>Номенклатура</ИмяПараметраДляПередачи>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>Количество</ИмяПараметраДляПередачи>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>ФизическоеЛицо --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ФизическоеЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
									<Приемник Имя="" Вид=""/>
									<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
									<ИмяПараметраДляПередачи>ФизическоеЛицо</ИмяПараметраДляПередачи>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>ПередачаВЭксплуатацию --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="ПередачаВЭксплуатацию" Вид="Реквизит" Тип="ДокументСсылка.ВнутреннееПотреблениеТоваров"/>
									<Приемник Имя="" Вид=""/>
									<КодПравилаКонвертации>ВПТ_ПередачаМатериаловВЭксплуатацию               </КодПравилаКонвертации>
									<ИмяПараметраДляПередачи>ПартияМатериаловВЭксплуатации</ИмяПараметраДляПередачи>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>Количество --&gt; Количество</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ВПТ_СписаниеТоваровПриПередачеВПроизводство</Код>
						<Наименование>Документ: Списание товаров</Наименование>
						<Порядок>200</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем признак "Отражение в УСН" значением по умолчанию
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = ?(УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы,
								Перечисления.ОтражениеВУСН.НеПринимаются, Перечисления.ОтражениеВУСН.ПустаяСсылка());
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВнутреннееПотреблениеТоваров</Источник>
						<Приемник>ДокументСсылка.СписаниеТоваров</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "Т" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеТоваров"/>
								<ПередВыгрузкой>Значение = "ТоварыПродукция";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование> --&gt; Основание</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Значение = Строка(Источник);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>8</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>550</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование> --&gt; НомерГТД</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование> --&gt; СтранаПроисхождения</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>18</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>21</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>20</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>19</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство Отключить="true">
									<Код>22</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
									<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ПОТ_ОтчетПроизводстваЗаСмену</Код>
						<Наименование>Документ: Прочее оприходование товаров</Наименование>
						<Порядок>250</Порядок>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

// Заполняем подразделение затрат по умолчанию
Организация = Объект.Организация;
ПодразделениеОрганизации = Неопределено;
Выполнить(Алгоритмы.ПолучитьПодразделениеОрганизацииПоУмолчанию);

Если НЕ ЗначениеЗаполнено(Объект.ПодразделениеЗатрат) И ЗначениеЗаполнено(ПодразделениеОрганизации) Тогда
	Объект.ПодразделениеЗатрат = ПодразделениеОрганизации;
КонецЕсли;

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	Для Каждого СтрокаТЧ Из Объект.Продукция Цикл
		
		// Заполняем счета учета значениями по умолчанию
		Если НЕ ЗначениеЗаполнено(СтрокаТЧ.Счет) Тогда
			СчетаУчета = БухгалтерскийУчет.ПолучитьСчетаУчетаНоменклатуры(Объект.Организация, СтрокаТЧ.Номенклатура, Объект.Склад);
			СтрокаТЧ.Счет = СчетаУчета.СчетУчета;
		КонецЕсли;
	
		// Заполняем номенклатурную группу значением по умолчанию
		Если НЕ ЗначениеЗаполнено(СтрокаТЧ.НоменклатурнаяГруппа) Тогда
			СтрокаТЧ.НоменклатурнаяГруппа = СтрокаТЧ.Номенклатура.НоменклатурнаяГруппа;
		КонецЕсли;
		Если НЕ ЗначениеЗаполнено(СтрокаТЧ.НоменклатурнаяГруппа) Тогда
			СтрокаТЧ.НоменклатурнаяГруппа = Параметры.НоменклатурнаяГруппаПоУмолчанию;
		КонецЕсли;
	КонецЦикла;
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<Источник>ДокументСсылка.ПрочееОприходованиеТоваров</Источник>
						<Приемник>ДокументСсылка.ОтчетПроизводстваЗаСмену</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Склад --&gt; Склад</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование> --&gt; ИспользоватьМатериалы</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИспользоватьМатериалы" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование> --&gt; СчетЗатрат</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетЗатрат" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								<ПередВыгрузкой>Если Источник.Товары.Количество() = 1 Тогда
	Значение = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.Товары[0].СтатьяРасходов, "КорреспондирующийСчет");
Иначе
	Значение = Пусто;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>9</Код>
								<Наименование> --&gt; Продукция</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Продукция" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Запрос = Новый Запрос();
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата", Источник.Дата);
Запрос.УстановитьПараметр("РегВалюта", Константы.ВалютаРегламентированногоУчета.Получить());
Запрос.УстановитьПараметр("УпрВалюта", Константы.ВалютаУправленческогоУчета.Получить());

Запрос.Текст = "ВЫБРАТЬ
               |	Товары.Номенклатура,
               |	Товары.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
               |	1 КАК Коэффициент,
               |	Товары.Количество,
               |	Товары.Цена * ВЫБОР
               |		КОГДА &amp;РегВалюта &lt;&gt; &amp;УпрВалюта
               |			ТОГДА ВЫБОР
               |					КОГДА ЕСТЬNULL(КурсыВалютыЦены.Кратность, 0) &gt; 0
               |							И ЕСТЬNULL(КурсыВалютыЦены.Курс, 0) &gt; 0
               |							И ЕСТЬNULL(КурсыВалюты.Кратность, 0) &gt; 0
               |							И ЕСТЬNULL(КурсыВалюты.Курс, 0) &gt; 0
               |						ТОГДА КурсыВалютыЦены.Курс * КурсыВалюты.Кратность / (КурсыВалюты.Курс * КурсыВалютыЦены.Кратность)
               |					ИНАЧЕ 0
               |				КОНЕЦ
               |		ИНАЧЕ 1
               |	КОНЕЦ КАК ПлановаяСтоимость,
               |	Товары.Сумма * ВЫБОР
               |		КОГДА &amp;РегВалюта &lt;&gt; &amp;УпрВалюта
               |			ТОГДА ВЫБОР
               |					КОГДА ЕСТЬNULL(КурсыВалютыЦены.Кратность, 0) &gt; 0
               |							И ЕСТЬNULL(КурсыВалютыЦены.Курс, 0) &gt; 0
               |							И ЕСТЬNULL(КурсыВалюты.Кратность, 0) &gt; 0
               |							И ЕСТЬNULL(КурсыВалюты.Курс, 0) &gt; 0
               |						ТОГДА КурсыВалютыЦены.Курс * КурсыВалюты.Кратность / (КурсыВалюты.Курс * КурсыВалютыЦены.Кратность)
               |					ИНАЧЕ 0
               |				КОНЕЦ
               |		ИНАЧЕ 1
               |	КОНЕЦ КАК СуммаПлановая
               |ИЗ
               |	Документ.ПрочееОприходованиеТоваров.Товары КАК Товары
               |		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;УпрВалюта) КАК КурсыВалютыЦены
               |		ПО (ИСТИНА)
               |		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;РегВалюта) КАК КурсыВалюты
               |		ПО (ИСТИНА)
               |ГДЕ
               |	Товары.Ссылка = &amp;Ссылка";
			   
КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>10</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование> --&gt; СуммаПлановая</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаПлановая" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование> --&gt; ПлановаяСтоимость</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ПлановаяСтоимость" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>ПеремещениеТоваров</Код>
					<Наименование>ПКО для документа "Перемещение товаров"</Наименование>
					<Порядок>250</Порядок>
					<Правило>
						<Код>ПеремещениеТоваров_ПеремещениеТоваров</Код>
						<Наименование>Документ: Перемещение товаров</Наименование>
						<Порядок>50</Порядок>
						<ПередВыгрузкой>ДанныеСкладаПолучателя = ОбщегоНазначения.ПолучитьЗначенияРеквизитов(Источник.СкладПолучатель, "ТипСклада,РозничныйВидЦены");

Если ДанныеСкладаПолучателя.ТипСклада = Перечисления.ТипыСкладов.РозничныйМагазин
	И ЗначениеЗаполнено(ДанныеСкладаПолучателя.РозничныйВидЦены) Тогда
	
	Запрос = Запросы.ТоварыИзВидовЗапасовПеремещенияСЦенамиДляРозницы;
	Запрос.УстановитьПараметр("Дата",	КонецДня(Источник.Дата));
	Запрос.УстановитьПараметр("Валюта", Константы.ВалютаРегламентированногоУчета.Получить());
	Запрос.УстановитьПараметр("ВидЦен", ДанныеСкладаПолучателя.РозничныйВидЦены);
	
Иначе
	Запрос = Запросы.ТоварыИзВидовЗапасовПеремещения;
КонецЕсли;

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
РезультатыЗапроса = Запрос.ВыполнитьПакет();
ВходящиеДанные.Вставить("Товары", РезультатыЗапроса[1].Выгрузить());
ВходящиеДанные.Вставить("ТоварыНаКомиссии", РезультатыЗапроса[2].Выгрузить());</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ПеремещениеТоваров</Источник>
						<Приемник>ДокументСсылка.ПеремещениеТоваров</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>6</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование> --&gt; ВидОперации</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПеремещениеТоваров"/>
								<ПередВыгрузкой>Значение = "ТоварыПродукция";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>СкладОтправитель --&gt; СкладОтправитель</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="СкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>СкладПолучатель --&gt; СкладПолучатель</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
								<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование> --&gt; НДСвСтоимостиТоваров</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НДСвСтоимостиТоваров" Вид="Реквизит" Тип="ПеречислениеСсылка.ДействиеНДСВСтоимостиТоваров"/>
								<ПередВыгрузкой>Значение = "НеИзменять";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование>Ответственный --&gt; Ответственный</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>33</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>14</Код>
								<Наименование> --&gt; Товары</Наименование>
								<Порядок>600</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>16</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>34</Код>
									<Наименование> --&gt; СтавкаНДСВРознице</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДСВРознице" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								</Свойство>
								<Свойство>
									<Код>35</Код>
									<Наименование> --&gt; СуммаВРознице</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаВРознице" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>36</Код>
									<Наименование> --&gt; ЦенаВРознице</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЦенаВРознице" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа>
								<Код>19</Код>
								<Наименование> --&gt; ТоварыНаКомиссии</Наименование>
								<Порядок>650</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ТоварыНаКомиссии" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>23</Код>
									<Наименование> --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
									<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; Коэффициент</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; Количество</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование> --&gt; СчетУчета</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование> --&gt; НовыйСчетУчета</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НовыйСчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>28</Код>
								<Наименование>ВидыЗапасов --&gt;</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>29</Код>
									<Наименование>ВидЗапасов --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>30</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>31</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>32</Код>
									<Наименование>НомерГТД --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>37</Код>
								<Наименование>Статус --&gt;</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="Статус" Вид="Реквизит" Тип="ПеречислениеСсылка.СтатусыПеремещенийТоваров"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Правило>
					<Код>ОТ_ОприходованиеТоваров</Код>
					<Наименование>Документ: Оприходование товаров</Наименование>
					<Порядок>300</Порядок>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ОприходованиеИзлишковТоваров</Источник>
					<Приемник>ДокументСсылка.ОприходованиеТоваров</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>14</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>15</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Склад --&gt; Склад</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
							<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
							<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
							<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>СтатьяДоходов --&gt; СтатьяПрочихДоходовРасходов</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СтатьяДоходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиДоходов"/>
							<Приемник Имя="СтатьяПрочихДоходовРасходов" Вид="Реквизит" Тип="СправочникСсылка.ПрочиеДоходыИРасходы"/>
							<КодПравилаКонвертации>СтатьиДоходовВПрочиеДоходыИРасходы                </КодПравилаКонвертации>
							<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	Пусто = НЕ ЗначениеЗаполнено(ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет"));
Иначе
	Пусто = Истина;
КонецЕсли;</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Ответственный --&gt; Ответственный</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование> --&gt; Основание</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Значение = Строка(Источник.ДокументОснование);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа>
							<Код>1</Код>
							<Наименование> --&gt; Товары</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>Запрос = Новый Запрос();
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Дата", Источник.Дата);
Запрос.УстановитьПараметр("РегВалюта", Константы.ВалютаРегламентированногоУчета.Получить());
Запрос.УстановитьПараметр("УпрВалюта", Константы.ВалютаУправленческогоУчета.Получить());

Запрос.Текст = "ВЫБРАТЬ
               |	ОприходованиеТоваровТовары.Номенклатура,
               |	ОприходованиеТоваровТовары.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
               |	1 КАК Коэффициент,
               |	ОприходованиеТоваровТовары.Количество,
               |	ОприходованиеТоваровТовары.Цена * ВЫБОР
               |		КОГДА &amp;РегВалюта &lt;&gt; &amp;УпрВалюта
               |			ТОГДА ВЫБОР
               |					КОГДА ЕСТЬNULL(КурсыВалютыЦены.Кратность, 0) &gt; 0
               |							И ЕСТЬNULL(КурсыВалютыЦены.Курс, 0) &gt; 0
               |							И ЕСТЬNULL(КурсыВалюты.Кратность, 0) &gt; 0
               |							И ЕСТЬNULL(КурсыВалюты.Курс, 0) &gt; 0
               |						ТОГДА КурсыВалютыЦены.Курс * КурсыВалюты.Кратность / (КурсыВалюты.Курс * КурсыВалютыЦены.Кратность)
               |					ИНАЧЕ 0
               |				КОНЕЦ
               |		ИНАЧЕ 1
               |	КОНЕЦ КАК Цена,
               |	ОприходованиеТоваровТовары.Сумма * ВЫБОР
               |		КОГДА &amp;РегВалюта &lt;&gt; &amp;УпрВалюта
               |			ТОГДА ВЫБОР
               |					КОГДА ЕСТЬNULL(КурсыВалютыЦены.Кратность, 0) &gt; 0
               |							И ЕСТЬNULL(КурсыВалютыЦены.Курс, 0) &gt; 0
               |							И ЕСТЬNULL(КурсыВалюты.Кратность, 0) &gt; 0
               |							И ЕСТЬNULL(КурсыВалюты.Курс, 0) &gt; 0
               |						ТОГДА КурсыВалютыЦены.Курс * КурсыВалюты.Кратность / (КурсыВалюты.Курс * КурсыВалютыЦены.Кратность)
               |					ИНАЧЕ 0
               |				КОНЕЦ
               |		ИНАЧЕ 1
               |	КОНЕЦ КАК Сумма,
               |	ОприходованиеТоваровТовары.НомерГТД,
               |	ОприходованиеТоваровТовары.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения
               |ИЗ
               |	Документ.ОприходованиеИзлишковТоваров.Товары КАК ОприходованиеТоваровТовары
               |		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;УпрВалюта) КАК КурсыВалютыЦены
               |		ПО (ИСТИНА)
               |		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;РегВалюта) КАК КурсыВалюты
               |		ПО (ИСТИНА)
               |ГДЕ
               |	ОприходованиеТоваровТовары.Ссылка = &amp;Ссылка";
			   
КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>3</Код>
								<Наименование> --&gt; Номенклатура</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование> --&gt; Количество</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование> --&gt; Коэффициент</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование> --&gt; Цена</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование> --&gt; Сумма</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование> --&gt; НомерГТД</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
								<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование> --&gt; СтранаПроисхождения</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
								<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>21</Код>
							<Наименование>Товары --&gt;</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>22</Код>
								<Наименование>Количество --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>23</Код>
								<Наименование>Номенклатура --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство Отключить="true">
								<Код>24</Код>
								<Наименование>НомерГТД --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство Отключить="true">
								<Код>25</Код>
								<Наименование>Сумма --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>26</Код>
								<Наименование>Цена --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>СПТ_СписаниеТоваров</Код>
					<Наименование>Документ: Списание товаров</Наименование>
					<Порядок>350</Порядок>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем признак "Отражение в УСН" значением по умолчанию
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		ВариантОтраженияУСН = ?(УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы,
								Перечисления.ОтражениеВУСН.НеПринимаются, Перечисления.ОтражениеВУСН.ПустаяСсылка());
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка() Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.СписаниеНедостачТоваров</Источник>
					<Приемник>ДокументСсылка.СписаниеТоваров</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>4</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>5</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование> --&gt; ВидОперации</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеТоваров"/>
							<ПередВыгрузкой>Значение = "ТоварыПродукция";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Склад --&gt; Склад</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
							<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
							<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
							<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование> --&gt; Основание</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Значение = Строка(Источник.ДокументОснование);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Ответственный --&gt; Ответственный</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа>
							<Код>8</Код>
							<Наименование> --&gt; Товары</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>Запросы.ТоварыИзВидовЗапасовДляСписания.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запросы.ТоварыИзВидовЗапасовДляСписания.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>12</Код>
								<Наименование> --&gt; Номенклатура</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование> --&gt; Количество</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование> --&gt; Коэффициент</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование> --&gt; НомерГТД</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование> --&gt; СтранаПроисхождения</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование> --&gt; СчетУчета</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>18</Код>
							<Наименование>ВидыЗапасов --&gt;</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="ВидыЗапасов" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>19</Код>
								<Наименование>ВидЗапасов --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ВидЗапасов" Вид="Реквизит" Тип="СправочникСсылка.ВидыЗапасов"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>20</Код>
								<Наименование>Количество --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>21</Код>
								<Наименование>Номенклатура --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство Отключить="true">
								<Код>22</Код>
								<Наименование>НомерГТД --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
								<Приемник Имя="" Вид=""/>
								<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
							</Свойство>
						</Группа>
					</Свойства>
					<Значения/>
				</Правило>
			</Группа>
			<Группа>
				<Код>СчетаФактуры</Код>
				<Наименование>ПКО для документов "Счет-фактура полученный" и "Счет-фактура выданный"</Наименование>
				<Порядок>600</Порядок>
				<Группа>
					<Код>СчетФактураПолученный</Код>
					<Наименование>ПКО для документов "Счет-фактура полученный"</Наименование>
					<Порядок>250</Порядок>
					<Правило>
						<Код>СФПА_СчетФактураПолученныйАванс</Код>
						<Наименование>Документ: Счет-фактура полученный (аванс)</Наименование>
						<Порядок>50</Порядок>
						<ПередВыгрузкой>// Вычисляем значение реквизита "Контрагент"

Если ТипЗнч(Источник.Контрагент) = Тип("СправочникСсылка.Организации") Тогда
	
	ОрганизацияКонтрагента = Источник.Контрагент;
	
	НовыйКонтрагент = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	Контрагент = НовыйКонтрагент;
		
ИначеЕсли ТипЗнч(Источник.Контрагент) = Тип("СправочникСсылка.Контрагенты") Тогда
	Контрагент = Источник.Контрагент;
Иначе
	Контрагент = Справочники.Контрагенты.ПустаяСсылка();
КонецЕсли;

ВходящиеДанные.Вставить("Контрагент", Контрагент);

// Вычисляем валюту документа-основания
Если ЗначениеЗаполнено(Источник.ДокументОснование) Тогда
	ВходящиеДанные.Вставить("ВалютаДокумента", ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.ДокументОснование, "Валюта"));
Иначе
	ВходящиеДанные.Вставить("ВалютаДокумента", Константы.ВалютаРегламентированногоУчета.Получить());
КонецЕсли;</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.СчетФактураПолученныйАванс</Источник>
						<Приемник>ДокументСсылка.СчетФактураПолученный</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>6</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<ПриВыгрузке>Значение = Макс(Значение, ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.ДокументОснование, "Дата") + 1);</ПриВыгрузке>
							</Свойство>
							<Свойство Поиск="true">
								<Код>7</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Значение = Лев(Источник.Номер,5) + "А" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование> --&gt; ВидСчетаФактуры</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидСчетаФактуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидСчетаФактурыПолученного"/>
								<ПередВыгрузкой>Значение = "НаАванс";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование> --&gt; ВалютаДокумента</Наименование>
								<Порядок>300</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>Сумма --&gt; СуммаДокумента</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование> --&gt; Контрагент</Наименование>
								<Порядок>400</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПередВыгрузкой>Договор = Неопределено;

// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",     Неопределено);
Значение.Вставить("ВидДоговора",              "СПоставщиком");
Значение.Вставить("Владелец",                 ВходящиеДанные.Контрагент);
Значение.Вставить("Организация",              Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", Неопределено);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",                Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",    Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11", Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",        Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",           Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",        Неопределено);

Запрос = Новый Запрос();
Запрос.УстановитьПараметр("Ссылка", Источник.ДокументОснование);
Запрос.УстановитьПараметр("Контрагент", ВходящиеДанные.Контрагент);

ТипЗначенияДокументаОснования = ТипЗнч(Источник.ДокументОснование);
Если ТипЗначенияДокументаОснования = Тип("ДокументСсылка.РасходныйКассовыйОрдер") 
	Или ТипЗначенияДокументаОснования = Тип("ДокументСсылка.СписаниеБезналичныхДенежныхСредств") Тогда
	
	Запрос.Текст = "
	|ВЫБРАТЬ
	|	РасшифровкаПлатежа.Заказ,
	|	РасшифровкаПлатежа.Заказ.Партнер КАК Партнер,
	|	РасшифровкаПлатежа.Заказ.Соглашение КАК Соглашение,
	|	РасшифровкаПлатежа.ВалютаВзаиморасчетов
	|ПОМЕСТИТЬ ДанныеДоговора
	|ИЗ
	|	Документ." + Источник.ДокументОснование.Метаданные().Имя + ".РасшифровкаПлатежа КАК РасшифровкаПлатежа
	|ГДЕ
	|	РасшифровкаПлатежа.Ссылка = &amp;Ссылка
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Партнер
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Соглашение
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Заказ
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.ВалютаВзаиморасчетов
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора";
	
	ДанныеДоговора = Запрос.ВыполнитьПакет();
	
	СверткаПоПартнеру = ДанныеДоговора[1].Выгрузить();
	Если СверткаПоПартнеру.Количество() = 1 Тогда
		Значение.ПартнерУТ11 = СверткаПоПартнеру[0].Партнер;
	КонецЕсли;
	
	СверткаПоСоглашениям = ДанныеДоговора[2].Выгрузить();
	Если СверткаПоСоглашениям.Количество() = 1 Тогда
		Значение.СоглашениеСПоставщикомУТ11 = СверткаПоСоглашениям[0].Соглашение;
	КонецЕсли;
	
	СверткаПоЗаказам = ДанныеДоговора[3].Выгрузить();
	Если СверткаПоЗаказам.Количество() = 1 Тогда
		
		ЗаказПоставщику = СверткаПоЗаказам[0].Заказ;
		Если ТипЗнч(ЗаказПоставщику) = Тип("ДокументСсылка.ЗаказПоставщику") Тогда
			Значение.ЗаказПоставщикуУТ11 = ЗаказПоставщику;
		ИначеЕсли ТипЗнч(ЗаказПоставщику) = Тип("СправочникСсылка.ДоговорыКонтрагентов") Тогда
			Договор = ЗаказПоставщику;
		КонецЕсли;
		
	КонецЕсли;
	
	СверткаПоВалютеВзаиморасчетов = ДанныеДоговора[4].Выгрузить();
	Если СверткаПоВалютеВзаиморасчетов.Количество() = 1 Тогда
		
		Значение.ВалютаВзаиморасчетов = СверткаПоВалютеВзаиморасчетов[0].ВалютаВзаиморасчетов;
		Если ЗначениеЗаполнено(Значение.СоглашениеСПоставщикомУТ11) Тогда
			Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Значение.СоглашениеСПоставщикомУТ11);
		Иначе
			Значение.РасчетыВУсловныхЕдиницах = ВходящиеДанные.ВалютаДокумента = Константы.ВалютаРегламентированногоУчета.Получить() И ВходящиеДанные.ВалютаДокумента &lt;&gt; Значение.ВалютаВзаиморасчетов;
		КонецЕсли;
		
	Иначе
		Значение.ВалютаВзаиморасчетов     = ВходящиеДанные.ВалютаДокумента;
		Значение.РасчетыВУсловныхЕдиницах = Ложь;
	КонецЕсли;
	
ИначеЕсли ТипЗначенияДокументаОснования = Тип("ДокументСсылка.ВозвратТоваровПоставщику") Тогда
	
	Запрос.Текст = "
	|ВЫБРАТЬ
	|	РасшифровкаПлатежа.Ссылка.Партнер КАК Партнер,
	|	РасшифровкаПлатежа.Ссылка.Соглашение КАК Соглашение,
	|	РасшифровкаПлатежа.Ссылка.Соглашение.Валюта КАК ВалютаСоглашения,
	|	РасшифровкаПлатежа.Заказ,
	|	РасшифровкаПлатежа.ВалютаВзаиморасчетов
	|ПОМЕСТИТЬ ДанныеДоговора
	|ИЗ
	|	Документ.ВозвратТоваровПоставщику.РасшифровкаПлатежа КАК РасшифровкаПлатежа
	|ГДЕ
	|	РасшифровкаПлатежа.Ссылка = &amp;Ссылка
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ ПЕРВЫЕ 1
	|	ДанныеДоговора.Партнер,
	|	ДанныеДоговора.Соглашение,
	|	ДанныеДоговора.ВалютаВзаиморасчетов,
	|	ДанныеДоговора.ВалютаСоглашения
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Заказ
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора";
	
	ДанныеДоговора = Запрос.ВыполнитьПакет();
	
	ОсновныеРеквизиты = ДанныеДоговора[1].Выгрузить();
	Значение.ПартнерУТ11                = ОсновныеРеквизиты[0].Партнер;
	Значение.СоглашениеСПоставщикомУТ11 = ОсновныеРеквизиты[0].Соглашение;
	
	Если ЗначениеЗаполнено(Значение.СоглашениеСПоставщикомУТ11) Тогда
		Значение.ВалютаВзаиморасчетов     = ОсновныеРеквизиты[0].ВалютаСоглашения;
		Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Значение.СоглашениеСПоставщикомУТ11);
	Иначе
		Значение.ВалютаВзаиморасчетов     = ОсновныеРеквизиты[0].ВалютаВзаиморасчетов;
		Значение.РасчетыВУсловныхЕдиницах = ВходящиеДанные.ВалютаДокумента = Константы.ВалютаРегламентированногоУчета.Получить() И ВходящиеДанные.ВалютаДокумента &lt;&gt; Значение.ВалютаВзаиморасчетов;
	КонецЕсли;
	
	СверткаПоЗаказам = ДанныеДоговора[2].Выгрузить();
	Если СверткаПоЗаказам.Количество() = 1 Тогда
		
		ЗаказПоставщику = СверткаПоЗаказам[0].Заказ;
		Если ТипЗнч(ЗаказПоставщику) = Тип("ДокументСсылка.ЗаказПоставщику") Тогда
			Значение.ЗаказПоставщикуУТ11 = ЗаказПоставщику;
		ИначеЕсли ТипЗнч(ЗаказПоставщику) = Тип("СправочникСсылка.ДоговорыКонтрагентов") Тогда
			Договор = ЗаказПоставщику;
		КонецЕсли;
		
	КонецЕсли;
	
ИначеЕсли ТипЗначенияДокументаОснования = Тип("ДокументСсылка.АвансовыйОтчет") Тогда
	
	Запрос.Текст = "
	|ВЫБРАТЬ
	|	ОплатаПоставщикам.Поставщик КАК Партнер,
	|	ОплатаПоставщикам.ВалютаВзаиморасчетов,
	|	ОплатаПоставщикам.Заказ.Соглашение КАК Соглашение,
	|	ОплатаПоставщикам.Заказ КАК Заказ
	|ПОМЕСТИТЬ ДанныеДоговора
	|ИЗ
	|	Документ.АвансовыйОтчет.ОплатаПоставщикам КАК ОплатаПоставщикам
	|ГДЕ
	|	ОплатаПоставщикам.Ссылка = &amp;Ссылка
	|	И ОплатаПоставщикам.Контрагент = &amp;Контрагент
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Партнер
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Соглашение
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Заказ
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.ВалютаВзаиморасчетов
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора";
	
	ДанныеДоговора = Запрос.ВыполнитьПакет();
	
	СверткаПоПартнеру = ДанныеДоговора[1].Выгрузить();
	Если СверткаПоПартнеру.Количество() = 1 Тогда
		Значение.ПартнерУТ11 = СверткаПоПартнеру[0].Партнер;
	КонецЕсли;
	
	СверткаПоСоглашениям = ДанныеДоговора[2].Выгрузить();
	Если СверткаПоСоглашениям.Количество() = 1 Тогда
		Значение.СоглашениеСПоставщикомУТ11 = СверткаПоСоглашениям[0].Соглашение;
	КонецЕсли;
	
	СверткаПоЗаказам = ДанныеДоговора[3].Выгрузить();
	Если СверткаПоЗаказам.Количество() = 1 Тогда
		
		ЗаказПоставщику = СверткаПоЗаказам[0].Заказ;
		Если ТипЗнч(ЗаказПоставщику) = Тип("ДокументСсылка.ЗаказПоставщику") Тогда
			Значение.ЗаказПоставщикуУТ11 = ЗаказПоставщику;
		ИначеЕсли ТипЗнч(ЗаказПоставщику) = Тип("СправочникСсылка.ДоговорыКонтрагентов") Тогда
			Договор = ЗаказПоставщику;
		КонецЕсли;
		
	КонецЕсли;
	
	СверткаПоВалютеВзаиморасчетов = ДанныеДоговора[4].Выгрузить();
	Если СверткаПоВалютеВзаиморасчетов.Количество() = 1 Тогда
		
		Значение.ВалютаВзаиморасчетов = СверткаПоВалютеВзаиморасчетов[0].ВалютаВзаиморасчетов;
		Если ЗначениеЗаполнено(Значение.СоглашениеСПоставщикомУТ11) Тогда
			Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Значение.СоглашениеСПоставщикомУТ11);
		Иначе
			Значение.РасчетыВУсловныхЕдиницах = ВходящиеДанные.ВалютаДокумента = Константы.ВалютаРегламентированногоУчета.Получить() И ВходящиеДанные.ВалютаДокумента &lt;&gt; Значение.ВалютаВзаиморасчетов;
		КонецЕсли;
		
	Иначе
		Значение.ВалютаВзаиморасчетов     = ВходящиеДанные.ВалютаДокумента;
		Значение.РасчетыВУсловныхЕдиницах = Ложь;
	КонецЕсли;
	
ИначеЕсли ТипЗначенияДокументаОснования = Тип("ДокументСсылка.ВзаимозачетЗадолженности") Тогда
	
	ИмяТЧ = "КредиторскаяЗадолженность";
	ТипРасчетов = "РасчетыСПоставщиком";
	
	Если Источник.Организация = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.ДокументОснование, "КонтрагентКредитор") Тогда
		ИмяТЧ = "ДебиторскаяЗадолженность";
		ТипРасчетов = "РасчетыСКлиентом";
	КонецЕсли;
	
	Запрос.Текст = "
	|ВЫБРАТЬ
	|	ТабДок.Заказ,
	|	ТабДок.ВалютаВзаиморасчетов,
	|	ТабДок.Заказ.Соглашение КАК Соглашение,
	|	ТабДок.Партнер
	|ПОМЕСТИТЬ ДанныеДоговора
	|ИЗ
	|	Документ.ВзаимозачетЗадолженности." + ИмяТЧ + " КАК ТабДок
	|ГДЕ
	|	ТабДок.Ссылка = &amp;Ссылка
	|	И ТабДок.ТипРасчетов = ЗНАЧЕНИЕ(Перечисление.ТипыРасчетовСПартнерами." + ТипРасчетов + ")
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Партнер
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Соглашение
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Заказ
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.ВалютаВзаиморасчетов
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора";
	
	ДанныеДоговора = Запрос.ВыполнитьПакет();
	
	СверткаПоПартнеру = ДанныеДоговора[1].Выгрузить();
	Если СверткаПоПартнеру.Количество() = 1 Тогда
		Значение.ПартнерУТ11 = СверткаПоПартнеру[0].Партнер;
	КонецЕсли;
	
	СверткаПоСоглашениям = ДанныеДоговора[2].Выгрузить();
	Если СверткаПоСоглашениям.Количество() = 1 Тогда
		Значение.СоглашениеСПоставщикомУТ11 = СверткаПоСоглашениям[0].Соглашение;
	КонецЕсли;
	
	СверткаПоЗаказам = ДанныеДоговора[3].Выгрузить();
	Если СверткаПоЗаказам.Количество() = 1 Тогда
		
		ЗаказПоставщику = СверткаПоЗаказам[0].Заказ;
		Если ТипЗнч(ЗаказПоставщику) = Тип("ДокументСсылка.ЗаказПоставщику") Тогда
			Значение.ЗаказПоставщикуУТ11 = ЗаказПоставщику;
		ИначеЕсли ТипЗнч(ЗаказПоставщику) = Тип("СправочникСсылка.ДоговорыКонтрагентов") Тогда
			Договор = ЗаказПоставщику;
		КонецЕсли;
		
	КонецЕсли;
	
	СверткаПоВалютеВзаиморасчетов = ДанныеДоговора[4].Выгрузить();
	Если СверткаПоВалютеВзаиморасчетов.Количество() = 1 Тогда
		
		Значение.ВалютаВзаиморасчетов = СверткаПоВалютеВзаиморасчетов[0].ВалютаВзаиморасчетов;
		Если ЗначениеЗаполнено(Значение.СоглашениеСПоставщикомУТ11) Тогда
			Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Значение.СоглашениеСПоставщикомУТ11);
		Иначе
			Значение.РасчетыВУсловныхЕдиницах = ВходящиеДанные.ВалютаДокумента = Константы.ВалютаРегламентированногоУчета.Получить() И ВходящиеДанные.ВалютаДокумента &lt;&gt; Значение.ВалютаВзаиморасчетов;
		КонецЕсли;
		
	Иначе
		Значение.ВалютаВзаиморасчетов     = ВходящиеДанные.ВалютаДокумента;
		Значение.РасчетыВУсловныхЕдиницах = Ложь;
	КонецЕсли;
	
ИначеЕсли ТипЗначенияДокументаОснования = Тип("ДокументСсылка.ВозвратТоваровМеждуОрганизациями") Тогда
	
	Запрос.Текст = "
	|ВЫБРАТЬ
	|	Док.Партнер,
	|	Док.Валюта
	|ИЗ
	|	Документ.ВозвратТоваровМеждуОрганизациями КАК Док
	|ГДЕ
	|	Док.Ссылка = &amp;Ссылка
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ ПЕРВЫЕ 1
	|	РасшифровкаПлатежа.ВалютаВзаиморасчетов
	|ИЗ
	|	Документ.ВозвратТоваровМеждуОрганизациями.РасшифровкаПлатежа КАК РасшифровкаПлатежа
	|ГДЕ
	|	РасшифровкаПлатежа.Ссылка = &amp;Ссылка
	|
	|УПОРЯДОЧИТЬ ПО
	|	РасшифровкаПлатежа.НомерСтроки";
	
	РезультатЗапроса = Запрос.ВыполнитьПакет();	
	ДанныеШапки              = РезультатЗапроса[0].Выгрузить()[0];
	ДанныеРасшифровкиПлатежа = РезультатЗапроса[1].Выгрузить();
	
	Значение.ПартнерУТ11 = ДанныеШапки.Партнер;
	
	Если ДанныеРасшифровкиПлатежа.Количество() = 1 Тогда
		Значение.ВалютаВзаиморасчетов     = ДанныеРасшифровкиПлатежа[0].ВалютаВзаиморасчетов;
		Значение.РасчетыВУсловныхЕдиницах = ДанныеШапки.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И ДанныеШапки.Валюта &lt;&gt; Значение.ВалютаВзаиморасчетов;
	Иначе
		Значение.ВалютаВзаиморасчетов     = ДанныеШапки.Валюта;
		Значение.РасчетыВУсловныхЕдиницах = Ложь;
	КонецЕсли;
	
Иначе
	Значение.ВалютаВзаиморасчетов     = ВходящиеДанные.ВалютаДокумента;
	Значение.РасчетыВУсловныхЕдиницах = Ложь;
КонецЕсли;

Если ЗначениеЗаполнено(Договор) Тогда
	Значение = Договор;
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>ДокументОснование --&gt; ДокументОснование</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ДокументОснование" Вид="Реквизит"/>
								<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
								<ПриВыгрузке>Если ТипЗнч(Значение) = Тип("ДокументСсылка.ВозвратТоваровМеждуОрганизациями") Тогда
	ИмяПКО = "ВТМО_ВозвратПоставщику";
ИначеЕсли ТипЗнч(Значение) = Тип("ДокументСсылка.ВзаимозачетЗадолженности") Тогда
	
	ДанныеВзаимозачета = ОбщегоНазначения.ПолучитьЗначенияРеквизитов(Значение, "Организация,КонтрагентДебитор,КонтрагентКредитор");
		
	ОрганизацияСФ = Источник.Организация;
	Если ОрганизацияСФ = ДанныеВзаимозачета.Организация Тогда
		ИмяПКО = "ВЗ_ВзаимозачетЗадолженностиНашаОрганизация";
	ИначеЕсли ОрганизацияСФ = ДанныеВзаимозачета.КонтрагентДебитор Тогда
		ИмяПКО = "ВЗ_ВзаимозачетЗадолженностиОрганизацияДебитор";
	ИначеЕсли ОрганизацияСФ = ДанныеВзаимозачета.КонтрагентКредитор Тогда
		ИмяПКО = "ВЗ_ВзаимозачетЗадолженностиОрганизацияКредитор";
	КонецЕсли;
		
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование>КодВидаОперации --&gt; КодВидаОперации</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="КодВидаОперации" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="КодВидаОперации" Вид="Реквизит" Тип="Строка"/>
								<ПриВыгрузке>Если Не ЗначениеЗаполнено(Значение) Тогда
	Значение = "02";
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование>ПолученВЭлектронномВиде --&gt; КодСпособаПолучения</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="ПолученВЭлектронномВиде" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="КодСпособаПолучения" Вид="Реквизит" Тип="Число"/>
								<ПриВыгрузке>Значение = ?(Значение, 2, 1);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>9</Код>
								<Наименование>Авансы --&gt; Авансы</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="Авансы" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="Авансы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>10</Код>
									<Наименование>Сумма --&gt; Сумма</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа>
								<Код>16</Код>
								<Наименование> --&gt; ДокументыОснования</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДокументыОснования" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("ДокументОснование");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>17</Код>
									<Наименование> --&gt; ДокументОснование</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
									<ПередВыгрузкой>Значение = Источник.ДокументОснование;

Если ТипЗнч(Значение) = Тип("ДокументСсылка.ВозвратТоваровМеждуОрганизациями") Тогда
	ИмяПКО = "ВТМО_ВозвратПоставщику";
ИначеЕсли ТипЗнч(Значение) = Тип("ДокументСсылка.ВзаимозачетЗадолженности") Тогда
	
	ДанныеВзаимозачета = ОбщегоНазначения.ПолучитьЗначенияРеквизитов(Значение, "Организация,КонтрагентДебитор,КонтрагентКредитор");
		
	ОрганизацияСФ = Источник.Организация;
	Если ОрганизацияСФ = ДанныеВзаимозачета.Организация Тогда
		ИмяПКО = "ВЗ_ВзаимозачетЗадолженностиНашаОрганизация";
	ИначеЕсли ОрганизацияСФ = ДанныеВзаимозачета.КонтрагентДебитор Тогда
		ИмяПКО = "ВЗ_ВзаимозачетЗадолженностиОрганизацияДебитор";
	ИначеЕсли ОрганизацияСФ = ДанныеВзаимозачета.КонтрагентКредитор Тогда
		ИмяПКО = "ВЗ_ВзаимозачетЗадолженностиОрганизацияКредитор";
	КонецЕсли;
		
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>СФП_СчетФактураПолученный</Код>
						<Наименование>Документ: Счет-фактура полученный</Наименование>
						<Порядок>100</Порядок>
						<ПередВыгрузкой>ВходящиеДанные.Вставить("Дата");
ВходящиеДанные.Вставить("ДокументОснование");
ВходящиеДанные.Вставить("ДокументыОснования");
ВходящиеДанные.Вставить("ПКОДляДокументаОснования");

ДокументыОснования = Новый ТаблицаЗначений;
ДокументыОснования.Колонки.Добавить("ДокументОснование");
ДокументыОснования.Колонки.Добавить("ПКОДляДокументаОснования");

ПКОДляТиповДокументовОснований = Новый Соответствие;
ПКОДляТиповДокументовОснований.Вставить(Тип("ДокументСсылка.ПоступлениеТоваровУслуг"),           "ПТУ_ЗакупкаТоваровУслуг");
ПКОДляТиповДокументовОснований.Вставить(Тип("ДокументСсылка.ПоступлениеУслугПрочихАктивов"),     "ПУВА_ПоступлениеУслуг");
ПКОДляТиповДокументовОснований.Вставить(Тип("ДокументСсылка.ВозвратТоваровОтКлиента"),           "ВТОП_ВозвратТоваровОтПокупателя");
ПКОДляТиповДокументовОснований.Вставить(Тип("ДокументСсылка.КорректировкаПоступления"),          "КорректировкаПоступления_КорректировкаПоступления");
ПКОДляТиповДокументовОснований.Вставить(Тип("ДокументСсылка.ОтчетКомиссионера"),                 "ОКОП_ОтчетКомиссионераОПродажах");
ПКОДляТиповДокументовОснований.Вставить(Тип("ДокументСсылка.ОтчетКомитенту"),                    "ОКТОП_ОтчетКомитентуОПродажах");
ПКОДляТиповДокументовОснований.Вставить(Тип("ДокументСсылка.ПередачаТоваровМеждуОрганизациями"), "ПДТ_ПередачаТоваровПокупка");
ПКОДляТиповДокументовОснований.Вставить(Тип("ДокументСсылка.ВозвратТоваровМеждуОрганизациями"),  "ВТМО_ВозвратОтПокупателя");
ПКОДляТиповДокументовОснований.Вставить(Тип("ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями"), "ОКОПМО_ОтчетКомиссионераОПродажах");

ВходящиеДанные.Дата = Макс(Источник.Дата, Источник.ДатаИсправления);

Для Каждого Строка Из Источник.ДокументыОснования Цикл
	
	ДокументОснование = Строка.ДокументОснование;
	
	Если Не ЗначениеЗаполнено(ДокументОснование)
		Или Не ДокументОснование.Проведен Тогда
		Продолжить;
	КонецЕсли;
	
	ПКОДляДокументаОснования = ПКОДляТиповДокументовОснований.Получить(ТипЗнч(ДокументОснование));
	Если ПКОДляДокументаОснования = Неопределено Тогда
		Продолжить;
	КонецЕсли;
	
	Если ТипЗнч(ДокументОснование) = Тип("ДокументСсылка.ПоступлениеТоваровУслуг") Тогда
		
		Если ДокументОснование.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ЗакупкаЧерезПодотчетноеЛицо Тогда
		
			Запрос = Новый Запрос("ВЫБРАТЬ ПЕРВЫЕ 1
			|	АвансовыйОтчет.Ссылка
			|ИЗ
			|	Документ.АвансовыйОтчет.ЗакупкаЗаНаличныйРасчет КАК АвансовыйОтчет
			|ГДЕ
			|	АвансовыйОтчет.ДокументПоступления = &amp;Ссылка
			|	И АвансовыйОтчет.Ссылка.Проведен");
			
			Запрос.УстановитьПараметр("Ссылка", ДокументОснование);
			Выборка = Запрос.Выполнить().Выбрать();
			
			Если Выборка.Следующий() Тогда
				ДокументОснование = Выборка.Ссылка;
				ПКОДляДокументаОснования = "АО_АвансовыйОтчетЗакупкаТоваровУслуг";
			Иначе
				Продолжить;
			КонецЕсли;
			
		ИначеЕсли ДокументОснование.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ЗакупкаУПоставщика
			Или ДокументОснование.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПустаяСсылка() Тогда
			
			ПараметрыДокумента = Неопределено;
			ДокументСсылка = ДокументОснование;
			Выполнить(Алгоритмы.ПараметрыПоступлениеТоваровУслуг);
			
			Если Не ПараметрыДокумента.ЕстьОбычноеПоступление Тогда
				
				Товары = ДоходыИРасходыСервер.ПолучитьТаблицуРаспределенияРасходовНаСебестоимостьТоваров(ДокументОснование);
				Если Товары.Количество() &gt; 0 Тогда
					ПКОДляДокументаОснования = "ПТУ_ПоступлениеДопРасходов";
				Иначе
					Продолжить;
				КонецЕсли;
				
			КонецЕсли;
			
		КонецЕсли;
		
	ИначеЕсли ТипЗнч(ДокументОснование) = Тип("ДокументСсылка.ПоступлениеУслугПрочихАктивов") Тогда
		
		Если ДокументОснование.ХозяйственнаяОперация &lt;&gt; Перечисления.ХозяйственныеОперации.ЗакупкаУПоставщика Тогда
			Продолжить;
		КонецЕсли;
		
		ПараметрыДокумента = Неопределено;
		ДокументСсылка = ДокументОснование;
		Выполнить(Алгоритмы.ПараметрыПоступлениеУслугПрочихАктивов);
		
		Если Не ПараметрыДокумента.ЕстьОбычноеПоступление Тогда
			
			Товары = ДоходыИРасходыСервер.ПолучитьТаблицуРаспределенияРасходовНаСебестоимостьТоваров(ДокументОснование);
			Если Товары.Количество() &gt; 0 Тогда
				ПКОДляДокументаОснования = "ПУВА_ПоступлениеДопРасходов";
			Иначе
				Продолжить;
			КонецЕсли;
			
		КонецЕсли;
		
	КонецЕсли;
	
	Если ВходящиеДанные.Дата &lt;= ДокументОснование.Дата Тогда
		ВходящиеДанные.Дата = ДокументОснование.Дата + 1;
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(ВходящиеДанные.ДокументОснование) Тогда
		ВходящиеДанные.ДокументОснование = ДокументОснование;
		ВходящиеДанные.ПКОДляДокументаОснования = ПКОДляДокументаОснования;
	КонецЕсли;
	
	НоваяСтрока = ДокументыОснования.Добавить();
	НоваяСтрока.ДокументОснование        = ДокументОснование;
	НоваяСтрока.ПКОДляДокументаОснования = ПКОДляДокументаОснования;
	
КонецЦикла;

Если ЗначениеЗаполнено(ВходящиеДанные.ДокументОснование) Тогда
	ВходящиеДанные.ДокументыОснования = ДокументыОснования;
Иначе
	
	Отказ = Истина;
	
	СсылкаНаУдаляемыйОбъект = Источник.Ссылка;
	ТипИсточника = "ДокументСсылка.СчетФактураПолученный";
	ТипПриемника = "ДокументСсылка.СчетФактураПолученный";
	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	
КонецЕсли;</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	Параметры.ЗагруженныеСчетаФактурыПолученные.Добавить(Объект);
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.СчетФактураПолученный</Источник>
						<Приемник>ДокументСсылка.СчетФактураПолученный</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>19</Код>
								<Наименование>Дата --&gt; ДатаВходящегоДокумента</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>20</Код>
								<Наименование>Номер --&gt; НомерВходящегоДокумента</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>ДатаИсправления --&gt; ДатаИсправления</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ДатаИсправления" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаИсправления" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>6</Код>
								<Наименование>НомерИсправления --&gt; НомерИсправления</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="НомерИсправления" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерИсправления" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование> --&gt; Дата</Наименование>
								<Порядок>300</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>Корректировочный --&gt; ВидСчетаФактуры</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Корректировочный" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="ВидСчетаФактуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидСчетаФактурыПолученного"/>
								<ПриВыгрузке>Значение = ?(Значение, "Корректировочный", "НаПоступление");</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>ДатаИсходногоДокумента --&gt; ДатаИсходногоДокумента</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="ДатаИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>НомерИсходногоДокумента --&gt; НомерИсходногоДокумента</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="НомерИсходногоДокумента" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерИсходногоДокумента" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>НомерИсправленияИсходногоДокумента --&gt; УчитыватьИсправлениеИсходногоДокумента</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="НомерИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="УчитыватьИсправлениеИсходногоДокумента" Вид="Реквизит" Тип="Булево"/>
								<ПриВыгрузке>Значение = ЗначениеЗаполнено(Значение);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>ДатаИсправленияИсходногоДокумента --&gt; ДатаИсправленияИсходногоДокумента</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="ДатаИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>НомерИсправленияИсходногоДокумента --&gt; НомерИсправленияИсходногоДокумента</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="НомерИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Исправление --&gt; Исправление</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="Исправление" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="Исправление" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>КодВидаОперации --&gt; КодВидаОперации</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="КодВидаОперации" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="КодВидаОперации" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>ПолученВЭлектронномВиде --&gt; КодСпособаПолучения</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="ПолученВЭлектронномВиде" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="КодСпособаПолучения" Вид="Реквизит" Тип="Число"/>
								<ПриВыгрузке>Значение = ?(Значение, 2, 1);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование> --&gt; НДСПредъявленКВычету</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НДСПредъявленКВычету" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Если Источник.Дата &gt;= Дата("20120101")
	И Не Источник.Исправление
	И Не Источник.Корректировочный Тогда
	Значение = Истина;
Иначе
	Значение = Ложь;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>32</Код>
								<Наименование> --&gt; ДокументОснование</Наименование>
								<Порядок>1000</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
								<ПередВыгрузкой>ИмяПКО = ВходящиеДанные.ПКОДляДокументаОснования;</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>13</Код>
								<Наименование> --&gt; ДокументыОснования</Наименование>
								<Порядок>1050</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДокументыОснования" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>14</Код>
									<Наименование> --&gt; ДокументОснование</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
									<ПередВыгрузкой>ИмяПКО = ОбъектКоллекции.ПКОДляДокументаОснования;</ПередВыгрузкой>
								</Свойство>
							</Группа>
							<Группа>
								<Код>33</Код>
								<Наименование> --&gt; Авансы</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Авансы" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("Сумма");
КоллекцияОбъектов.Колонки.Добавить("СуммаНДС");
КоллекцияОбъектов.Колонки.Добавить("СтавкаНДС");

КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>34</Код>
									<Наименование> --&gt; СтавкаНДС</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								</Свойство>
								<Свойство>
									<Код>35</Код>
									<Наименование> --&gt; Сумма</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>36</Код>
									<Наименование> --&gt; СуммаНДС</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>22</Код>
								<Наименование> --&gt; Контрагент</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>21</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>1200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>17</Код>
								<Наименование> --&gt; ИсправляемыйСчетФактура</Наименование>
								<Порядок>1250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИсправляемыйСчетФактура" Вид="Реквизит" Тип="ДокументСсылка.СчетФактураПолученный"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>25</Код>
								<Наименование> --&gt; СуммаДокумента</Наименование>
								<Порядок>1300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>26</Код>
								<Наименование> --&gt; СуммаНДСДокумента</Наименование>
								<Порядок>1350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДСДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>27</Код>
								<Наименование> --&gt; СуммаНДСУвеличение</Наименование>
								<Порядок>1400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДСУвеличение" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>28</Код>
								<Наименование> --&gt; СуммаНДСУменьшение</Наименование>
								<Порядок>1450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДСУменьшение" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>29</Код>
								<Наименование> --&gt; СуммаУвеличение</Наименование>
								<Порядок>1500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаУвеличение" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>30</Код>
								<Наименование> --&gt; СуммаУменьшение</Наименование>
								<Порядок>1550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаУменьшение" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>31</Код>
								<Наименование> --&gt; СчетФактураБезНДС</Наименование>
								<Порядок>1600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетФактураБезНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>СчетФактураВыданный</Код>
					<Наименование>ПКО для документов "Счет-фактура выданный"</Наименование>
					<Порядок>300</Порядок>
					<Правило>
						<Код>СФВА_СчетФактураВыданныйНаАванс</Код>
						<Наименование>Документ: Счет-фактура выданный (аванс)</Наименование>
						<Порядок>100</Порядок>
						<ПередВыгрузкой>// Вычисляем значение реквизита "Контрагент"

Если ТипЗнч(Источник.Контрагент) = Тип("СправочникСсылка.Организации") Тогда
	
	ОрганизацияКонтрагента = Источник.Контрагент;
	
	НовыйКонтрагент = Неопределено;
	Выполнить(Алгоритмы.СоздатьИВыгрузитьКонтрагентаИзОрганизации);
	Контрагент = НовыйКонтрагент;
		
ИначеЕсли ТипЗнч(Источник.Контрагент) = Тип("СправочникСсылка.Контрагенты") Тогда
	Контрагент = Источник.Контрагент;
Иначе
	Контрагент = Справочники.Контрагенты.ПустаяСсылка();
КонецЕсли;

ВходящиеДанные.Вставить("Контрагент", Контрагент);

// Вычисляем валюту документа-основания
Если ЗначениеЗаполнено(Источник.ДокументОснование) Тогда
	ВходящиеДанные.Вставить("ВалютаДокумента", ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.ДокументОснование, "Валюта"));
Иначе
	ВходящиеДанные.Вставить("ВалютаДокумента", Константы.ВалютаРегламентированногоУчета.Получить());
КонецЕсли;</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.СчетФактураВыданныйАванс</Источник>
						<Приемник>ДокументСсылка.СчетФактураВыданный</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>24</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование> --&gt; ВидСчетаФактуры</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидСчетаФактуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидСчетаФактурыВыставленного"/>
								<ПередВыгрузкой>Значение = "НаАванс";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование> --&gt; ВалютаДокумента</Наименование>
								<Порядок>300</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Сумма --&gt; Сумма</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Сумма --&gt; СуммаДокумента</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование> --&gt; Контрагент</Наименование>
								<Порядок>500</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПередВыгрузкой>Договор = Неопределено;

// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",     Неопределено);
Значение.Вставить("ВидДоговора",              "СПокупателем");
Значение.Вставить("Владелец",                 ВходящиеДанные.Контрагент);
Значение.Вставить("Организация",              Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", Неопределено);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",                Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",    Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11", Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",        Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",           Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",        Неопределено);

Запрос = Новый Запрос();
Запрос.УстановитьПараметр("Ссылка", Источник.ДокументОснование);

ТипЗначенияДокументаОснования = ТипЗнч(Источник.ДокументОснование);
Если ТипЗначенияДокументаОснования = Тип("ДокументСсылка.ПриходныйКассовыйОрдер")
	Или ТипЗначенияДокументаОснования = Тип("ДокументСсылка.ОперацияПоПлатежнойКарте")
	Или ТипЗначенияДокументаОснования = Тип("ДокументСсылка.ПоступлениеБезналичныхДенежныхСредств") Тогда
	
	Запрос.Текст = "
	|ВЫБРАТЬ
	|	РасшифровкаПлатежа.Заказ,
	|	РасшифровкаПлатежа.Заказ.Партнер КАК Партнер,
	|	РасшифровкаПлатежа.Заказ.Соглашение КАК Соглашение,
	|	РасшифровкаПлатежа.Заказ.Сделка КАК Сделка,
	|	РасшифровкаПлатежа.ВалютаВзаиморасчетов
	|ПОМЕСТИТЬ ДанныеДоговора
	|ИЗ
	|	Документ." + Источник.ДокументОснование.Метаданные().Имя + ".РасшифровкаПлатежа КАК РасшифровкаПлатежа
	|ГДЕ
	|	РасшифровкаПлатежа.Ссылка = &amp;Ссылка
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Партнер
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Соглашение
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Заказ
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Сделка
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.ВалютаВзаиморасчетов
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора";
	
	ДанныеДоговора = Запрос.ВыполнитьПакет();
	
	СверткаПоПартнеру = ДанныеДоговора[1].Выгрузить();
	Если СверткаПоПартнеру.Количество() = 1 Тогда
		Значение.ПартнерУТ11 = СверткаПоПартнеру[0].Партнер;
	КонецЕсли;
	
	СверткаПоСоглашениям = ДанныеДоговора[2].Выгрузить();
	Если СверткаПоСоглашениям.Количество() = 1 Тогда
		Значение.СоглашениеСКлиентомУТ11 = СверткаПоСоглашениям[0].Соглашение;
	КонецЕсли;
	
	СверткаПоЗаказам = ДанныеДоговора[3].Выгрузить();
	Если СверткаПоЗаказам.Количество() = 1 Тогда
		
		ЗаказКлиента = СверткаПоЗаказам[0].Заказ;
		Если ТипЗнч(ЗаказКлиента) = Тип("ДокументСсылка.ЗаказКлиента") Тогда
			Значение.ЗаказКлиентаУТ11 = ЗаказКлиента;
		ИначеЕсли ТипЗнч(ЗаказКлиента) = Тип("СправочникСсылка.ДоговорыКонтрагентов") Тогда
			Договор = ЗаказКлиента;
		КонецЕсли;
		
	КонецЕсли;
	
	СверткаПоСделкам = ДанныеДоговора[4].Выгрузить();
	Если СверткаПоСделкам.Количество() = 1 Тогда
		Значение.СделкаСКлиентомУТ11 = СверткаПоСделкам[0].Сделка;
	КонецЕсли;
	
	СверткаПоВалютеВзаиморасчетов = ДанныеДоговора[5].Выгрузить();
	Если СверткаПоВалютеВзаиморасчетов.Количество() = 1 Тогда
		
		Значение.ВалютаВзаиморасчетов = СверткаПоВалютеВзаиморасчетов[0].ВалютаВзаиморасчетов;
		Если ЗначениеЗаполнено(Значение.СоглашениеСКлиентомУТ11) Тогда
			Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Значение.СоглашениеСКлиентомУТ11);
		Иначе
			Значение.РасчетыВУсловныхЕдиницах = ВходящиеДанные.ВалютаДокумента = Константы.ВалютаРегламентированногоУчета.Получить() И ВходящиеДанные.ВалютаДокумента &lt;&gt; Значение.ВалютаВзаиморасчетов;
		КонецЕсли;
		
	Иначе
		Значение.ВалютаВзаиморасчетов     = ВходящиеДанные.ВалютаДокумента;
		Значение.РасчетыВУсловныхЕдиницах = Ложь;
	КонецЕсли;
	
ИначеЕсли ТипЗначенияДокументаОснования = Тип("ДокументСсылка.ВозвратТоваровОтКлиента") Тогда
	
	Запрос.Текст = "
	|ВЫБРАТЬ
	|	РасшифровкаПлатежа.Ссылка.Партнер КАК Партнер,
	|	РасшифровкаПлатежа.Ссылка.Соглашение КАК Соглашение,
	|	РасшифровкаПлатежа.Ссылка.Соглашение.Валюта КАК ВалютаСоглашения,
	|	РасшифровкаПлатежа.Ссылка.Сделка КАК Сделка,
	|	РасшифровкаПлатежа.Заказ,
	|	РасшифровкаПлатежа.ВалютаВзаиморасчетов
	|ПОМЕСТИТЬ ДанныеДоговора
	|ИЗ
	|	Документ.ВозвратТоваровОтКлиента.РасшифровкаПлатежа КАК РасшифровкаПлатежа
	|ГДЕ
	|	РасшифровкаПлатежа.Ссылка = &amp;Ссылка
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ ПЕРВЫЕ 1
	|	ДанныеДоговора.Партнер,
	|	ДанныеДоговора.Соглашение,
	|	ДанныеДоговора.Сделка,
	|	ДанныеДоговора.ВалютаВзаиморасчетов,
	|	ДанныеДоговора.ВалютаСоглашения
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Заказ
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора";
	
	ДанныеДоговора = Запрос.ВыполнитьПакет();
	
	ОсновныеРеквизиты = ДанныеДоговора[1].Выгрузить();
	Значение.ПартнерУТ11             = ОсновныеРеквизиты[0].Партнер;
	Значение.СоглашениеСКлиентомУТ11 = ОсновныеРеквизиты[0].Соглашение;
	
	Если ЗначениеЗаполнено(Значение.СоглашениеСКлиентомУТ11) Тогда
		Значение.ВалютаВзаиморасчетов     = ОсновныеРеквизиты[0].ВалютаСоглашения;
		Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Значение.СоглашениеСКлиентомУТ11);
	Иначе
		Значение.ВалютаВзаиморасчетов     = ОсновныеРеквизиты[0].ВалютаВзаиморасчетов;
		Значение.РасчетыВУсловныхЕдиницах = ВходящиеДанные.ВалютаДокумента = Константы.ВалютаРегламентированногоУчета.Получить() И ВходящиеДанные.ВалютаДокумента &lt;&gt; Значение.ВалютаВзаиморасчетов;
	КонецЕсли;
	
	СверткаПоЗаказам = ДанныеДоговора[2].Выгрузить();
	Если СверткаПоЗаказам.Количество() = 1 Тогда
		
		ЗаказКлиента = СверткаПоЗаказам[0].Заказ;
		Если ТипЗнч(ЗаказКлиента) = Тип("ДокументСсылка.ЗаказКлиента") Тогда
			Значение.ЗаказКлиентаУТ11 = ЗаказКлиента;
		ИначеЕсли ТипЗнч(ЗаказКлиента) = Тип("СправочникСсылка.ДоговорыКонтрагентов") Тогда
			Договор = ЗаказКлиента;
		КонецЕсли;
		
	КонецЕсли;
	
ИначеЕсли ТипЗначенияДокументаОснования = Тип("ДокументСсылка.ВзаимозачетЗадолженности") Тогда
	
	ИмяТЧ = "ДебиторскаяЗадолженность";
	ТипРасчетов = "РасчетыСКлиентом";
	
	Если Источник.Организация = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.ДокументОснование, "КонтрагентКредитор") Тогда
		ИмяТЧ = "КредиторскаяЗадолженность";
		ТипРасчетов = "РасчетыСПоставщиком";
	КонецЕсли;
	
	Запрос.Текст = "
	|ВЫБРАТЬ
	|	ТабДок.Заказ,
	|	ТабДок.ВалютаВзаиморасчетов,
	|	ТабДок.Заказ.Соглашение КАК Соглашение,
	|	ТабДок.Заказ.Сделка КАК Сделка,
	|	ТабДок.Партнер
	|ПОМЕСТИТЬ ДанныеДоговора
	|ИЗ
	|	Документ.ВзаимозачетЗадолженности." + ИмяТЧ + " КАК ТабДок
	|ГДЕ
	|	ТабДок.Ссылка = &amp;Ссылка
	|	И ТабДок.ТипРасчетов = ЗНАЧЕНИЕ(Перечисление.ТипыРасчетовСПартнерами." + ТипРасчетов + ")
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Партнер
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Соглашение
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Заказ
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.Сделка
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДанныеДоговора.ВалютаВзаиморасчетов
	|ИЗ
	|	ДанныеДоговора КАК ДанныеДоговора";
	
	ДанныеДоговора = Запрос.ВыполнитьПакет();
	
	СверткаПоПартнеру = ДанныеДоговора[1].Выгрузить();
	Если СверткаПоПартнеру.Количество() = 1 Тогда
		Значение.ПартнерУТ11 = СверткаПоПартнеру[0].Партнер;
	КонецЕсли;
	
	СверткаПоСоглашениям = ДанныеДоговора[2].Выгрузить();
	Если СверткаПоСоглашениям.Количество() = 1 Тогда
		Значение.СоглашениеСКлиентомУТ11 = СверткаПоСоглашениям[0].Соглашение;
	КонецЕсли;
	
	СверткаПоЗаказам = ДанныеДоговора[3].Выгрузить();
	Если СверткаПоЗаказам.Количество() = 1 Тогда
		
		ЗаказКлиента = СверткаПоЗаказам[0].Заказ;
		Если ТипЗнч(ЗаказКлиента) = Тип("ДокументСсылка.ЗаказКлиента") Тогда
			Значение.ЗаказКлиентаУТ11 = ЗаказКлиента;
		ИначеЕсли ТипЗнч(ЗаказКлиента) = Тип("СправочникСсылка.ДоговорыКонтрагентов") Тогда
			Договор = ЗаказКлиента;
		КонецЕсли;
		
	КонецЕсли;
	
	СверткаПоСделкам = ДанныеДоговора[4].Выгрузить();
	Если СверткаПоСделкам.Количество() = 1 Тогда
		Значение.СделкаСКлиентомУТ11 = СверткаПоСделкам[0].Сделка;
	КонецЕсли;
	
	СверткаПоВалютеВзаиморасчетов = ДанныеДоговора[5].Выгрузить();
	Если СверткаПоВалютеВзаиморасчетов.Количество() = 1 Тогда
		
		Значение.ВалютаВзаиморасчетов = СверткаПоВалютеВзаиморасчетов[0].ВалютаВзаиморасчетов;
		Если ЗначениеЗаполнено(Значение.СоглашениеСКлиентомУТ11) Тогда
			Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Значение.СоглашениеСКлиентомУТ11);
		Иначе
			Значение.РасчетыВУсловныхЕдиницах = ВходящиеДанные.ВалютаДокумента = Константы.ВалютаРегламентированногоУчета.Получить() И ВходящиеДанные.ВалютаДокумента &lt;&gt; Значение.ВалютаВзаиморасчетов;
		КонецЕсли;
		
	Иначе
		Значение.ВалютаВзаиморасчетов	  = ВходящиеДанные.ВалютаДокумента;
		Значение.РасчетыВУсловныхЕдиницах = Ложь;
	КонецЕсли;
	
ИначеЕсли ТипЗначенияДокументаОснования = Тип("ДокументСсылка.ВозвратТоваровМеждуОрганизациями") Тогда
	
	Запрос.Текст = "
	|ВЫБРАТЬ
	|	Док.Партнер,
	|	Док.Валюта
	|ИЗ
	|	Документ.ВозвратТоваровМеждуОрганизациями КАК Док
	|ГДЕ
	|	Док.Ссылка = &amp;Ссылка
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ ПЕРВЫЕ 1
	|	РасшифровкаПлатежа.ВалютаВзаиморасчетов
	|ИЗ
	|	Документ.ВозвратТоваровМеждуОрганизациями.РасшифровкаПлатежа КАК РасшифровкаПлатежа
	|ГДЕ
	|	РасшифровкаПлатежа.Ссылка = &amp;Ссылка
	|
	|УПОРЯДОЧИТЬ ПО
	|	РасшифровкаПлатежа.НомерСтроки";
	
	РезультатЗапроса = Запрос.ВыполнитьПакет();	
	ДанныеШапки              = РезультатЗапроса[0].Выгрузить()[0];
	ДанныеРасшифровкиПлатежа = РезультатЗапроса[1].Выгрузить();
	
	Значение.ПартнерУТ11 = ДанныеШапки.Партнер;
	
	Если ДанныеРасшифровкиПлатежа.Количество() = 1 Тогда
		Значение.ВалютаВзаиморасчетов     = ДанныеРасшифровкиПлатежа[0].ВалютаВзаиморасчетов;
		Значение.РасчетыВУсловныхЕдиницах = ДанныеШапки.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И ДанныеШапки.Валюта &lt;&gt; Значение.ВалютаВзаиморасчетов;
	Иначе
		Значение.ВалютаВзаиморасчетов     = ДанныеШапки.Валюта;
		Значение.РасчетыВУсловныхЕдиницах = Ложь;
	КонецЕсли;
	
Иначе
	Значение.ВалютаВзаиморасчетов     = ВходящиеДанные.ВалютаДокумента;
	Значение.РасчетыВУсловныхЕдиницах = Ложь;
КонецЕсли;

Если ЗначениеЗаполнено(Договор) Тогда
	Значение = Договор;
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>ДокументОснование --&gt; ДокументОснование</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="ДокументОснование" Вид="Реквизит"/>
								<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
								<ПриВыгрузке>Если ТипЗнч(Значение) = Тип("ДокументСсылка.ВозвратТоваровМеждуОрганизациями") Тогда
	ИмяПКО = "ВТМО_ВозвратОтПокупателя";
ИначеЕсли ТипЗнч(Значение) = Тип("ДокументСсылка.ВзаимозачетЗадолженности") Тогда
	
	ДанныеВзаимозачета = ОбщегоНазначения.ПолучитьЗначенияРеквизитов(Значение, "Организация,КонтрагентДебитор,КонтрагентКредитор");
		
	ОрганизацияСФ = Источник.Организация;
	Если ОрганизацияСФ = ДанныеВзаимозачета.Организация Тогда
		ИмяПКО = "ВЗ_ВзаимозачетЗадолженностиНашаОрганизация";
	ИначеЕсли ОрганизацияСФ = ДанныеВзаимозачета.КонтрагентДебитор Тогда
		ИмяПКО = "ВЗ_ВзаимозачетЗадолженностиОрганизацияДебитор";
	ИначеЕсли ОрганизацияСФ = ДанныеВзаимозачета.КонтрагентКредитор Тогда
		ИмяПКО = "ВЗ_ВзаимозачетЗадолженностиОрганизацияКредитор";
	КонецЕсли;
		
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>ДатаПлатежноРасчетногоДокумента --&gt; ДатаПлатежноРасчетногоДокумента</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="ДатаПлатежноРасчетногоДокумента" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаПлатежноРасчетногоДокумента" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование>НомерПлатежноРасчетногоДокумента --&gt; НомерПлатежноРасчетногоДокумента</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="НомерПлатежноРасчетногоДокумента" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерПлатежноРасчетногоДокумента" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование>КодВидаОперации --&gt; КодВидаОперации</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="КодВидаОперации" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="КодВидаОперации" Вид="Реквизит" Тип="Строка"/>
								<ПриВыгрузке>Если Не ЗначениеЗаполнено(Значение) Тогда
	Значение = "02";
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование>ВыставленВЭлектронномВиде --&gt; КодСпособаВыставления</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="ВыставленВЭлектронномВиде" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="КодСпособаВыставления" Вид="Реквизит" Тип="Число"/>
								<ПриВыгрузке>Значение = ?(Значение, 2, 1);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>30</Код>
								<Наименование>ДатаВыставления --&gt; Выставлен</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="ДатаВыставления" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="Выставлен" Вид="Реквизит" Тип="Булево"/>
								<ПриВыгрузке>Значение = ЗначениеЗаполнено(Значение);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование>ДатаВыставления --&gt; ДатаВыставления</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="ДатаВыставления" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаВыставления" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>7</Код>
								<Наименование>Авансы --&gt; Авансы</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="Авансы" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="Авансы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>12</Код>
									<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Содержание --&gt; Содержание</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Сумма --&gt; Сумма</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа>
								<Код>18</Код>
								<Наименование> --&gt; ДокументыОснования</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДокументыОснования" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("ДокументОснование");
НоваяСтрока = КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>19</Код>
									<Наименование> --&gt; ДокументОснование</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
									<ПередВыгрузкой>Значение = Источник.ДокументОснование;

Если ТипЗнч(Значение) = Тип("ДокументСсылка.ВозвратТоваровМеждуОрганизациями") Тогда
	ИмяПКО = "ВТМО_ВозвратОтПокупателя";
ИначеЕсли ТипЗнч(Значение) = Тип("ДокументСсылка.ВзаимозачетЗадолженности") Тогда
	
	ДанныеВзаимозачета = ОбщегоНазначения.ПолучитьЗначенияРеквизитов(Значение, "Организация,КонтрагентДебитор,КонтрагентКредитор");
		
	ОрганизацияСФ = Источник.Организация;
	Если ОрганизацияСФ = ДанныеВзаимозачета.Организация Тогда
		ИмяПКО = "ВЗ_ВзаимозачетЗадолженностиНашаОрганизация";
	ИначеЕсли ОрганизацияСФ = ДанныеВзаимозачета.КонтрагентДебитор Тогда
		ИмяПКО = "ВЗ_ВзаимозачетЗадолженностиОрганизацияДебитор";
	ИначеЕсли ОрганизацияСФ = ДанныеВзаимозачета.КонтрагентКредитор Тогда
		ИмяПКО = "ВЗ_ВзаимозачетЗадолженностиОрганизацияКредитор";
	КонецЕсли;
		
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
							</Группа>
							<Группа>
								<Код>20</Код>
								<Наименование> --&gt; ДатаНомерДокументовОплаты</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаНомерДокументовОплаты" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("ДатаПлатежноРасчетногоДокумента");
КоллекцияОбъектов.Колонки.Добавить("НомерПлатежноРасчетногоДокумента");
Если ЗначениеЗаполнено(Источник.ДокументОснование) Тогда
	КоллекцияОбъектов.Добавить();
КонецЕсли;</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>22</Код>
									<Наименование> --&gt; ДатаПлатежноРасчетногоДокумента</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДатаПлатежноРасчетногоДокумента" Вид="Реквизит" Тип="Дата"/>
									<ПередВыгрузкой>Значение = Источник.ДатаПлатежноРасчетногоДокумента;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование> --&gt; НомерПлатежноРасчетногоДокумента</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НомерПлатежноРасчетногоДокумента" Вид="Реквизит" Тип="Строка"/>
									<ПередВыгрузкой>Значение = Источник.НомерПлатежноРасчетногоДокумента;</ПередВыгрузкой>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>СФВ_СчетФактураВыданный</Код>
						<Наименование>Документ: Счет фактура выданный</Наименование>
						<Порядок>150</Порядок>
						<ПередВыгрузкой>Если Не ТолькоПолучитьУзелСсылки Тогда
	
	ВходящиеДанные = Новый Структура();
	ВходящиеДанные.Вставить("ДатаИсходногоДокумента");
	ВходящиеДанные.Вставить("НомерИсходногоДокумента");
	ВходящиеДанные.Вставить("ДатаИсправляемогоКорректировочногоДокумента");
	ВходящиеДанные.Вставить("НомерИсправляемогоКорректировочногоДокумента");
	
	Запрос = Новый Запрос("ВЫБРАТЬ
	|	ВЫБОР
	|		КОГДА Док.Корректировочный
	|			ТОГДА Док.НомерИсходногоДокумента
	|		Когда Док.Исправление
	|			ТОГДА Док.СчетФактураОснование.Номер
	|		ИНАЧЕ """"
	|	КОНЕЦ КАК НомерИсходногоДокумента,
	|	ВЫБОР
	|		КОГДА Док.Корректировочный
	|			ТОГДА Док.ДатаИсходногоДокумента
	|		КОГДА Док.Исправление
	|			ТОГДА Док.СчетФактураОснование.Дата
	|		ИНАЧЕ 0
	|	КОНЕЦ КАК ДатаИсходногоДокумента,
	|	ВЫБОР
	|		КОГДА Док.Корректировочный
	|				И Док.Исправление
	|			ТОГДА Док.СчетФактураОснование.Номер
	|		ИНАЧЕ """"
	|	КОНЕЦ КАК НомерИсправляемогоКорректировочногоДокумента,
	|	ВЫБОР
	|		КОГДА Док.Корректировочный
	|				И Док.Исправление
	|			ТОГДА Док.СчетФактураОснование.Дата
	|		ИНАЧЕ 0
	|	КОНЕЦ КАК ДатаИсправляемогоКорректировочногоДокумента
	|ИЗ
	|	Документ.СчетФактураВыданный КАК Док
	|ГДЕ
	|	Док.Ссылка = &amp;Ссылка");
	Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

	Выборка = Запрос.Выполнить().Выбрать();
	Если Выборка.Следующий() Тогда
		ЗаполнитьЗначенияСвойств(ВходящиеДанные, Выборка);
	КонецЕсли;

КонецЕсли;</ПередВыгрузкой>
						<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	Параметры.ЗагруженныеСчетаФактурыВыданные.Добавить(Объект);
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.СчетФактураВыданный</Источник>
						<Приемник>ДокументСсылка.СчетФактураВыданный</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>30</Код>
								<Наименование>НомерИсправления --&gt; НомерИсправления</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="НомерИсправления" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерИсправления" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>38</Код>
								<Наименование>НомерИсправленияИсходногоДокумента --&gt; УчитыватьИсправлениеИсходногоДокумента</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="НомерИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="УчитыватьИсправлениеИсходногоДокумента" Вид="Реквизит" Тип="Булево"/>
								<ПриВыгрузке>Значение = ЗначениеЗаполнено(Значение);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование>ДатаИсправленияИсходногоДокумента --&gt; ДатаИсправленияИсходногоДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="ДатаИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование>НомерИсправленияИсходногоДокумента --&gt; НомерИсправленияИсходногоДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="НомерИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование> --&gt; ДатаИсходногоДокумента</Наименование>
								<Порядок>350</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>32</Код>
								<Наименование> --&gt; НомерИсходногоДокумента</Наименование>
								<Порядок>400</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НомерИсходногоДокумента" Вид="Реквизит" Тип="Строка"/>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение)
	И Не Источник.Корректировочный Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Значение, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>36</Код>
								<Наименование> --&gt; ДатаИсправляемогоКорректировочногоДокумента</Наименование>
								<Порядок>450</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаИсправляемогоКорректировочногоДокумента" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>37</Код>
								<Наименование> --&gt; НомерИсправляемогоКорректировочногоДокумента</Наименование>
								<Порядок>500</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НомерИсправляемогоКорректировочногоДокумента" Вид="Реквизит" Тип="Строка"/>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Значение, Ложь, Истина);
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Корректировочный --&gt; ВидСчетаФактуры</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Корректировочный" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="ВидСчетаФактуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидСчетаФактурыВыставленного"/>
								<ПриВыгрузке>Значение = ?(Значение, "Корректировочный", "НаРеализацию");</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование>Исправление --&gt; Исправление</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="Исправление" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="Исправление" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>ДокументОснование --&gt; ДокументОснование</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="ДокументОснование" Вид="Реквизит"/>
								<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
								<ПриВыгрузке>Если ТипЗнч(Значение) = Тип("ДокументСсылка.ПередачаТоваровМеждуОрганизациями") Тогда
	ИмяПКО = "ПДТ_ПередачаТоваровПродажа";
ИначеЕсли ТипЗнч(Значение) = Тип("ДокументСсылка.ВозвратТоваровМеждуОрганизациями") Тогда
	ИмяПКО = "ВТМО_ВозвратПоставщику";
ИначеЕсли ТипЗнч(Значение) = Тип("ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями") Тогда
	Если Источник.Организация = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.ДокументОснование, "Организация") Тогда
		ИмяПКО = "ОКОПМО_ОтчетКомиссионераОПродажах";
	Иначе
		ИмяПКО = "ОКТОПМО_ОтчетКомитентуОПродажах";
	КонецЕсли;
ИначеЕсли ТипЗнч(Значение) = Тип("ДокументСсылка.КорректировкаРеализации") Тогда
	ИмяПКО = "КорректировкаРеализации_КорректировкаРеализации";
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>33</Код>
								<Наименование>ДатаВыставления --&gt; Выставлен</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="ДатаВыставления" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="Выставлен" Вид="Реквизит" Тип="Булево"/>
								<ПриВыгрузке>Значение = ЗначениеЗаполнено(Значение);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>ДатаВыставления --&gt; ДатаВыставления</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="ДатаВыставления" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаВыставления" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>КодВидаОперации --&gt; КодВидаОперации</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="КодВидаОперации" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="КодВидаОперации" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>ВыставленВЭлектронномВиде --&gt; КодСпособаВыставления</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="ВыставленВЭлектронномВиде" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="КодСпособаВыставления" Вид="Реквизит" Тип="Число"/>
								<ПриВыгрузке>Значение = ?(Значение, 2, 1);</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование> --&gt; Проведен</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>4</Код>
								<Наименование>ПлатежноРасчетныеДокументы --&gt; ДатаНомерДокументовОплаты</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="ПлатежноРасчетныеДокументы" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="ДатаНомерДокументовОплаты" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Если Источник.Корректировочный
	И Источник.ПлатежноРасчетныеДокументы.Количество() = 0 Тогда
	КоллекцияОбъектов = Новый ТаблицаЗначений();
	КоллекцияОбъектов.Колонки.Добавить("ДатаПлатежноРасчетногоДокумента");
	КоллекцияОбъектов.Колонки.Добавить("НомерПлатежноРасчетногоДокумента");
	КоллекцияОбъектов.Добавить();
КонецЕсли;</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>6</Код>
									<Наименование>ДатаПлатежноРасчетногоДокумента --&gt; ДатаПлатежноРасчетногоДокумента</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ДатаПлатежноРасчетногоДокумента" Вид="Реквизит" Тип="Дата"/>
									<Приемник Имя="ДатаПлатежноРасчетногоДокумента" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>НомерПлатежноРасчетногоДокумента --&gt; НомерПлатежноРасчетногоДокумента</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="НомерПлатежноРасчетногоДокумента" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерПлатежноРасчетногоДокумента" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
							</Группа>
							<Группа>
								<Код>10</Код>
								<Наименование> --&gt; ДокументыОснования</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДокументыОснования" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("ДокументОснование");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>11</Код>
									<Наименование> --&gt; ДокументОснование</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
									<ПередВыгрузкой>Значение = Источник.ДокументОснование;
Если ТипЗнч(Значение) = Тип("ДокументСсылка.ПередачаТоваровМеждуОрганизациями") Тогда
	ИмяПКО = "ПДТ_ПередачаТоваровПродажа";
ИначеЕсли ТипЗнч(Значение) = Тип("ДокументСсылка.ВозвратТоваровМеждуОрганизациями") Тогда
	ИмяПКО = "ВТМО_ВозвратПоставщику";
ИначеЕсли ТипЗнч(Значение) = Тип("ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями") Тогда
	Если Источник.Организация = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "Организация") Тогда
		ИмяПКО = "ОКОПМО_ОтчетКомиссионераОПродажах";
	Иначе
		ИмяПКО = "ОКТОПМО_ОтчетКомитентуОПродажах";
	КонецЕсли;
ИначеЕсли ТипЗнч(Значение) = Тип("ДокументСсылка.КорректировкаРеализации") Тогда
	ИмяПКО = "КорректировкаРеализации_КорректировкаРеализации";
КонецЕсли;</ПередВыгрузкой>
								</Свойство>
							</Группа>
							<Свойство Отключить="true">
								<Код>35</Код>
								<Наименование>ДатаИсходногоДокумента --&gt;</Наименование>
								<Порядок>1200</Порядок>
								<Источник Имя="ДатаИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>34</Код>
								<Наименование>НомерИсходногоДокумента --&gt;</Наименование>
								<Порядок>1250</Порядок>
								<Источник Имя="НомерИсходногоДокумента" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>14</Код>
								<Наименование> --&gt; Контрагент</Наименование>
								<Порядок>1300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>13</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>1350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>25</Код>
								<Наименование> --&gt; ИсправляемыйСчетФактура</Наименование>
								<Порядок>1400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИсправляемыйСчетФактура" Вид="Реквизит" Тип="ДокументСсылка.СчетФактураВыданный"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>12</Код>
								<Наименование> --&gt; СуммаДокумента</Наименование>
								<Порядок>1450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>23</Код>
								<Наименование> --&gt; СуммаУвеличение</Наименование>
								<Порядок>1500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаУвеличение" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>24</Код>
								<Наименование> --&gt; СуммаУменьшение</Наименование>
								<Порядок>1550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаУменьшение" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>20</Код>
								<Наименование> --&gt; СуммаНДСДокумента</Наименование>
								<Порядок>1600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДСДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>21</Код>
								<Наименование> --&gt; СуммаНДСУвеличение</Наименование>
								<Порядок>1650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДСУвеличение" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>22</Код>
								<Наименование> --&gt; СуммаНДСУменьшение</Наименование>
								<Порядок>1700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДСУменьшение" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>26</Код>
								<Наименование> --&gt; СчетФактураБезНДС</Наименование>
								<Порядок>1750</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетФактураБезНДС" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
			</Группа>
			<Группа>
				<Код>Эквайринг</Код>
				<Наименование>ПКО для документов, связанных с операциями по эквайрингу</Наименование>
				<Порядок>650</Порядок>
				<Правило>
					<Код>ОППК_ОперацияПоПлатежнойКартеПоступление</Код>
					<Наименование>Документ: Операция по платежной карте</Наименование>
					<Порядок>800</Порядок>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ОперацияПоПлатежнойКарте</Источник>
					<Приемник>ДокументСсылка.КорректировкаДолга</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>21</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "Э" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Контрагент --&gt; КонтрагентДебитор</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="КонтрагентДебитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование> --&gt; КонтрагентКредитор</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КонтрагентКредитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							<ПередВыгрузкой>Значение = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.ДоговорЭквайринга, "Контрагент");</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование> --&gt; ДоговорКонтрагента</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
							<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"Прочее");
Значение.Вставить("Владелец",					Неопределено);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ДанныеДоговораЭквайринга = ОбщегоНазначения.ПолучитьЗначенияРеквизитов(Источник.ДоговорЭквайринга, "Контрагент,Эквайрер");

Значение.Владелец		= ДанныеДоговораЭквайринга.Контрагент;
Значение.ПартнерУТ11	= ДанныеДоговораЭквайринга.Эквайрер;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>Валюта --&gt; КратностьДокумента</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КратностьДокумента" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>Валюта --&gt; КурсДокумента</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КурсДокумента" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование> --&gt; ВидОперации</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийКорректировкаДолга"/>
							<ПередВыгрузкой>Значение = "ПереносЗадолженности";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>СуммаДокумента --&gt; СуммаДтЗадолженности</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаДтЗадолженности" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование> --&gt; СчетДт</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетДт" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<ПередВыгрузкой>Значение = "57.03";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<КодПравилаКонвертации>ДоговорыЭквайринга                                </КодПравилаКонвертации>
							<ИмяПараметраДляПередачи>ВидОплатыОрганизации</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.ЭквайринговыйТерминал, "Владелец");</ПередВыгрузкой>
						</Свойство>
						<Группа>
							<Код>6</Код>
							<Наименование>РасшифровкаПлатежа --&gt; СуммыДолга</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="СуммыДолга" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>7</Код>
								<Наименование>Сумма --&gt; Сумма</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>СуммаВзаиморасчетов --&gt; СуммаВзаиморасчетов</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование> --&gt; ВидЗадолженности</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыЗадолженности"/>
								<ПередВыгрузкой>Значение = "Дебиторская";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>Заказ --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Заказ" Вид="Реквизит"/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) И ТипЗнч(Значение) = Тип("СправочникСсылка.ДоговорыКонтрагентов") Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				Неопределено);
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				ОбъектКоллекции.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	Заказ = ОбъектКоллекции.Заказ;
	Если ЗначениеЗаполнено(Заказ) Тогда
		
		// Определяем тип заказа, он может быть одним из следующих
		//	- ДокументСсылка.ЗаказКлиента
		//	- ДокументСсылка.РеализацияТоваровУслуг
		//	- ДокументСсылка.АктВыполненныхРабот
		//	- ДокументСсылка.ОтчетКомиссионера
		//	- ДокументСсылка.ОтчетКомиссионераОСписании
		//	- ДокументСсылка.ОтчетКомитенту
		//	- ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями
		//	- ДокументСсылка.ПередачаТоваровМеждуОрганизациями
		
		ТипЗаказа = ТипЗнч(Заказ);
		Если ТипЗаказа = Тип("ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями") Тогда
			Значение.ВидДоговора = "СКомиссионером";
		ИначеЕсли ТипЗаказа = Тип("ДокументСсылка.ПередачаТоваровМеждуОрганизациями") Тогда
			Значение.ВидДоговора = "СПокупателем";
		Иначе
		
			// Соглашение может быть получено для всех вариантов операции
			Соглашение = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Заказ, "Соглашение");
			Если ТипЗнч(Соглашение) = Тип("СправочникСсылка.СоглашенияСПоставщиками") Тогда
				Значение.СоглашениеСПоставщикомУТ11 = Соглашение;
			ИначеЕсли ТипЗнч(Соглашение) = Тип("СправочникСсылка.СоглашенияСКлиентами") Тогда
				Значение.СоглашениеСКлиентомУТ11 = Соглашение;
			КонецЕсли;
			
			// Для продолжения анализа операции, необходимо определить вид договора
			ВидДоговора = ВзаиморасчетыСервер.ВидДоговораКонтрагента(ОбъектКоллекции.Заказ, Соглашение, Источник.ХозяйственнаяОперация);
			Значение.ВидДоговора = ?(ЗначениеЗаполнено(ВидДоговора), ВидДоговора, "СПоставщиком");
			
			Если Значение.ВидДоговора = "СКомитентом" ИЛИ Значение.ВидДоговора = "СКомиссионером" Тогда
				// Договора по комиссии выгружаются без разделения по сделкам и заказам и всегда не в у.е.
				Значение.РасчетыВУсловныхЕдиницах = Ложь;
			Иначе
				
				Если ЗначениеЗаполнено(Соглашение) Тогда
					Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Соглашение);
				КонецЕсли;
				
				Если Заказ.Метаданные().Реквизиты.Найти("Сделка") &lt;&gt; Неопределено Тогда
					Значение.СделкаСКлиентомУТ11 = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Заказ, "Сделка");
				КонецЕсли;
				
				// Разделение по заказу идет, если в качестве заказа указан заказ клиента
				Если ТипЗаказа = Тип("ДокументСсылка.ЗаказКлиента") Тогда
					Значение.ЗаказКлиентаУТ11 = Заказ;
				КонецЕсли;
				
			КонецЕсли;
		КонецЕсли;
		
	Иначе
		Значение.ВидДоговора = "СПокупателем";
	КонецЕсли;	
	
	Если Значение.РасчетыВУсловныхЕдиницах = Неопределено Тогда
		Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ОбъектКоллекции.ВалютаВзаиморасчетов;
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство Отключить="true">
								<Код>31</Код>
								<Наименование>Партнер --&gt;</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Свойство Отключить="true">
							<Код>28</Код>
							<Наименование>ДоговорЭквайринга --&gt;</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="ДоговорЭквайринга" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыЭквайринга"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>29</Код>
							<Наименование>ХозяйственнаяОперация --&gt;</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="ХозяйственнаяОперация" Вид="Реквизит" Тип="ПеречислениеСсылка.ХозяйственныеОперации"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>30</Код>
							<Наименование>ЭквайринговыйТерминал --&gt;</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="ЭквайринговыйТерминал" Вид="Реквизит" Тип="СправочникСсылка.ЭквайринговыеТерминалы"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ОППВ_ОперацияПоПлатежнойКартеВозврат</Код>
					<Наименование>Документ: Операция по платежной карте</Наименование>
					<Порядок>850</Порядок>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ОперацияПоПлатежнойКарте</Источник>
					<Приемник>ДокументСсылка.КорректировкаДолга</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>19</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "Э" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Контрагент --&gt; КонтрагентДебитор</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="КонтрагентДебитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование> --&gt; КонтрагентКредитор</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КонтрагентКредитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							<ПередВыгрузкой>Значение = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.ДоговорЭквайринга, "Контрагент");</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование> --&gt; ДоговорКонтрагента</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
							<ПередВыгрузкой>// Инициализируем структуру договора
Значение = Новый Структура;

// Реквизиты договора
Значение.Вставить("Ссылка");
Значение.Вставить("ВалютаВзаиморасчетов",		Источник.Валюта);
Значение.Вставить("ВидДоговора",				"Прочее");
Значение.Вставить("Владелец",					Неопределено);
Значение.Вставить("Организация",				Источник.Организация);
Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
Значение.Вставить("ПартнерУТ11",				Неопределено);
Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);

ДанныеДоговораЭквайринга = ОбщегоНазначения.ПолучитьЗначенияРеквизитов(Источник.ДоговорЭквайринга, "Контрагент,Эквайрер");

Значение.Владелец		= ДанныеДоговораЭквайринга.Контрагент;
Значение.ПартнерУТ11	= ДанныеДоговораЭквайринга.Эквайрер;

ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Валюта --&gt; КратностьДокумента</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КратностьДокумента" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Валюта --&gt; КурсДокумента</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="КурсДокумента" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование> --&gt; ВидОперации</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийКорректировкаДолга"/>
							<ПередВыгрузкой>Значение = "ПереносЗадолженности";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>СуммаДокумента --&gt; СуммаКтЗадолженности</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаКтЗадолженности" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование> --&gt; СчетКт</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетКт" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<ПередВыгрузкой>Значение = "57.03";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<КодПравилаКонвертации>ДоговорыЭквайринга                                </КодПравилаКонвертации>
							<ИмяПараметраДляПередачи>ВидОплатыОрганизации</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Источник.ЭквайринговыйТерминал, "Владелец");</ПередВыгрузкой>
						</Свойство>
						<Группа>
							<Код>12</Код>
							<Наименование>РасшифровкаПлатежа --&gt; СуммыДолга</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="СуммыДолга" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>13</Код>
								<Наименование>Сумма --&gt; Сумма</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>СуммаВзаиморасчетов --&gt; СуммаВзаиморасчетов</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование> --&gt; ВидЗадолженности</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыЗадолженности"/>
								<ПередВыгрузкой>Значение = "Кредиторская";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>Заказ --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Заказ" Вид="Реквизит"/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) И ТипЗнч(Значение) = Тип("СправочникСсылка.ДоговорыКонтрагентов") Тогда
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	ВидДоговора = ВзаиморасчетыСервер.ВидДоговораКонтрагента(ОбъектКоллекции.Заказ, Неопределено, Источник.ХозяйственнаяОперация);
	РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ОбъектКоллекции.ВалютаВзаиморасчетов;
	
	Значение = Новый Структура;
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов", ОбъектКоллекции.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора", ВидДоговора);
	Значение.Вставить("Владелец", Источник.Контрагент);
	Значение.Вставить("Организация", Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", РасчетыВУсловныхЕдиницах);
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				Неопределено);
	Значение.Вставить("Владелец",					Источник.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				ОбъектКоллекции.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	Заказ = ОбъектКоллекции.Заказ;
	Если ЗначениеЗаполнено(Заказ) Тогда
		
		// Определяем тип заказа, он может быть одним из следующих
		//	- ДокументСсылка.ЗаказКлиента
		//	- ДокументСсылка.РеализацияТоваровУслуг
		//	- ДокументСсылка.АктВыполненныхРабот
		//	- ДокументСсылка.ЗаявкаНаВозвратТоваровОтКлиента
		//	- ДокументСсылка.ОтчетКомиссионера
		//	- ДокументСсылка.ОтчетКомиссионераОСписании
		//	- ДокументСсылка.ОтчетКомитенту
		//	- ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями
		//	- ДокументСсылка.ПередачаТоваровМеждуОрганизациями
		
		ТипЗаказа = ТипЗнч(Заказ);
		Если ТипЗаказа = Тип("ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями") Тогда
			Значение.ВидДоговора = "СКомиссионером";
		ИначеЕсли ТипЗаказа = Тип("ДокументСсылка.ПередачаТоваровМеждуОрганизациями") Тогда
			Значение.ВидДоговора = "СПокупателем";
		Иначе
		
			// Соглашение может быть получено для всех вариантов операции
			Соглашение = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Заказ, "Соглашение");
			Если ТипЗнч(Соглашение) = Тип("СправочникСсылка.СоглашенияСПоставщиками") Тогда
				Значение.СоглашениеСПоставщикомУТ11 = Соглашение;
			ИначеЕсли ТипЗнч(Соглашение) = Тип("СправочникСсылка.СоглашенияСКлиентами") Тогда
				Значение.СоглашениеСКлиентомУТ11 = Соглашение;
			КонецЕсли;
			
			// Для продолжения анализа операции, необходимо определить вид договора
			ВидДоговора = ВзаиморасчетыСервер.ВидДоговораКонтрагента(ОбъектКоллекции.Заказ, Соглашение, Источник.ХозяйственнаяОперация);
			Значение.ВидДоговора = ?(ЗначениеЗаполнено(ВидДоговора), ВидДоговора, "СПокупателем");
			
			Если Значение.ВидДоговора = "СКомитентом" ИЛИ Значение.ВидДоговора = "СКомиссионером" Тогда
				// Договора по комиссии выгружаются без разделения по сделкам и заказам и всегда не в у.е.
				Значение.РасчетыВУсловныхЕдиницах = Ложь;
			Иначе
				
				Если ЗначениеЗаполнено(Соглашение) Тогда
					Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Соглашение);
				КонецЕсли;
				
				Если Заказ.Метаданные().Реквизиты.Найти("Сделка") &lt;&gt; Неопределено Тогда
					Значение.СделкаСКлиентомУТ11 = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Заказ, "Сделка");
				КонецЕсли;
				
				// Разделение по заказу идет, если в качестве заказа указан заказ клиента
				Если ТипЗаказа = Тип("ДокументСсылка.ЗаказКлиента") Тогда
					Значение.ЗаказКлиентаУТ11 = Заказ;
				КонецЕсли;
				
			КонецЕсли;
		КонецЕсли;
		
	Иначе
		Значение.ВидДоговора = "СПокупателем";
	КонецЕсли;	
	
	Если Значение.РасчетыВУсловныхЕдиницах = Неопределено Тогда
		Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ОбъектКоллекции.ВалютаВзаиморасчетов;
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>ВалютаВзаиморасчетов --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
							</Свойство>
						</Группа>
						<Свойство Отключить="true">
							<Код>26</Код>
							<Наименование>ДоговорЭквайринга --&gt;</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="ДоговорЭквайринга" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыЭквайринга"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>27</Код>
							<Наименование>ЭквайринговыйТерминал --&gt;</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="ЭквайринговыйТерминал" Вид="Реквизит" Тип="СправочникСсылка.ЭквайринговыеТерминалы"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>28</Код>
							<Наименование>ХозяйственнаяОперация --&gt;</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="ХозяйственнаяОперация" Вид="Реквизит" Тип="ПеречислениеСсылка.ХозяйственныеОперации"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ОБОЭ_ОтчетБанкаПоОперациямЭквайринга</Код>
					<Наименование>Документ: Отчет банка по операциям эквайринга</Наименование>
					<Порядок>900</Порядок>
					<ПередВыгрузкой>ДанныеДоговораЭквайринга = ОбщегоНазначения.ПолучитьЗначенияРеквизитов(Источник.ДоговорЭквайринга, "БанковскийСчет,Контрагент,Эквайрер");

БанковскийСчетОперации = ДанныеДоговораЭквайринга.БанковскийСчет;
Выполнить(Алгоритмы.ПолучениеДатыИПризнакаПроведенияДокументовДБДС);

// Инициализируем структуру договора
ДоговорКонтрагента = Новый Структура;

// Реквизиты договора
ДоговорКонтрагента.Вставить("Ссылка");
ДоговорКонтрагента.Вставить("ВалютаВзаиморасчетов",			Источник.Валюта);
ДоговорКонтрагента.Вставить("ВидДоговора",					"Прочее");
ДоговорКонтрагента.Вставить("Владелец",						ДанныеДоговораЭквайринга.Контрагент);
ДоговорКонтрагента.Вставить("Организация",					Источник.Организация);
ДоговорКонтрагента.Вставить("РасчетыВУсловныхЕдиницах", 	Ложь);

// Дополнительные свойства договора
ДоговорКонтрагента.Вставить("ПартнерУТ11",					ДанныеДоговораЭквайринга.Эквайрер);
ДоговорКонтрагента.Вставить("СоглашениеСКлиентомУТ11",		Неопределено);
ДоговорКонтрагента.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
ДоговорКонтрагента.Вставить("СделкаСКлиентомУТ11",			Неопределено);
ДоговорКонтрагента.Вставить("ЗаказКлиентаУТ11",				Неопределено);
ДоговорКонтрагента.Вставить("ЗаказПоставщикуУТ11",			Неопределено);

// Передача данных в ПКС через входящие данные
ВходящиеДанные.Вставить("Контрагент", ДанныеДоговораЭквайринга.Контрагент);
ВходящиеДанные.Вставить("СчетОрганизации", ДанныеДоговораЭквайринга.БанковскийСчет);
ВходящиеДанные.Вставить("ДоговорКонтрагента", ДоговорКонтрагента);</ПередВыгрузкой>
					<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		
		СтатьяРасходов = ПараметрыОбъекта.Получить("СтатьяРасходов");
		Если ЗначениеЗаполнено(Объект.СчетУчетаРасчетовСКонтрагентом) И СтатьяРасходов &lt;&gt; Неопределено  Тогда
			
			// Заполняем аналитику счета расходов	
			Для Каждого СтрокаВидаСубконто Из Объект.СчетУчетаРасчетовСКонтрагентом.ВидыСубконто Цикл
				ТипЗначенияСубконто = СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
				Если ТипЗначенияСубконто.СодержитТип(ТипЗнч(СтатьяРасходов)) Тогда
					Объект["СубконтоКт" + СтрокаВидаСубконто.НомерСтроки] = СтатьяРасходов;
				КонецЕсли;
			КонецЦикла;
			
		КонецЕсли;
		
	КонецЕсли;
	
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ОтчетБанкаПоОперациямЭквайринга</Источник>
					<Приемник>ДокументСсылка.ПоступлениеНаРасчетныйСчет</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>3</Код>
							<Наименование> --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>19</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<ПередВыгрузкой>Значение = 	Лев(Источник.Номер, 5) + "Э" + Сред(Источник.Номер, 7);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование> --&gt; Проведен</Наименование>
							<Порядок>150</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>СуммаКомиссии --&gt; СуммаУслуг</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СуммаКомиссии" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаУслуг" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование> --&gt; ВидОперации</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеДенежныхСредств"/>
							<ПередВыгрузкой>Значение = "ПоступленияОтПродажПоПлатежнымКартамИБанковскимКредитам";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование> --&gt; Контрагент</Наименование>
							<Порядок>450</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование> --&gt; СчетОрганизации</Наименование>
							<Порядок>500</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
							<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>36</Код>
							<Наименование>Дата --&gt; ДатаВходящегоДокумента</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>37</Код>
							<Наименование>Номер --&gt; НомерВходящегоДокумента</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
							<ПриВыгрузке>Значение = ПрефиксацияОбъектовКлиентСервер.ПолучитьНомерНаПечать(Значение, Ложь, Истина);</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>33</Код>
							<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.СтатьяРасходов) Тогда
	Значение = Источник.СтатьяРасходов.КорреспондирующийСчет;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>34</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа>
							<Код>11</Код>
							<Наименование> --&gt; РасшифровкаПлатежа</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>// Формируется одна строка с данными платежа
КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("ДоговорКонтрагента");
КоллекцияОбъектов.Колонки.Добавить("КратностьВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("КурсВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СпособПогашенияЗадолженности");
КоллекцияОбъектов.Колонки.Добавить("СуммаВзаиморасчетов");
КоллекцияОбъектов.Колонки.Добавить("СуммаПлатежа");
КоллекцияОбъектов.Добавить();</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>12</Код>
								<Наименование> --&gt; ДоговорКонтрагента</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
								<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьТолькоСсылку = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>Валюта --&gt; КратностьВзаиморасчетов</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>Валюта --&gt; КурсВзаиморасчетов</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
								<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>СуммаДокумента --&gt; СуммаВзаиморасчетов</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>СуммаДокумента --&gt; СуммаПлатежа</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = Источник.СуммаДокумента;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование> --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
								<ПередВыгрузкой>Значение = "57.03";</ПередВыгрузкой>
							</Свойство>
						</Группа>
						<Свойство>
							<Код>32</Код>
							<Наименование>СтатьяРасходов --&gt;</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="СтатьяРасходов" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.СтатьиРасходов"/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СтатьяРасходов</ИмяПараметраДляПередачи>
							<ПриВыгрузке>Если ЗначениеЗаполнено(Значение) Тогда
	
	КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет");
	Если ЗначениеЗаполнено(КоррСчет) Тогда
		ИмяПКО = ?(Найти(КоррСчет, "91.02") &gt; 0, "СтатьиРасходовВПрочиеДоходыИРасходы", "СтатьиРасходовВСтатьиЗатрат");
	Иначе
		Пусто = Истина;
	КонецЕсли;
	
Иначе
	Пусто = Истина;	
КонецЕсли;</ПриВыгрузке>
						</Свойство>
						<Свойство Отключить="true">
							<Код>23</Код>
							<Наименование>Дата --&gt;</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>25</Код>
							<Наименование>Проведен --&gt;</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>30</Код>
							<Наименование>СуммаВозвратов --&gt;</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="СуммаВозвратов" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>31</Код>
							<Наименование>СуммаПокупок --&gt;</Наименование>
							<Порядок>1000</Порядок>
							<Источник Имя="СуммаПокупок" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>35</Код>
							<Наименование>ДоговорЭквайринга --&gt;</Наименование>
							<Порядок>1050</Порядок>
							<Источник Имя="ДоговорЭквайринга" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыЭквайринга"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
			</Группа>
			<Правило>
				<Код>АО_АвансовыйОтчетЗакупкаТоваровУслуг</Код>
				<Наименование>Документ: Поступление товаров услуг</Наименование>
				<Порядок>700</Порядок>
				<ПередВыгрузкой>Запрос = Новый Запрос();
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

Запрос.Текст = "ВЫБРАТЬ
|	СписокДок.ДокументПоступления КАК ДокументПоступления
|ПОМЕСТИТЬ СписокДок
|ИЗ
|	Документ.АвансовыйОтчет.ЗакупкаЗаНаличныйРасчет КАК СписокДок
|ГДЕ
|	СписокДок.Ссылка = &amp;Ссылка
|
|ИНДЕКСИРОВАТЬ ПО
|	ДокументПоступления
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	СписокДок.ДокументПоступления КАК ДокументПоступления,
|	МАКСИМУМ(СчетФактураПолученный.Ссылка.НомерИсправления) КАК НомерИсправления
|ПОМЕСТИТЬ НомераИсправленийСчетовФактур
|ИЗ
|	СписокДок КАК СписокДок
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.СчетФактураПолученный.ДокументыОснования КАК СчетФактураПолученный
|		ПО СписокДок.ДокументПоступления = СчетФактураПолученный.ДокументОснование
|ГДЕ
|	СчетФактураПолученный.Ссылка.Проведен
|
|СГРУППИРОВАТЬ ПО
|	СписокДок.ДокументПоступления
|
|ИНДЕКСИРОВАТЬ ПО
|	ДокументПоступления,
|	НомерИсправления
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	Товары.Ссылка.Склад,
|	Товары.Номенклатура.ТипНоменклатуры КАК ТипНоменклатуры,
|	Товары.Номенклатура,
|	Товары.Ссылка.Контрагент КАК Поставщик,
|	Товары.Количество,
|	Товары.СтавкаНДС,
|	Товары.СуммаНДС,
|	ВЫБОР
|		КОГДА СчетФактураПолученный.Ссылка ЕСТЬ NULL 
|			ТОГДА ЛОЖЬ
|		ИНАЧЕ ИСТИНА
|	КОНЕЦ КАК ПредъявленСФ,
|	Товары.НомерГТД,
|	Товары.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
|	Товары.Ссылка.НомерВходящегоДокумента,
|	Товары.Ссылка.ДатаВходящегоДокумента,
|	Товары.Ссылка.ЦенаВключаетНДС,
|	Товары.СтатьяРасходов,
|	Товары.СтатьяРасходов.КорреспондирующийСчет КАК КорреспондирующийСчет,
|	ВЫБОР
|		КОГДА Товары.Ссылка.ЦенаВключаетНДС
|			ТОГДА Товары.Сумма / Товары.Количество
|		ИНАЧЕ (Товары.Сумма + Товары.СуммаНДС) / Товары.Количество
|	КОНЕЦ КАК Цена,
|	ВЫБОР
|		КОГДА Товары.Ссылка.ЦенаВключаетНДС
|			ТОГДА Товары.Сумма
|		ИНАЧЕ Товары.Сумма + Товары.СуммаНДС
|	КОНЕЦ КАК Сумма,
|	СчетФактураПолученный.Ссылка КАК СчетФактура,
|	СчетФактураПолученный.Ссылка.Дата КАК ДатаСФ,
|	СчетФактураПолученный.Ссылка.Номер КАК НомерСФ
|ПОМЕСТИТЬ КупленныеТоварыИУслуги
|ИЗ
|	СписокДок КАК СписокДок
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ПоступлениеТоваровУслуг.Товары КАК Товары
|		ПО СписокДок.ДокументПоступления = Товары.Ссылка
|		ЛЕВОЕ СОЕДИНЕНИЕ НомераИсправленийСчетовФактур КАК НомераИсправленийСчетовФактур
|		ПО СписокДок.ДокументПоступления = НомераИсправленийСчетовФактур.ДокументПоступления
|		ЛЕВОЕ СОЕДИНЕНИЕ Документ.СчетФактураПолученный.ДокументыОснования КАК СчетФактураПолученный
|		ПО (СчетФактураПолученный.ДокументОснование = СписокДок.ДокументПоступления
|				И НомераИсправленийСчетовФактур.НомерИсправления = СчетФактураПолученный.Ссылка.НомерИсправления)
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	КупленныеТоварыИУслуги.Склад,
|	КупленныеТоварыИУслуги.ТипНоменклатуры,
|	КупленныеТоварыИУслуги.Номенклатура,
|	КупленныеТоварыИУслуги.Поставщик,
|	КупленныеТоварыИУслуги.Количество,
|	КупленныеТоварыИУслуги.Цена,
|	КупленныеТоварыИУслуги.Сумма,
|	КупленныеТоварыИУслуги.СтавкаНДС,
|	КупленныеТоварыИУслуги.СуммаНДС,
|	КупленныеТоварыИУслуги.ПредъявленСФ,
|	КупленныеТоварыИУслуги.НомерГТД,
|	КупленныеТоварыИУслуги.СтранаПроисхождения,
|	КупленныеТоварыИУслуги.НомерВходящегоДокумента,
|	КупленныеТоварыИУслуги.ДатаВходящегоДокумента,
|	КупленныеТоварыИУслуги.ЦенаВключаетНДС,
|	КупленныеТоварыИУслуги.СтатьяРасходов,
|	КупленныеТоварыИУслуги.КорреспондирующийСчет,
|	КупленныеТоварыИУслуги.СчетФактура,
|	КупленныеТоварыИУслуги.ДатаСФ,
|	КупленныеТоварыИУслуги.НомерСФ
|ИЗ
|	КупленныеТоварыИУслуги КАК КупленныеТоварыИУслуги
|ГДЕ
|	КупленныеТоварыИУслуги.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	КупленныеТоварыИУслуги.Склад,
|	КупленныеТоварыИУслуги.ТипНоменклатуры,
|	КупленныеТоварыИУслуги.Номенклатура,
|	КупленныеТоварыИУслуги.Поставщик,
|	КупленныеТоварыИУслуги.Количество,
|	КупленныеТоварыИУслуги.Цена,
|	КупленныеТоварыИУслуги.Сумма,
|	КупленныеТоварыИУслуги.СтавкаНДС,
|	КупленныеТоварыИУслуги.СуммаНДС,
|	КупленныеТоварыИУслуги.ПредъявленСФ,
|	КупленныеТоварыИУслуги.НомерГТД,
|	КупленныеТоварыИУслуги.СтранаПроисхождения,
|	КупленныеТоварыИУслуги.НомерВходящегоДокумента,
|	КупленныеТоварыИУслуги.ДатаВходящегоДокумента,
|	КупленныеТоварыИУслуги.ЦенаВключаетНДС,
|	КупленныеТоварыИУслуги.СтатьяРасходов,
|	КупленныеТоварыИУслуги.КорреспондирующийСчет,
|	КупленныеТоварыИУслуги.СчетФактура,
|	КупленныеТоварыИУслуги.ДатаСФ,
|	КупленныеТоварыИУслуги.НомерСФ
|ИЗ
|	КупленныеТоварыИУслуги КАК КупленныеТоварыИУслуги
|ГДЕ
|	КупленныеТоварыИУслуги.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)";

РезультатыЗапроса = Запрос.ВыполнитьПакет();

Товары = РезультатыЗапроса[3].Выгрузить();
Прочее = РезультатыЗапроса[4].Выгрузить();
ВходящиеДанные.Вставить("Товары", Товары);
ВходящиеДанные.Вставить("Прочее", Прочее);

Если Источник.ЗакупкаЗаНаличныйРасчет.Количество() &gt; 0 Тогда
	УчитыватьНДС		 = Источник.ЗакупкаЗаНаличныйРасчет[0].ДокументПоступления.НалогообложениеНДС = Перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;
	ЭтоЕНВД				 = Источник.ЗакупкаЗаНаличныйРасчет[0].ДокументПоступления.ЗакупкаПодДеятельностьОблагаемуюЕНВД;
Иначе
	УчитыватьНДС		 = Истина;
	ЭтоЕНВД				 = Ложь;
КонецЕсли;

ВходящиеДанные.Вставить("УчитыватьНДС", УчитыватьНДС);
ВходящиеДанные.Вставить("ЭтоЕНВД", ЭтоЕНВД);

СуммаДокумента = Товары.Итог("Сумма") + Прочее.Итог("Сумма");
ВходящиеДанные.Вставить("СуммаДокумента", СуммаДокумента);</ПередВыгрузкой>
				<ПослеЗагрузки>Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);

Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		
		ТаблицаСтатейРасходов = ПараметрыОбъекта.Получить("ПрочееТабличнаяЧасть");
		Для Каждого СтрокаТЧ Из Объект.Прочее Цикл
			
			СчетЗатрат	   = СтрокаТЧ.СчетЗатрат;
			СчетЗатратНУ   = СтрокаТЧ.СчетЗатратНУ;
			СтатьяРасходов = ТаблицаСтатейРасходов[СтрокаТЧ.НомерСтроки - 1].СтатьяРасходов;
			Если ЗначениеЗаполнено(СчетЗатрат) Тогда
				
				Для Каждого СтрокаВидаСубконто Из СчетЗатрат.ВидыСубконто Цикл
					
					ТипСубконто = СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
					Если ТипСубконто.СодержитТип(ТипЗнч(СтатьяРасходов)) Тогда
						СтрокаТЧ["Субконто" + СтрокаВидаСубконто.НомерСтроки] = СтатьяРасходов;
					КонецЕсли;
				КонецЦикла;
			КонецЕсли;
			
			Если ЗначениеЗаполнено(СчетЗатратНУ) Тогда
				
				Для Каждого СтрокаВидаСубконто Из СчетЗатрат.ВидыСубконто Цикл
					
					ТипСубконто = СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
					Если ТипСубконто.СодержитТип(ТипЗнч(СтатьяРасходов)) Тогда
						СтрокаТЧ["СубконтоНУ" + СтрокаВидаСубконто.НомерСтроки] = СтатьяРасходов;
					КонецЕсли;
				КонецЦикла;
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;

	ЗаполнениеДокументовПоУмолчанию.ЗаполнитьСчетаПоУмолчанию(Объект);
	
	// Заполняем параметры, зависящие от режима налогообложения
	УчетнаяПолитикаНеЗадана = Ложь;
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
	
	Если НЕ УчетнаяПолитикаНеЗадана Тогда
		
		Если УчетнаяПолитика.УСН И УчетнаяПолитика.ОбъектНалогообложенияУСН = Перечисления.ОбъектыНалогообложенияПоУСН.ДоходыМинусРасходы Тогда
			ВариантОтраженияУСН = ?(ПараметрыОбъекта["ЭтоЕНВД"], Перечисления.ОтражениеВУСН.НеПринимаются, Перечисления.ОтражениеВУСН.Принимаются);
		Иначе
			ВариантОтраженияУСН = Перечисления.ОтражениеВУСН.ПустаяСсылка();
		КонецЕсли;
			
		// Заполняем отражение в УСН для ТЧ Товары
		Для Каждого СтрокаТЧ Из Объект.Товары Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН &lt;&gt; Перечисления.ОтражениеВУСН.Принимаются Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
		// Заполняем отражение в УСН для ТЧ Прочее
		Для Каждого СтрокаТЧ Из Объект.Прочее Цикл
			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.ОтражениеВУСН) ИЛИ ВариантОтраженияУСН &lt;&gt; Перечисления.ОтражениеВУСН.Принимаются Тогда
				СтрокаТЧ.ОтражениеВУСН = ВариантОтраженияУСН;
			КонецЕсли;
		КонецЦикла;
		
		// Определяем признак включения НДС в стоимость
		Если УчетнаяПолитика.УСН Тогда
			Объект.НДСВключенВСтоимость = Истина;
		КонецЕсли;
	КонецЕсли;
	
	Если НЕ Объект.НДСВключенВСтоимость И ПараметрыОбъекта["ЭтоЕНВД"] Тогда
		Объект.НДСВключенВСтоимость = Истина;
	КонецЕсли;		
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>ДокументСсылка.АвансовыйОтчет</Источник>
				<Приемник>ДокументСсылка.АвансовыйОтчет</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>ПодотчетноеЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПодотчетноеЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПриВыгрузке>Выполнить(Алгоритмы.ВыполнитьСверткуСкладаПриНеобходимости);</ПриВыгрузке>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>Валюта --&gt; КратностьДокумента</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="КратностьДокумента" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Кратность;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>Валюта --&gt; КурсДокумента</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="КурсДокумента" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>// Документ оформлен в валюте взаиморасчетов
Значение = РаботаСКурсамиВалют.ПолучитьКурсВалюты(Источник.Валюта, Источник.Дата).Курс;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>46</Код>
						<Наименование>ИтогоИзрасходовано --&gt; СуммаДокумента</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ИтогоИзрасходовано" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>36</Код>
						<Наименование> --&gt; УчитыватьНДС</Наименование>
						<Порядок>550</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>31</Код>
						<Наименование> --&gt; СуммаВключаетНДС</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>КоличествоДокументов --&gt; КоличествоДокументов</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="КоличествоДокументов" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КоличествоДокументов" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>КоличествоЛистов --&gt; КоличествоЛистов</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="КоличествоЛистов" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КоличествоЛистов" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>НазначениеАванса --&gt; НазначениеАванса</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="НазначениеАванса" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НазначениеАванса" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>59</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>68</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>75</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>950</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ЭтоЕНВД</ИмяПараметраДляПередачи>
					</Свойство>
					<Группа>
						<Код>10</Код>
						<Наименование> --&gt; Товары</Наименование>
						<Порядок>1000</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>11</Код>
							<Наименование> --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>28</Код>
							<Наименование> --&gt; Цена</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование> --&gt; Сумма</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование> --&gt; СуммаНДС</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование> --&gt; ДатаВходящегоДокумента</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование> --&gt; ДатаСФ</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДатаСФ" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование> --&gt; Количество</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование> --&gt; НомерВходящегоДокумента</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование> --&gt; НомерГТД</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
							<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование> --&gt; НомерСФ</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерСФ" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование> --&gt; Поставщик</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Поставщик" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование> --&gt; ПредъявленСФ</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПредъявленСФ" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование> --&gt; СтавкаНДС</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование> --&gt; СтранаПроисхождения</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
							<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство Отключить="true">
							<Код>73</Код>
							<Наименование> --&gt; ОтражениеВУСН</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ОтражениеВУСН" Вид="Реквизит" Тип="ПеречислениеСсылка.ОтражениеВУСН"/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>32</Код>
						<Наименование> --&gt; Прочее</Наименование>
						<Порядок>1050</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Прочее" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>33</Код>
							<Наименование> --&gt; ДатаВходящегоДокумента</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>34</Код>
							<Наименование> --&gt; НомерВходящегоДокумента</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование> --&gt; Поставщик</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Поставщик" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						</Свойство>
						<Свойство>
							<Код>37</Код>
							<Наименование> --&gt; ПредъявленСФ</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПредъявленСФ" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование> --&gt; ДатаСФ</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДатаСФ" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование> --&gt; НомерСФ</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерСФ" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>40</Код>
							<Наименование> --&gt; Номенклатура</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование> --&gt; Сумма</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>42</Код>
							<Наименование> --&gt; СтавкаНДС</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>43</Код>
							<Наименование> --&gt; СуммаНДС</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>45</Код>
							<Наименование> --&gt; Содержание</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Значение = Строка(ОбъектКоллекции.Номенклатура);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>66</Код>
							<Наименование> --&gt; СчетЗатрат</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетЗатрат" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.КорреспондирующийСчет;
Пусто = НЕ ЗначениеЗаполнено(Значение);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>67</Код>
							<Наименование> --&gt; СчетЗатратНУ</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетЗатратНУ" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.КорреспондирующийСчет;
Пусто = НЕ ЗначениеЗаполнено(Значение)</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>65</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СтатьяРасходов</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.СтатьяРасходов;

Если ЗначениеЗаполнено(Значение) Тогда
	
	КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Значение, "КорреспондирующийСчет");
	Если ЗначениеЗаполнено(КоррСчет) Тогда
		ИмяПКО = ?(Найти(КоррСчет, "91.02") &gt; 0, "СтатьиРасходовВПрочиеДоходыИРасходы", "СтатьиРасходовВСтатьиЗатрат");
	Иначе
		Пусто = Истина;
	КонецЕсли;
	
Иначе
	Пусто = Истина;	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство Отключить="true">
							<Код>72</Код>
							<Наименование> --&gt; ОтражениеВУСН</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ОтражениеВУСН" Вид="Реквизит" Тип="ПеречислениеСсылка.ОтражениеВУСН"/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>50</Код>
						<Наименование>ОплатаПоставщикам --&gt; ОплатаПоставщикам</Наименование>
						<Порядок>1100</Порядок>
						<Источник Имя="ОплатаПоставщикам" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ОплатаПоставщикам" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>51</Код>
							<Наименование>Контрагент --&gt; Контрагент</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>53</Код>
							<Наименование>Заказ --&gt; ДоговорКонтрагента</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Заказ" Вид="Реквизит"/>
							<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
							<ПриВыгрузке>ДоговорКонтрагента = Неопределено;
Если ТипЗнч(Значение) = Тип("СправочникСсылка.ДоговорыКонтрагентов") Тогда
	ДоговорКонтрагента = Значение;
Иначе
	Попытка
		ДоговорКонтрагента = Значение.Договор;
	Исключение
	КонецПопытки;
КонецЕсли;

Если ЗначениеЗаполнено(ДоговорКонтрагента) Тогда
	Значение = ДоговорКонтрагента;
	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				Неопределено);
	Значение.Вставить("Владелец",					ОбъектКоллекции.Контрагент);
	Значение.Вставить("Организация",				Источник.Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				ОбъектКоллекции.Поставщик);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	Заказ = ОбъектКоллекции.Заказ;
	Если ЗначениеЗаполнено(Заказ) Тогда
		
		// Определяем тип заказа, он может быть одним из следующих
		//	- ДокументСсылка.ЗаказПоставщику
		//	- ДокументСсылка.ПоступлениеТоваровУслуг
		//	- ДокументСсылка.ОтчетКомитенту
		//	- ДокументСсылка.ОтчетКомитентуОСписании
		//	- ДокументСсылка.ОтчетКомиссионера
		
		ТипЗаказа = ТипЗнч(Заказ);
		
		// Соглашение может быть получено для всех вариантов операции
		Соглашение = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Заказ, "Соглашение");
		Если ТипЗнч(Соглашение) = Тип("СправочникСсылка.СоглашенияСПоставщиками") Тогда
			Значение.СоглашениеСПоставщикомУТ11 = Соглашение;
		ИначеЕсли ТипЗнч(Соглашение) = Тип("СправочникСсылка.СоглашенияСКлиентами") Тогда
			Значение.СоглашениеСКлиентомУТ11 = Соглашение;
		КонецЕсли;
		
		// Для продолжения анализа операции, необходимо определить вид договора
		ВидДоговора = ВзаиморасчетыСервер.ВидДоговораКонтрагента(ОбъектКоллекции.Заказ, Соглашение, Неопределено);
		Значение.ВидДоговора = ?(ЗначениеЗаполнено(ВидДоговора), ВидДоговора, "СПоставщиком");
		
		Если Значение.ВидДоговора = "СКомитентом" ИЛИ Значение.ВидДоговора = "СКомиссионером" Тогда
			// Договора по комиссии выгружаются без разделения по сделкам и заказам и всегда не в у.е.
			Значение.РасчетыВУсловныхЕдиницах = Ложь;
		Иначе
			
			Если ЗначениеЗаполнено(Соглашение) Тогда
				Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(Соглашение);
			КонецЕсли;
			
			// Разделение по заказу идет, если в качестве заказа указан заказ поставщику
			Если ТипЗаказа = Тип("ДокументСсылка.ЗаказПоставщику") Тогда
				Значение.ЗаказПоставщикуУТ11 = Заказ;
			КонецЕсли;
			
		КонецЕсли;
		
	Иначе
		Значение.ВидДоговора = "СПоставщиком";
	КонецЕсли;	
	
	Если Значение.РасчетыВУсловныхЕдиницах = Неопределено Тогда
		Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() И Источник.Валюта &lt;&gt; ОбъектКоллекции.ВалютаВзаиморасчетов;
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
КонецЕсли;</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>57</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>58</Код>
							<Наименование>СуммаВзаиморасчетов --&gt; СуммаВзаиморасчетов</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>52</Код>
							<Наименование>Комментарий --&gt; Содержание</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>54</Код>
							<Наименование> --&gt; КратностьВзаиморасчетов</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Кратность;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>55</Код>
							<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>СтруктураКурса = РаботаСКурсамиВалют.ПолучитьКурсВалюты(ОбъектКоллекции.ВалютаВзаиморасчетов, Источник.Дата);
Значение	   = СтруктураКурса.Курс;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>56</Код>
							<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
							<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>70</Код>
							<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>71</Код>
							<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>63</Код>
							<Наименование>ВалютаВзаиморасчетов --&gt;</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>69</Код>
							<Наименование>Поставщик --&gt;</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="Поставщик" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>47</Код>
						<Наименование>ПолученныеАвансы --&gt; ВыданныеАвансы</Наименование>
						<Порядок>1150</Порядок>
						<Источник Имя="ПолученныеАвансы" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ВыданныеАвансы" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Запрос = Новый Запрос("ВЫБРАТЬ
|	ПолученныеАвансы.ДокументАванса,
|	ПолученныеАвансы.Сумма
|ИЗ
|	Документ.АвансовыйОтчет.ПолученныеАвансы КАК ПолученныеАвансы
|ГДЕ
|	ПолученныеАвансы.Ссылка = &amp;Ссылка
|	И (ТИПЗНАЧЕНИЯ(ПолученныеАвансы.ДокументАванса) = ТИП(Документ.РасходныйКассовыйОрдер)
|			ИЛИ ТИПЗНАЧЕНИЯ(ПолученныеАвансы.ДокументАванса) = ТИП(Документ.СписаниеБезналичныхДенежныхСредств))");

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>48</Код>
							<Наименование>ДокументАванса --&gt; ДокументАванса</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ДокументАванса" Вид="Реквизит"/>
							<Приемник Имя="ДокументАванса" Вид="Реквизит"/>
							<ПередВыгрузкой>ТипЗначенияДокументаАванса = ТипЗнч(ОбъектКоллекции.ДокументАванса);
Если ТипЗначенияДокументаАванса = Тип("ДокументСсылка.РасходныйКассовыйОрдер") Тогда
	ИмяПКО = "РКО_ВыдачаДСПодотчетномуЛицу";
ИначеЕсли ТипЗначенияДокументаАванса = Тип("ДокументСсылка.СписаниеБезналичныхДенежныхСредств") Тогда
	ИмяПКО = "СБДС_ПеречислениеПодотчетномуЛицу";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>49</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Группа Отключить="true">
						<Код>61</Код>
						<Наименование>ЗакупкаЗаНаличныйРасчет --&gt;</Наименование>
						<Порядок>1200</Порядок>
						<Источник Имя="ЗакупкаЗаНаличныйРасчет" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="" Вид=""/>
						<Свойство Отключить="true">
							<Код>62</Код>
							<Наименование>ДокументПоступления --&gt;</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ДокументПоступления" Вид="Реквизит" Тип="ДокументСсылка.ПоступлениеТоваровУслуг"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>РегистрыСведений</Код>
			<Наименование>Регистры сведений</Наименование>
			<Порядок>200</Порядок>
			<Правило>
				<Код>КонтактнаяИнформация</Код>
				<Наименование>:</Наименование>
				<Порядок>50</Порядок>
				<ПослеЗагрузки>ОбъектМодифицирован = Ложь;

Для НомерЗаписи = 1 По Объект.Количество() Цикл
	
	ЗаписьРегистра = Объект[НомерЗаписи - 1];
	Если ЗаписьРегистра.Тип = Перечисления.ТипыКонтактнойИнформации.Адрес И НЕ ЗначениеЗаполнено(ЗаписьРегистра.Представление) Тогда 
		// Заполняем представление по умолчанию, если в УТ адрес был не произвольный
		ПредставлениеАдреса = УправлениеКонтактнойИнформацией.ПолучитьПредставлениеАдреса(ЗаписьРегистра);
		Если ЗначениеЗаполнено(ПредставлениеАдреса) Тогда
			ОбъектМодифицирован = Истина;
			ЗаписьРегистра.Представление = ПредставлениеАдреса;
		КонецЕсли;
	КонецЕсли;
	
КонецЦикла;</ПослеЗагрузки>
				<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
				<Приемник>РегистрСведенийЗапись.КонтактнаяИнформация</Приемник>
				<Свойства>
					<Свойство>
						<Код>2</Код>
						<Наименование> --&gt; Объект</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Объект" Вид="Измерение"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>ТипОбъекта = ТипЗнч(Источник.Объект);
Если ТипОбъекта = Тип("СправочникСсылка.Организации") Тогда
	ИмяПКО = "Организации";
ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.Контрагенты") Тогда
	ИмяПКО = "Контрагенты";
ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.ФизическиеЛица") Тогда
	ИмяПКО = "ФизическиеЛица";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование> --&gt; Вид</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Вид" Вид="Измерение"/>
						<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование> --&gt; Тип</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Тип" Вид="Измерение" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
						<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование> --&gt; Поле1</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле1" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование> --&gt; Поле2</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле2" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование> --&gt; Поле3</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле3" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование> --&gt; Поле4</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле4" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование> --&gt; Поле5</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле5" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование> --&gt; Поле6</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле6" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование> --&gt; Поле7</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле7" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование> --&gt; Поле8</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле8" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование> --&gt; Поле9</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле9" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование> --&gt; ТипДома</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ТипДома" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыДомов"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование> --&gt; ТипКвартиры</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ТипКвартиры" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыКвартир"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование> --&gt; ТипКорпуса</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ТипКорпуса" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыКорпусов"/>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование> --&gt; Представление</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Представление" Вид="Ресурс" Тип="Строка"/>
						<ПередВыгрузкой>// Для адреса представление формируется при загрузке в случае, если адрес не произвольный
Если Источник.Тип = Перечисления.ТипыКонтактнойИнформации.Адрес И НЕ Источник.ЭтоПроизвольнаяСтрока Тогда
	Пусто = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование> --&gt; Комментарий</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>ПланыВидовХарактеристик</Код>
			<Наименование>ПланыВидовХарактеристик</Наименование>
			<Порядок>250</Порядок>
			<Правило>
				<Код>ВидыСубконтоХозрасчетные</Код>
				<Наименование>:</Наименование>
				<Порядок>50</Порядок>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Приемник>ПланВидовХарактеристикСсылка.ВидыСубконтоХозрасчетные</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование> --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Если Источник = "Номенклатура" Тогда
	Значение = "00001";
ИначеЕсли Источник = "Контрагенты" Тогда
	Значение = "00005";
ИначеЕсли Источник = "Договоры" Тогда
	Значение = "00016";
ИначеЕсли Источник = "Склады" Тогда
	Значение = "00027";
ИначеЕсли Источник = "Партии" Тогда
	Значение = "00038";
ИначеЕсли Источник = "НомераГТД" Тогда
	Значение = "00050";
ИначеЕсли Источник = "СтраныПроисхождения" Тогда
	Значение = "00051";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
	</ПравилаКонвертацииОбъектов>
	<ПравилаВыгрузкиДанных>
		<Группа Отключить="false">
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>50</Порядок>
			<Группа Отключить="false">
				<Код>БазовыеКлассификаторы</Код>
				<Наименование>Базовые классификаторы</Наименование>
				<Порядок>50</Порядок>
				<Правило Отключить="false">
					<Код>Банки</Код>
					<Наименование>Банки</Наименование>
					<Порядок>800</Порядок>
					<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>СправочникСсылка.КлассификаторБанковРФ</ОбъектВыборки>
				</Правило>
				<Правило Отключить="false">
					<Код>ЕдиницыИзмерения</Код>
					<Наименование>Единицы измерения</Наименование>
					<Порядок>850</Порядок>
					<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>СправочникСсылка.ЕдиницыИзмерения</ОбъектВыборки>
				</Правило>
				<Правило Отключить="false">
					<Код>Валюты</Код>
					<Наименование>Валюты</Наименование>
					<Порядок>900</Порядок>
					<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>СправочникСсылка.Валюты</ОбъектВыборки>
				</Правило>
				<Правило Отключить="false">
					<Код>СтраныМира</Код>
					<Наименование>Страны мира</Наименование>
					<Порядок>950</Порядок>
					<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>СправочникСсылка.СтраныМира</ОбъектВыборки>
				</Правило>
			</Группа>
			<Правило Отключить="false">
				<Код>Организации</Код>
				<Наименование>Организации</Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Организации</ОбъектВыборки>
				<ПослеВыгрузкиОбъекта>Выполнить(Алгоритмы.ВыгрузкаКонтактнойИнформации);</ПослеВыгрузкиОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>ФизическиеЛица</Код>
				<Наименование>ФизическиеЛица</Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ФизическиеЛица</ОбъектВыборки>
				<ПослеВыгрузкиОбъекта>Если Не Объект.ЭтоГруппа Тогда
	Выполнить(Алгоритмы.ВыгрузкаКонтактнойИнформации);
КонецЕсли;</ПослеВыгрузкиОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>Контрагенты</Код>
				<Наименование>Контрагенты</Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Контрагенты</ОбъектВыборки>
				<ПослеВыгрузкиОбъекта>Выполнить(Алгоритмы.ВыгрузкаКонтактнойИнформации);</ПослеВыгрузкиОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>БанковскиеСчетаОрганизаций</Код>
				<Наименование>БанковскиеСчетаОрганизаций</Наименование>
				<Порядок>250</Порядок>
				<КодПравилаКонвертации>БанковскиеСчетаОрганизаций                        </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.БанковскиеСчетаОрганизаций</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>БанковскиеСчета</Код>
				<Наименование>Банковские счета получателей</Наименование>
				<Порядок>300</Порядок>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.БанковскиеСчетаКонтрагентов</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>Если ТипЗнч(Объект.Владелец) = Тип("СправочникСсылка.Контрагенты") Тогда
	ИмяПКО = "БанковскиеСчетаКонтрагентов";
ИначеЕсли ТипЗнч(Объект.Владелец) = Тип("СправочникСсылка.ФизическиеЛица") Тогда
	ИмяПКО = "БанковскиеСчетаФизическихЛиц";
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>СтатьиДвиженияДенежныхСредств</Код>
				<Наименование>СтатьиДвиженияДенежныхСредств</Наименование>
				<Порядок>350</Порядок>
				<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.СтатьиДвиженияДенежныхСредств</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВидыЦен</Код>
				<Наименование>ВидыЦен</Наименование>
				<Порядок>400</Порядок>
				<КодПравилаКонвертации>ТипыЦенНоменклатуры                               </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ВидыЦен</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Склады</Код>
				<Наименование>Склады</Наименование>
				<Порядок>450</Порядок>
				<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Склады</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Номенклатура</Код>
				<Наименование>Номенклатура</Наименование>
				<Порядок>500</Порядок>
				<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Номенклатура</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>НомераГТД</Код>
				<Наименование>Номера ГТД</Наименование>
				<Порядок>550</Порядок>
				<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.НомераГТД</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВидыКонтактнойИнформации</Код>
				<Наименование>Виды контактной информации</Наименование>
				<Порядок>600</Порядок>
				<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ВидыКонтактнойИнформации</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ДоговорыЭквайринга</Код>
				<Наименование>ДоговорыЭквайринга</Наименование>
				<Порядок>650</Порядок>
				<КодПравилаКонвертации>ДоговорыЭквайринга                                </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ДоговорыЭквайринга</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>СтатьиДоходов</Код>
				<Наименование>СтатьиДоходов</Наименование>
				<Порядок>700</Порядок>
				<КодПравилаКонвертации>СтатьиДоходовВПрочиеДоходыИРасходы                </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ПланВидовХарактеристикСсылка.СтатьиДоходов</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>СтатьиРасходов</Код>
				<Наименование>СтатьиРасходов</Наименование>
				<Порядок>750</Порядок>
				<КодПравилаКонвертации>СтатьиРасходовВПрочиеДоходыИРасходы               </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ПланВидовХарактеристикСсылка.СтатьиРасходов</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>ИмяПКО = ?(Найти(Объект.КорреспондирующийСчет, "91.02") &gt; 0, "СтатьиРасходовВПрочиеДоходыИРасходы", "СтатьиРасходовВСтатьиЗатрат");</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>Пользователи</Код>
				<Наименование>Пользователи</Наименование>
				<Порядок>800</Порядок>
				<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Пользователи</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Партнеры</Код>
				<Наименование>Партнеры</Наименование>
				<Порядок>850</Порядок>
				<КодПравилаКонвертации>ПартнерыВЗначенияСвойствОбъектов                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Партнеры</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>СоглашенияСКлиентами</Код>
				<Наименование>Соглашения с клиентами</Наименование>
				<Порядок>900</Порядок>
				<КодПравилаКонвертации>СоглашенияСКлиентамиВЗначенияСвойствОбъектов      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.СоглашенияСКлиентами</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>СоглашенияСПоставщиками</Код>
				<Наименование>Соглашения с поставщиками</Наименование>
				<Порядок>950</Порядок>
				<КодПравилаКонвертации>СоглашенияСПоставщикамиВЗначенияСвойствОбъектов   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.СоглашенияСПоставщиками</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>СделкиСКлиентами</Код>
				<Наименование>Сделки с клиентами</Наименование>
				<Порядок>1000</Порядок>
				<КодПравилаКонвертации>СделкиСКлиентамиВЗначенияСвойствОбъектов          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.СделкиСКлиентами</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>ДоговорыКонтрагентов</Код>
				<Наименование>Договоры с контрагентами</Наименование>
				<Порядок>1050</Порядок>
				<КодПравилаКонвертации>ДоговорыКонтрагентов_ДоговорыКонтрагентов_оригинал</КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ДоговорыКонтрагентов</ОбъектВыборки>
				<ПередОбработкойПравила>Запрос = Новый Запрос("ВЫБРАТЬ РАЗЛИЧНЫЕ
|	Док.Договор
|ИЗ
|	Документ.ТаможеннаяДекларацияИмпорт КАК Док
|ГДЕ
|	Док.Проведен
|	И Док.Договор &lt;&gt; ЗНАЧЕНИЕ(Справочник.ДоговорыКонтрагентов.ПустаяСсылка)");

ДоговорыСТаможеннымБрокером = Запрос.Выполнить().Выгрузить();
Параметры.Вставить("ДоговорыСТаможеннымБрокером", ДоговорыСТаможеннымБрокером);</ПередОбработкойПравила>
				<ПередВыгрузкойОбъекта>Если Параметры.ДоговорыСТаможеннымБрокером.Найти(Объект.Ссылка, "Договор") &lt;&gt; Неопределено Тогда
	ВходящиеДанные = Новый Структура("ВидДоговора", "Прочее");
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
		</Группа>
		<Группа Отключить="false">
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>100</Порядок>
			<Группа Отключить="false">
				<Код>ДвижениеДС</Код>
				<Наименование>Документы движения ДС</Наименование>
				<Порядок>50</Порядок>
				<Правило Отключить="false">
					<Код>ПриходныйКассовыйОрдер</Код>
					<Наименование>ПриходныйКассовыйОрдер</Наименование>
					<Порядок>50</Порядок>
					<КодПравилаКонвертации>ПКО_ПоступлениеДСОтКлиента                        </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ПриходныйКассовыйОрдер</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПоступлениеДенежныхСредствИзДругойОрганизации Тогда
	
	ХозОперацияРКО = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Объект.РасходныйКассовыйОрдер, "ХозяйственнаяОперация");
	ИмяПКО = ?(ХозОперацияРКО = Перечисления.ХозяйственныеОперации.ВозвратДенежныхСредствВДругуюОрганизацию, 
		"ПКО_ВозвратДСИзДругойОрганизации", "ПКО_ПоступлениеДСИзДругойОрганизации");
	
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратДенежныхСредствОтПодотчетника Тогда
	ИмяПКО = "ПКО_ВозвратДСОтПодотчетногоЛица";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПоступлениеДенежныхСредствИзКассыККМ Тогда
	ИмяПКО = "ПКО_ПоступлениеРозничнойВыручки";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратДенежныхСредствОтПоставщика Тогда
	ИмяПКО = "ПКО_ВозвратДСОтПоставщика";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПоступлениеДенежныхСредствИзБанка Тогда
	ИмяПКО = "ПКО_ПоступлениеДСИзБанка";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПоступлениеОплатыОтКлиента Тогда
	ИмяПКО = "ПКО_ПоступлениеДСОтКлиента";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВнутренняяПередачаДенежныхСредств Тогда
	ИмяПКО = "ПКО_ВнутренняяПередача";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.КонвертацияВалюты Тогда
	
	ИмяПКО = "ПКО_ПрочееПоступлениеНаличныхДС";
	КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Объект.СтатьяДвиженияДенежныхСредств, "КорреспондирующийСчет");
	ВходящиеДанные = Новый Структура("Счет, СтатьяДоходов", КоррСчет, Неопределено);
	
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПрочееПоступлениеДенежныхСредств
	Или Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПрочиеДоходы Тогда
	
	ВходящиеДанные = Документы.ПриходныйКассовыйОрдер.РеквизитыДокументаДляОбменаСБухгалтерией(Объект.Ссылка);
	Если ВходящиеДанные.ВидОперации = "РасчетыПоКредитамИЗаймам" Тогда
		ИмяПКО = "ПКО_РасчетыПоКредитамИЗаймам";
	ИначеЕсли ВходящиеДанные.ВидОперации = "ПрочееПоступление" Тогда
		ИмяПКО = "ПКО_ПрочееПоступлениеНаличныхДС";
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкойОбъекта>
				</Правило>
				<Правило Отключить="false">
					<Код>РасходныйКассовыйОрдер</Код>
					<Наименование>Расходный кассовый ордер</Наименование>
					<Порядок>100</Порядок>
					<КодПравилаКонвертации>РКО_ОплатаПоставщику                              </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.РасходныйКассовыйОрдер</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ОплатаПоставщику Тогда
	ИмяПКО = "РКО_ОплатаПоставщику";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратОплатыКлиенту Тогда
	ИмяПКО = "РКО_ВозвратДСПокупателю";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВыдачаДенежныхСредствПодотчетнику Тогда
	ИмяПКО = "РКО_ВыдачаДСПодотчетномуЛицу";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.СдачаДенежныхСредствВБанк Тогда
	ИмяПКО = "РКО_ВзносНаличнымиВБанк";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ОплатаДенежныхСредствВДругуюОрганизацию Тогда
	ИмяПКО = "РКО_ВыдачаДСВДругуюОрганизацию";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратДенежныхСредствВДругуюОрганизацию Тогда
	ИмяПКО = "РКО_ВозвратДСВДругуюОрганизацию";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВнутренняяПередачаДенежныхСредств Тогда
	ИмяПКО = "РКО_ВнутренняяПередача";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.КонвертацияВалюты Тогда
	
	ИмяПКО = "РКО_ПрочийРасходДС";
	КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Объект.СтатьяДвиженияДенежныхСредств, "КорреспондирующийСчет");
	ВходящиеДанные = Новый Структура("Счет, СтатьяРасходов", КоррСчет, Неопределено);
	
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПрочаяВыдачаДенежныхСредств
	ИЛИ Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПрочиеРасходы Тогда
	
	ВходящиеДанные = Документы.РасходныйКассовыйОрдер.РеквизитыДокументаДляОбменаСБухгалтерией(Объект.Ссылка);
	Если ВходящиеДанные.ВидОперации = "ВыплатаЗаработнойПлатыПоВедомостям" Тогда
		ИмяПКО = "РКО_ВыдачаЗП";
	ИначеЕсли ВходящиеДанные.ВидОперации = "РасчетыПоКредитамИЗаймам" Тогда
		ИмяПКО = "РКО_РасчетыПоКредитамИЗаймам";
	ИначеЕсли ВходящиеДанные.ВидОперации = "ПрочийРасход" Тогда
		ИмяПКО = "РКО_ПрочийРасходДС";
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкойОбъекта>
				</Правило>
				<Правило Отключить="false">
					<Код>ПоступлениеБезналичныхДенежныхСредств</Код>
					<Наименование>Поступление безналичных денежных средств</Наименование>
					<Порядок>150</Порядок>
					<КодПравилаКонвертации>ПБДС_ПоступлениеОтКлиентаБезналичныхДС            </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ПоступлениеБезналичныхДенежныхСредств</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПоступлениеОплатыОтКлиента Тогда
	ИмяПКО = "ПБДС_ПоступлениеОтКлиентаБезналичныхДС";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратДенежныхСредствОтПоставщика Тогда
	ИмяПКО = "ПБДС_ВозвратОтПоставщикаБезналичныхДС";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.КонвертацияВалюты Тогда
	
	Если Объект.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() 
		И Объект.ВалютаКонвертации &lt;&gt; Константы.ВалютаРегламентированногоУчета.Получить() Тогда
		ИмяПКО = "ПБДС_ПоступленияОтПродажиИностраннойВалюты";
	ИначеЕсли Объект.Валюта &lt;&gt; Константы.ВалютаРегламентированногоУчета.Получить()
		И Объект.ВалютаКонвертации = Константы.ВалютаРегламентированногоУчета.Получить() Тогда
		ИмяПКО = "ПБДС_ПриобретениеИностраннойВалюты";
	Иначе
		ИмяПКО = "ПБДС_ПрочиеРасчетыСКонтрагентами";
	КонецЕсли;
	
	КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Объект.СтатьяДвиженияДенежныхСредств, "КорреспондирующийСчет");
	ВходящиеДанные = Новый Структура("Счет, СтатьяРасходов", КоррСчет, Неопределено);
	
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПрочееПоступлениеДенежныхСредств 
	ИЛИ Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПрочиеДоходы Тогда
	
	ВходящиеДанные = Документы.ПоступлениеБезналичныхДенежныхСредств.РеквизитыДокументаДляОбменаСБухгалтерией(Объект.Ссылка);
	Если ВходящиеДанные.ВидОперации = "ПрочееПоступление" Тогда
		ИмяПКО = "ПБДС_ПрочееПоступлениеБезналичныхДС";
	ИначеЕсли ВходящиеДанные.ВидОперации = "ПриобретениеИностраннойВалюты" Тогда
		ИмяПКО = "ПБДС_ПриобретениеИностраннойВалюты";
	ИначеЕсли ВходящиеДанные.ВидОперации = "ПоступленияОтПродажиИностраннойВалюты" Тогда
		ИмяПКО = "ПБДС_ПоступленияОтПродажиИностраннойВалюты";
	ИначеЕсли ВходящиеДанные.ВидОперации = "РасчетыПоКредитамИЗаймам" Тогда
		ИмяПКО = "ПБДС_РасчетыПоКредитамИЗаймам";
	ИначеЕсли ВходящиеДанные.ВидОперации = "ПрочиеРасчетыСКонтрагентами" Тогда
		ИмяПКО = "ПБДС_ПрочиеРасчетыСКонтрагентами";
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкойОбъекта>
				</Правило>
				<Правило Отключить="false">
					<Код>СписаниеБезналичныхДенежныхСредств</Код>
					<Наименование>Списание безналичных денежных средств</Наименование>
					<Порядок>200</Порядок>
					<КодПравилаКонвертации>СБДС_ОплатаПоставщикуБезналичныеДС                </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.СписаниеБезналичныхДенежныхСредств</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПеречислениеДенежныхСредствНаДругойСчет Тогда
	ИмяПКО = "СБДС_ПеречислениеНаДругойРСБезналичныхДС";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВыдачаДенежныхСредствПодотчетнику Тогда
	ИмяПКО = "СБДС_ПеречислениеПодотчетномуЛицу";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратОплатыКлиенту Тогда
	ИмяПКО = "СБДС_ВозвратПокупателюБезналичныеДС";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПеречислениеВБюджет Тогда
	ИмяПКО = "СБДС_ПеречислениеНалога";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ОплатаПоставщику Тогда
	ИмяПКО = "СБДС_ОплатаПоставщикуБезналичныеДС";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.КонвертацияВалюты Тогда
	
	ИмяПКО = "СБДС_ПрочееСписаниеБезналичныхДС";
	КоррСчет = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Объект.СтатьяДвиженияДенежныхСредств, "КорреспондирующийСчет");
	ВходящиеДанные = Новый Структура("Счет, СтатьяРасходов", КоррСчет, Неопределено);
	
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПрочиеРасходы 
	ИЛИ Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПрочаяВыдачаДенежныхСредств Тогда
	
	ВходящиеДанные = Документы.СписаниеБезналичныхДенежныхСредств.РеквизитыДокументаДляОбменаСБухгалтерией(Объект.Ссылка);
	Если ВходящиеДанные.ВидОперации = "ПеречислениеЗП" Тогда
		ИмяПКО = "СБДС_ПеречислениеЗП";
	ИначеЕсли ВходящиеДанные.ВидОперации = "РасчетыПоКредитамИЗаймам" Тогда
		ИмяПКО = "СБДС_РасчетыПоКредитамИЗаймам";
	ИначеЕсли ВходящиеДанные.ВидОперации = "ПрочиеРасчетыСКонтрагентами" Тогда
		ИмяПКО = "СБДС_ПрочиеРасчетыСКонтрагентами";
	ИначеЕсли ВходящиеДанные.ВидОперации = "ПрочееСписание" Тогда
		ИмяПКО = "СБДС_ПрочееСписаниеБезналичныхДС";
	КонецЕсли;
	
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ОплатаДенежныхСредствВДругуюОрганизацию
	ИЛИ Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратДенежныхСредствВДругуюОрганизацию
	ИЛИ Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВнутренняяПередачаДенежныхСредств	Тогда
	
	Отказ = Истина;
	
	ОрганизацияПолучатель = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Объект.БанковскийСчетПолучатель, "Владелец");
	
	ВыгружатьСписание	 = Объект.Организация &lt;&gt; Справочники.Организации.УправленческаяОрганизация;
	ВыгружатьПоступление = ОрганизацияПолучатель &lt;&gt; Справочники.Организации.УправленческаяОрганизация;
	
	Если Параметры.УзелИспользоватьОтборПоОрганизации Тогда
		УзелСписокОрганизаций = Параметры.УзелСписокОрганизаций;
		ВыгружатьСписание	  = ВыгружатьСписание И УзелСписокОрганизаций.НайтиПоЗначению(Объект.Организация) &lt;&gt; Неопределено;
		ВыгружатьПоступление  = ВыгружатьПоступление И УзелСписокОрганизаций.НайтиПоЗначению(ОрганизацияПолучатель) &lt;&gt; Неопределено;
	КонецЕсли;
	
	Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ОплатаДенежныхСредствВДругуюОрганизацию Тогда
		ИмяПКОСписание	  = "СБДС_ПеречислениеДСВДругуюОрганизацию";
		ИмяПКОПоступление = "ПБДС_ПоступлениеИзДругойОрганизации";
	ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратДенежныхСредствВДругуюОрганизацию Тогда
		ИмяПКОСписание	  = "СБДС_ВозвратДСВДругуюОрганизацию";
		ИмяПКОПоступление = "ПБДС_ВозвратДСИзДругойОрганизации";
	ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВнутренняяПередачаДенежныхСредств Тогда
		ИмяПКОСписание	  = "СБДС_ВнутренняяПередача";
		ИмяПКОПоступление = "ПБДС_ВнутренняяПередача";
	КонецЕсли;
	
	Если ВыгружатьСписание Тогда
		ВыгрузитьПоПравилу(Объект,,,, ИмяПКОСписание);
	Иначе
		СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
		ТипИсточника = "ДокументСсылка.СписаниеБезналичныхДенежныхСредств";
		ТипПриемника = "ДокументСсылка.СписаниеСРасчетногоСчета";
		Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	КонецЕсли;
	
	Если ВыгружатьПоступление Тогда
		ВыгрузитьПоПравилу(Объект,,,, ИмяПКОПоступление);
	Иначе
		СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
		ТипИсточника = "ДокументСсылка.СписаниеБезналичныхДенежныхСредств";
		ТипПриемника = "ДокументСсылка.ПоступлениеНаРасчетныйСчет";
		Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	КонецЕсли;
КонецЕсли;</ПередВыгрузкойОбъекта>
				</Правило>
				<Правило Отключить="false">
					<Код>АвансовыйОтчет</Код>
					<Наименование>Авансовый отчет</Наименование>
					<Порядок>250</Порядок>
					<КодПравилаКонвертации>АО_АвансовыйОтчетЗакупкаТоваровУслуг              </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.АвансовыйОтчет</ОбъектВыборки>
				</Правило>
			</Группа>
			<Группа Отключить="false">
				<Код>ПокупкаПродажа</Код>
				<Наименование>Документы покупки/продажи товаров и услуг</Наименование>
				<Порядок>100</Порядок>
				<Группа Отключить="false">
					<Код>Покупка</Код>
					<Наименование>Покупка</Наименование>
					<Порядок>50</Порядок>
					<Правило Отключить="false">
						<Код>ЗаказПоставщику</Код>
						<Наименование>Заказ поставщику</Наименование>
						<Порядок>50</Порядок>
						<КодПравилаКонвертации>ЗаказПоставщикуВЗначенияСвойствОбъектов           </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ЗаказПоставщику</ОбъектВыборки>
						<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
					</Правило>
					<Правило Отключить="false">
						<Код>ПоступлениеТоваровУслуг</Код>
						<Наименование>Поступление товаров услуг</Наименование>
						<Порядок>100</Порядок>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ПоступлениеТоваровУслуг</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>Отказ = Истина;

ПараметрыДокумента = Неопределено;
ДокументСсылка = Объект.Ссылка;
Выполнить(Алгоритмы.ПараметрыПоступлениеТоваровУслуг);

СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
ТипИсточника = "ДокументСсылка.ПоступлениеТоваровУслуг";

Если ПараметрыДокумента.ЕстьОбычноеПоступление Тогда
	
	Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ЗакупкаПоИмпорту Тогда
		ВыгрузитьПоПравилу(Объект,,,, "ПТУ_ЗакупкаИмпорт");
	ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПриемНаКомиссию Тогда
		ВыгрузитьПоПравилу(Объект,,,, "ПТУ_ПриемНаКомиссию");
	Иначе
		ВыгрузитьПоПравилу(Объект,,,, "ПТУ_ЗакупкаТоваровУслуг");
	КонецЕсли;
	
Иначе
	
	ТипПриемника = "ДокументСсылка.ПоступлениеТоваровУслуг";
	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	
КонецЕсли;

Если Объект.ХозяйственнаяОперация &lt;&gt; Перечисления.ХозяйственныеОперации.ПриемНаКомиссию Тогда
	
	Если ПараметрыДокумента.ЕстьДопРасходы Тогда
		ВыгрузитьПоПравилу(Объект,,,, "ПТУ_ПоступлениеДопРасходов");
	Иначе
		
		ТипПриемника = "ДокументСсылка.ПоступлениеДопРасходов";
		Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
		
	КонецЕсли;
	
КонецЕсли;

Если Объект.ХозяйственнаяОперация &lt;&gt; Перечисления.ХозяйственныеОперации.ПриемНаКомиссию
	И Объект.ХозяйственнаяОперация &lt;&gt; Перечисления.ХозяйственныеОперации.ЗакупкаПоИмпорту Тогда
	
	Если ПараметрыДокумента.ЕстьНедостачиЗаСчетПоставщика Тогда
		СтруктураИсходящихДанных = Новый Структура("Контрагент", Объект.Контрагент);
		ВыгрузитьПоПравилу(Объект,, СтруктураИсходящихДанных,, "ПТУ_РасхожденияВВозврат");
	КонецЕсли;
	
	Если ПараметрыДокумента.ЕстьНедостачиЗаСчетСтороннейКомпании Тогда
		СтруктураИсходящихДанных = Новый Структура("Контрагент", Объект.КонтрагентСтороннейКомпании);
		ВыгрузитьПоПравилу(Объект,, СтруктураИсходящихДанных,, "ПТУ_РасхожденияВВозврат");
	КонецЕсли;
	
	Если ПараметрыДокумента.ЕстьНедостачиЗаСвойСчет Тогда
		ВыгрузитьПоПравилу(Объект,,,, "ПТУ_РасхожденияВСписание");
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкойОбъекта>
					</Правило>
					<Правило Отключить="false">
						<Код>ПоступлениеУслугПрочихАктивов</Код>
						<Наименование>Поступление услуг и внеоборотных активов</Наименование>
						<Порядок>150</Порядок>
						<КодПравилаКонвертации>ПУВА_ПоступлениеУслуг                             </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ПоступлениеУслугПрочихАктивов</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>Отказ = Истина;

ПараметрыДокумента = Неопределено;
ДокументСсылка = Объект.Ссылка;
Выполнить(Алгоритмы.ПараметрыПоступлениеУслугПрочихАктивов);

СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
ТипИсточника = "ДокументСсылка.ПоступлениеУслугПрочихАктивов";

Если ПараметрыДокумента.ЕстьОбычноеПоступление Тогда
	ВыгрузитьПоПравилу(Объект,,,, "ПУВА_ПоступлениеУслуг");
Иначе
	ТипПриемника = "ДокументСсылка.ПоступлениеТоваровУслуг";
	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
КонецЕсли;

Если ПараметрыДокумента.ЕстьДопРасходы Тогда
	ВыгрузитьПоПравилу(Объект,,,, "ПУВА_ПоступлениеДопРасходов");
Иначе
	ТипПриемника = "ДокументСсылка.ПоступлениеДопРасходов";
	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
КонецЕсли;</ПередВыгрузкойОбъекта>
					</Правило>
					<Правило Отключить="false">
						<Код>КорректировкаПоступления</Код>
						<Наименование>Корректировка поступления</Наименование>
						<Порядок>200</Порядок>
						<КодПравилаКонвертации>КорректировкаПоступления_КорректировкаПоступления </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.КорректировкаПоступления</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>Если ТипЗнч(Объект.ДокументОснование) = Тип("ДокументСсылка.ПоступлениеТоваровУслуг") Тогда
	
	Запрос = Новый Запрос("ВЫБРАТЬ
	|	Док.Номенклатура,
	|	СУММА(Док.Количество) КАК Количество,
	|	СУММА(Док.СуммаСНДС - Док.СуммаНДС) КАК Сумма,
	|	Док.НомерГТД,
	|	ВЫБОР
	|		КОГДА Док.Количество &gt; 0
	|			ТОГДА ИСТИНА
	|		ИНАЧЕ ЛОЖЬ
	|	КОНЕЦ КАК Статус
	|ПОМЕСТИТЬ ТоварыКоличественныхРасхождений
	|ИЗ
	|	Документ.КорректировкаПоступления.Расхождения КАК Док
	|ГДЕ
	|	Док.Ссылка = &amp;КорректировкаПоступления
	|	И Док.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
	|	И Док.ВариантОтражения В (ЗНАЧЕНИЕ(Перечисление.ВариантыОтраженияКорректировокПоступлений.ОтразитьНаПрочихДоходах), ЗНАЧЕНИЕ(Перечисление.ВариантыОтраженияКорректировокПоступлений.СписатьНаРасходы))
	|
	|СГРУППИРОВАТЬ ПО
	|	Док.Номенклатура,
	|	Док.НомерГТД,
	|	ВЫБОР
	|		КОГДА Док.Количество &gt; 0
	|			ТОГДА ИСТИНА
	|		ИНАЧЕ ЛОЖЬ
	|	КОНЕЦ
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	Товары.Номенклатура,
	|	Товары.НомерГТД,
	|	Товары.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	|	Товары.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	|	1 КАК Коэффициент,
	|	ВЫБОР
	|		КОГДА Товары.Количество = 0
	|			ТОГДА 0
	|		ИНАЧЕ Товары.Сумма / Товары.Количество
	|	КОНЕЦ КАК Цена,
	|	-Товары.Количество КАК Количество,
	|	-Товары.Сумма КАК Сумма
	|ИЗ
	|	ТоварыКоличественныхРасхождений КАК Товары
	|ГДЕ
	|	Товары.Количество &lt; 0
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	Товары.Номенклатура,
	|	Товары.НомерГТД,
	|	Товары.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	|	Товары.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	|	1 КАК Коэффициент,
	|	Товары.Количество КАК Количество,
	|	Товары.Сумма КАК Себестоимость,
	|	ВЫБОР
	|		КОГДА Товары.Количество = 0
	|			ТОГДА 0
	|		ИНАЧЕ Товары.Сумма / Товары.Количество
	|	КОНЕЦ КАК Цена
	|ИЗ
	|	ТоварыКоличественныхРасхождений КАК Товары
	|ГДЕ
	|	Товары.Количество &gt; 0");
	Запрос.УстановитьПараметр("КорректировкаПоступления", Объект.Ссылка);
	
	РезультатыЗапроса = Запрос.ВыполнитьПакет();
	ТоварыКОприходованиюВБухгалтерии = РезультатыЗапроса[1].Выгрузить();
	ТоварыКСписаниюВБухгалтерии = РезультатыЗапроса[2].Выгрузить();
	
	Если ТоварыКОприходованиюВБухгалтерии.Количество() &gt; 0 Тогда
		СтруктураИсходящихДанных = Новый Структура("Товары", ТоварыКОприходованиюВБухгалтерии);
		ВыгрузитьПоПравилу(Объект,, СтруктураИсходящихДанных,, "КорректировкаПоступления_ОприходованиеТоваров");
	Иначе
		// Удаляем документ "Оприходование товаров", который мог быть выгружен ранее
		СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
		ТипИсточника = "ДокументСсылка.КорректировкаПоступления";
		ТипПриемника = "ДокументСсылка.ОприходованиеТоваров";
		Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	КонецЕсли;
	
	Если ТоварыКСписаниюВБухгалтерии.Количество() &gt; 0 Тогда
		СтруктураИсходящихДанных = Новый Структура("Товары", ТоварыКСписаниюВБухгалтерии);
		ВыгрузитьПоПравилу(Объект,, СтруктураИсходящихДанных,, "КорректировкаПоступления_СписаниеТоваров");
	Иначе
		// Удаляем документ "Списание товаров", который мог быть выгружен ранее
		СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
		ТипИсточника = "ДокументСсылка.КорректировкаПоступления";
		ТипПриемника = "ДокументСсылка.СписаниеТоваров";
		Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкойОбъекта>
					</Правило>
					<Правило Отключить="false">
						<Код>ВозвратТоваровПоставщику</Код>
						<Наименование>Возврат товаров поставщику</Наименование>
						<Порядок>250</Порядок>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ВозвратТоваровПоставщику</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратТоваровПоставщику ИЛИ НЕ ЗначениеЗаполнено(Объект.ХозяйственнаяОперация) Тогда
	ИмяПКО = "ВТП_ВозвратТоваровПоставщику";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратТоваровКомитенту Тогда
	ИмяПКО = "ВТП_ВозвратТоваровКомитенту";
КонецЕсли;</ПередВыгрузкойОбъекта>
					</Правило>
					<Правило Отключить="false">
						<Код>ТаможеннаяДекларацияИмпорт</Код>
						<Наименование>Таможенная декларация на импорт</Наименование>
						<Порядок>300</Порядок>
						<КодПравилаКонвертации>ТаможеннаяДекларацияИмпорт_ГТДИмпорт              </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ТаможеннаяДекларацияИмпорт</ОбъектВыборки>
					</Правило>
				</Группа>
				<Группа Отключить="false">
					<Код>Продажа</Код>
					<Наименование>Продажа</Наименование>
					<Порядок>100</Порядок>
					<Правило Отключить="false">
						<Код>ЗаказКлиента</Код>
						<Наименование>Заказ клиента</Наименование>
						<Порядок>50</Порядок>
						<КодПравилаКонвертации>СНОП_СчетНаОплатуПокупателю                       </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ЗаказКлиента</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>Если Параметры.УзелПравилаСозданияДоговоровКонтрагентов = "ПоЗаказам" Тогда
	ВыгрузитьПоПравилу(Объект,,,, "ЗаказКлиентаВЗначенияСвойствОбъектов");
КонецЕсли;</ПередВыгрузкойОбъекта>
					</Правило>
					<Правило Отключить="false">
						<Код>РеализацияТоваровУслуг</Код>
						<Наименование>Реализация товаров услуг</Наименование>
						<Порядок>100</Порядок>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.РеализацияТоваровУслуг</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.РеализацияКлиенту 
	ИЛИ Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.РеализацияКлиентуРеглУчет
	ИЛИ НЕ ЗначениеЗаполнено(Объект.ХозяйственнаяОперация) Тогда
	ИмяПКО = "РТУ_ПродажаТоваровУслуг";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПередачаНаКомиссию Тогда
	ИмяПКО = "РТУ_ПередачаТоваровНаКомиссию";
КонецЕсли;</ПередВыгрузкойОбъекта>
					</Правило>
					<Правило Отключить="false">
						<Код>ВозвратТоваровОтКлиента</Код>
						<Наименование>Возврат товаров от клиента</Наименование>
						<Порядок>150</Порядок>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ВозвратТоваровОтКлиента</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратТоваровОтКлиента ИЛИ НЕ ЗначениеЗаполнено(Объект.ХозяйственнаяОперация) Тогда
	ИмяПКО = "ВТОП_ВозвратТоваровОтПокупателя";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратОтРозничногоПокупателя Тогда
	ИмяПКО = "ВТОП_ВозвратТоваровОтРозничногоПокупателя";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратОтКомиссионера Тогда
	ИмяПКО = "ВТОП_ВозвратТоваровОтКомиссионера";
КонецЕсли;</ПередВыгрузкойОбъекта>
					</Правило>
					<Правило Отключить="false">
						<Код>ВыполнениеРабот</Код>
						<Наименование>Выполнение работ</Наименование>
						<Порядок>200</Порядок>
						<КодПравилаКонвертации>ВыполнениеРабот_РеализацияТоваровУслуг            </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.АктВыполненныхРабот</ОбъектВыборки>
					</Правило>
					<Правило Отключить="false">
						<Код>ОтчетОРозничныхПродажах</Код>
						<Наименование>Отчет о розничных продажах</Наименование>
						<Порядок>250</Порядок>
						<КодПравилаКонвертации>ОРП_ОтчетОРозничныхПродажах                       </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ОтчетОРозничныхПродажах</ОбъектВыборки>
					</Правило>
					<Правило Отключить="false">
						<Код>РеализацияУслугПрочихАктивов</Код>
						<Наименование>Реализация услуг и прочих активов</Наименование>
						<Порядок>300</Порядок>
						<КодПравилаКонвертации>РеализацияУслугПрочихАкт_РеализацияТоваровУслуг   </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.РеализацияУслугПрочихАктивов</ОбъектВыборки>
					</Правило>
					<Правило Отключить="false">
						<Код>КорректировкаРеализации</Код>
						<Наименование>Корректировка реализации</Наименование>
						<Порядок>350</Порядок>
						<КодПравилаКонвертации>КорректировкаРеализации_КорректировкаРеализации   </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.КорректировкаРеализации</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>Если ТипЗнч(Объект.ДокументОснование) = Тип("ДокументСсылка.РеализацияТоваровУслуг") Тогда
	
	Запрос = Новый Запрос("ВЫБРАТЬ
	|	ТоварыКОприходованию.Номенклатура,
	|	ТоварыКОприходованию.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	|	ТоварыКОприходованию.НомерГТД,
	|	ТоварыКОприходованию.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	|	1 КАК Коэффициент,
	|	ТоварыКОприходованию.Количество,
	|	ТоварыКОприходованию.СуммаСНДС - ТоварыКОприходованию.СуммаНДС КАК Сумма,
	|	ВЫБОР
	|		КОГДА ТоварыКОприходованию.Количество = 0
	|			ТОГДА 0
	|		ИНАЧЕ (ТоварыКОприходованию.СуммаСНДС - ТоварыКОприходованию.СуммаНДС) / ТоварыКОприходованию.Количество
	|	КОНЕЦ КАК Цена
	|ИЗ
	|	Документ.КорректировкаРеализации.ВидыЗапасовСписание КАК ТоварыКОприходованию
	|ГДЕ
	|	ТоварыКОприходованию.Ссылка = &amp;КорректировкаРеализации
	|	И ТоварыКОприходованию.НаДоходыРасходы
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ТоварыКСписанию.Номенклатура,
	|	ТоварыКСписанию.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	|	1 КАК Коэффициент,
	|	ТоварыКСписанию.НомерГТД,
	|	ТоварыКСписанию.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	|	ТоварыКСписанию.Количество,
	|	ТоварыКСписанию.СуммаСНДС - ТоварыКСписанию.СуммаНДС КАК Себестоимость,
	|	ВЫБОР
	|		КОГДА ТоварыКСписанию.Количество = 0
	|			ТОГДА 0
	|		ИНАЧЕ (ТоварыКСписанию.СуммаСНДС - ТоварыКСписанию.СуммаНДС) / ТоварыКСписанию.Количество
	|	КОНЕЦ КАК Цена
	|ИЗ
	|	Документ.КорректировкаРеализации.ВидыЗапасовОприходование КАК ТоварыКСписанию
	|ГДЕ
	|	ТоварыКСписанию.Ссылка = &amp;КорректировкаРеализации
	|	И ТоварыКСписанию.НаДоходыРасходы");
	Запрос.УстановитьПараметр("КорректировкаРеализации", Объект.Ссылка);
	
	РезультатыЗапроса = Запрос.ВыполнитьПакет();
	ТоварыКОприходованиюВБухгалтерии = РезультатыЗапроса[0].Выгрузить();
	ТоварыКСписаниюВБухгалтерии = РезультатыЗапроса[1].Выгрузить();
	
	Если ТоварыКОприходованиюВБухгалтерии.Количество() &gt; 0 Тогда
		СтруктураИсходящихДанных = Новый Структура("Товары", ТоварыКОприходованиюВБухгалтерии);
		ВыгрузитьПоПравилу(Объект,, СтруктураИсходящихДанных,, "КорректировкаРеализации_ОприходованиеТоваров");
	Иначе
		// Удаляем документ "Оприходование товаров", который мог быть выгружен ранее
		СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
		ТипИсточника = "ДокументСсылка.КорректировкаРеализации";
		ТипПриемника = "ДокументСсылка.ОприходованиеТоваров";
		Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	КонецЕсли;
	
	Если ТоварыКСписаниюВБухгалтерии.Количество() &gt; 0 Тогда
		СтруктураИсходящихДанных = Новый Структура("Товары", ТоварыКСписаниюВБухгалтерии);
		ВыгрузитьПоПравилу(Объект,, СтруктураИсходящихДанных,, "КорректировкаРеализации_СписаниеТоваров");
	Иначе
		// Удаляем документ "Списание товаров", который мог быть выгружен ранее
		СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
		ТипИсточника = "ДокументСсылка.КорректировкаРеализации";
		ТипПриемника = "ДокументСсылка.СписаниеТоваров";
		Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкойОбъекта>
					</Правило>
				</Группа>
			</Группа>
			<Группа Отключить="false">
				<Код>КомиссионнаяТорговля</Код>
				<Наименование>Документы по комиссионной торговле</Наименование>
				<Порядок>150</Порядок>
				<Правило Отключить="false">
					<Код>ОтчетКомитентуОСписании</Код>
					<Наименование>Отчет комитенту о списании</Наименование>
					<Порядок>300</Порядок>
					<КодПравилаКонвертации>ОКТОC_ОтчетКомитентуОСписании                     </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ОтчетКомитентуОСписании</ОбъектВыборки>
				</Правило>
				<Правило Отключить="false">
					<Код>ОтчетКомиссионераОСписании</Код>
					<Наименование>Отчет комиссионера о списании</Наименование>
					<Порядок>400</Порядок>
					<КодПравилаКонвертации>ОКОС_ОтчетКомиссионераОСписании                   </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ОтчетКомиссионераОСписании</ОбъектВыборки>
				</Правило>
				<Правило Отключить="false">
					<Код>ОтчетКомиссионера</Код>
					<Наименование>Отчет комиссионера о продажах</Наименование>
					<Порядок>400</Порядок>
					<КодПравилаКонвертации>ОКОП_ОтчетКомиссионераОПродажах                   </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ОтчетКомиссионера</ОбъектВыборки>
				</Правило>
				<Правило Отключить="false">
					<Код>ОтчетКомитенту</Код>
					<Наименование>Отчет комитенту о продажах</Наименование>
					<Порядок>450</Порядок>
					<КодПравилаКонвертации>ОКТОП_ОтчетКомитентуОПродажах                     </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ОтчетКомитенту</ОбъектВыборки>
				</Правило>
			</Группа>
			<Группа Отключить="false">
				<Код>Интеркампани</Код>
				<Наименование>Интеркампани</Наименование>
				<Порядок>200</Порядок>
				<Правило Отключить="false">
					<Код>ПередачаТоваровМеждуОрганизациями</Код>
					<Наименование>Передача товаров между организациями</Наименование>
					<Порядок>600</Порядок>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ПередачаТоваровМеждуОрганизациями</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>ВыгружатьПродажу = Объект.Организация &lt;&gt; Справочники.Организации.УправленческаяОрганизация;
ВыгружатьПокупку = Объект.ОрганизацияПолучатель &lt;&gt; Справочники.Организации.УправленческаяОрганизация;

Если Параметры.УзелИспользоватьОтборПоОрганизации Тогда
	
	УзелСписокОрганизаций = Параметры.УзелСписокОрганизаций;
	
	ВыгружатьПродажу = ВыгружатьПродажу И УзелСписокОрганизаций.НайтиПоЗначению(Объект.Организация) &lt;&gt; Неопределено;
	ВыгружатьПокупку = ВыгружатьПокупку И УзелСписокОрганизаций.НайтиПоЗначению(Объект.ОрганизацияПолучатель) &lt;&gt; Неопределено;
	
КонецЕсли;

Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.РеализацияТоваровВДругуюОрганизацию Тогда
	
	Если ВыгружатьПродажу Тогда
		ВыгрузитьПоПравилу(Объект,,,, "ПДТ_ПередачаТоваровПродажа");
	КонецЕсли;
	
	Если ВыгружатьПокупку Тогда
		ВыгрузитьПоПравилу(Объект,,,, "ПДТ_ПередачаТоваровПокупка");
	КонецЕсли;
	
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПередачаНаКомиссиюВДругуюОрганизацию Тогда
	
	Если ВыгружатьПродажу Тогда
		ВыгрузитьПоПравилу(Объект,,,, "ПДТ_ПередачаТоваровПередачаНаКомиссию");
	КонецЕсли;
	
	Если ВыгружатьПокупку Тогда
		ВыгрузитьПоПравилу(Объект,,,, "ПДТ_ПередачаТоваровПриемНаКомиссию");
	КонецЕсли;
	
КонецЕсли;

// Удаляем документы, которые не выгружаются в этот раз, но могли быть выгружены ранее
Если НЕ ВыгружатьПродажу Тогда
	СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
	ТипИсточника = "ДокументСсылка.ПередачаТоваровМеждуОрганизациями";
	ТипПриемника = "ДокументСсылка.РеализацияТоваровУслуг";
	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
КонецЕсли;

Если НЕ ВыгружатьПокупку Тогда
	СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
	ТипИсточника = "ДокументСсылка.ПередачаТоваровМеждуОрганизациями";
	ТипПриемника = "ДокументСсылка.ПоступлениеТоваровУслуг";
	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
КонецЕсли;

Отказ = Истина;</ПередВыгрузкойОбъекта>
				</Правило>
				<Правило Отключить="false">
					<Код>ОтчетПоКомиссииМеждуОрганизациями</Код>
					<Наименование>Отчет по комиссии между организациями</Наименование>
					<Порядок>650</Порядок>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>ВыгружатьОтчетКомиссионера = Объект.Организация &lt;&gt; Справочники.Организации.УправленческаяОрганизация;
ВыгружатьОтчетКомитенту	   = Объект.Комиссионер &lt;&gt; Справочники.Организации.УправленческаяОрганизация;

Если Параметры.УзелИспользоватьОтборПоОрганизации Тогда

	УзелСписокОрганизаций = Параметры.УзелСписокОрганизаций;
	
	ВыгружатьОтчетКомиссионера = ВыгружатьОтчетКомиссионера И УзелСписокОрганизаций.НайтиПоЗначению(Объект.Организация) &lt;&gt; Неопределено;
	ВыгружатьОтчетКомитенту	   = ВыгружатьОтчетКомитенту И УзелСписокОрганизаций.НайтиПоЗначению(Объект.Комиссионер) &lt;&gt; Неопределено;

КонецЕсли;

Если ВыгружатьОтчетКомиссионера Тогда
	ВыгрузитьПоПравилу(Объект,,,, "ОКОПМО_ОтчетКомиссионераОПродажах");
Иначе
	// Удаляем документ "Отчет комитенту о продажах", предполагая, что он был выгружен ранее
	СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
	ТипИсточника = "ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями";
	ТипПриемника = "ДокументСсылка.ОтчетКомиссионераОПродажах";
	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
КонецЕсли;

Если ВыгружатьОтчетКомитенту Тогда
	ВыгрузитьПоПравилу(Объект,,,, "ОКТОПМО_ОтчетКомитентуОПродажах");
Иначе
	// Удаляем документ "Отчет комитенту о продажах", предполагая, что он был выгружен ранее
	СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
	ТипИсточника = "ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями";
	ТипПриемника = "ДокументСсылка.ОтчетКомитентуОПродажах";
	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
КонецЕсли;

Отказ = Истина;</ПередВыгрузкойОбъекта>
				</Правило>
				<Правило Отключить="false">
					<Код>ВозвратТоваровМеждуОрганизациями</Код>
					<Наименование>Возврат товаров между организациями</Наименование>
					<Порядок>700</Порядок>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ВозвратТоваровМеждуОрганизациями</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>ВыгружатьВозвратПоставщику = Объект.Организация &lt;&gt; Справочники.Организации.УправленческаяОрганизация;
ВыгружатьВозвратОтПокупателя = Объект.ОрганизацияПолучатель &lt;&gt; Справочники.Организации.УправленческаяОрганизация;

Если Параметры.УзелИспользоватьОтборПоОрганизации Тогда
	
	УзелСписокОрганизаций = Параметры.УзелСписокОрганизаций;
	
	ВыгружатьВозвратПоставщику = ВыгружатьВозвратПоставщику И УзелСписокОрганизаций.НайтиПоЗначению(Объект.Организация) &lt;&gt; Неопределено;
	ВыгружатьВозвратОтПокупателя = ВыгружатьВозвратОтПокупателя И УзелСписокОрганизаций.НайтиПоЗначению(Объект.ОрганизацияПолучатель) &lt;&gt; Неопределено;
	
КонецЕсли;

Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратТоваровМеждуОрганизациями Тогда
	
	Если ВыгружатьВозвратПоставщику Тогда
		ВыгрузитьПоПравилу(Объект,,,, "ВТМО_ВозвратПоставщику");
	КонецЕсли;
	
	Если ВыгружатьВозвратОтПокупателя Тогда
		ВыгрузитьПоПравилу(Объект,,,, "ВТМО_ВозвратОтПокупателя");
	КонецЕсли;
	
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратПоКомиссииМеждуОрганизациями Тогда
	
	Если ВыгружатьВозвратПоставщику Тогда
		ВыгрузитьПоПравилу(Объект,,,, "ВТМО_ВозвратКомитенту");
	КонецЕсли;
	
	Если ВыгружатьВозвратОтПокупателя Тогда
		ВыгрузитьПоПравилу(Объект,,,, "ВТМО_ВозвратОтКомиссионера");
	КонецЕсли;
	
КонецЕсли;

// Удаляем документы, которые не выгружаются в этот раз, но могли быть выгружены ранее
Если НЕ ВыгружатьВозвратПоставщику Тогда
	СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
	ТипИсточника = "ДокументСсылка.ВозвратТоваровМеждуОрганизациями";
	ТипПриемника = "ДокументСсылка.ВозвратТоваровПоставщику";
	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
КонецЕсли;

Если НЕ ВыгружатьВозвратОтПокупателя Тогда
	СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
	ТипИсточника = "ДокументСсылка.ВозвратТоваровМеждуОрганизациями";
	ТипПриемника = "ДокументСсылка.ВозвратТоваровОтПокупателя";
	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
КонецЕсли;

Отказ = Истина;</ПередВыгрузкойОбъекта>
				</Правило>
			</Группа>
			<Группа Отключить="false">
				<Код>СкладскиеОперации</Код>
				<Наименование>Складские документы</Наименование>
				<Порядок>250</Порядок>
				<Правило Отключить="false">
					<Код>СписаниеТоваров</Код>
					<Наименование>Списание товаров</Наименование>
					<Порядок>50</Порядок>
					<КодПравилаКонвертации>СПТ_СписаниеТоваров                               </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.СписаниеНедостачТоваров</ОбъектВыборки>
				</Правило>
				<Правило Отключить="false">
					<Код>ОприходованиеТоваров</Код>
					<Наименование>Оприходование товаров</Наименование>
					<Порядок>100</Порядок>
					<КодПравилаКонвертации>ОТ_ОприходованиеТоваров                           </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ОприходованиеИзлишковТоваров</ОбъектВыборки>
				</Правило>
				<Правило Отключить="false">
					<Код>ПеремещениеТоваров</Код>
					<Наименование>Перемещение товаров</Наименование>
					<Порядок>150</Порядок>
					<КодПравилаКонвертации>ПеремещениеТоваров_ПеремещениеТоваров             </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ПеремещениеТоваров</ОбъектВыборки>
				</Правило>
				<Правило Отключить="false">
					<Код>СборкаРазборкаТоваров</Код>
					<Наименование>Сборка товаров</Наименование>
					<Порядок>200</Порядок>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.СборкаТоваров</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>Запрос = Новый Запрос("ВЫБРАТЬ
|	ВидыЗапасов.Номенклатура,
|	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
|	1 КАК Коэффициент,
|	СУММА(ВидыЗапасов.Количество) КАК Количество,
|	ВидыЗапасов.НомерГТД,
|	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
|	ВЫБОР
|		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
|			ТОГДА ""ТоварыНаСкладе""
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ КАК СчетУчета
|ИЗ
|	Документ.СборкаТоваров.ВидыЗапасов КАК ВидыЗапасов
|ГДЕ
|	ВидыЗапасов.Ссылка = &amp;Ссылка
|
|СГРУППИРОВАТЬ ПО
|	ВидыЗапасов.Номенклатура,
|	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения,
|	ВидыЗапасов.НомерГТД,
|	ВидыЗапасов.НомерГТД.СтранаПроисхождения,
|	ВЫБОР
|		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
|			ТОГДА ""ТоварыНаСкладе""
|		ИНАЧЕ НЕОПРЕДЕЛЕНО
|	КОНЕЦ");
Запрос.УстановитьПараметр("Ссылка", Объект.Ссылка);
ТаблицаТоваров	= Запрос.Выполнить().Выгрузить();
СобственныеТовары	= ТаблицаТоваров.Скопировать(Новый Структура("СчетУчета", Неопределено));
КомиссионныеТовары	= ТаблицаТоваров.Скопировать(Новый Структура("СчетУчета", "ТоварыНаСкладе"));

СтруктураПараметров	= Новый Структура("Комплектующие", СобственныеТовары);

Если Объект.ТипОперации = Перечисления.ТипыОперацийЗаказаНаСборку.СборкаИзКомплектующих Тогда
	// Списанные собственных товаров
	ВыгрузитьПоПравилу(Объект,, СтруктураПараметров,, "СБТ_СборкаИзКомплектующих");
ИначеЕсли Объект.ТипОперации = Перечисления.ТипыОперацийЗаказаНаСборку.РазборкаНаКомплектующие Тогда
	// Списанные собственных товаров
	ВыгрузитьПоПравилу(Объект,, СтруктураПараметров,, "РБТ_РазборкаНаКомплектующие");
КонецЕсли;

// Списанные комиссионных товаров
Если КомиссионныеТовары.Количество() &gt; 0 Тогда
	СтруктураПараметров = Новый Структура("Товары", КомиссионныеТовары);
	ВыгрузитьПоПравилу(Объект,, СтруктураПараметров,, "СРТС_СписаниеТоваровПриСборкеРазборке");
Иначе
	// Удаляем документ списания комиссионных товаров, который мог быть выгружен ранее
	СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
	ТипИсточника = "ДокументСсылка.СборкаТоваров";
	ТипПриемника = "ДокументСсылка.СписаниеТоваров";
	Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
КонецЕсли;

Отказ = Истина;</ПередВыгрузкойОбъекта>
				</Правило>
				<Правило Отключить="false">
					<Код>ПересортицаТоваров</Код>
					<Наименование>Пересортица товаров</Наименование>
					<Порядок>250</Порядок>
					<КодПравилаКонвертации>ПТ_ПересортицаТоваровОприходование                </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ПересортицаТоваров</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>// Объект распадается на два
ВыгрузитьПоПравилу(Объект,, ,, "ПТ_ПересортицаТоваровСписание");</ПередВыгрузкойОбъекта>
				</Правило>
				<Правило Отключить="false">
					<Код>ПорчаТоваров</Код>
					<Наименование>Порча товаров</Наименование>
					<Порядок>300</Порядок>
					<КодПравилаКонвертации>ПорчаТоваровВОприходованиеТоваров                 </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ПорчаТоваров</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>// Объект распадается на два
ВыгрузитьПоПравилу(Объект,, ,, "ПорчаТоваровВСписаниеТоваров");</ПередВыгрузкойОбъекта>
				</Правило>
				<Правило Отключить="false">
					<Код>ВнутреннееПотреблениеТоваров</Код>
					<Наименование>Внутреннее потребление товаров</Наименование>
					<Порядок>350</Порядок>
					<КодПравилаКонвертации>ВПТ_ТребованиеНакладная                           </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ВнутреннееПотреблениеТоваров</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.СписаниеТоваровПоТребованию Тогда
	
	Запрос = Новый Запрос("ВЫБРАТЬ
	|	ВидыЗапасов.Номенклатура,
	|	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	|	1 КАК Коэффициент,
	|	СУММА(ВидыЗапасов.Количество) КАК Количество,
	|	ВидыЗапасов.НомерГТД,
	|	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	|	ВЫБОР
	|		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
	|			ТОГДА ""ТоварыНаСкладе""
	|		ИНАЧЕ НЕОПРЕДЕЛЕНО
	|	КОНЕЦ КАК СчетУчета
	|ИЗ
	|	Документ.ВнутреннееПотреблениеТоваров.ВидыЗапасов КАК ВидыЗапасов
	|ГДЕ
	|	ВидыЗапасов.Ссылка = &amp;Ссылка
	|
	|СГРУППИРОВАТЬ ПО
	|	ВидыЗапасов.Номенклатура,
	|	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения,
	|	ВидыЗапасов.НомерГТД,
	|	ВидыЗапасов.НомерГТД.СтранаПроисхождения,
	|	ВЫБОР
	|		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
	|			ТОГДА ""ТоварыНаСкладе""
	|		ИНАЧЕ НЕОПРЕДЕЛЕНО
	|	КОНЕЦ");
	
	Запрос.УстановитьПараметр("Ссылка", Объект.Ссылка);
	
	ТаблицаТоваров = Запрос.Выполнить().Выгрузить();
	
	ЛеваяТаблица		 = ТаблицаТоваров;
	ПраваяТаблица		 = Объект.Товары.Выгрузить();
	ПолучаемыеКолонки	 = "СтатьяРасходов";
	КолонкиСопоставления = "Номенклатура";
	КолонкаРаспределения = "Количество";
	Выполнить(Алгоритмы.РаспределитьПравуюТаблицуВЛевой);
	ТаблицаТоваров		 = ЛеваяТаблица;
	
	// Списанные собственные товары
	СобственныеТовары	= ТаблицаТоваров.Скопировать(Новый Структура("СчетУчета", Неопределено));
	ВходящиеДанные		= Новый Структура("Материалы", СобственныеТовары);
	ИмяПКО = "ВПТ_ТребованиеНакладная";
	
	// Списанные комиссионные товары
	КомиссионныеТовары = ТаблицаТоваров.Скопировать(Новый Структура("СчетУчета", "ТоварыНаСкладе"));
	Если КомиссионныеТовары.Количество() &gt; 0 Тогда
		СтруктураПараметров = Новый Структура("Товары", КомиссионныеТовары);
		ВыгрузитьПоПравилу(Объект,, СтруктураПараметров,, "ВПТ_СписаниеТоваровПриПередачеВПроизводство");
	Иначе
		// Удаляем документ списания комиссионных товаров, который мог быть выгружен ранее
		СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
		ТипИсточника = "ДокументСсылка.ВнутреннееПотреблениеТоваров";
		ТипПриемника = "ДокументСсылка.СписаниеТоваров";
		Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	КонецЕсли;
	
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПередачаВЭксплуатацию Тогда
	
	ИмяПКО = "ВПТ_ПередачаМатериаловВЭксплуатацию";
	
КонецЕсли;</ПередВыгрузкойОбъекта>
				</Правило>
				<Правило Отключить="false">
					<Код>ПрочееОприходованиеТоваров</Код>
					<Наименование>Прочее оприходование товаров</Наименование>
					<Порядок>400</Порядок>
					<КодПравилаКонвертации>ПОТ_ВозвратМатериаловИзЭксплуатации               </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ПрочееОприходованиеТоваров</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПоступлениеИзПроизводства Тогда
	ИмяПКО = "ПОТ_ОтчетПроизводстваЗаСмену";
КонецЕсли;</ПередВыгрузкойОбъекта>
				</Правило>
			</Группа>
			<Группа Отключить="false">
				<Код>Взаиморасчеты</Код>
				<Наименование>Взаиморасчеты</Наименование>
				<Порядок>300</Порядок>
				<Правило Отключить="false">
					<Код>ВзаимозачетЗадолженности</Код>
					<Наименование>Взаимозачет задолженности</Наименование>
					<Порядок>450</Порядок>
					<КодПравилаКонвертации>ВЗ_ВзаимозачетЗадолженностиНашаОрганизация        </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ВзаимозачетЗадолженности</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>ВыгружатьРасчетыНашейОрганизации	= Объект.Организация &lt;&gt; Справочники.Организации.УправленческаяОрганизация;
ВыгружатьРасчетыОрганизацииКредитор	= Объект.КонтрагентКредитор &lt;&gt; Справочники.Организации.УправленческаяОрганизация И Объект.РасчетыМеждуОрганизациямиКредитор;
ВыгружатьРасчетыОрганизацииДебитор	= Объект.КонтрагентДебитор &lt;&gt; Справочники.Организации.УправленческаяОрганизация И Объект.РасчетыМеждуОрганизациямиДебитор;

Если Параметры.УзелИспользоватьОтборПоОрганизации Тогда
	
	УзелСписокОрганизаций = Параметры.УзелСписокОрганизаций;
	
	ВыгружатьРасчетыНашейОрганизации	= ВыгружатьРасчетыНашейОрганизации И УзелСписокОрганизаций.НайтиПоЗначению(Объект.Организация) &lt;&gt; Неопределено;
	ВыгружатьРасчетыОрганизацииКредитор	= ВыгружатьРасчетыОрганизацииКредитор И УзелСписокОрганизаций.НайтиПоЗначению(Объект.КонтрагентКредитор) &lt;&gt; Неопределено;
	ВыгружатьРасчетыОрганизацииДебитор	= ВыгружатьРасчетыОрганизацииДебитор И УзелСписокОрганизаций.НайтиПоЗначению(Объект.КонтрагентДебитор) &lt;&gt; Неопределено;
	
КонецЕсли;

Если ВыгружатьРасчетыНашейОрганизации Тогда
	ВыгрузитьПоПравилу(Объект,,,, "ВЗ_ВзаимозачетЗадолженностиНашаОрганизация");
Иначе
	СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
	ТипИсточника = "ДокументСсылка.ВзаимозачетЗадолженности";
	ТипПриемника = "ДокументСсылка.КорректировкаДолга"; Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
КонецЕсли;

Если ВыгружатьРасчетыОрганизацииКредитор Тогда
	ВыгрузитьПоПравилу(Объект,,,, "ВЗ_ВзаимозачетЗадолженностиОрганизацияКредитор");
Иначе
	ВыгрузитьПоПравилу(Объект,,,, "ВЗ_ВзаимозачетЗадолженностиОрганизацияКредиторУдал");
КонецЕсли;

Если ВыгружатьРасчетыОрганизацииДебитор Тогда
	ВыгрузитьПоПравилу(Объект,,,, "ВЗ_ВзаимозачетЗадолженностиОрганизацияДебитор");
Иначе
	ВыгрузитьПоПравилу(Объект,,,, "ВЗ_ВзаимозачетЗадолженностиОрганизацияДебиторУдал");
КонецЕсли;

Отказ = Истина;</ПередВыгрузкойОбъекта>
				</Правило>
				<Правило Отключить="false">
					<Код>СписаниеЗадолженности</Код>
					<Наименование>Списание задолженности</Наименование>
					<Порядок>500</Порядок>
					<КодПравилаКонвертации>CЗ_СписаниеЗадолженности                          </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.СписаниеЗадолженности</ОбъектВыборки>
				</Правило>
			</Группа>
			<Группа Отключить="false">
				<Код>ОперацииЭквайринга</Код>
				<Наименование>Операции эквайринга</Наименование>
				<Порядок>350</Порядок>
				<Правило Отключить="false">
					<Код>ОперацияПоПлатежнойКарте</Код>
					<Наименование>Операция по платежной карте</Наименование>
					<Порядок>500</Порядок>
					<КодПравилаКонвертации>ОППК_ОперацияПоПлатежнойКартеПоступление          </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ОперацияПоПлатежнойКарте</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПоступлениеОплатыОтКлиента Тогда
	ИмяПКО = "ОППК_ОперацияПоПлатежнойКартеПоступление";
ИначеЕсли Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратОплатыКлиенту Тогда
	ИмяПКО = "ОППВ_ОперацияПоПлатежнойКартеВозврат";
КонецЕсли;</ПередВыгрузкойОбъекта>
				</Правило>
				<Правило Отключить="false">
					<Код>ОтчетБанкаПоОперациямЭквайринга</Код>
					<Наименование>Отчет банка по операциям эквайринга</Наименование>
					<Порядок>550</Порядок>
					<КодПравилаКонвертации>ОБОЭ_ОтчетБанкаПоОперациямЭквайринга              </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ОтчетБанкаПоОперациямЭквайринга</ОбъектВыборки>
				</Правило>
			</Группа>
			<Группа Отключить="false">
				<Код>СчетаФактуры</Код>
				<Наименование>Счета-фактуры</Наименование>
				<Порядок>400</Порядок>
				<Правило Отключить="false">
					<Код>СчетФактураПолученныйАванс</Код>
					<Наименование>Счет-фактура полученный (аванс)</Наименование>
					<Порядок>50</Порядок>
					<КодПравилаКонвертации>СФПА_СчетФактураПолученныйАванс                   </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.СчетФактураПолученныйАванс</ОбъектВыборки>
				</Правило>
				<Правило Отключить="false">
					<Код>СчетФактураВыданныйАванс</Код>
					<Наименование>Счет-фактура выданный (аванс)</Наименование>
					<Порядок>100</Порядок>
					<КодПравилаКонвертации>СФВА_СчетФактураВыданныйНаАванс                   </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.СчетФактураВыданныйАванс</ОбъектВыборки>
				</Правило>
				<Правило Отключить="false">
					<Код>СчетФактураПолученный</Код>
					<Наименование>Счет-фактура полученный</Наименование>
					<Порядок>150</Порядок>
					<КодПравилаКонвертации>СФП_СчетФактураПолученный                         </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.СчетФактураПолученный</ОбъектВыборки>
				</Правило>
				<Правило Отключить="false">
					<Код>СчетФактураВыданный</Код>
					<Наименование>Счет фактура выданный</Наименование>
					<Порядок>200</Порядок>
					<КодПравилаКонвертации>СФВ_СчетФактураВыданный                           </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.СчетФактураВыданный</ОбъектВыборки>
				</Правило>
			</Группа>
			<Группа Отключить="false">
				<Код>Ценообразование</Код>
				<Наименование>Ценообразование</Наименование>
				<Порядок>450</Порядок>
				<Правило Отключить="false">
					<Код>ЦеныНоменклатуры</Код>
					<Наименование>Цены номенклатуры</Наименование>
					<Порядок>50</Порядок>
					<КодПравилаКонвертации>ЦеныНоменклатуры_УстановкаЦенНоменклатуры         </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>РегистрСведенийЗапись.ЦеныНоменклатуры</ОбъектВыборки>
					<ПередОбработкойПравила>Если НЕ Параметры.ВыгружатьЦеныНоменклатуры И Параметры.ВидыЦенНоменклатуры.Количество() = 0 Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойПравила>
					<ПередВыгрузкойОбъекта>ДатыИзмененияЦен = Параметры.ДатыИзмененияЦен;

Регистратор = Объект.Отбор.Регистратор.Значение;
Если ОбщегоНазначения.СсылкаСуществует(Регистратор) Тогда
	
	ДатаИзменения = НачалоДня(Регистратор.МоментВремени().Дата);
	Если ДатаИзменения &gt;= Параметры.УзелДатаНачалаВыгрузкиДокументов
		И ДатыИзмененияЦен.Найти(ДатаИзменения, "ДатаИзменения") = Неопределено Тогда
		НоваяСтрока = ДатыИзмененияЦен.Добавить();
		НоваяСтрока.ДатаИзменения = ДатаИзменения;
	КонецЕсли;
	
КонецЕсли;

Отказ = Истина;</ПередВыгрузкойОбъекта>
					<ПослеОбработкиПравила>Запрос = Новый Запрос("ВЫБРАТЬ
                      |	ИзмененияЦен.ДатаИзменения КАК Дата
                      |ПОМЕСТИТЬ ИзмененияЦен
                      |ИЗ
                      |	&amp;ИзмененияЦен КАК ИзмененияЦен
                      |;
                      |
                      |////////////////////////////////////////////////////////////////////////////////
                      |ВЫБРАТЬ
                      |	ИзмененияЦен.Дата,
                      |	ВидыЦен.Ссылка КАК ВидЦены
                      |ПОМЕСТИТЬ ПараметрыИзменившихсяЦен
                      |ИЗ
                      |	ИзмененияЦен КАК ИзмененияЦен
                      |		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ВидыЦен КАК ВидыЦен
                      |		ПО (ВидыЦен.Ссылка В (&amp;ВидыЦенНоменклатуры))
                      |;
                      |
                      |////////////////////////////////////////////////////////////////////////////////
                      |ВЫБРАТЬ
                      |	ПараметрыИзменившихсяЦен.Дата,
                      |	ПараметрыИзменившихсяЦен.ВидЦены КАК ВидЦены,
                      |	ЦеныНоменклатуры.Номенклатура КАК Номенклатура,
                      |	ЦеныНоменклатуры.Характеристика КАК Характеристика,
                      |	МАКСИМУМ(ЦеныНоменклатуры.Период) КАК ДатаЦены
                      |ПОМЕСТИТЬ ПериодыЦенНоменклатуры
                      |ИЗ
                      |	ПараметрыИзменившихсяЦен КАК ПараметрыИзменившихсяЦен
                      |		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатуры
                      |		ПО ПараметрыИзменившихсяЦен.ВидЦены = ЦеныНоменклатуры.ВидЦены
                      |			И (КОНЕЦПЕРИОДА(ПараметрыИзменившихсяЦен.Дата, ДЕНЬ) &gt;= ЦеныНоменклатуры.Период)
                      |			И (ЦеныНоменклатуры.Период &gt;= НАЧАЛОПЕРИОДА(ПараметрыИзменившихсяЦен.Дата, ДЕНЬ))
                      |
                      |СГРУППИРОВАТЬ ПО
                      |	ПараметрыИзменившихсяЦен.Дата,
                      |	ПараметрыИзменившихсяЦен.ВидЦены,
                      |	ЦеныНоменклатуры.Номенклатура,
                      |	ЦеныНоменклатуры.Характеристика
                      |
                      |ИНДЕКСИРОВАТЬ ПО
                      |	ВидЦены,
                      |	Номенклатура,
                      |	Характеристика,
                      |	ДатаЦены
                      |;
                      |
                      |////////////////////////////////////////////////////////////////////////////////
                      |ВЫБРАТЬ
                      |	ПериодыЦенНоменклатуры.Дата КАК Дата,
                      |	ПериодыЦенНоменклатуры.ВидЦены КАК ВидЦены,
                      |	ПериодыЦенНоменклатуры.Номенклатура КАК Номенклатура,
                      |	МАКСИМУМ(ЕСТЬNULL(ЦеныНоменклатуры.Цена, 0) / ЕСТЬNULL(ЦеныНоменклатуры.Упаковка.Коэффициент, 1)) КАК Цена,
                      |	ЕСТЬNULL(ЦеныНоменклатуры.Валюта, ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка)) КАК Валюта
                      |ИЗ
                      |	ПериодыЦенНоменклатуры КАК ПериодыЦенНоменклатуры
                      |		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатуры
                      |		ПО ПериодыЦенНоменклатуры.Номенклатура = ЦеныНоменклатуры.Номенклатура
                      |			И ПериодыЦенНоменклатуры.Характеристика = ЦеныНоменклатуры.Характеристика
                      |			И ПериодыЦенНоменклатуры.ВидЦены = ЦеныНоменклатуры.ВидЦены
                      |			И ПериодыЦенНоменклатуры.ДатаЦены = ЦеныНоменклатуры.Период
                      |
                      |СГРУППИРОВАТЬ ПО
                      |	ПериодыЦенНоменклатуры.Дата,
                      |	ПериодыЦенНоменклатуры.ВидЦены,
                      |	ПериодыЦенНоменклатуры.Номенклатура,
                      |	ЕСТЬNULL(ЦеныНоменклатуры.Валюта, ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка))
                      |ИТОГИ
                      |	МАКСИМУМ(Цена)
                      |ПО
                      |	Дата,
                      |	ВидЦены");

Запрос.УстановитьПараметр("ИзмененияЦен", Параметры.ДатыИзмененияЦен);
Запрос.УстановитьПараметр("ВидыЦенНоменклатуры", Параметры.ВидыЦенНоменклатуры);

ВыборкаПоПериодам = Запрос.Выполнить().Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
Пока ВыборкаПоПериодам.Следующий() Цикл
	
	СтруктураОбъекта = Новый Структура;
	СтруктураОбъекта.Вставить("Ссылка");
	СтруктураОбъекта.Вставить("Дата", ВыборкаПоПериодам.Дата);
	
	ВыборкаПоВидамЦен = ВыборкаПоПериодам.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	Пока ВыборкаПоВидамЦен.Следующий() Цикл
		
		СтруктураОбъекта.Вставить("ТипЦен", ВыборкаПоВидамЦен.ВидЦены);
		
		Товары = Новый ТаблицаЗначений;
		Товары.Колонки.Добавить("Номенклатура");
		Товары.Колонки.Добавить("Цена");
		Товары.Колонки.Добавить("Валюта");
		
		ВыборкаДетали = ВыборкаПоВидамЦен.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
		Пока ВыборкаДетали.Следующий() Цикл
			Если ЗначениеЗаполнено(ВыборкаДетали.Номенклатура) Тогда
				ЗаполнитьЗначенияСвойств(Товары.Добавить(), ВыборкаДетали);
			КонецЕсли;
		КонецЦикла;
		
		СтруктураОбъекта.Вставить("Товары", Товары);
		СтруктураОбъекта.Вставить("ПометкаУдаления", Товары.Количество() = 0);
		СтруктураОбъекта.Вставить("Проведен", НЕ Товары.Количество() = 0);
		// Выгрузка документа
		ВыгрузитьПоПравилу(СтруктураОбъекта,,,, "ЦеныНоменклатуры_УстановкаЦенНоменклатуры");
		
	КонецЦикла;
КонецЦикла;</ПослеОбработкиПравила>
				</Правило>
			</Группа>
			<Правило Отключить="false">
				<Код>ВводОстатков</Код>
				<Наименование>ВводОстатков</Наименование>
				<Порядок>500</Порядок>
				<КодПравилаКонвертации>ВНО_ВводНачальныхОстатковТоваров                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ВводОстатков</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>Если Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ОстаткиСобственныхТоваров
	ИЛИ Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ОстаткиСобственныхТоваровНаАдресномСкладе Тогда
	
	ИмяПКО = "ВНО_ВводНачальныхОстатковТоваров";
	
	Запрос = Новый Запрос("ВЫБРАТЬ
	|	ВводОстатковТовары.Номенклатура,
	|	ВводОстатковТовары.Количество КАК КоличествоДт,
	|	ВводОстатковТовары.НомерГТД,
	|	ВводОстатковТовары.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения
	|ИЗ
	|	Документ.ВводОстатков.Товары КАК ВводОстатковТовары
	|ГДЕ
	|	ВводОстатковТовары.Ссылка = &amp;Ссылка
	|	И ВводОстатковТовары.НомерГТД &lt;&gt; ЗНАЧЕНИЕ(Справочник.НомераГТД.ПустаяСсылка)");
	
	Запрос.УстановитьПараметр("Ссылка", Объект.Ссылка);					  
	
	ДанныеБухОперации = Новый Структура;
	ДанныеБухОперации.Вставить("Хозрасчетный", Запрос.Выполнить().Выгрузить());
	
	Если ДанныеБухОперации.Хозрасчетный.Количество() &gt; 0 Тогда
		ВыгрузитьПоПравилу(Объект,,ДанныеБухОперации ,, "ВНО_ОстаткиГТД");
	Иначе
		СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
		ТипИсточника = "ДокументСсылка.ВводОстатков";
		ТипПриемника = "ДокументСсылка.ОперацияБух";
		Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	КонецЕсли;
	
ИначеЕсли Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ОстаткиТоваровПолученныхНаКомиссию
	ИЛИ Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ОстаткиТоваровПолученныхНаКомиссиюНаАдресномСкладе Тогда
	
	ИмяПКО = "ВНО_ОстаткиТоваровПринятыхНаКомиссию";
	
ИначеЕсли Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ОстаткиТоваровПереданныхНаКомиссию Тогда
	
	ИмяПКО = "ВНО_ОстаткиТоваровПереданныхНаКомиссию";
	
ИначеЕсли Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ОстаткиВКассах Тогда
	
	ИмяПКО = "ВНО_ОстаткиВКассах";
	
ИначеЕсли Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ОстаткиНаБанковскихСчетах Тогда
	
	ИмяПКО = "ВНО_ОстаткиНаБанковскихСчетах";
	
ИначеЕсли Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ОстаткиПоАвансамКлиентов Тогда
	
	ИмяПКО = "ВНО_АвансыПолученныеОтКлиентов";
	
ИначеЕсли Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ОстаткиЗадолженностиКлиентов Тогда
	
	ИмяПКО = "ВНО_ЗадолженностьКлиентов";
	
ИначеЕсли Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ОстаткиПоАвансамПоставщикам Тогда
	
	ИмяПКО = "ВНО_АвансыВыданныеПоставщикам";
	
ИначеЕсли Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ОстаткиЗадолженностиПередПоставщиками Тогда
	
	ИмяПКО = "ВНО_ЗадолженностьПередПоставщиками";
	
ИначеЕсли Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ОстаткиРасчетовМеждуОрганизациямиПоАвансам
	Или Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ОстаткиРасчетовМеждуОрганизациямиПоРеализациям Тогда
	
	ВыгружатьОстаткиПоставщика = Объект.Организация &lt;&gt; Справочники.Организации.УправленческаяОрганизация;
	ВыгружатьОстаткиПокупателя = Объект.ОрганизацияПолучатель &lt;&gt; Справочники.Организации.УправленческаяОрганизация;
	
	Если Параметры.УзелИспользоватьОтборПоОрганизации Тогда
		
		УзелСписокОрганизаций = Параметры.УзелСписокОрганизаций;
		
		ВыгружатьОстаткиПоставщика = ВыгружатьОстаткиПоставщика И УзелСписокОрганизаций.НайтиПоЗначению(Объект.Организация) &lt;&gt; Неопределено;
		ВыгружатьОстаткиПокупателя = ВыгружатьОстаткиПокупателя И УзелСписокОрганизаций.НайтиПоЗначению(Объект.ОрганизацияПолучатель) &lt;&gt; Неопределено;
		
	КонецЕсли;
	
	Если Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ОстаткиРасчетовМеждуОрганизациямиПоАвансам Тогда
		
		Если ВыгружатьОстаткиПоставщика Тогда
			ВыгрузитьПоПравилу(Объект,,,, "ВНО_АвансыПолученныеОтКлиентовИК");
		КонецЕсли;
		
		Если ВыгружатьОстаткиПокупателя Тогда
			ВыгрузитьПоПравилу(Объект,,,, "ВНО_АвансыВыданныеПоставщикамИК");
		КонецЕсли;
		
	КонецЕсли;
	
	Если Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ОстаткиРасчетовМеждуОрганизациямиПоРеализациям Тогда
		
		Если ВыгружатьОстаткиПоставщика Тогда
			ВыгрузитьПоПравилу(Объект,,,, "ВНО_ЗадолженностьКлиентовИК");
		КонецЕсли;
		
		Если ВыгружатьОстаткиПокупателя Тогда
			ВыгрузитьПоПравилу(Объект,,,, "ВНО_ЗадолженностьПередПоставщикамиИК");
		КонецЕсли;
		
	КонецЕсли;
	
	ТипИсточника = "ДокументСсылка.ВводОстатков";
	ТипПриемника = "ДокументСсылка.ВводНачальныхОстатков";
	СсылкаНаУдаляемыйОбъект = Объект.Ссылка;
	
	// Удаляем документы, которые не выгружаются в этот раз, но могли быть выгружены ранее
	Если НЕ ВыгружатьОстаткиПоставщика Тогда
		Выполнить(Алгоритмы.ЗаписатьУдалениеОбъектаВФайл);
	КонецЕсли;
	
	Отказ = Истина;
	
ИначеЕсли Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ОстаткиЗадолженностиПодотчетниковПоБезналичнымРасчетам
	ИЛИ Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ОстаткиЗадолженностиПодотчетниковПоНаличнымРасчетам Тогда
	
	ИмяПКО = "ВНО_ЗадолженностьПодотчетников";
	
ИначеЕсли Объект.ТипОперации = Перечисления.ТипыОперацийВводаОстатков.ПерерасходыПодотчетныхСредств Тогда
	
	ИмяПКО = "ВНО_ЗадолженностьПередПодотчетниками";
	
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
		</Группа>
	</ПравилаВыгрузкиДанных>
	<ПравилаОчисткиДанных/>
	<Алгоритмы>
		<Группа Имя="Выгрузка">
			<Группа Имя="_КонтактнаяИнформация">
				<Алгоритм Имя="ВыгрузкаКонтактнойИнформации" ИспользуетсяПриЗагрузке="false">
					<Текст>// Параметры:
// - Объект

// Создание пустого набора записей
Отбор = Новый ТаблицаЗначений;
Отбор.Колонки.Добавить("Имя");
Отбор.Колонки.Добавить("Значение");
Отбор.Колонки.Добавить("Использование");

СтрокаОтбора = Отбор.Добавить();
СтрокаОтбора.Имя			= "Объект";
СтрокаОтбора.Значение		= Объект.Ссылка;
СтрокаОтбора.Использование	= Истина;

Строки = Новый ТаблицаЗначений;
Строки.Колонки.Добавить("Ссылка");
Строки.Колонки.Добавить("Объект");
Строки.Колонки.Добавить("Вид");
Строки.Колонки.Добавить("Тип");
Строки.Колонки.Добавить("Поле1");
Строки.Колонки.Добавить("Поле2");
Строки.Колонки.Добавить("Поле3");
Строки.Колонки.Добавить("Поле4");
Строки.Колонки.Добавить("Поле5");
Строки.Колонки.Добавить("Поле6");
Строки.Колонки.Добавить("Поле7");
Строки.Колонки.Добавить("Поле8");
Строки.Колонки.Добавить("Поле9");
Строки.Колонки.Добавить("ТипДома");
Строки.Колонки.Добавить("ТипКвартиры");
Строки.Колонки.Добавить("ТипКорпуса");
Строки.Колонки.Добавить("Представление");
Строки.Колонки.Добавить("Комментарий");
Строки.Колонки.Добавить("ЭтоПроизвольнаяСтрока", Новый ОписаниеТипов("Булево"));

// Типы дома, корпуса и квартиры, которые поддерживаются в БП
ТипыДомов = Новый Массив;
ТипыДомов.Добавить("дом");
ТипыДомов.Добавить("владение");

ТипыКорпусов = Новый Массив;
ТипыКорпусов.Добавить("корпус");
ТипыКорпусов.Добавить("строение");

ТипыКвартир = Новый Массив;
ТипыКвартир.Добавить("кв.");
ТипыКвартир.Добавить("оф.");

// Заполнение набора
Для Каждого СтрокаКИ Из Объект.КонтактнаяИнформация Цикл
	
	// Получаем структуру значений полей
	СтруктураПолей		= Новый Структура;
	ПоследнийЭлементИмя	= Неопределено;
	СтрокаПолей			= СтрокаКИ.ЗначенияПолей;
	
	Для Сч = 1 По СтрЧислоСтрок(СтрокаПолей) Цикл
		Стр = СтрПолучитьСтроку(СтрокаПолей, Сч);
		Если Лев(Стр, 1) = Символы.Таб Тогда
			Если ПоследнийЭлементИмя &lt;&gt; Неопределено Тогда
				СтруктураПолей[ПоследнийЭлементИмя] = СтруктураПолей[ПоследнийЭлементИмя] + Символы.ПС + Сред(Стр, 2);
			КонецЕсли;
		Иначе
			Поз = Найти(Стр, "=");
			Если Поз &lt;&gt; 0 Тогда
				ПоследнийЭлементИмя = Лев(Стр, Поз-1);
				СтруктураПолей.Вставить(ПоследнийЭлементИмя, Сред(Стр, Поз+1));
			КонецЕсли;
		КонецЕсли;
	КонецЦикла;
	
	СтрокаНабора = Строки.Добавить();
	СтрокаНабора.Объект		   			= Объект.Ссылка;
	СтрокаНабора.Вид		   			= СтрокаКИ.Вид;
	СтрокаНабора.Тип					= СтрокаКИ.Тип;
	СтрокаНабора.Представление			= СтрокаКИ.Представление;
	
	Если СтрокаКИ.Тип = Перечисления.ТипыКонтактнойИнформации.Факс
		ИЛИ СтрокаКИ.Тип = Перечисления.ТипыКонтактнойИнформации.Телефон Тогда
		СтруктураПолей.Свойство("КодСтраны", СтрокаНабора.Поле1);
		СтруктураПолей.Свойство("КодГорода", СтрокаНабора.Поле2);
		СтруктураПолей.Свойство("НомерТелефона", СтрокаНабора.Поле3);
		СтруктураПолей.Свойство("Добавочный", СтрокаНабора.Поле4);
	ИначеЕсли СтрокаКИ.Тип = Перечисления.ТипыКонтактнойИнформации.Адрес Тогда
		
		СтруктураПолей.Свойство("Индекс", СтрокаНабора.Поле1);
		СтруктураПолей.Свойство("Регион", СтрокаНабора.Поле2);
		СтруктураПолей.Свойство("Район", СтрокаНабора.Поле3);
		СтруктураПолей.Свойство("Город", СтрокаНабора.Поле4);
		СтруктураПолей.Свойство("НаселенныйПункт", СтрокаНабора.Поле5);
		СтруктураПолей.Свойство("Улица", СтрокаНабора.Поле6);
		СтруктураПолей.Свойство("Дом", СтрокаНабора.Поле7);
		СтруктураПолей.Свойство("Корпус", СтрокаНабора.Поле8);
		СтруктураПолей.Свойство("Квартира", СтрокаНабора.Поле9);
		
		СтруктураПолей.Свойство("ТипДома", СтрокаНабора.ТипДома);
		СтруктураПолей.Свойство("ТипКорпуса", СтрокаНабора.ТипКорпуса);
		СтруктураПолей.Свойство("ТипКвартиры", СтрокаНабора.ТипКвартиры);
		
		// Проверяем значения типа дома, корпуса и квартиры
		СтрокаНабора.ТипДома	 = ?(ТипыДомов.Найти(НРег(СтрокаНабора.ТипДома)) = Неопределено, Неопределено, СтрокаНабора.ТипДома);
		СтрокаНабора.ТипКорпуса  = ?(ТипыКорпусов.Найти(НРег(СтрокаНабора.ТипКорпуса)) = Неопределено, Неопределено, СтрокаНабора.ТипКорпуса);
		СтрокаНабора.ТипКвартиры = ?(ТипыКвартир.Найти(НРег(СтрокаНабора.ТипКвартиры)) = Неопределено, Неопределено, СтрокаНабора.ТипКвартиры);
		
		// Получаем представление, какое оно должно быть
		КодСтраны = "";
		НаименованиеСтраны = СтрокаКИ.Страна;
		СтранаРоссия = Справочники.СтраныМира.Россия;
		
		СтруктураПолей.Свойство("КодСтраны", КодСтраны);
		Страна = ?(ЗначениеЗаполнено(КодСтраны), Справочники.СтраныМира.НайтиПоКоду(КодСтраны), Неопределено);
		Страна = ?(ЗначениеЗаполнено(Страна), Справочники.СтраныМира.НайтиПоНаименованию(НаименованиеСтраны, Истина), СтранаРоссия);
		Страна = ?(ЗначениеЗаполнено(Страна), Страна, СтранаРоссия);
		
		Представление = "";
		Если Страна &lt;&gt; СтранаРоссия Тогда
			Представление = Представление + ?(ЗначениеЗаполнено(Строка(Страна)), ", " + Строка(Страна), "");
		КонецЕсли;
		Представление = Представление + ?(ЗначениеЗаполнено(СокрЛП(СтрокаНабора.Поле1)), ", " + СокрЛП(СтрокаНабора.Поле1), "");
		Представление = Представление + ?(ЗначениеЗаполнено(СокрЛП(СтрокаНабора.Поле2)), ", " + СокрЛП(СтрокаНабора.Поле2), "");
		Представление = Представление + ?(ЗначениеЗаполнено(СокрЛП(СтрокаНабора.Поле3)), ", " + СокрЛП(СтрокаНабора.Поле3), "");
		Представление = Представление + ?(ЗначениеЗаполнено(СокрЛП(СтрокаНабора.Поле4)), ", " + СокрЛП(СтрокаНабора.Поле4), "");
		Представление = Представление + ?(ЗначениеЗаполнено(СокрЛП(СтрокаНабора.Поле5)), ", " + СокрЛП(СтрокаНабора.Поле5), "");
		Представление = Представление + ?(ЗначениеЗаполнено(СокрЛП(СтрокаНабора.Поле6)), ", " + СокрЛП(СтрокаНабора.Поле6), "");
		Представление = Представление + ?(ЗначениеЗаполнено(СокрЛП(СтрокаНабора.Поле7)), ", " + СтрокаНабора.ТипДома    + " № " + СокрЛП(СтрокаНабора.Поле7), "");
		Представление = Представление + ?(ЗначениеЗаполнено(СокрЛП(СтрокаНабора.Поле8)), ", " + СтрокаНабора.ТипКорпуса + " " + СокрЛП(СтрокаНабора.Поле8), "");
		Представление = Представление + ?(ЗначениеЗаполнено(СокрЛП(СтрокаНабора.Поле9)), ", " + СтрокаНабора.ТипКвартиры + " " + СокрЛП(СтрокаНабора.Поле9), "");
		
		Если СтрДлина(Представление) &gt; 2 Тогда
			Представление = Сред(Представление, 3);
		КонецЕсли;
		
		// Проверяем представление на наличие произвольного значения
		Если Представление &lt;&gt; СтрокаНабора.Представление Тогда
			СтрокаНабора.ЭтоПроизвольнаяСтрока = Истина;
			СтрокаНабора.Поле1 = Строка(Страна);
		КонецЕсли;
		
		СтрокаНабора.ТипКвартиры = ?(СтрокаНабора.ТипКвартиры = "кв.", "Квартира", "Офис");
		
	КонецЕсли;
	
	СтруктураПолей.Свойство("Комментарий", СтрокаНабора.Комментарий);
	
КонецЦикла;

// Выгрузка набора записей
// создаем виртуальный набор записей
НаборЗаписей = Новый Структура("Отбор, Строки");
НаборЗаписей.Отбор  = Отбор;
НаборЗаписей.Строки = Строки;

ВыгрузитьРегистр(НаборЗаписей, , , Истина, "КонтактнаяИнформация");</Текст>
					<Параметры>Объект</Параметры>
				</Алгоритм>
			</Группа>
			<Группа Имя="_ПоступлениеТоваровУслуг">
				<Алгоритм Имя="ПараметрыПоступлениеТоваровУслуг" ИспользуетсяПриЗагрузке="false">
					<Текст>// Параметры:
// - ПараметрыДокумента
// - ДокументСсылка

ПараметрыДокумента = Новый Структура;
ПараметрыДокумента.Вставить("ЕстьДопРасходы", Ложь);
ПараметрыДокумента.Вставить("ЕстьОбычноеПоступление", Ложь);
ПараметрыДокумента.Вставить("ЕстьНедостачиЗаСчетПоставщика", Ложь);
ПараметрыДокумента.Вставить("ЕстьНедостачиЗаСчетСтороннейКомпании", Ложь);
ПараметрыДокумента.Вставить("ЕстьНедостачиЗаСвойСчет", Ложь);

Запрос = Новый Запрос("ВЫБРАТЬ
|	МАКСИМУМ(Док.ЕстьДопРасходы) КАК ЕстьДопРасходы,
|	МАКСИМУМ(Док.ЕстьОбычноеПоступление) КАК ЕстьОбычноеПоступление,
|	МАКСИМУМ(Док.ЕстьНедостачиЗаСчетПоставщика) КАК ЕстьНедостачиЗаСчетПоставщика,
|	МАКСИМУМ(Док.ЕстьНедостачиЗаСчетСтороннейКомпании) КАК ЕстьНедостачиЗаСчетСтороннейКомпании,
|	МАКСИМУМ(Док.ЕстьНедостачиЗаСвойСчет) КАК ЕстьНедостачиЗаСвойСчет
|ИЗ
|	(ВЫБРАТЬ
|		ВЫБОР
|			КОГДА Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
|					И Товары.СтатьяРасходов.ВариантРаспределенияРасходов = ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаСебестоимостьТоваров)
|				ТОГДА ИСТИНА
|			ИНАЧЕ ЛОЖЬ
|		КОНЕЦ КАК ЕстьДопРасходы,
|		ВЫБОР
|			КОГДА Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
|					И Товары.СтатьяРасходов.ВариантРаспределенияРасходов = ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаСебестоимостьТоваров)
|				ТОГДА ЛОЖЬ
|			ИНАЧЕ ИСТИНА
|		КОНЕЦ КАК ЕстьОбычноеПоступление,
|		ЛОЖЬ КАК ЕстьНедостачиЗаСчетПоставщика,
|		ЛОЖЬ КАК ЕстьНедостачиЗаСчетСтороннейКомпании,
|		ЛОЖЬ КАК ЕстьНедостачиЗаСвойСчет,
|		Товары.Ссылка КАК Ссылка
|	ИЗ
|		Документ.ПоступлениеТоваровУслуг.Товары КАК Товары
|	ГДЕ
|		Товары.Ссылка = &amp;Ссылка
|		И (НЕ Товары.Ссылка.ЕстьРасхождения
|				ИЛИ Товары.Ссылка.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаПоИмпорту)
|				ИЛИ Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга))
|	
|	ОБЪЕДИНИТЬ ВСЕ
|	
|	ВЫБРАТЬ
|		ЛОЖЬ,
|		ИСТИНА,
|		ЛОЖЬ,
|		ЛОЖЬ,
|		ЛОЖЬ,
|		Товары.Ссылка
|	ИЗ
|		Документ.ПоступлениеТоваровУслуг.ТоварыПоДаннымПоставщика КАК Товары
|	ГДЕ
|		Товары.Ссылка = &amp;Ссылка
|		И Товары.Ссылка.ЕстьРасхождения
|		И Товары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
|		И Товары.Ссылка.ХозяйственнаяОперация &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаПоИмпорту)
|	
|	ОБЪЕДИНИТЬ ВСЕ
|	
|	ВЫБРАТЬ
|		ЛОЖЬ,
|		ЛОЖЬ,
|		ИСТИНА,
|		ЛОЖЬ,
|		ЛОЖЬ,
|		Расхождения.Ссылка
|	ИЗ
|		Документ.ПоступлениеТоваровУслуг.Расхождения КАК Расхождения
|	ГДЕ
|		Расхождения.Ссылка = &amp;Ссылка
|		И Расхождения.ВариантРасхождений = ЗНАЧЕНИЕ(Перечисление.ВариантыРасхождений.Недостачи)
|		И Расхождения.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
|		И Расхождения.ВариантОтраженияРасхождений = ЗНАЧЕНИЕ(Перечисление.ВариантыОтраженияРасхождений.НедостачиЗаСчетПоставщика)
|	
|	ОБЪЕДИНИТЬ ВСЕ
|	
|	ВЫБРАТЬ
|		ЛОЖЬ,
|		ЛОЖЬ,
|		ЛОЖЬ,
|		ИСТИНА,
|		ЛОЖЬ,
|		Расхождения.Ссылка
|	ИЗ
|		Документ.ПоступлениеТоваровУслуг.Расхождения КАК Расхождения
|	ГДЕ
|		Расхождения.Ссылка = &amp;Ссылка
|		И Расхождения.ВариантРасхождений = ЗНАЧЕНИЕ(Перечисление.ВариантыРасхождений.Недостачи)
|		И Расхождения.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
|		И Расхождения.ВариантОтраженияРасхождений = ЗНАЧЕНИЕ(Перечисление.ВариантыОтраженияРасхождений.НедостачиЗаСчетСтороннейКомпании)
|	
|	ОБЪЕДИНИТЬ ВСЕ
|	
|	ВЫБРАТЬ
|		ЛОЖЬ,
|		ЛОЖЬ,
|		ЛОЖЬ,
|		ЛОЖЬ,
|		ИСТИНА,
|		Расхождения.Ссылка
|	ИЗ
|		Документ.ПоступлениеТоваровУслуг.Расхождения КАК Расхождения
|	ГДЕ
|		Расхождения.Ссылка = &amp;Ссылка
|		И Расхождения.ВариантРасхождений = ЗНАЧЕНИЕ(Перечисление.ВариантыРасхождений.Недостачи)
|		И Расхождения.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
|		И Расхождения.ВариантОтраженияРасхождений = ЗНАЧЕНИЕ(Перечисление.ВариантыОтраженияРасхождений.НедостачиНаПрочиеРасходы)) КАК Док
|
|СГРУППИРОВАТЬ ПО
|	Док.Ссылка");

Запрос.УстановитьПараметр("Ссылка", ДокументСсылка);
Выборка = Запрос.Выполнить().Выбрать();
Если Выборка.Следующий() Тогда
	ЗаполнитьЗначенияСвойств(ПараметрыДокумента, Выборка);
КонецЕсли;</Текст>
					<Параметры>ПараметрыДокумента, ДокументСсылка</Параметры>
				</Алгоритм>
			</Группа>
			<Группа Имя="_ПоступлениеУслугПрочихАктивов">
				<Алгоритм Имя="ПараметрыПоступлениеУслугПрочихАктивов" ИспользуетсяПриЗагрузке="false">
					<Текст>// Параметры:
// - ПараметрыДокумента
// - ДокументСсылка

ПараметрыДокумента = Новый Структура;
ПараметрыДокумента.Вставить("ЕстьДопРасходы", Ложь);
ПараметрыДокумента.Вставить("ЕстьОбычноеПоступление", Ложь);

Запрос = Новый Запрос("ВЫБРАТЬ
|	МАКСИМУМ(ВЫБОР
|			КОГДА РасходыПоступления.СтатьяРасходов.ВариантРаспределенияРасходов = ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаСебестоимостьТоваров)
|				ТОГДА ИСТИНА
|			ИНАЧЕ ЛОЖЬ
|		КОНЕЦ) КАК ЕстьДопРасходы,
|	МАКСИМУМ(ВЫБОР
|			КОГДА РасходыПоступления.СтатьяРасходов.ВариантРаспределенияРасходов = ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаСебестоимостьТоваров)
|				ТОГДА ЛОЖЬ
|			ИНАЧЕ ИСТИНА
|		КОНЕЦ) КАК ЕстьОбычноеПоступление
|ИЗ
|	Документ.ПоступлениеУслугПрочихАктивов.Расходы КАК РасходыПоступления
|ГДЕ
|	РасходыПоступления.Ссылка = &amp;Ссылка
|
|СГРУППИРОВАТЬ ПО
|	РасходыПоступления.Ссылка");

Запрос.УстановитьПараметр("Ссылка", ДокументСсылка);
Выборка = Запрос.Выполнить().Выбрать();
Если Выборка.Следующий() Тогда
	ЗаполнитьЗначенияСвойств(ПараметрыДокумента, Выборка);
КонецЕсли;</Текст>
					<Параметры>ПараметрыДокумента, ДокументСсылка</Параметры>
				</Алгоритм>
			</Группа>
			<Алгоритм Имя="ВыгрузитьДоговорПлатежногоДокумента" ИспользуетсяПриЗагрузке="false">
				<Текст>// Параметры:
// - Источник
// - ОбъектКоллекции
// - ОбъектРасчетов
// - Контрагент
// - Организация

ДоговорКонтрагента = Неопределено;

ДанныеОбъектаРасчетов = Новый Структура("Соглашение,Сделка,Договор");

Если ЗначениеЗаполнено(ОбъектРасчетов) Тогда
	ЗаполнитьЗначенияСвойств(ДанныеОбъектаРасчетов, ОбъектРасчетов);
КонецЕсли;
		
Если ЗначениеЗаполнено(ОбъектРасчетов) Тогда
	Если ТипЗнч(ОбъектРасчетов) = Тип("СправочникСсылка.ДоговорыКонтрагентов") Тогда
		ДоговорКонтрагента = ОбъектРасчетов;
	Иначе
		Попытка
			ДоговорКонтрагента = ДанныеОбъектаРасчетов.Договор;
		Исключение
		КонецПопытки;
	КонецЕсли;
КонецЕсли;

//Если ЗначениеЗаполнено(ДоговорКонтрагента) Тогда
//	Значение = ДоговорКонтрагента;
//	ИмяПКО = "ДоговорыКонтрагентов_ДоговорыКонтрагентов";
//Иначе
	
	// Инициализируем структуру договора
	Значение = Новый Структура;
	
	// Реквизиты договора
	Значение.Вставить("Ссылка");
	Значение.Вставить("ВалютаВзаиморасчетов",		ОбъектКоллекции.ВалютаВзаиморасчетов);
	Значение.Вставить("ВидДоговора",				Неопределено);
	Значение.Вставить("Владелец",					Контрагент);
	Значение.Вставить("Организация",				Организация);
	Значение.Вставить("РасчетыВУсловныхЕдиницах", 	Неопределено);
	
	// Дополнительные свойства договора
	Значение.Вставить("ПартнерУТ11",				ОбъектКоллекции.Партнер);
	Значение.Вставить("СоглашениеСКлиентомУТ11",	Неопределено);
	Значение.Вставить("СоглашениеСПоставщикомУТ11",	Неопределено);
	Значение.Вставить("СделкаСКлиентомУТ11",		Неопределено);
	Значение.Вставить("ЗаказКлиентаУТ11",			Неопределено);
	Значение.Вставить("ЗаказПоставщикуУТ11",		Неопределено);
	
	ОбъектРасчетов = ОбъектКоллекции.Заказ;
	Если ТипЗнч(ДанныеОбъектаРасчетов.Соглашение) = Тип("СправочникСсылка.СоглашенияСКлиентами") Тогда
		Значение.СоглашениеСКлиентомУТ11 = ДанныеОбъектаРасчетов.Соглашение;
	ИначеЕсли ТипЗнч(ДанныеОбъектаРасчетов.Соглашение) = Тип("СправочникСсылка.СоглашенияСПоставщиками") Тогда
		Значение.СоглашениеСПоставщикомУТ11 = ДанныеОбъектаРасчетов.Соглашение;
	КонецЕсли;
	
	// Для продолжения анализа операции, необходимо определить вид договора
	Значение.ВидДоговора = ВзаиморасчетыСервер.ВидДоговораКонтрагента(ОбъектРасчетов, ДанныеОбъектаРасчетов.Соглашение, Источник.ХозяйственнаяОперация);
	
	Если Значение.ВидДоговора = "СКомитентом"
		Или Значение.ВидДоговора = "СКомиссионером" Тогда
		// Договора по комиссии выгружаются без разделения по сделкам и заказам и всегда не в у.е.
		Значение.РасчетыВУсловныхЕдиницах = Ложь;
	Иначе
		
		Если ЗначениеЗаполнено(ДанныеОбъектаРасчетов.Соглашение) Тогда
			Значение.РасчетыВУсловныхЕдиницах = ВзаиморасчетыСервер.РасчетыВУсловныхЕдиницах(ДанныеОбъектаРасчетов.Соглашение);
		КонецЕсли;
		
		Значение.СделкаСКлиентомУТ11 = ДанныеОбъектаРасчетов.Сделка;
		
		Если ТипЗнч(ОбъектРасчетов) = Тип("ДокументСсылка.ЗаказКлиента") Тогда
			Значение.ЗаказКлиентаУТ11 = ОбъектРасчетов;
		ИначеЕсли ТипЗнч(ОбъектРасчетов) = Тип("ДокументСсылка.ЗаказПоставщику") Тогда
			Значение.ЗаказПоставщикуУТ11 = ОбъектРасчетов;
		КонецЕсли;
		
	КонецЕсли;
	
	Если Значение.РасчетыВУсловныхЕдиницах = Неопределено Тогда
		Значение.РасчетыВУсловныхЕдиницах = Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить()
			И Источник.Валюта &lt;&gt; ОбъектКоллекции.ВалютаВзаиморасчетов;
	КонецЕсли;
	
	ВыгрузитьТолькоСсылку = Ложь;
//КонецЕсли;</Текст>
				<Параметры>Источник, ОбъектКоллекции, ОбъектРасчетов, Контрагент, Организация</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ВыполнитьСверткуСкладаПриНеобходимости" ИспользуетсяПриЗагрузке="false">
				<Текст>// Параметры:
// - Значение

Если ЗначениеЗаполнено(Значение)
	И ТипЗнч(Значение) = Тип("СправочникСсылка.Склады")
	И Значение.ВыборГруппы = Перечисления.ВыборГруппыСкладов.РазрешитьВЗаказахИНакладных Тогда
	
	// Относим хозоперацию на склад по умолчанию
	Значение = Параметры.ОбобщенныйСклад;
		
КонецЕсли;</Текст>
				<Параметры>Значение</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ЗаписатьУдалениеОбъектаВФайл" ИспользуетсяПриЗагрузке="false">
				<Текст>// Параметры:
// - СсылкаНаУдаляемыйОбъект
// - ТипПриемника
// - ТипИсточника
// - ПолеСчетчикВыгруженныхОбъектов

// Создается узел удаляемого объекта

УникальныйИдентификатор = СсылкаНаУдаляемыйОбъект.УникальныйИдентификатор();

Приемник = СоздатьУзел("УдалениеОбъекта");

УстановитьАтрибут(Приемник, "ТипПриемника", ТипПриемника);
УстановитьАтрибут(Приемник, "ТипИсточника", ТипИсточника);

УстановитьАтрибут(Приемник, "УникальныйИдентификатор", УникальныйИдентификатор);

Приемник.ЗаписатьКонецЭлемента(); // УдалениеОбъекта

ЗаписатьВФайл(Приемник);

Инкремент(ПолеСчетчикВыгруженныхОбъектов);</Текст>
				<Параметры>СсылкаНаУдаляемыйОбъект, ТипПриемника, ТипИсточника, ПолеСчетчикВыгруженныхОбъектов</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ЗаполнитьСчетБанк" ИспользуетсяПриЗагрузке="false">
				<Текст>// Параметры:
// - Источник

Если Источник.Валюта = Константы.ВалютаРегламентированногоУчета.Получить() Тогда
	Значение = "51";
Иначе
	Значение = "52";
КонецЕсли;</Текст>
				<Параметры>Источник</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ПолучениеДатыИПризнакаПроведенияДокументовДБДС" ИспользуетсяПриЗагрузке="false">
				<Текст>// Параметры:
// - ВходящиеДанные
// - БанковскийСчетОперации
// - Источник

// По умолчанию документ не проведен по банку и в качестве даты выгружаем его собственную дату
ВходящиеДанные.Вставить("Проведен", Ложь);
ВходящиеДанные.Вставить("Дата", Источник.Дата);

// Определение проведенности документа по банку, запрос вычисляет непроведенные по банку суммы
Запрос = Новый Запрос();
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("БанковскийСчет", БанковскийСчетОперации);
Запрос.Текст = "ВЫБРАТЬ
               |	ОстаткиКСписанию.Документ,
               |	ОстаткиКСписанию.СуммаОстаток
               |ИЗ
               |	РегистрНакопления.ДенежныеСредстваКСписаниюБезналичные.Остатки(
               |			,
               |			Документ = &amp;Ссылка
               |				И БанковскийСчет = &amp;БанковскийСчет) КАК ОстаткиКСписанию
               |ГДЕ
               |	ОстаткиКСписанию.СуммаОстаток &lt;= 0
               |
               |ОБЪЕДИНИТЬ ВСЕ
               |
               |ВЫБРАТЬ
               |	ОстаткиКПоступлению.Документ,
               |	ОстаткиКПоступлению.СуммаОстаток
               |ИЗ
               |	РегистрНакопления.ДенежныеСредстваКПоступлениюБезналичные.Остатки(
               |			,
               |			Документ = &amp;Ссылка
               |				И БанковскийСчет = &amp;БанковскийСчет) КАК ОстаткиКПоступлению
               |ГДЕ
               |	ОстаткиКПоступлению.СуммаОстаток &gt;= 0";
					  
РезультатЗапроса = Запрос.Выполнить();
Если РезультатЗапроса.Пустой() Тогда
	
	// Нет непроведенных по банку сумм, значит документ проведен по банку
	ВходящиеДанные.Вставить("Проведен", Истина);
	
	// Определим дату последнего движения, когда документ стал проведеным по банку
	Запрос.Текст = "ВЫБРАТЬ ПЕРВЫЕ 1
	               |	ДвиженияПоДокументу.Период КАК Дата
	               |ИЗ
	               |	(ВЫБРАТЬ
	               |		ДвиженияПоСписанию.Период КАК Период
	               |	ИЗ
	               |		РегистрНакопления.ДенежныеСредстваКСписаниюБезналичные КАК ДвиженияПоСписанию
	               |	ГДЕ
	               |		ДвиженияПоСписанию.Документ = &amp;Ссылка
	               |		И ДвиженияПоСписанию.БанковскийСчет = &amp;БанковскийСчет
	               |	
	               |	ОБЪЕДИНИТЬ ВСЕ
	               |	
	               |	ВЫБРАТЬ
	               |		ДвиженияПоПоступлению.Период
	               |	ИЗ
	               |		РегистрНакопления.ДенежныеСредстваКПоступлениюБезналичные КАК ДвиженияПоПоступлению
	               |	ГДЕ
	               |		ДвиженияПоПоступлению.Документ = &amp;Ссылка
	               |		И ДвиженияПоПоступлению.БанковскийСчет = &amp;БанковскийСчет) КАК ДвиженияПоДокументу
	               |
	               |УПОРЯДОЧИТЬ ПО
	               |	Период УБЫВ";
				   
	РезультатЗапроса = Запрос.Выполнить();
	Если НЕ РезультатЗапроса.Пустой() Тогда
		Выборка = РезультатЗапроса.Выбрать();
		Выборка.Следующий();
		ВходящиеДанные.Вставить("Дата", Выборка.Дата);
	КонецЕсли;
	
КонецЕсли;</Текст>
				<Параметры>ВходящиеДанные, БанковскийСчетОперации, Источник</Параметры>
			</Алгоритм>
			<Алгоритм Имя="РаспределитьПравуюТаблицуВЛевой" ИспользуетсяПриЗагрузке="false">
				<Текст>// Параметры:
// - ЛеваяТаблица
// - ПолучаемыеКолонки
// - КолонкиСопоставления
// - ПраваяТаблица
// - КолонкаРаспределения

Результат = ЛеваяТаблица.СкопироватьКолонки();

// Определяем массив получаемых из правой таблицы колонок
МассивПолучаемыхКолонок = Новый Массив;
ТекущаяКолонкаСтр = "";
Для НомерСимвола = 1 По СтрДлина(ПолучаемыеКолонки) Цикл
	
	Символ = Сред(ПолучаемыеКолонки, НомерСимвола, 1);
	
	Если Символ &lt;&gt; "," И Символ &lt;&gt; " " Тогда
		ТекущаяКолонкаСтр = ТекущаяКолонкаСтр + Символ;
	КонецЕсли;
	
	Если Символ = "," ИЛИ НомерСимвола = СтрДлина(ПолучаемыеКолонки) Тогда
		МассивПолучаемыхКолонок.Добавить(ТекущаяКолонкаСтр);
	КонецЕсли;
	
КонецЦикла;

// Определяем массив колонок сопоставления
МассивКолонокСопоставления = Новый Массив;
ТекущаяКолонкаСтр = "";
Для НомерСимвола = 1 По СтрДлина(КолонкиСопоставления) Цикл
	
	Символ = Сред(КолонкиСопоставления, НомерСимвола, 1);
	
	Если Символ &lt;&gt; "," И Символ &lt;&gt; " " Тогда
		ТекущаяКолонкаСтр = ТекущаяКолонкаСтр + Символ;
	КонецЕсли;
	
	Если Символ = "," ИЛИ НомерСимвола = СтрДлина(КолонкиСопоставления) Тогда
		МассивКолонокСопоставления.Добавить(ТекущаяКолонкаСтр);
	КонецЕсли;
	
КонецЦикла;

Для Каждого Колонка Из МассивПолучаемыхКолонок Цикл
	Результат.Колонки.Добавить(Колонка);
КонецЦикла;

Для Каждого Строка Из ЛеваяТаблица Цикл
	
	ОсталосьРаспределить = Строка[КолонкаРаспределения];
	
	СтруктураПоиска = Новый Структура;
	Для Каждого Колонка Из МассивКолонокСопоставления Цикл
		СтруктураПоиска.Вставить(Колонка, Строка[Колонка]);
	КонецЦикла;
	
	Пока ОсталосьРаспределить &gt; 0 Цикл
	
		НайденныеСтрокиПравойТаблицы = ПраваяТаблица.НайтиСтроки(СтруктураПоиска);
		Если НайденныеСтрокиПравойТаблицы.Количество() &gt; 0 Тогда
			
			НайденнаяСтрока = НайденныеСтрокиПравойТаблицы[0];
			Распределено = Мин(ОсталосьРаспределить, НайденнаяСтрока[КолонкаРаспределения]);
			
			НоваяСтрока = Результат.Добавить();
			ЗаполнитьЗначенияСвойств(НоваяСтрока, Строка);
			ЗаполнитьЗначенияСвойств(НоваяСтрока, НайденнаяСтрока, ПолучаемыеКолонки);
			НоваяСтрока[КолонкаРаспределения] = Распределено;
			
			ОсталосьРаспределить = ОсталосьРаспределить - Распределено;
			
			Если НайденнаяСтрока[КолонкаРаспределения] = Распределено Тогда
				ПраваяТаблица.Удалить(НайденнаяСтрока);
			Иначе
				НайденнаяСтрока[КолонкаРаспределения] = НайденнаяСтрока[КолонкаРаспределения] - Распределено;
			КонецЕсли;
			
		Иначе
			
			НоваяСтрока = Результат.Добавить();
			ЗаполнитьЗначенияСвойств(НоваяСтрока, Строка);
			Прервать;
			
		КонецЕсли;
		
	КонецЦикла;
	
КонецЦикла;

ЛеваяТаблица = Результат;</Текст>
				<Параметры>ЛеваяТаблица, ПолучаемыеКолонки, КолонкиСопоставления, ПраваяТаблица, КолонкаРаспределения</Параметры>
			</Алгоритм>
			<Алгоритм Имя="СоздатьИВыгрузитьБанковскийСчет" ИспользуетсяПриЗагрузке="false">
				<Текст>// Параметры:
// - БанковскийСчет
// - НовыйВладелецБанковскогоСчета

Если ЗначениеЗаполнено(БанковскийСчет) Тогда
	
	// Проверим, есть ли в базе банковский счет, созданный по банковскому счету организации, если нет, то создадим его и выгрузим
	Запрос = Новый Запрос("ВЫБРАТЬ
	|	БанковскиеСчетаКонтрагентов.Ссылка
	|ИЗ
	|	Справочник.БанковскиеСчетаКонтрагентов КАК БанковскиеСчетаКонтрагентов
	|ГДЕ
	|	БанковскиеСчетаКонтрагентов.Владелец = &amp;Владелец
	|	И БанковскиеСчетаКонтрагентов.НомерСчета = &amp;НомерСчета");
	
	Запрос.УстановитьПараметр("Владелец", НовыйВладелецБанковскогоСчета);
	Запрос.УстановитьПараметр("НомерСчета", БанковскийСчет.НомерСчета);
	
	РезультатЗапроса = Запрос.Выполнить();
	Если РезультатЗапроса.Пустой() Тогда
		
		НовыйБанковскийСчет = Справочники.БанковскиеСчетаКонтрагентов.СоздатьЭлемент();
		ЗаполнитьЗначенияСвойств(НовыйБанковскийСчет, БанковскийСчет,, "Владелец,Родитель,ЭтоГруппа");
		НовыйБанковскийСчет.Владелец = НовыйВладелецБанковскогоСчета;
		
		НовыйБанковскийСчет.Записать();
		НовыйБанковскийСчет = НовыйБанковскийСчет.Ссылка;
		
		Параметры.СписокОбъектовСозданныхВТекущемСеансеОбмена.Добавить(НовыйБанковскийСчет);
		
		ВыгрузитьПоПравилу(НовыйБанковскийСчет,,,, "БанковскиеСчетаКонтрагентов");
		
	Иначе
		
		ВыборкаРезультатаЗапроса = РезультатЗапроса.Выбрать();
		ВыборкаРезультатаЗапроса.Следующий();
		НовыйБанковскийСчет = ВыборкаРезультатаЗапроса.Ссылка;
	КонецЕсли;
	
КонецЕсли;</Текст>
				<Параметры>БанковскийСчет, НовыйВладелецБанковскогоСчета</Параметры>
			</Алгоритм>
			<Алгоритм Имя="СоздатьИВыгрузитьКонтрагентаИзОрганизации" ИспользуетсяПриЗагрузке="false">
				<Текст>// Параметры:
// - ОрганизацияКонтрагента

Если ЗначениеЗаполнено(ОрганизацияКонтрагента) Тогда
	
	// Проверим, есть ли в базе контрагент, созданный по организации, если нету, то создадим его и выгрузим
	СсылкаНаКонтрагента = Справочники.Контрагенты.ПолучитьСсылку(ОрганизацияКонтрагента.УникальныйИдентификатор());
	Если НЕ ОбщегоНазначения.СсылкаСуществует(СсылкаНаКонтрагента) Тогда
		
		НовыйКонтрагент = Справочники.Контрагенты.СоздатьЭлемент();
		НовыйКонтрагент.ПометкаУдаления		= ОрганизацияКонтрагента.ПометкаУдаления;
		НовыйКонтрагент.ИНН					= ОрганизацияКонтрагента.ИНН;
		НовыйКонтрагент.КодПоОКПО			= ОрганизацияКонтрагента.КодПоОКПО;
		НовыйКонтрагент.КПП					= ОрганизацияКонтрагента.КПП;
		НовыйКонтрагент.НаименованиеПолное	= ОрганизацияКонтрагента.НаименованиеПолное;
		НовыйКонтрагент.ЮрФизЛицо			= ОрганизацияКонтрагента.ЮрФизЛицо;
		НовыйКонтрагент.Наименование		= ОрганизацияКонтрагента.Наименование;
		НовыйКонтрагент.Партнер				= Справочники.Партнеры.НеизвестныйПартнер;
		
		НовыйКонтрагент.УстановитьСсылкуНового(СсылкаНаКонтрагента);
		НовыйКонтрагент.Записать();
		
		Параметры.СписокОбъектовСозданныхВТекущемСеансеОбмена.Добавить(СсылкаНаКонтрагента);
		
		ВыгрузитьПоПравилу(НовыйКонтрагент,,,, "Контрагенты");
		
	КонецЕсли;
	
	НовыйКонтрагент = СсылкаНаКонтрагента;
	
КонецЕсли;</Текст>
				<Параметры>ОрганизацияКонтрагента</Параметры>
			</Алгоритм>
			<Алгоритм Имя="СоздатьИВыгрузитьКонтрагентаИзФизЛица" ИспользуетсяПриЗагрузке="false">
				<Текст>// Параметры:
// - ФизЛицо

Если ЗначениеЗаполнено(ФизЛицо) Тогда
	
	// Проверим, есть ли в базе контрагент, созданный по физлицу, если нету, то создадим его и выгрузим
	СсылкаНаКонтрагента = Справочники.Контрагенты.ПолучитьСсылку(ФизЛицо.УникальныйИдентификатор());
	Если НЕ ОбщегоНазначения.СсылкаСуществует(СсылкаНаКонтрагента) Тогда
		
		НовыйКонтрагент = Справочники.Контрагенты.СоздатьЭлемент();
		НовыйКонтрагент.НаименованиеПолное	= ФизЛицо.Наименование;
		НовыйКонтрагент.ЮрФизЛицо			= Перечисления.ЮрФизЛицо.ФизЛицо;
		НовыйКонтрагент.Наименование		= ФизЛицо.Наименование;
		НовыйКонтрагент.Партнер				= Справочники.Партнеры.НеизвестныйПартнер;
		
		НовыйКонтрагент.УстановитьСсылкуНового(СсылкаНаКонтрагента);
		НовыйКонтрагент.Записать();
		
		Параметры.СписокОбъектовСозданныхВТекущемСеансеОбмена.Добавить(СсылкаНаКонтрагента);
		
		ВыгрузитьПоПравилу(НовыйКонтрагент,,,, "Контрагенты");
		
	КонецЕсли;
	
	НовыйКонтрагент = СсылкаНаКонтрагента;
	
КонецЕсли;</Текст>
				<Параметры>ФизЛицо</Параметры>
			</Алгоритм>
		</Группа>
		<Группа Имя="Загрузка">
			<Группа Имя="ЗаполнениеДокументовЗагрузка">
				<Алгоритм Имя="ЗаполнитьСтатьюДоходовРасходовВПлатежномДокументе" ИспользуетсяПриЗагрузке="true">
					<Текст>// Параметры:
// - ПараметрыОбъекта
// - Объект

Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
	
	СтатьяДоходовРасходов = ПараметрыОбъекта.Получить("СтатьяДоходовРасходов");
	
	Если ЗначениеЗаполнено(Объект.СчетУчетаРасчетовСКонтрагентом) Тогда
		
		ТипЗначенияОбъекта = ТипЗнч(Объект);
		Если ТипЗначенияОбъекта = Тип("ДокументОбъект.ПоступлениеНаРасчетныйСчет")
			ИЛИ ТипЗначенияОбъекта = Тип("ДокументОбъект.ПриходныйКассовыйОрдер") Тогда
			ИмяРеквизитаСубконто = "СубконтоКт";
		ИначеЕсли ТипЗначенияОбъекта = Тип("ДокументОбъект.СписаниеСРасчетногоСчета")
			ИЛИ ТипЗначенияОбъекта = Тип("ДокументОбъект.РасходныйКассовыйОрдер") Тогда
			ИмяРеквизитаСубконто = "СубконтоДт";
		КонецЕсли;
		
		Для Каждого СтрокаВидаСубконто Из Объект.СчетУчетаРасчетовСКонтрагентом.ВидыСубконто Цикл
			
			ТипЗначенияСубконто = СтрокаВидаСубконто.ВидСубконто.ТипЗначения;
			Если ТипЗначенияСубконто.СодержитТип(ТипЗнч(СтатьяДоходовРасходов)) Тогда
				Объект[ИмяРеквизитаСубконто + СтрокаВидаСубконто.НомерСтроки] = СтатьяДоходовРасходов;
			КонецЕсли;
			
		КонецЦикла;
		
	КонецЕсли;
	
КонецЕсли;</Текст>
					<Параметры>ПараметрыОбъекта, Объект</Параметры>
				</Алгоритм>
				<Алгоритм Имя="ОбновитьПериодическийРеквизит" ИспользуетсяПриЗагрузке="true">
					<Текст>// Параметры:
// - Объект
// - ПустоеЗначениеРеквизита
// - ИмяИзмерения
// - ИмяРесурса
// - ПараметрыОбъекта
// - ИмяРеквизита
// - ИмяРегистра

НовоеЗначениеРеквизита	= ?(ЗначениеЗаполнено(ПараметрыОбъекта[ИмяРеквизита]), ПараметрыОбъекта[ИмяРеквизита], ПустоеЗначениеРеквизита);

Запрос = Новый Запрос("ВЫБРАТЬ
                      |	ДанныеРеквизита.Период,
                      |	ДанныеРеквизита." + ИмяРесурса + "
                      |ИЗ
                      |	РегистрСведений." + ИмяРегистра + ".СрезПоследних(, " + ИмяИзмерения + " = &amp;Ссылка) КАК ДанныеРеквизита");
					  
Запрос.УстановитьПараметр("Ссылка", Объект.Ссылка);
Результат = Запрос.Выполнить();

Если Результат.Пустой() Тогда
	
	ПериодЗаписи			= '19800101';
	СтароеЗначениеРеквизита	= ПустоеЗначениеРеквизита;
	
Иначе
	
	ВыборкаРезультата = Результат.Выбрать();
	ВыборкаРезультата.Следующий();
	
	ПериодЗаписи			= ВыборкаРезультата.Период;
	СтароеЗначениеРеквизита	= ВыборкаРезультата[ИмяРесурса];
	
КонецЕсли;

Если НовоеЗначениеРеквизита &lt;&gt; СтароеЗначениеРеквизита Тогда

	ЗаписьРегистра = РегистрыСведений[ИмяРегистра].СоздатьМенеджерЗаписи();
	ЗаписьРегистра.Период			= ПериодЗаписи;
	ЗаписьРегистра[ИмяИзмерения]	= Объект.Ссылка;
	ЗаписьРегистра[ИмяРесурса]		= НовоеЗначениеРеквизита;
	
	ЗаписьРегистра.Записать();
	
КонецЕсли;</Текст>
					<Параметры>Объект, ПустоеЗначениеРеквизита, ИмяИзмерения, ИмяРесурса, ПараметрыОбъекта, ИмяРеквизита, ИмяРегистра</Параметры>
				</Алгоритм>
				<Алгоритм Имя="ОбновлениеОтветственныхЛицОрганизации" ИспользуетсяПриЗагрузке="true">
					<Текст>// Параметры:
// - Объект
// - ПараметрыОбъекта

// Обновляем значение периодического реквизита "Руководитель" и его должность

Запрос = Новый Запрос("ВЫБРАТЬ
                      |	ОтветственныеЛицаОрганизацийСрезПоследних.ФизическоеЛицо,
                      |	ОтветственныеЛицаОрганизацийСрезПоследних.Должность,
                      |	ОтветственныеЛицаОрганизацийСрезПоследних.Период
                      |ИЗ
                      |	РегистрСведений.ОтветственныеЛицаОрганизаций.СрезПоследних(
                      |			,
                      |			СтруктурнаяЕдиница = &amp;Ссылка
                      |				И ОтветственноеЛицо = ЗНАЧЕНИЕ(Перечисление.ОтветственныеЛицаОрганизаций.Руководитель)) КАК ОтветственныеЛицаОрганизацийСрезПоследних");
					  
Запрос.УстановитьПараметр("Ссылка", Объект.Ссылка);
Результат = Запрос.Выполнить();

Если Результат.Пустой() Тогда
	
	ПериодЗаписи				= '19800101';
	СтароеЗначениеРуководителя	= Справочники.ФизическиеЛица.ПустаяСсылка();
	СтараяДолжностьРуководителя	= Справочники.ДолжностиОрганизаций.ПустаяСсылка();
	
Иначе
	
	ВыборкаРезультата = Результат.Выбрать();
	ВыборкаРезультата.Следующий();
	
	ПериодЗаписи				= ВыборкаРезультата.Период;
	СтароеЗначениеРуководителя	= ВыборкаРезультата.ФизическоеЛицо;
	СтараяДолжностьРуководителя	= ВыборкаРезультата.Должность;
	
КонецЕсли;

НовоеЗначениеРуководителя = ПараметрыОбъекта["Руководитель"];
НовоеЗначениеРуководителя = ?(ЗначениеЗаполнено(НовоеЗначениеРуководителя), НовоеЗначениеРуководителя, Справочники.ФизическиеЛица.ПустаяСсылка());
							  
НоваяДолжностьРуководителя = ПараметрыОбъекта.Получить("ДолжностьРуководителя");
НоваяДолжностьРуководителя = ?(ЗначениеЗаполнено(НоваяДолжностьРуководителя), НоваяДолжностьРуководителя, Справочники.ДолжностиОрганизаций.ПустаяСсылка());

Если НовоеЗначениеРуководителя &lt;&gt; СтароеЗначениеРуководителя 
	ИЛИ НоваяДолжностьРуководителя &lt;&gt; СтараяДолжностьРуководителя Тогда

	ЗаписьРегистра = РегистрыСведений.ОтветственныеЛицаОрганизаций.СоздатьМенеджерЗаписи();
	ЗаписьРегистра.Период				= ПериодЗаписи;
	ЗаписьРегистра.СтруктурнаяЕдиница	= Объект.Ссылка;
	ЗаписьРегистра.ОтветственноеЛицо	= Перечисления.ОтветственныеЛицаОрганизаций.Руководитель;
	ЗаписьРегистра.ФизическоеЛицо		= НовоеЗначениеРуководителя;
	ЗаписьРегистра.Должность			= НоваяДолжностьРуководителя;
	
	ЗаписьРегистра.Записать();
	
КонецЕсли;

// Обновляем значение периодического реквизита "Главный бухгалтер"

Запрос = Новый Запрос("ВЫБРАТЬ
                      |	ОтветственныеЛицаОрганизацийСрезПоследних.ФизическоеЛицо,
                      |	ОтветственныеЛицаОрганизацийСрезПоследних.Должность,
                      |	ОтветственныеЛицаОрганизацийСрезПоследних.Период
                      |ИЗ
                      |	РегистрСведений.ОтветственныеЛицаОрганизаций.СрезПоследних(
                      |			,
                      |			СтруктурнаяЕдиница = &amp;Ссылка
                      |				И ОтветственноеЛицо = ЗНАЧЕНИЕ(Перечисление.ОтветственныеЛицаОрганизаций.ГлавныйБухгалтер)) КАК ОтветственныеЛицаОрганизацийСрезПоследних");
					  
Запрос.УстановитьПараметр("Ссылка", Объект.Ссылка);
Результат = Запрос.Выполнить();

Если Результат.Пустой() Тогда
	
	ПериодЗаписи						= '19800101';
	СтароеЗначениеГлавногоБухгалтера	= Справочники.ФизическиеЛица.ПустаяСсылка();
	СтараяДолжностьГлавногоБухгалтера	= Справочники.ДолжностиОрганизаций.ПустаяСсылка();
	
Иначе
	
	ВыборкаРезультата = Результат.Выбрать();
	ВыборкаРезультата.Следующий();
	
	ПериодЗаписи						= ВыборкаРезультата.Период;
	СтароеЗначениеГлавногоБухгалтера	= ВыборкаРезультата.ФизическоеЛицо;
	СтараяДолжностьГлавногоБухгалтера	= ВыборкаРезультата.Должность;
	
КонецЕсли;

НовоеЗначениеГлавногоБухгалтера = ПараметрыОбъекта["ГлавныйБухгалтер"];
НовоеЗначениеГлавногоБухгалтера = ?(ЗначениеЗаполнено(НовоеЗначениеРуководителя), НовоеЗначениеГлавногоБухгалтера, Справочники.ФизическиеЛица.ПустаяСсылка());
							  
Если СтароеЗначениеГлавногоБухгалтера &lt;&gt; НовоеЗначениеГлавногоБухгалтера Тогда

	ЗаписьРегистра = РегистрыСведений.ОтветственныеЛицаОрганизаций.СоздатьМенеджерЗаписи();
	ЗаписьРегистра.Период				= ПериодЗаписи;
	ЗаписьРегистра.СтруктурнаяЕдиница	= Объект.Ссылка;
	ЗаписьРегистра.ОтветственноеЛицо	= Перечисления.ОтветственныеЛицаОрганизаций.ГлавныйБухгалтер;
	ЗаписьРегистра.ФизическоеЛицо		= НовоеЗначениеГлавногоБухгалтера;
	ЗаписьРегистра.Должность			= СтараяДолжностьГлавногоБухгалтера;
	
	ЗаписьРегистра.Записать();
	
КонецЕсли;</Текст>
					<Параметры>Объект, ПараметрыОбъекта</Параметры>
				</Алгоритм>
				<Алгоритм Имя="ОбработатьЗаписьДокументаПослеЗагрузки" ИспользуетсяПриЗагрузке="true">
					<Текст>// Параметры:
// - Объект

ПроведенОбъект = Объект.Проведен;

// Если установлена опция не проводить документы загружаем все документы как непроведенные
Если Объект.ЭтоНовый() Тогда
	Объект.Проведен = Объект.Проведен И Параметры.РазрешитьПроведениеДокументовПриЗагрузке;
Иначе
	ПроведенСсылка = ОбщегоНазначения.ПолучитьЗначениеРеквизита(Объект.Ссылка, "Проведен");
	Объект.Проведен = ПроведенОбъект И (Параметры.РазрешитьПроведениеДокументовПриЗагрузке ИЛИ ПроведенСсылка);
КонецЕсли;

Если Объект.ЭтоНовый() Тогда
	Объект.Комментарий = "#Загружен новый";
Иначе
	Если ПроведенОбъект = ПроведенСсылка Тогда
		Объект.Комментарий = "#Изменен";
	ИначеЕсли ПроведенСсылка Тогда
		Объект.Комментарий = "#Отменено проведение";
	Иначе
		Объект.Комментарий = "#Проведен";
	КонецЕсли;
КонецЕсли;</Текст>
					<Параметры>Объект</Параметры>
				</Алгоритм>
				<Алгоритм Имя="УпрощенныйУчетНДС" ИспользуетсяПриЗагрузке="true">
					<Текст>// Параметры:
// - Объект

УчетнаяПолитикаНеЗадана = Ложь;
УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация,, Ложь);
УпрощенныйУчетНДС = УчетНДС.ПолучитьУПУпрощенныйУчетНДС(Объект.Организация, Объект.Дата, УчетнаяПолитика);

Если ТипЗнч(Объект.Ссылка) = Тип("ДокументСсылка.ВозвратТоваровОтПокупателя") Тогда
	Объект.НДСПредъявленКВычету = (УпрощенныйУчетНДС ИЛИ Объект.Дата &gt;= '20120101')
		И ?(Объект.ПокупателемВыставляетсяСчетФактураНаВозврат, Объект.ПредъявленСчетФактура, ЗначениеЗаполнено(Объект.Сделка));
Иначе
	Объект.НДСПредъявленКВычету = (УпрощенныйУчетНДС ИЛИ Объект.Дата &gt;= '20120101')
		И НЕ Объект.НДСВключенВСтоимость И Объект.ПредъявленСчетФактура;
КонецЕсли;</Текст>
					<Параметры>Объект</Параметры>
				</Алгоритм>
			</Группа>
			<Группа Имя="ОбработкаОбъектовПослеЗагрузкиДанных">
				<Алгоритм Имя="ЗаполнитьСчетаУчетаНоменклатурыПродажа" ИспользуетсяПриЗагрузке="true">
					<Текст>// Параметры:
// - ТабличнаяЧасть
// - ДокументОбъектДляЗаписи
// - ЭтоУслуги
// - ЕстьКомиссия

Для Каждого СтрокаТаблицы Из ТабличнаяЧасть Цикл
	
	СчетаУчета = БухгалтерскийУчет.ПолучитьСчетаУчетаНоменклатуры(
		ДокументОбъектДляЗаписи.Организация,
		СтрокаТаблицы.Номенклатура,
		ДокументОбъектДляЗаписи.Склад
	);
	Если Не ЭтоУслуги Тогда
		Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетУчета) Тогда
			СтрокаТаблицы.СчетУчета = СчетаУчета.СчетУчета;
			Если ЕстьКомиссия Тогда
				СтрокаТаблицы.ПереданныеСчетУчета = СчетаУчета.СчетПередачи;
			КонецЕсли;
		КонецЕсли;
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетДоходов) Тогда
		СтрокаТаблицы.СчетДоходов  = СчетаУчета.СчетДоходов;
	КонецЕсли;
	Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетРасходов) Тогда
		СтрокаТаблицы.СчетРасходов = СчетаУчета.СчетРасходов;
	КонецЕсли;
	Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетУчетаНДСПоРеализации) Тогда
		СтрокаТаблицы.СчетУчетаНДСПоРеализации = СчетаУчета.СчетУчетаНДСПродажи;
	КонецЕсли;

	Если СтрокаТаблицы.СчетДоходов.ВидыСубконто.Количество() &gt; 0 Тогда
		СтрокаТаблицы.Субконто = Новый(СтрокаТаблицы.СчетДоходов.ВидыСубконто[0].ВидСубконто.ТипЗначения.Типы()[0]);
		Если ТипЗнч(СтрокаТаблицы.Субконто) = Тип("СправочникСсылка.НоменклатурныеГруппы") Тогда
			СтрокаТаблицы.Субконто = СтрокаТаблицы.Номенклатура.НоменклатурнаяГруппа;
		КонецЕсли;
	Иначе
		СтрокаТаблицы.Субконто = Неопределено;
	КонецЕсли;
		
КонецЦикла;</Текст>
					<Параметры>ТабличнаяЧасть, ДокументОбъектДляЗаписи, ЭтоУслуги, ЕстьКомиссия</Параметры>
				</Алгоритм>
				<Алгоритм Имя="ЗаполнитьСчетНаличныхДенежныхСредствПоУмолчанию" ИспользуетсяПриЗагрузке="true">
					<Текст>// Параметры:
// - ДокументОбъектДляЗаписи

Если НЕ ЗначениеЗаполнено(ДокументОбъектДляЗаписи.ВалютаДокумента)
	Или ДокументОбъектДляЗаписи.ВалютаДокумента = Константы.ВалютаРегламентированногоУчета.Получить() Тогда
	ДокументОбъектДляЗаписи.СчетКасса = ПланыСчетов.Хозрасчетный.КассаОрганизации;
Иначе
	ДокументОбъектДляЗаписи.СчетКасса = ПланыСчетов.Хозрасчетный.КассаОрганизацииВал;
КонецЕсли;</Текст>
					<Параметры>ДокументОбъектДляЗаписи</Параметры>
				</Алгоритм>
				<Алгоритм Имя="ОбработатьЗагруженныеГТДИмпорт" ИспользуетсяПриЗагрузке="true">
					<Текст>Для Каждого ДокументОбъект Из Параметры.ЗагруженныеГТДИмпорт Цикл
	
	Если ДокументОбъект.ЭтоНовый() Тогда
		Продолжить;
	КонецЕсли;
	
	ДокументОбъектДляЗаписи = ДокументОбъект.Ссылка.ПолучитьОбъект();

	Для Каждого СтрокаТаблицы Из ДокументОбъектДляЗаписи.Товары Цикл
		
		Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетУчета)
			Или ЗначениеЗаполнено(СтрокаТаблицы.СчетУчетаНУ) Тогда

			Склад = Неопределено;
			Если ЗначениеЗаполнено(СтрокаТаблицы.ДокументПартии) Тогда
				Склад = СтрокаТаблицы.ДокументПартии.Склад;
			КонецЕсли;
			
			СчетаУчета = БухгалтерскийУчет.ПолучитьСчетаУчетаНоменклатуры(
				ДокументОбъектДляЗаписи.Организация,
				СтрокаТаблицы.Номенклатура,
				Склад);
				
			Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетУчета) Тогда
				
				СтрокаТаблицы.СчетУчета = СчетаУчета.СчетУчета;
				СтрокаТаблицы.СчетУчетаНДС = СчетаУчета.СчетНДСТаможни;
				
			КонецЕсли;
			
			Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетУчетаНУ) Тогда
				СтрокаТаблицы.СчетУчетаНУ = СчетаУчета.СчетУчета;
			КонецЕсли;
				
		КонецЕсли;
			
	КонецЦикла;
	
	Если Не ЗначениеЗаполнено(ДокументОбъектДляЗаписи.СчетУчетаРасчетовСКонтрагентом) Тогда
		
		СчетаУчета = БухгалтерскийУчетРасчетовСКонтрагентами.ПолучитьСчетаРасчетовСКонтрагентом(
			ДокументОбъектДляЗаписи.Организация,
			ДокументОбъектДляЗаписи.Контрагент,
			ДокументОбъектДляЗаписи.ДоговорКонтрагентаРегл);
			
		ДокументОбъектДляЗаписи.СчетУчетаРасчетовСКонтрагентом = СчетаУчета.СчетРасчетов;
		
	КонецЕсли;
		
	Если Не ЗначениеЗаполнено(ДокументОбъектДляЗаписи.СчетУчетаРасчетовСКонтрагентомВал)
		И ЗначениеЗаполнено(ДокументОбъектДляЗаписи.ДоговорКонтрагента) Тогда
		
		СчетаУчета = БухгалтерскийУчетРасчетовСКонтрагентами.ПолучитьСчетаРасчетовСКонтрагентом(
			ДокументОбъектДляЗаписи.Организация,
			ДокументОбъектДляЗаписи.Контрагент,
			ДокументОбъектДляЗаписи.ДоговорКонтрагента);
			
		ДокументОбъектДляЗаписи.СчетУчетаРасчетовСКонтрагентомВал = СчетаУчета.СчетРасчетов;
		
	КонецЕсли;
	
	ДокументОбъектДляЗаписи.ОбменДанными.Загрузка = Истина;
	ДокументОбъектДляЗаписи.Записать();
	
	// Выполняем замену объекта в таблице документов для проведения
	Если ТипЗнч(ПолеДокументыДляОтложенногоПроведения) = Тип("ТаблицаЗначений") Тогда
		
		НайденнаяСтрока = ПолеДокументыДляОтложенногоПроведения.Найти(ДокументОбъект.Ссылка, "ДокументСсылка");
		Если НайденнаяСтрока &lt;&gt; Неопределено Тогда
			НайденнаяСтрока.ДокументОбъект = ДокументОбъектДляЗаписи;
		КонецЕсли;
		
	КонецЕсли;
	
КонецЦикла;</Текст>
				</Алгоритм>
				<Алгоритм Имя="ОбработатьЗагруженныеКорректировкиПоступления" ИспользуетсяПриЗагрузке="true">
					<Текст>Для Каждого ДокументОбъект Из Параметры.ЗагруженныеКорректировкиПоступления Цикл
	
	Если ДокументОбъект.ЭтоНовый() Тогда
		Продолжить;
	КонецЕсли;
	
	ДокументОбъектДляЗаписи = ДокументОбъект.Ссылка.ПолучитьОбъект();

	Для Каждого СтрокаТаблицы Из ДокументОбъектДляЗаписи.Товары Цикл
		
		Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетУчета) Тогда
			
			СчетаУчета = БухгалтерскийУчет.ПолучитьСчетаУчетаНоменклатуры(
				ДокументОбъектДляЗаписи.Организация,
				СтрокаТаблицы.Номенклатура,
				ДокументОбъектДляЗаписи.Склад);
				
			СтрокаТаблицы.СчетУчета = СчетаУчета.СчетУчета;
			СтрокаТаблицы.СчетУчетаНДС = СчетаУчета.СчетУчетаНДС;
			
		КонецЕсли;
			
	КонецЦикла;
	
	Для Каждого СтрокаТаблицы Из ДокументОбъектДляЗаписи.Услуги Цикл
		
		Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетЗатрат)
		 ИЛИ Не ЗначениеЗаполнено(СтрокаТаблицы.СчетУчетаНДС) Тогда
			СчетаУчета = БухгалтерскийУчет.ПолучитьСчетаУчетаНоменклатуры(
				ДокументОбъектДляЗаписи.Организация,
				СтрокаТаблицы.Номенклатура,
				ДокументОбъектДляЗаписи.Склад
			);
		КонецЕсли;
		
		Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетЗатрат) Тогда
			СтрокаТаблицы.СчетЗатрат = СчетаУчета.СчетУчета;
			СтрокаТаблицы.Субконто1	= СчетаУчета.Субконто1;
			СтрокаТаблицы.Субконто2 = СчетаУчета.Субконто2;
			СтрокаТаблицы.Субконто3 = СчетаУчета.Субконто3;
			
			СтрокаТаблицы.СчетЗатратНУ = СчетаУчета.СчетУчета;
			СтрокаТаблицы.СубконтоНУ1 = СчетаУчета.Субконто1;
			СтрокаТаблицы.СубконтоНУ2 = СчетаУчета.Субконто2;
			СтрокаТаблицы.СубконтоНУ3 = СчетаУчета.Субконто3;
		КонецЕсли;
		
		// Установка типа у субконто БУ
		
		ЧислоАктивныхСубконто = СтрокаТаблицы.СчетЗатрат.ВидыСубконто.Количество();
		
		Для Сч = 1 По ЧислоАктивныхСубконто Цикл
			
			ТипСубк = СтрокаТаблицы.СчетЗатрат.ВидыСубконто[Сч - 1].ВидСубконто.ТипЗначения;
			
			Если ТипСубк.ПривестиЗначение(СтрокаТаблицы["Субконто" + Сч]) &lt;&gt; СтрокаТаблицы["Субконто" + Сч] Тогда
				СтрокаТаблицы["Субконто" + Сч] = ТипСубк.ПривестиЗначение(СтрокаТаблицы["Субконто" + Сч]);
			КонецЕсли;
			
		КонецЦикла;
		
		Для Сч = (ЧислоАктивныхСубконто + 1) По 3 Цикл
			
			Если Не СтрокаТаблицы["Субконто" + Сч] = Неопределено Тогда
				СтрокаТаблицы["Субконто" + Сч] = Неопределено;
			КонецЕсли;
			
		КонецЦикла;
		
		// Установка типа у субконто НУ
		
		ЧислоАктивныхСубконто = СтрокаТаблицы.СчетЗатратНУ.ВидыСубконто.Количество();
		
		Для Сч = 1 По ЧислоАктивныхСубконто Цикл
			
			ТипСубк = СтрокаТаблицы.СчетЗатратНУ.ВидыСубконто[Сч - 1].ВидСубконто.ТипЗначения;
			
			Если ТипСубк.ПривестиЗначение(СтрокаТаблицы["СубконтоНУ" + Сч]) &lt;&gt; СтрокаТаблицы["СубконтоНУ" + Сч] Тогда
				СтрокаТаблицы["СубконтоНУ" + Сч] = ТипСубк.ПривестиЗначение(СтрокаТаблицы["СубконтоНУ" + Сч]);
			КонецЕсли;
			
		КонецЦикла;
		
		Для Сч = (ЧислоАктивныхСубконто + 1) По 3 Цикл
			
			Если Не СтрокаТаблицы["СубконтоНУ" + Сч] = Неопределено Тогда
				СтрокаТаблицы["СубконтоНУ" + Сч] = Неопределено;
			КонецЕсли;
			
		КонецЦикла;
			
		Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетУчетаНДС) Тогда
			СтрокаТаблицы.СчетУчетаНДС = СчетаУчета.СчетУчетаНДС;
		КонецЕсли;
			
	КонецЦикла;
	
	ДокументОбъектДляЗаписи.ОбменДанными.Загрузка = Истина;
	ДокументОбъектДляЗаписи.Записать();
	
	// Выполняем замену объекта в таблице документов для проведения
	Если ТипЗнч(ПолеДокументыДляОтложенногоПроведения) = Тип("ТаблицаЗначений") Тогда
		
		НайденнаяСтрока = ПолеДокументыДляОтложенногоПроведения.Найти(ДокументОбъект.Ссылка, "ДокументСсылка");
		Если НайденнаяСтрока &lt;&gt; Неопределено Тогда
			НайденнаяСтрока.ДокументОбъект = ДокументОбъектДляЗаписи;
		КонецЕсли;
	
	КонецЕсли;
	
КонецЦикла;</Текст>
				</Алгоритм>
				<Алгоритм Имя="ОбработатьЗагруженныеКорректировкиРеализации" ИспользуетсяПриЗагрузке="true">
					<Текст>Для Каждого ДокументОбъект Из Параметры.ЗагруженныеКорректировкиРеализации Цикл
	
	Если ДокументОбъект.ЭтоНовый() Тогда
		Продолжить;
	КонецЕсли;
	
	ДокументОбъектДляЗаписи = ДокументОбъект.Ссылка.ПолучитьОбъект();

	Для Каждого СтрокаТаблицы Из ДокументОбъектДляЗаписи.Товары Цикл
		
		СчетаУчета = БухгалтерскийУчет.ПолучитьСчетаУчетаНоменклатуры(
			ДокументОбъектДляЗаписи.Организация,
			СтрокаТаблицы.Номенклатура,
			ДокументОбъектДляЗаписи.Склад);
			
		Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетУчета) Тогда
			СтрокаТаблицы.СчетУчета = СчетаУчета.СчетУчета;
		КонецЕсли;
			
		Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетДоходов) Тогда
			СтрокаТаблицы.СчетДоходов  = СчетаУчета.СчетДоходов;
		КонецЕсли;
		Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетРасходов) Тогда
			СтрокаТаблицы.СчетРасходов = СчетаУчета.СчетРасходов;
		КонецЕсли;
		Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетУчетаНДСПоРеализации) Тогда
			СтрокаТаблицы.СчетУчетаНДСПоРеализации = СчетаУчета.СчетУчетаНДСПродажи;
		КонецЕсли;

		Если СтрокаТаблицы.СчетДоходов.ВидыСубконто.Количество() &gt; 0 Тогда
			СтрокаТаблицы.Субконто = Новый(СтрокаТаблицы.СчетДоходов.ВидыСубконто[0].ВидСубконто.ТипЗначения.Типы()[0]);
			Если ТипЗнч(СтрокаТаблицы.Субконто) = Тип("СправочникСсылка.НоменклатурныеГруппы") Тогда
				СтрокаТаблицы.Субконто = СтрокаТаблицы.Номенклатура.НоменклатурнаяГруппа;
			КонецЕсли;
		Иначе
			СтрокаТаблицы.Субконто = Неопределено;
		КонецЕсли;
			
	КонецЦикла;
	
	Для Каждого СтрокаТаблицы Из ДокументОбъектДляЗаписи.Услуги Цикл
		
		СчетаУчета = БухгалтерскийУчет.ПолучитьСчетаУчетаНоменклатуры(
			ДокументОбъектДляЗаписи.Организация,
			СтрокаТаблицы.Номенклатура,
			ДокументОбъектДляЗаписи.Склад);
			
		Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетДоходов) Тогда
			СтрокаТаблицы.СчетДоходов  = СчетаУчета.СчетДоходов;
		КонецЕсли;
		Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетРасходов) Тогда
			СтрокаТаблицы.СчетРасходов = СчетаУчета.СчетРасходов;
		КонецЕсли;
		Если Не ЗначениеЗаполнено(СтрокаТаблицы.СчетУчетаНДСПоРеализации) Тогда
			СтрокаТаблицы.СчетУчетаНДСПоРеализации = СчетаУчета.СчетУчетаНДСПродажи;
		КонецЕсли;

		Если СтрокаТаблицы.СчетДоходов.ВидыСубконто.Количество() &gt; 0 Тогда
			СтрокаТаблицы.Субконто = Новый(СтрокаТаблицы.СчетДоходов.ВидыСубконто[0].ВидСубконто.ТипЗначения.Типы()[0]);
			Если ТипЗнч(СтрокаТаблицы.Субконто) = Тип("СправочникСсылка.НоменклатурныеГруппы") Тогда
				СтрокаТаблицы.Субконто = СтрокаТаблицы.Номенклатура.НоменклатурнаяГруппа;
			КонецЕсли;
		Иначе
			СтрокаТаблицы.Субконто = Неопределено;
		КонецЕсли;
			
	КонецЦикла;
	
	ДокументОбъектДляЗаписи.ОбменДанными.Загрузка = Истина;
	ДокументОбъектДляЗаписи.Записать();
	
	// Выполняем замену объекта в таблице документов для проведения
	Если ТипЗнч(ПолеДокументыДляОтложенногоПроведения) = Тип("ТаблицаЗначений") Тогда
		
		НайденнаяСтрока = ПолеДокументыДляОтложенногоПроведения.Найти(ДокументОбъект.Ссылка, "ДокументСсылка");
		Если НайденнаяСтрока &lt;&gt; Неопределено Тогда
			НайденнаяСтрока.ДокументОбъект = ДокументОбъектДляЗаписи;
		КонецЕсли;
	
	КонецЕсли;
	
КонецЦикла;</Текст>
				</Алгоритм>
				<Алгоритм Имя="ОбработатьЗагруженныеОтчетыОРозничныхПродажах" ИспользуетсяПриЗагрузке="true">
					<Текст>Для Каждого ДокументОбъект Из Параметры.ЗагруженныеОтчетыОРозничныхПродажах Цикл
	
	Если ДокументОбъект.ЭтоНовый() Тогда
		Продолжить;
	КонецЕсли;
	
	ДокументОбъектДляЗаписи = ДокументОбъект.Ссылка.ПолучитьОбъект();
	
	Выполнить(Алгоритмы.ЗаполнитьСчетНаличныхДенежныхСредствПоУмолчанию);
	
	ТабличнаяЧасть	= ДокументОбъектДляЗаписи.Товары;
	ЭтоУслуги		= Ложь;
	ЕстьКомиссия	= Ложь;
 	Выполнить(Алгоритмы.ЗаполнитьСчетаУчетаНоменклатурыПродажа);

	Для Каждого СтрокаТаблицы Из ДокументОбъектДляЗаписи.Оплата Цикл
		СтрокаТаблицы.СчетУчетаРасчетов = СтрокаТаблицы.ВидОплаты.СчетУчетаРасчетов;
	КонецЦикла;

	
	ДокументОбъектДляЗаписи.ОбменДанными.Загрузка = Истина;
	ДокументОбъектДляЗаписи.Записать();
	
	// Выполняем замену объекта в таблице документов для проведения
	Если ТипЗнч(ПолеДокументыДляОтложенногоПроведения) = Тип("ТаблицаЗначений") Тогда
		
		НайденнаяСтрока = ПолеДокументыДляОтложенногоПроведения.Найти(ДокументОбъект.Ссылка, "ДокументСсылка");
		Если НайденнаяСтрока &lt;&gt; Неопределено Тогда
			НайденнаяСтрока.ДокументОбъект = ДокументОбъектДляЗаписи;
		КонецЕсли;
		
	КонецЕсли;
	
КонецЦикла;</Текст>
				</Алгоритм>
				<Алгоритм Имя="ОбработатьЗагруженныеСчетаФактурыВыданные" ИспользуетсяПриЗагрузке="true">
					<Текст>Для Каждого ДокументОбъект Из Параметры.ЗагруженныеСчетаФактурыВыданные Цикл
	
	Если ДокументОбъект.ЭтоНовый()
		Или Не ЗначениеЗаполнено(ДокументОбъект.ДокументОснование)
		Или Не ОбщегоНазначения.СсылкаСуществует(ДокументОбъект.ДокументОснование) Тогда
		Продолжить;
	КонецЕсли;
	
	ДокументОбъектДляЗаписи = ДокументОбъект.Ссылка.ПолучитьОбъект();
	
	ПараметрыСФ = Неопределено;
	УчетНДС.ПолучитьПараметрыСчетаФактуры(ДокументОбъектДляЗаписи.Ссылка,
		Константы.ВалютаРегламентированногоУчета.Получить(),
		ПараметрыСФ);
		
	ЗаполнитьЗначенияСвойств(ДокументОбъектДляЗаписи, ПараметрыСФ,
		"Контрагент,
		|СуммаДокумента,
		|СуммаУвеличение,
		|СуммаУменьшение,
		|СуммаНДСУвеличение,
		|СуммаНДСУменьшение,
		|СуммаНДСДокумента,
		|СчетФактураБезНДС");
		
	ДокументОбъектДляЗаписи.ДоговорКонтрагента = ПараметрыСФ.Договор;
	
	Если ТипЗнч(ДокументОбъект.ДокументОснование) = Тип("ДокументСсылка.КорректировкаРеализации") Тогда
		РезультатПоискаИсправляемыйСчетФактура = УчетНДС.НайтиПодчиненныйСчетФактуру(ДокументОбъект.ДокументОснование.ИсправляемыйДокументРеализации, "СчетФактураВыданный");
		Если РезультатПоискаИсправляемыйСчетФактура = Неопределено Тогда
			РезультатПоискаИсправляемыйСчетФактура = Документы.СчетФактураВыданный.ПустаяСсылка();
		КонецЕсли;
	Иначе
		РезультатПоискаИсправляемыйСчетФактура = Документы.СчетФактураПолученный.ПустаяСсылка();
	КонецЕсли;
	
	Если ДокументОбъектДляЗаписи.ИсправляемыйСчетФактура &lt;&gt; РезультатПоискаИсправляемыйСчетФактура Тогда
		ДокументОбъектДляЗаписи.ИсправляемыйСчетФактура = РезультатПоискаИсправляемыйСчетФактура;
	КонецЕсли;
	
	ДокументОбъектДляЗаписи.ОбменДанными.Загрузка = Истина;
	ДокументОбъектДляЗаписи.Записать();
	
	// Выполняем замену объекта в таблице документов для проведения
	Если ТипЗнч(ПолеДокументыДляОтложенногоПроведения) = Тип("ТаблицаЗначений") Тогда
		
		НайденнаяСтрока = ПолеДокументыДляОтложенногоПроведения.Найти(ДокументОбъект.Ссылка, "ДокументСсылка");
		Если НайденнаяСтрока &lt;&gt; Неопределено Тогда
			НайденнаяСтрока.ДокументОбъект = ДокументОбъектДляЗаписи;
		КонецЕсли;
		
	КонецЕсли;
	
КонецЦикла;</Текст>
				</Алгоритм>
				<Алгоритм Имя="ОбработатьЗагруженныеСчетаФактурыПолученные" ИспользуетсяПриЗагрузке="true">
					<Текст>Для Каждого ДокументОбъект Из Параметры.ЗагруженныеСчетаФактурыПолученные Цикл
	
	Если ДокументОбъект.ЭтоНовый()
		Или Не ЗначениеЗаполнено(ДокументОбъект.ДокументОснование)
		Или Не ОбщегоНазначения.СсылкаСуществует(ДокументОбъект.ДокументОснование) Тогда
		Продолжить;
	КонецЕсли;
	
	ДокументОбъектДляЗаписи = ДокументОбъект.Ссылка.ПолучитьОбъект();
	
	ПараметрыСФ = Неопределено;
	УчетНДС.ПолучитьПараметрыСчетаФактуры(ДокументОбъектДляЗаписи.Ссылка,
		Константы.ВалютаРегламентированногоУчета.Получить(),
		ПараметрыСФ);
		
	ЗаполнитьЗначенияСвойств(ДокументОбъектДляЗаписи, ПараметрыСФ,
		"Контрагент,
		|СуммаДокумента,
		|СуммаУвеличение,
		|СуммаУменьшение,
		|СуммаНДСУвеличение,
		|СуммаНДСУменьшение,
		|СуммаНДСДокумента,
		|СчетФактураБезНДС");
		
	ДокументОбъектДляЗаписи.ДоговорКонтрагента = ПараметрыСФ.Договор;
	
	Если ТипЗнч(ДокументОбъект.ДокументОснование) = Тип("ДокументСсылка.КорректировкаПоступления") Тогда
		РезультатПоискаИсправляемыйСчетФактура = УчетНДС.НайтиПодчиненныйСчетФактуру(ДокументОбъект.ДокументОснование.ИсправляемыйДокументПоступления, "СчетФактураПолученный");
		Если РезультатПоискаИсправляемыйСчетФактура = Неопределено Тогда
			РезультатПоискаИсправляемыйСчетФактура = Документы.СчетФактураВыданный.ПустаяСсылка();
		КонецЕсли;
	Иначе
		РезультатПоискаИсправляемыйСчетФактура = Документы.СчетФактураПолученный.ПустаяСсылка();
	КонецЕсли;
	
	Если ДокументОбъектДляЗаписи.ИсправляемыйСчетФактура &lt;&gt; РезультатПоискаИсправляемыйСчетФактура Тогда
		ДокументОбъектДляЗаписи.ИсправляемыйСчетФактура = РезультатПоискаИсправляемыйСчетФактура;
	КонецЕсли;
	
	ДокументОбъектДляЗаписи.ОбменДанными.Загрузка = Истина;
	ДокументОбъектДляЗаписи.Записать();
	
	// Выполняем замену объекта в таблице документов для проведения
	Если ТипЗнч(ПолеДокументыДляОтложенногоПроведения) = Тип("ТаблицаЗначений") Тогда
		
		НайденнаяСтрока = ПолеДокументыДляОтложенногоПроведения.Найти(ДокументОбъект.Ссылка, "ДокументСсылка");
		Если НайденнаяСтрока &lt;&gt; Неопределено Тогда
			НайденнаяСтрока.ДокументОбъект = ДокументОбъектДляЗаписи;
		КонецЕсли;
		
	КонецЕсли;
	
КонецЦикла;</Текст>
				</Алгоритм>
			</Группа>
			<Алгоритм Имя="ПолучитьПодразделениеОрганизацииПоУмолчанию" ИспользуетсяПриЗагрузке="true">
				<Текст>// Параметры:
// - Организация

ТекПользователь = глЗначениеПеременной("глТекущийПользователь");
Если ЗначениеЗаполнено(Организация) Тогда
	
	ПодразделениеОрганизации = УправлениеПользователями.ПолучитьЗначениеПоУмолчанию(ТекПользователь, "ОсновноеПодразделениеОрганизации");
	Если ЗначениеЗаполнено(ПодразделениеОрганизации) Тогда
		
		Запрос = Новый Запрос();
		Запрос.Текст = "ВЫБРАТЬ РАЗРЕШЕННЫЕ
		|	ПодразделенияОрганизаций.Владелец КАК ОрганизацияВладелец
		|ИЗ
		|	Справочник.ПодразделенияОрганизаций КАК ПодразделенияОрганизаций
		|ГДЕ
		|	ПодразделенияОрганизаций.Ссылка = &amp;Ссылка
		|	И ПодразделенияОрганизаций.Владелец = &amp;Владелец";
		Запрос.УстановитьПараметр("Ссылка", ПодразделениеОрганизации);
		Запрос.УстановитьПараметр("Владелец", Организация);
		Если Запрос.Выполнить().Пустой() Тогда
			ПодразделениеОрганизации = Неопределено;
		КонецЕсли;
	КонецЕсли;
КонецЕсли;</Текст>
				<Параметры>Организация</Параметры>
			</Алгоритм>
		</Группа>
	</Алгоритмы>
	<Запросы>
		<Группа Имя="ТоварыИзВидовЗапасов">
			<Запрос Имя="ТоварыИзВидовЗапасовДляВозвратаКомитенту" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	ЦеныНоменклатурыПоставщиков.Номенклатура,
	ЦеныНоменклатурыПоставщиков.Характеристика,
	ЦеныНоменклатурыПоставщиков.Цена,
	ЦеныНоменклатурыПоставщиков.Упаковка,
	ЦеныНоменклатурыПоставщиков.Валюта
ПОМЕСТИТЬ ДанныеЦенТоваров
ИЗ
	РегистрСведений.ЦеныНоменклатурыПоставщиков.СрезПоследних(
			&amp;Дата,
			УсловиеЦеныПоставщика = ЗНАЧЕНИЕ(Справочник.УсловияЦенПоставщиков.ПустаяСсылка)
				И Соглашение В
					(ВЫБРАТЬ
						Док.Соглашение
					ИЗ
						Документ.ВозвратТоваровПоставщику КАК Док
					ГДЕ
						Док.Ссылка = &amp;Ссылка)
				И Номенклатура В
					(ВЫБРАТЬ РАЗЛИЧНЫЕ
						Товары.Номенклатура
					ИЗ
						Документ.ВозвратТоваровПоставщику.Товары КАК Товары
					ГДЕ
						Товары.Ссылка = &amp;Ссылка)
				И Характеристика В
					(ВЫБРАТЬ РАЗЛИЧНЫЕ
						Товары.Характеристика
					ИЗ
						Документ.ВозвратТоваровПоставщику.Товары КАК Товары
					ГДЕ
						Товары.Ссылка = &amp;Ссылка)) КАК ЦеныНоменклатурыПоставщиков
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ВидыЗапасов.Характеристика,
	ВидыЗапасов.Количество,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	ВидыЗапасов.Ссылка.Валюта КАК Валюта,
	1 КАК Коэффициент
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.ВозвратТоваровПоставщику.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка
	И ВидыЗапасов.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)

ИНДЕКСИРОВАТЬ ПО
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.Характеристика,
	Валюта
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ДанныеЦенТоваров.Цена,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ПорядокСтрокТаблицыТовары.НомерСтроки,
	СУММА(ВидыЗапасов.Количество) КАК Количество,
	СУММА(ВидыЗапасов.Количество * ДанныеЦенТоваров.Цена) КАК Сумма
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			ВозвратТоваровПоставщикуТовары.Номенклатура КАК Номенклатура,
			МАКСИМУМ(ВозвратТоваровПоставщикуТовары.НомерСтроки) КАК НомерСтроки
		ИЗ
			Документ.ВозвратТоваровПоставщику.Товары КАК ВозвратТоваровПоставщикуТовары
		ГДЕ
			ВозвратТоваровПоставщикуТовары.Ссылка = &amp;Ссылка
		
		СГРУППИРОВАТЬ ПО
			ВозвратТоваровПоставщикуТовары.Номенклатура) КАК ПорядокСтрокТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокТаблицыТовары.Номенклатура
		ЛЕВОЕ СОЕДИНЕНИЕ ДанныеЦенТоваров КАК ДанныеЦенТоваров
		ПО ВидыЗапасов.Номенклатура = ДанныеЦенТоваров.Номенклатура
			И ВидыЗапасов.Характеристика = ДанныеЦенТоваров.Характеристика
			И (ДанныеЦенТоваров.Упаковка = ЗНАЧЕНИЕ(Справочник.УпаковкиНоменклатуры.ПустаяСсылка))
			И ВидыЗапасов.Валюта = ДанныеЦенТоваров.Валюта

СГРУППИРОВАТЬ ПО
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ДанныеЦенТоваров.Цена,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ПорядокСтрокТаблицыТовары.НомерСтроки

УПОРЯДОЧИТЬ ПО
	ПорядокСтрокТаблицыТовары.НомерСтроки</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИзВидовЗапасовДляВозвратаОтКлиента" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	ВЫБОР
		КОГДА ВидыЗапасов.НоменклатураОприходование = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка)
			ТОГДА ВидыЗапасов.Номенклатура
		ИНАЧЕ ВидыЗапасов.НоменклатураОприходование
	КОНЕЦ КАК Номенклатура,
	ВидыЗапасов.Количество,
	ВидыЗапасов.Ссылка.ДокументРеализации КАК ДокументРеализации,
	ВидыЗапасов.Ссылка.ВозвратПорчи КАК ВозвратПорчи,
	ВидыЗапасов.Ссылка.ЦенаВключаетНДС КАК ЦенаВключаетНДС,
	ВидыЗапасов.СуммаСНДС,
	ВидыЗапасов.СуммаНДС,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	ВидыЗапасов.ВидЗапасов.ТипЗапасов КАК ТипЗапасов
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.ВозвратТоваровОтКлиента.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка

ИНДЕКСИРОВАТЬ ПО
	ВЫБОР
		КОГДА ВидыЗапасов.НоменклатураОприходование = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка)
			ТОГДА ВидыЗапасов.Номенклатура
		ИНАЧЕ ВидыЗапасов.НоменклатураОприходование
	КОНЕЦ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.Количество,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.СуммаНДС КАК СуммаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ПорядокСтрокТаблицыТовары.НомерСтроки,
	ВЫБОР
		КОГДА ВидыЗапасов.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС / ВидыЗапасов.Количество
		ИНАЧЕ (ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС) / ВидыЗапасов.Количество
	КОНЕЦ КАК Цена,
	ВЫБОР
		КОГДА ВидыЗапасов.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС
		ИНАЧЕ ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС
	КОНЕЦ КАК Сумма,
	ВЫБОР
		КОГДА ВидыЗапасов.ВозвратПорчи
				ИЛИ ВидыЗапасов.ДокументРеализации = НЕОПРЕДЕЛЕНО
			ТОГДА ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС
		ИНАЧЕ 0
	КОНЕЦ КАК Себестоимость,
	ВЫБОР
		КОГДА ВидыЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК СчетУчета,
	ВЫБОР
		КОГДА ВидыЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыПереданныеНаКомиссию"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК ПереданныеСчетУчета
ПОМЕСТИТЬ ТаблицаТоваров
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			ВЫБОР
				КОГДА ВозвратТоваровОтКлиентаТовары.Порча
					ТОГДА ВозвратТоваровОтКлиентаТовары.НоменклатураОприходование
				ИНАЧЕ ВозвратТоваровОтКлиентаТовары.Номенклатура
			КОНЕЦ КАК Номенклатура,
			МАКСИМУМ(ВозвратТоваровОтКлиентаТовары.НомерСтроки) КАК НомерСтроки
		ИЗ
			Документ.ВозвратТоваровОтКлиента.Товары КАК ВозвратТоваровОтКлиентаТовары
		ГДЕ
			ВозвратТоваровОтКлиентаТовары.Ссылка = &amp;Ссылка
		
		СГРУППИРОВАТЬ ПО
			ВЫБОР
				КОГДА ВозвратТоваровОтКлиентаТовары.Порча
					ТОГДА ВозвратТоваровОтКлиентаТовары.НоменклатураОприходование
				ИНАЧЕ ВозвратТоваровОтКлиентаТовары.Номенклатура
			КОНЕЦ) КАК ПорядокСтрокТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокТаблицыТовары.Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаТоваров.Номенклатура,
	ТаблицаТоваров.Цена,
	ТаблицаТоваров.СтавкаНДС,
	ТаблицаТоваров.НомерГТД,
	ТаблицаТоваров.СтранаПроисхождения,
	ТаблицаТоваров.СчетУчета,
	ТаблицаТоваров.ПереданныеСчетУчета,
	ТаблицаТоваров.НомерСтроки,
	СУММА(ТаблицаТоваров.Количество) КАК Количество,
	СУММА(ТаблицаТоваров.Сумма) КАК Сумма,
	СУММА(ТаблицаТоваров.Себестоимость) КАК Себестоимость,
	СУММА(ТаблицаТоваров.СуммаНДС) КАК СуммаНДС
ИЗ
	ТаблицаТоваров КАК ТаблицаТоваров

СГРУППИРОВАТЬ ПО
	ТаблицаТоваров.Номенклатура,
	ТаблицаТоваров.Цена,
	ТаблицаТоваров.СтавкаНДС,
	ТаблицаТоваров.НомерГТД,
	ТаблицаТоваров.СтранаПроисхождения,
	ТаблицаТоваров.СчетУчета,
	ТаблицаТоваров.ПереданныеСчетУчета,
	ТаблицаТоваров.НомерСтроки

УПОРЯДОЧИТЬ ПО
	ТаблицаТоваров.НомерСтроки</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИзВидовЗапасовДляВозвратаОтКомиссионера" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	ВЫБОР
		КОГДА ВидыЗапасов.НоменклатураОприходование = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка)
			ТОГДА ВидыЗапасов.Номенклатура
		ИНАЧЕ ВидыЗапасов.НоменклатураОприходование
	КОНЕЦ КАК Номенклатура,
	ВидыЗапасов.Количество,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК СчетУчета,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыПереданныеНаКомиссию"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК ПереданныеСчетУчета
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.ВозвратТоваровОтКлиента.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка

ИНДЕКСИРОВАТЬ ПО
	ВЫБОР
		КОГДА ВидыЗапасов.НоменклатураОприходование = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка)
			ТОГДА ВидыЗапасов.Номенклатура
		ИНАЧЕ ВидыЗапасов.НоменклатураОприходование
	КОНЕЦ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.Количество,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ВидыЗапасов.ПереданныеСчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки
ПОМЕСТИТЬ ТаблицаТоваров
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			ВЫБОР
				КОГДА Товары.Порча
					ТОГДА Товары.НоменклатураОприходование
				ИНАЧЕ Товары.Номенклатура
			КОНЕЦ КАК Номенклатура,
			МАКСИМУМ(Товары.НомерСтроки) КАК НомерСтроки
		ИЗ
			Документ.ВозвратТоваровОтКлиента.Товары КАК Товары
		ГДЕ
			Товары.Ссылка = &amp;Ссылка
		
		СГРУППИРОВАТЬ ПО
			ВЫБОР
				КОГДА Товары.Порча
					ТОГДА Товары.НоменклатураОприходование
				ИНАЧЕ Товары.Номенклатура
			КОНЕЦ) КАК ПорядокСтрокТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокТаблицыТовары.Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаТоваров.Номенклатура,
	ТаблицаТоваров.НомерГТД,
	ТаблицаТоваров.СтранаПроисхождения,
	ТаблицаТоваров.СчетУчета,
	ТаблицаТоваров.ПереданныеСчетУчета,
	ТаблицаТоваров.НомерСтроки,
	"НеПринимаются" КАК ОтражениеВУСН,
	СУММА(ТаблицаТоваров.Количество) КАК Количество
ИЗ
	ТаблицаТоваров КАК ТаблицаТоваров

СГРУППИРОВАТЬ ПО
	ТаблицаТоваров.Номенклатура,
	ТаблицаТоваров.НомерГТД,
	ТаблицаТоваров.СтранаПроисхождения,
	ТаблицаТоваров.СчетУчета,
	ТаблицаТоваров.ПереданныеСчетУчета,
	ТаблицаТоваров.НомерСтроки

УПОРЯДОЧИТЬ ПО
	ТаблицаТоваров.НомерСтроки</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИзВидовЗапасовДляВозвратаПоставщику" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	ВидыЗапасов.Номенклатура КАК Номенклатура,
	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	1 КАК Коэффициент,
	ВидыЗапасов.Количество,
	ВидыЗапасов.СтавкаНДС,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС
		ИНАЧЕ ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС
	КОНЕЦ КАК Сумма,
	ВидыЗапасов.СуммаНДС,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС / ВидыЗапасов.Количество
		ИНАЧЕ (ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС) / ВидыЗапасов.Количество
	КОНЕЦ КАК Цена,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.ВозвратТоваровПоставщику.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка
	И ВидыЗапасов.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.Количество,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.Сумма,
	ВидыЗапасов.СуммаНДС,
	ВидыЗапасов.Цена,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ПорядокСтрокТаблицыТовары.НомерСтроки
ПОМЕСТИТЬ ТаблицаТоваров
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			Товары.Номенклатура КАК Номенклатура,
			МАКСИМУМ(Товары.НомерСтроки) КАК НомерСтроки
		ИЗ
			Документ.ВозвратТоваровПоставщику.Товары КАК Товары
		ГДЕ
			Товары.Ссылка = &amp;Ссылка
		
		СГРУППИРОВАТЬ ПО
			Товары.Номенклатура) КАК ПорядокСтрокТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокТаблицыТовары.Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаТоваров.Номенклатура,
	ТаблицаТоваров.ЕдиницаИзмерения,
	ТаблицаТоваров.Коэффициент,
	ТаблицаТоваров.СтавкаНДС,
	ТаблицаТоваров.Цена,
	ТаблицаТоваров.НомерГТД,
	ТаблицаТоваров.СтранаПроисхождения,
	ТаблицаТоваров.НомерСтроки,
	СУММА(ТаблицаТоваров.Количество) КАК Количество,
	СУММА(ТаблицаТоваров.Сумма) КАК Сумма,
	СУММА(ТаблицаТоваров.СуммаНДС) КАК СуммаНДС
ИЗ
	ТаблицаТоваров КАК ТаблицаТоваров

СГРУППИРОВАТЬ ПО
	ТаблицаТоваров.Номенклатура,
	ТаблицаТоваров.ЕдиницаИзмерения,
	ТаблицаТоваров.Коэффициент,
	ТаблицаТоваров.СтавкаНДС,
	ТаблицаТоваров.Цена,
	ТаблицаТоваров.НомерГТД,
	ТаблицаТоваров.СтранаПроисхождения,
	ТаблицаТоваров.НомерСтроки

УПОРЯДОЧИТЬ ПО
	ТаблицаТоваров.НомерСтроки</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИзВидовЗапасовДляОтчетаОРозничныхПродажах" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	Товары.Номенклатура КАК Номенклатура,
	Товары.Количество,
	Товары.Цена,
	Товары.Сумма,
	Товары.СтавкаНДС,
	Товары.СуммаНДС,
	Товары.НомерСтроки,
	Товары.Номенклатура.ТипНоменклатуры КАК ТипНоменклатуры
ПОМЕСТИТЬ ТаблицаТовары
ИЗ
	Документ.ОтчетОРозничныхПродажах.Товары КАК Товары
ГДЕ
	Товары.Ссылка = &amp;Ссылка

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.Количество,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.СуммаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС / ВидыЗапасов.Количество
		ИНАЧЕ (ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС) / ВидыЗапасов.Количество
	КОНЕЦ КАК Цена,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС
		ИНАЧЕ ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС
	КОНЕЦ КАК Сумма,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК СчетУчета
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.ОтчетОРозничныхПродажах.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.Цена,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки,
	СУММА(ВидыЗапасов.Количество) КАК Количество,
	СУММА(ВидыЗапасов.Сумма) КАК Сумма,
	СУММА(ВидыЗапасов.СуммаНДС) КАК СуммаНДС
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			МАКСИМУМ(ТаблицаТовары.НомерСтроки) КАК НомерСтроки,
			ТаблицаТовары.Номенклатура КАК Номенклатура
		ИЗ
			ТаблицаТовары КАК ТаблицаТовары
		
		СГРУППИРОВАТЬ ПО
			ТаблицаТовары.Номенклатура) КАК ПорядокСтрокТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокТаблицыТовары.Номенклатура

СГРУППИРОВАТЬ ПО
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.Цена,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ТаблицаТовары.Номенклатура,
	ТаблицаТовары.Цена,
	ТаблицаТовары.СтавкаНДС,
	NULL,
	NULL,
	NULL,
	ТаблицаТовары.НомерСтроки,
	ТаблицаТовары.Количество,
	ТаблицаТовары.Сумма,
	ТаблицаТовары.СуммаНДС
ИЗ
	ТаблицаТовары КАК ТаблицаТовары
ГДЕ
	ТаблицаТовары.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)

УПОРЯДОЧИТЬ ПО
	ПорядокСтрокТаблицыТовары.НомерСтроки</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИзВидовЗапасовДляПересортицыСписание" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	ВидыЗапасов.Номенклатура КАК Номенклатура,
	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ВидыЗапасов.Количество,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	1 КАК Коэффициент,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК СчетУчета
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.ПересортицаТоваров.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки,
	СУММА(ВидыЗапасов.Количество) КАК Количество
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			Товары.Номенклатура КАК Номенклатура,
			МАКСИМУМ(Товары.НомерСтроки) КАК НомерСтроки
		ИЗ
			Документ.ПересортицаТоваров.Товары КАК Товары
		ГДЕ
			Товары.Ссылка = &amp;Ссылка
		
		СГРУППИРОВАТЬ ПО
			Товары.Номенклатура) КАК ПорядокСтрокТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокТаблицыТовары.Номенклатура

СГРУППИРОВАТЬ ПО
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки

УПОРЯДОЧИТЬ ПО
	ПорядокСтрокТаблицыТовары.НомерСтроки</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИзВидовЗапасовДляПорчиТоваровПриходСебест" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	ВидыЗапасов.НоменклатураОприходование КАК Номенклатура,
	ВидыЗапасов.ХарактеристикаОприходование КАК Характеристика,
	ВидыЗапасов.Номенклатура КАК НоменклатураСписание,
	ВидыЗапасов.Характеристика КАК ХарактеристикаСписание,
	ВидыЗапасов.НоменклатураОприходование.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ВидыЗапасов.Количество,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	1 КАК Коэффициент,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК СчетУчета
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.ПорчаТоваров.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.Характеристика,
	ВидыЗапасов.НоменклатураСписание,
	ВидыЗапасов.ХарактеристикаСписание,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки,
	ВидыЗапасов.Количество
ПОМЕСТИТЬ ТаблицаТоваров
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			Товары.НоменклатураОприходование КАК Номенклатура,
			МАКСИМУМ(Товары.НомерСтроки) КАК НомерСтроки
		ИЗ
			Документ.ПорчаТоваров.Товары КАК Товары
		ГДЕ
			Товары.Ссылка = &amp;Ссылка
		
		СГРУППИРОВАТЬ ПО
			Товары.НоменклатураОприходование) КАК ПорядокСтрокТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокТаблицыТовары.Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВЫБОР
		КОГДА &amp;РегВалюта &lt;&gt; &amp;УпрВалюта
			ТОГДА ВЫБОР
					КОГДА ЕСТЬNULL(КурсыВалютыЦены.Кратность, 0) &gt; 0
							И ЕСТЬNULL(КурсыВалютыЦены.Курс, 0) &gt; 0
							И ЕСТЬNULL(КурсыВалюты.Кратность, 0) &gt; 0
							И ЕСТЬNULL(КурсыВалюты.Курс, 0) &gt; 0
						ТОГДА КурсыВалютыЦены.Курс * КурсыВалюты.Кратность / (КурсыВалюты.Курс * КурсыВалютыЦены.Кратность)
					ИНАЧЕ 0
				КОНЕЦ
		ИНАЧЕ 1
	КОНЕЦ КАК Курс
ПОМЕСТИТЬ КурсПересчета
ИЗ
	РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;УпрВалюта) КАК КурсыВалютыЦены
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;РегВалюта) КАК КурсыВалюты
		ПО (ИСТИНА)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаТоваров.Номенклатура,
	ТаблицаТоваров.НомерГТД,
	ТаблицаТоваров.СтранаПроисхождения,
	ТаблицаТоваров.СчетУчета,
	ЦеныНоменклатурыСрезПоследних.Цена * КурсПересчета.Курс КАК Цена,
	ТаблицаТоваров.ЕдиницаИзмерения,
	ТаблицаТоваров.Коэффициент,
	ТаблицаТоваров.Количество,
	ТаблицаТоваров.НомерСтроки КАК НомерСтроки
ПОМЕСТИТЬ ТоварыСЦенами
ИЗ
	ТаблицаТоваров КАК ТаблицаТоваров
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры.СрезПоследних(
				&amp;Дата,
				ВидЦены = &amp;ВидЦен
					И (Номенклатура, Характеристика) В
						(ВЫБРАТЬ
							ТаблицаТоваров.НоменклатураСписание,
							ТаблицаТоваров.ХарактеристикаСписание
						ИЗ
							ТаблицаТоваров КАК ТаблицаТоваров)) КАК ЦеныНоменклатурыСрезПоследних
		ПО ТаблицаТоваров.НоменклатураСписание = ЦеныНоменклатурыСрезПоследних.Номенклатура
			И ТаблицаТоваров.ХарактеристикаСписание = ЦеныНоменклатурыСрезПоследних.Характеристика
		ЛЕВОЕ СОЕДИНЕНИЕ КурсПересчета КАК КурсПересчета
		ПО (ИСТИНА)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТоварыСЦенами.Номенклатура,
	ТоварыСЦенами.НомерГТД,
	ТоварыСЦенами.СтранаПроисхождения,
	ТоварыСЦенами.СчетУчета,
	ТоварыСЦенами.Цена,
	СУММА(ТоварыСЦенами.Цена * ТоварыСЦенами.Количество) КАК Сумма,
	ТоварыСЦенами.ЕдиницаИзмерения,
	ТоварыСЦенами.Коэффициент,
	СУММА(ТоварыСЦенами.Количество) КАК Количество
ИЗ
	ТоварыСЦенами КАК ТоварыСЦенами

СГРУППИРОВАТЬ ПО
	ТоварыСЦенами.Номенклатура,
	ТоварыСЦенами.НомерГТД,
	ТоварыСЦенами.СтранаПроисхождения,
	ТоварыСЦенами.СчетУчета,
	ТоварыСЦенами.Цена,
	ТоварыСЦенами.ЕдиницаИзмерения,
	ТоварыСЦенами.Коэффициент,
	ТоварыСЦенами.НомерСтроки

УПОРЯДОЧИТЬ ПО
	ТоварыСЦенами.НомерСтроки</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИзВидовЗапасовДляПорчиТоваровПриходЦены" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	ВидыЗапасов.НоменклатураОприходование КАК Номенклатура,
	ВидыЗапасов.ХарактеристикаОприходование КАК Характеристика,
	ВидыЗапасов.НоменклатураОприходование.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ВидыЗапасов.Количество,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	1 КАК Коэффициент,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК СчетУчета
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.ПорчаТоваров.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ВидыЗапасов.Количество,
	ПорядокСтрокИЦеныТаблицыТовары.НомерСтроки,
	ПорядокСтрокИЦеныТаблицыТовары.Цена,
	ВидыЗапасов.Количество * ПорядокСтрокИЦеныТаблицыТовары.Цена КАК Сумма
ПОМЕСТИТЬ ТаблицаТоваров
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			Товары.НоменклатураОприходование КАК Номенклатура,
			Товары.ХарактеристикаОприходование КАК Характеристика,
			МАКСИМУМ(Товары.НомерСтроки) КАК НомерСтроки,
			МАКСИМУМ(Товары.Цена) КАК Цена
		ИЗ
			Документ.ПорчаТоваров.Товары КАК Товары
		ГДЕ
			Товары.Ссылка = &amp;Ссылка
		
		СГРУППИРОВАТЬ ПО
			Товары.НоменклатураОприходование,
			Товары.ХарактеристикаОприходование) КАК ПорядокСтрокИЦеныТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокИЦеныТаблицыТовары.Номенклатура
			И ВидыЗапасов.Характеристика = ПорядокСтрокИЦеныТаблицыТовары.Характеристика
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВЫБОР
		КОГДА &amp;РегВалюта &lt;&gt; &amp;УпрВалюта
			ТОГДА ВЫБОР
					КОГДА ЕСТЬNULL(КурсыВалютыЦены.Кратность, 0) &gt; 0
							И ЕСТЬNULL(КурсыВалютыЦены.Курс, 0) &gt; 0
							И ЕСТЬNULL(КурсыВалюты.Кратность, 0) &gt; 0
							И ЕСТЬNULL(КурсыВалюты.Курс, 0) &gt; 0
						ТОГДА КурсыВалютыЦены.Курс * КурсыВалюты.Кратность / (КурсыВалюты.Курс * КурсыВалютыЦены.Кратность)
					ИНАЧЕ 0
				КОНЕЦ
		ИНАЧЕ 1
	КОНЕЦ КАК Курс
ПОМЕСТИТЬ КурсПересчета
ИЗ
	РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;УпрВалюта) КАК КурсыВалютыЦены
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;РегВалюта) КАК КурсыВалюты
		ПО (ИСТИНА)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаТоваров.Номенклатура,
	ТаблицаТоваров.ЕдиницаИзмерения,
	ТаблицаТоваров.Коэффициент,
	ТаблицаТоваров.НомерГТД,
	ТаблицаТоваров.СтранаПроисхождения,
	ТаблицаТоваров.СчетУчета,
	СУММА(ТаблицаТоваров.Количество) КАК Количество,
	ТаблицаТоваров.Цена * КурсПересчета.Курс КАК Цена,
	СУММА(ТаблицаТоваров.Сумма * КурсПересчета.Курс) КАК Сумма
ИЗ
	ТаблицаТоваров КАК ТаблицаТоваров
		ЛЕВОЕ СОЕДИНЕНИЕ КурсПересчета КАК КурсПересчета
		ПО (ИСТИНА)

СГРУППИРОВАТЬ ПО
	ТаблицаТоваров.Номенклатура,
	ТаблицаТоваров.ЕдиницаИзмерения,
	ТаблицаТоваров.Коэффициент,
	ТаблицаТоваров.НомерГТД,
	ТаблицаТоваров.СтранаПроисхождения,
	ТаблицаТоваров.СчетУчета,
	ТаблицаТоваров.Цена * КурсПересчета.Курс,
	ТаблицаТоваров.НомерСтроки

УПОРЯДОЧИТЬ ПО
	ТаблицаТоваров.НомерСтроки</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИзВидовЗапасовДляПорчиТоваровСписание" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	ВидыЗапасов.Номенклатура КАК Номенклатура,
	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ВидыЗапасов.Количество,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	1 КАК Коэффициент,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК СчетУчета
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.ПорчаТоваров.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки,
	СУММА(ВидыЗапасов.Количество) КАК Количество
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			Товары.Номенклатура КАК Номенклатура,
			МАКСИМУМ(Товары.НомерСтроки) КАК НомерСтроки
		ИЗ
			Документ.ПорчаТоваров.Товары КАК Товары
		ГДЕ
			Товары.Ссылка = &amp;Ссылка
		
		СГРУППИРОВАТЬ ПО
			Товары.Номенклатура) КАК ПорядокСтрокТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокТаблицыТовары.Номенклатура

СГРУППИРОВАТЬ ПО
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки

УПОРЯДОЧИТЬ ПО
	ПорядокСтрокТаблицыТовары.НомерСтроки</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИзВидовЗапасовДляРеализацииТУКомиссия" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	ВидыЗапасов.Номенклатура КАК Номенклатура,
	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ВидыЗапасов.Количество,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.СуммаНДС,
	1 КАК Коэффициент,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС
		ИНАЧЕ ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС
	КОНЕЦ КАК Сумма,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС / ВидыЗапасов.Количество
		ИНАЧЕ (ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС) / ВидыЗапасов.Количество
	КОНЕЦ КАК Цена,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыПереданныеНаКомиссию"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК ПереданныеСчетУчета,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК СчетУчета
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.РеализацияТоваровУслуг.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка
	И ВидыЗапасов.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.Цена,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.ПереданныеСчетУчета,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки,
	СУММА(ВидыЗапасов.Количество) КАК Количество,
	СУММА(ВидыЗапасов.Сумма) КАК Сумма,
	СУММА(ВидыЗапасов.СуммаНДС) КАК СуммаНДС
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			МАКСИМУМ(Товары.НомерСтроки) КАК НомерСтроки,
			Товары.Номенклатура КАК Номенклатура
		ИЗ
			Документ.РеализацияТоваровУслуг.Товары КАК Товары
		ГДЕ
			Товары.Ссылка = &amp;Ссылка
		
		СГРУППИРОВАТЬ ПО
			Товары.Номенклатура) КАК ПорядокСтрокТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокТаблицыТовары.Номенклатура

СГРУППИРОВАТЬ ПО
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.Цена,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.ПереданныеСчетУчета,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки

УПОРЯДОЧИТЬ ПО
	ПорядокСтрокТаблицыТовары.НомерСтроки</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИзВидовЗапасовДляРеализацииТУПродажа" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	Товары.Номенклатура КАК Номенклатура,
	Товары.Номенклатура.Наименование,
	Товары.Количество,
	Товары.Цена,
	Товары.Сумма,
	Товары.СтавкаНДС,
	Товары.СуммаНДС,
	Товары.Номенклатура.ТипНоменклатуры,
	Товары.НомерСтроки
ПОМЕСТИТЬ ТаблицаТовары
ИЗ
	Документ.РеализацияТоваровУслуг.Товары КАК Товары
ГДЕ
	Товары.Ссылка = &amp;Ссылка

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ВидыЗапасов.Количество,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.СуммаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	1 КАК Коэффициент,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС / ВидыЗапасов.Количество
		ИНАЧЕ (ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС) / ВидыЗапасов.Количество
	КОНЕЦ КАК Цена,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС
		ИНАЧЕ ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС
	КОНЕЦ КАК Сумма,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК СчетУчета
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.РеализацияТоваровУслуг.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка
	И ВидыЗапасов.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаТовары.Номенклатура,
	ТаблицаТовары.НоменклатураНаименование КАК Содержание,
	ТаблицаТовары.Количество,
	ТаблицаТовары.Цена,
	ТаблицаТовары.СтавкаНДС,
	ТаблицаТовары.Сумма,
	ТаблицаТовары.СуммаНДС
ИЗ
	ТаблицаТовары КАК ТаблицаТовары
ГДЕ
	ТаблицаТовары.НоменклатураТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.Цена,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки,
	СУММА(ВидыЗапасов.Количество) КАК Количество,
	СУММА(ВидыЗапасов.Сумма) КАК Сумма,
	СУММА(ВидыЗапасов.СуммаНДС) КАК СуммаНДС
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			ТаблицаТовары.Номенклатура КАК Номенклатура,
			МАКСИМУМ(ТаблицаТовары.НомерСтроки) КАК НомерСтроки
		ИЗ
			ТаблицаТовары КАК ТаблицаТовары
		
		СГРУППИРОВАТЬ ПО
			ТаблицаТовары.Номенклатура) КАК ПорядокСтрокТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокТаблицыТовары.Номенклатура

СГРУППИРОВАТЬ ПО
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.Цена,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки

УПОРЯДОЧИТЬ ПО
	ПорядокСтрокТаблицыТовары.НомерСтроки</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИзВидовЗапасовДляСписания" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	ВидыЗапасов.Номенклатура КАК Номенклатура,
	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ВидыЗапасов.Количество КАК Количество,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	1 КАК Коэффициент,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК СчетУчета
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.СписаниеНедостачТоваров.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка
	И ВидыЗапасов.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки,
	СУММА(ВидыЗапасов.Количество) КАК Количество
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			Товары.Номенклатура КАК Номенклатура,
			МАКСИМУМ(Товары.НомерСтроки) КАК НомерСтроки
		ИЗ
			Документ.СписаниеНедостачТоваров.Товары КАК Товары
		ГДЕ
			Товары.Ссылка = &amp;Ссылка
		
		СГРУППИРОВАТЬ ПО
			Товары.Номенклатура) КАК ПорядокСтрокТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокТаблицыТовары.Номенклатура

СГРУППИРОВАТЬ ПО
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки

УПОРЯДОЧИТЬ ПО
	ПорядокСтрокТаблицыТовары.НомерСтроки</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИзВидовЗапасовИКВозвратОтКомиссионера" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	ВидыЗапасов.Номенклатура КАК Номенклатура,
	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ВидыЗапасов.Количество КАК Количество,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.СуммаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	1 КАК Коэффициент,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС / ВидыЗапасов.Количество
		ИНАЧЕ (ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС) / ВидыЗапасов.Количество
	КОНЕЦ КАК Цена,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС
		ИНАЧЕ ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС
	КОНЕЦ КАК Сумма,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК СчетУчета,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыПереданныеНаКомиссию"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК ПереданныеСчетУчета
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.ВозвратТоваровМеждуОрганизациями.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.Цена,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ВидыЗапасов.ПереданныеСчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки,
	"НеПринимаются" КАК ОтражениеВУСН,
	СУММА(ВидыЗапасов.Количество) КАК Количество,
	СУММА(ВидыЗапасов.Сумма) КАК Сумма,
	СУММА(ВидыЗапасов.СуммаНДС) КАК СуммаНДС
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			МАКСИМУМ(Товары.НомерСтроки) КАК НомерСтроки,
			Товары.Номенклатура КАК Номенклатура
		ИЗ
			Документ.ВозвратТоваровМеждуОрганизациями.Товары КАК Товары
		ГДЕ
			Товары.Ссылка = &amp;Ссылка
		
		СГРУППИРОВАТЬ ПО
			Товары.Номенклатура) КАК ПорядокСтрокТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокТаблицыТовары.Номенклатура

СГРУППИРОВАТЬ ПО
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.Цена,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ВидыЗапасов.ПереданныеСчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки

УПОРЯДОЧИТЬ ПО
	ПорядокСтрокТаблицыТовары.НомерСтроки</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИзВидовЗапасовИКВозвратОтПокупателя" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	ВидыЗапасов.Номенклатура КАК Номенклатура,
	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ВидыЗапасов.Количество КАК Количество,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.СуммаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК СчетУчета,
	1 КАК Коэффициент,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС / ВидыЗапасов.Количество
		ИНАЧЕ (ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС) / ВидыЗапасов.Количество
	КОНЕЦ КАК Цена,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС
		ИНАЧЕ ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС
	КОНЕЦ КАК Сумма,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ДокументПоступления = Значение(Документ.ПередачаТоваровМеждуОрганизациями.ПустаяСсылка)
			ТОГДА ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС
		ИНАЧЕ 0
	КОНЕЦ КАК Себестоимость
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.ВозвратТоваровМеждуОрганизациями.ВидыЗапасовПолучателя КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.Цена,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки,
	СУММА(ВидыЗапасов.Количество) КАК Количество,
	СУММА(ВидыЗапасов.Сумма) КАК Сумма,
	СУММА(ВидыЗапасов.СуммаНДС) КАК СуммаНДС,
	СУММА(ВидыЗапасов.Себестоимость) КАК Себестоимость
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			МАКСИМУМ(Товары.НомерСтроки) КАК НомерСтроки,
			Товары.Номенклатура КАК Номенклатура
		ИЗ
			Документ.ВозвратТоваровМеждуОрганизациями.Товары КАК Товары
		ГДЕ
			Товары.Ссылка = &amp;Ссылка
		
		СГРУППИРОВАТЬ ПО
			Товары.Номенклатура) КАК ПорядокСтрокТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокТаблицыТовары.Номенклатура

СГРУППИРОВАТЬ ПО
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.Цена,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки

УПОРЯДОЧИТЬ ПО
	ПорядокСтрокТаблицыТовары.НомерСтроки</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИзВидовЗапасовИКВозвратПоставщику" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	ВидыЗапасов.Номенклатура КАК Номенклатура,
	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ВидыЗапасов.Количество КАК Количество,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.СуммаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	1 КАК Коэффициент,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС / ВидыЗапасов.Количество
		ИНАЧЕ (ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС) / ВидыЗапасов.Количество
	КОНЕЦ КАК Цена,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС
		ИНАЧЕ ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС
	КОНЕЦ КАК Сумма
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.ВозвратТоваровМеждуОрганизациями.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.Цена,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ПорядокСтрокТаблицыТовары.НомерСтроки,
	СУММА(ВидыЗапасов.Количество) КАК Количество,
	СУММА(ВидыЗапасов.Сумма) КАК Сумма,
	СУММА(ВидыЗапасов.СуммаНДС) КАК СуммаНДС
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			МАКСИМУМ(Товары.НомерСтроки) КАК НомерСтроки,
			Товары.Номенклатура КАК Номенклатура
		ИЗ
			Документ.ВозвратТоваровМеждуОрганизациями.Товары КАК Товары
		ГДЕ
			Товары.Ссылка = &amp;Ссылка
		
		СГРУППИРОВАТЬ ПО
			Товары.Номенклатура) КАК ПорядокСтрокТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокТаблицыТовары.Номенклатура

СГРУППИРОВАТЬ ПО
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.Цена,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ПорядокСтрокТаблицыТовары.НомерСтроки

УПОРЯДОЧИТЬ ПО
	ПорядокСтрокТаблицыТовары.НомерСтроки</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИзВидовЗапасовИКПередачаКомиссионеру" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	ВидыЗапасов.Номенклатура КАК Номенклатура,
	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ВидыЗапасов.Количество,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.СуммаНДС КАК СуммаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	1 КАК Коэффициент,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС / ВидыЗапасов.Количество
		ИНАЧЕ (ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС) / ВидыЗапасов.Количество
	КОНЕЦ КАК Цена,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС
		ИНАЧЕ ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС
	КОНЕЦ КАК Сумма,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыПереданныеНаКомиссию"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК ПереданныеСчетУчета,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК СчетУчета
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.ПередачаТоваровМеждуОрганизациями.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.Цена,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.ПереданныеСчетУчета,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки,
	СУММА(ВидыЗапасов.Количество) КАК Количество,
	СУММА(ВидыЗапасов.Сумма) КАК Сумма,
	СУММА(ВидыЗапасов.СуммаНДС) КАК СуммаНДС
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			Товары.Номенклатура КАК Номенклатура,
			МАКСИМУМ(Товары.НомерСтроки) КАК НомерСтроки
		ИЗ
			Документ.ПередачаТоваровМеждуОрганизациями.Товары КАК Товары
		ГДЕ
			Товары.Ссылка = &amp;Ссылка
		
		СГРУППИРОВАТЬ ПО
			Товары.Номенклатура) КАК ПорядокСтрокТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокТаблицыТовары.Номенклатура

СГРУППИРОВАТЬ ПО
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.Цена,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.ПереданныеСчетУчета,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки

УПОРЯДОЧИТЬ ПО
	ПорядокСтрокТаблицыТовары.НомерСтроки</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИзВидовЗапасовПеремещения" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	1 КАК Коэффициент,
	ВидыЗапасов.Количество,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК СчетУчета,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК НовыйСчетУчета
ПОМЕСТИТЬ ТаблицаТоваров
ИЗ
	Документ.ПеремещениеТоваров.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ *, 
	0 КАК ЦенаВРознице, 
	0 КАК СуммаВРознице,
	Неопределено КАК СтавкаНДСВРознице
ИЗ
	ТаблицаТоваров КАК ТаблицаТоваров
ГДЕ
	ТаблицаТоваров.СчетУчета = НЕОПРЕДЕЛЕНО
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ *
ИЗ
	ТаблицаТоваров КАК ТаблицаТоваров
ГДЕ
	ТаблицаТоваров.СчетУчета = "ТоварыНаСкладе"</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИзВидовЗапасовПеремещенияСЦенамиДляРозницы" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	ВидыЗапасов.Номенклатура КАК Номенклатура,
	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ВидыЗапасов.Количество,
	1 КАК Коэффициент,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК СчетУчета,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК НовыйСчетУчета,
	ВидыЗапасов.Характеристика
ПОМЕСТИТЬ ТаблицаТоваров
ИЗ
	Документ.ПеремещениеТоваров.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаТоваров.Номенклатура,
	ТаблицаТоваров.ЕдиницаИзмерения,
	ТаблицаТоваров.Коэффициент,
	ТаблицаТоваров.Количество,
	ТаблицаТоваров.СчетУчета,
	ТаблицаТоваров.НовыйСчетУчета,
	ЦеныНоменклатурыСрезПоследних.Цена / ЕСТЬNULL(ЦеныНоменклатурыСрезПоследних.Упаковка.Коэффициент, 1) * ВЫБОР
		КОГДА &amp;Валюта &lt;&gt; ЦеныНоменклатурыСрезПоследних.Валюта
			ТОГДА ВЫБОР
					КОГДА ЕСТЬNULL(КурсыВалютыЦены.Кратность, 0) &gt; 0
							И ЕСТЬNULL(КурсыВалютыЦены.Курс, 0) &gt; 0
							И ЕСТЬNULL(КурсыВалюты.Кратность, 0) &gt; 0
							И ЕСТЬNULL(КурсыВалюты.Курс, 0) &gt; 0
						ТОГДА КурсыВалютыЦены.Курс * КурсыВалюты.Кратность / (КурсыВалюты.Курс * КурсыВалютыЦены.Кратность)
					ИНАЧЕ 0
				КОНЕЦ
		ИНАЧЕ 1
	КОНЕЦ КАК ЦенаВРознице,
	ЦеныНоменклатурыСрезПоследних.Цена / ЕСТЬNULL(ЦеныНоменклатурыСрезПоследних.Упаковка.Коэффициент, 1) * ВЫБОР
		КОГДА &amp;Валюта &lt;&gt; ЦеныНоменклатурыСрезПоследних.Валюта
			ТОГДА ВЫБОР
					КОГДА ЕСТЬNULL(КурсыВалютыЦены.Кратность, 0) &gt; 0
							И ЕСТЬNULL(КурсыВалютыЦены.Курс, 0) &gt; 0
							И ЕСТЬNULL(КурсыВалюты.Кратность, 0) &gt; 0
							И ЕСТЬNULL(КурсыВалюты.Курс, 0) &gt; 0
						ТОГДА КурсыВалютыЦены.Курс * КурсыВалюты.Кратность / (КурсыВалюты.Курс * КурсыВалютыЦены.Кратность)
					ИНАЧЕ 0
				КОНЕЦ
		ИНАЧЕ 1
	КОНЕЦ * ТаблицаТоваров.Количество КАК СуммаВРознице,
	ТаблицаТоваров.Номенклатура.СтавкаНДС КАК СтавкаНДСВРознице
ИЗ
	ТаблицаТоваров КАК ТаблицаТоваров
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры.СрезПоследних(
				&amp;Дата,
				ВидЦены = &amp;ВидЦен
					И Номенклатура В
						(ВЫБРАТЬ
							ТаблицаТоваров.Номенклатура
						ИЗ
							ТаблицаТоваров КАК ТаблицаТоваров)
					И Характеристика = ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка)) КАК ЦеныНоменклатурыСрезПоследних
		ПО ТаблицаТоваров.Номенклатура = ЦеныНоменклатурыСрезПоследних.Номенклатура
			И ТаблицаТоваров.Характеристика = ЦеныНоменклатурыСрезПоследних.Характеристика
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, ) КАК КурсыВалютыЦены
		ПО (ЦеныНоменклатурыСрезПоследних.Валюта = КурсыВалютыЦены.Валюта)
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;Валюта) КАК КурсыВалюты
		ПО (ИСТИНА)
ГДЕ
	ТаблицаТоваров.СчетУчета = НЕОПРЕДЕЛЕНО
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаТоваров.Номенклатура,
	ТаблицаТоваров.ЕдиницаИзмерения,
	ТаблицаТоваров.Количество,
	ТаблицаТоваров.Коэффициент,
	ТаблицаТоваров.СчетУчета,
	ТаблицаТоваров.НовыйСчетУчета
ИЗ
	ТаблицаТоваров КАК ТаблицаТоваров
ГДЕ
	ТаблицаТоваров.СчетУчета = "ТоварыНаСкладе"</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИУслугиИзВидовЗапасовИКПокупка" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	Товары.НомерСтроки,
	Товары.Номенклатура,
	Товары.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	Товары.Номенклатура.ТипНоменклатуры КАК ТипНоменклатуры,
	Товары.Количество КАК Количество,
	Товары.Цена,
	Товары.Сумма,
	Товары.СтавкаНДС,
	Товары.СуммаНДС,
	Товары.НомерГТД,
	Товары.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	Товары.СтатьяРасходов,
	Товары.СтатьяРасходов.КорреспондирующийСчет КАК КорреспондирующийСчет,
	1 КАК Коэффициент,
	Товары.СуммаСНДС
ПОМЕСТИТЬ ВременнаяТаблицаТовары
ИЗ
	Документ.ПередачаТоваровМеждуОрганизациями.Товары КАК Товары
ГДЕ
	Товары.Ссылка = &amp;Ссылка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВременнаяТаблицаТовары.Номенклатура,
	ВременнаяТаблицаТовары.ЕдиницаИзмерения,
	ВременнаяТаблицаТовары.ТипНоменклатуры,
	ВременнаяТаблицаТовары.Количество,
	ВременнаяТаблицаТовары.Цена,
	ВременнаяТаблицаТовары.Сумма,
	ВременнаяТаблицаТовары.СтавкаНДС,
	ВременнаяТаблицаТовары.СуммаНДС,
	ВременнаяТаблицаТовары.НомерГТД,
	ВременнаяТаблицаТовары.СтранаПроисхождения,
	ВременнаяТаблицаТовары.СтатьяРасходов,
	ВременнаяТаблицаТовары.КорреспондирующийСчет,
	ВременнаяТаблицаТовары.Коэффициент,
	ВременнаяТаблицаТовары.СуммаСНДС
ИЗ
	ВременнаяТаблицаТовары КАК ВременнаяТаблицаТовары
ГДЕ
	ВременнаяТаблицаТовары.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура КАК Номенклатура,
	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ВидыЗапасов.Количество КАК Количество,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.СуммаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	1 КАК Коэффициент,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС / ВидыЗапасов.Количество
		ИНАЧЕ (ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС) / ВидыЗапасов.Количество
	КОНЕЦ КАК Цена,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС
		ИНАЧЕ ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС
	КОНЕЦ КАК Сумма
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.ПередачаТоваровМеждуОрганизациями.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.Цена,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ПорядокСтрокТаблицыТовары.НомерСтроки,
	СУММА(ВидыЗапасов.Количество) КАК Количество,
	СУММА(ВидыЗапасов.Сумма) КАК Сумма,
	СУММА(ВидыЗапасов.СуммаНДС) КАК СуммаНДС
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			ТаблицаТовары.Номенклатура КАК Номенклатура,
			МАКСИМУМ(ТаблицаТовары.НомерСтроки) КАК НомерСтроки
		ИЗ
			ВременнаяТаблицаТовары КАК ТаблицаТовары
		
		СГРУППИРОВАТЬ ПО
			ТаблицаТовары.Номенклатура) КАК ПорядокСтрокТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокТаблицыТовары.Номенклатура

СГРУППИРОВАТЬ ПО
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.Цена,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ПорядокСтрокТаблицыТовары.НомерСтроки

УПОРЯДОЧИТЬ ПО
	ПорядокСтрокТаблицыТовары.НомерСтроки</Текст>
			</Запрос>
			<Запрос Имя="ТоварыИУслугиИзВидовЗапасовИКПродажа" ИспользуетсяПриЗагрузке="false">
				<Текст>ВЫБРАТЬ
	Товары.Номенклатура КАК Номенклатура,
	Товары.Номенклатура.Наименование,
	Товары.Количество,
	Товары.Цена,
	Товары.Сумма,
	Товары.СтавкаНДС,
	Товары.СуммаНДС,
	Товары.Номенклатура.ТипНоменклатуры,
	Товары.НомерСтроки
ПОМЕСТИТЬ ТаблицаТовары
ИЗ
	Документ.ПередачаТоваровМеждуОрганизациями.Товары КАК Товары
ГДЕ
	Товары.Ссылка = &amp;Ссылка

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаТовары.Номенклатура,
	ТаблицаТовары.НоменклатураНаименование КАК Содержание,
	ТаблицаТовары.Количество,
	ТаблицаТовары.Цена,
	ТаблицаТовары.СтавкаНДС,
	ТаблицаТовары.Сумма,
	ТаблицаТовары.СуммаНДС
ИЗ
	ТаблицаТовары КАК ТаблицаТовары
ГДЕ
	ТаблицаТовары.НоменклатураТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура КАК Номенклатура,
	ВидыЗапасов.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ВидыЗапасов.Количество КАК Количество,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.СуммаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.НомерГТД.СтранаПроисхождения КАК СтранаПроисхождения,
	1 КАК Коэффициент,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС / ВидыЗапасов.Количество
		ИНАЧЕ (ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС) / ВидыЗапасов.Количество
	КОНЕЦ КАК Цена,
	ВЫБОР
		КОГДА ВидыЗапасов.Ссылка.ЦенаВключаетНДС
			ТОГДА ВидыЗапасов.СуммаСНДС
		ИНАЧЕ ВидыЗапасов.СуммаСНДС - ВидыЗапасов.СуммаНДС
	КОНЕЦ КАК Сумма,
	ВЫБОР
		КОГДА ВидыЗапасов.ВидЗапасов.ТипЗапасов = ЗНАЧЕНИЕ(Перечисление.ТипыЗапасов.КомиссионныйТовар)
			ТОГДА "ТоварыНаСкладе"
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК СчетУчета
ПОМЕСТИТЬ ВидыЗапасов
ИЗ
	Документ.ПередачаТоваровМеждуОрганизациями.ВидыЗапасов КАК ВидыЗапасов
ГДЕ
	ВидыЗапасов.Ссылка = &amp;Ссылка
	И ВидыЗапасов.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.Цена,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки,
	СУММА(ВидыЗапасов.Количество) КАК Количество,
	СУММА(ВидыЗапасов.Сумма) КАК Сумма,
	СУММА(ВидыЗапасов.СуммаНДС) КАК СуммаНДС
ИЗ
	ВидыЗапасов КАК ВидыЗапасов
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			ТаблицаТовары.Номенклатура КАК Номенклатура,
			МАКСИМУМ(ТаблицаТовары.НомерСтроки) КАК НомерСтроки
		ИЗ
			ТаблицаТовары КАК ТаблицаТовары
		
		СГРУППИРОВАТЬ ПО
			ТаблицаТовары.Номенклатура) КАК ПорядокСтрокТаблицыТовары
		ПО ВидыЗапасов.Номенклатура = ПорядокСтрокТаблицыТовары.Номенклатура

СГРУППИРОВАТЬ ПО
	ВидыЗапасов.Номенклатура,
	ВидыЗапасов.ЕдиницаИзмерения,
	ВидыЗапасов.Коэффициент,
	ВидыЗапасов.Цена,
	ВидыЗапасов.СтавкаНДС,
	ВидыЗапасов.НомерГТД,
	ВидыЗапасов.СтранаПроисхождения,
	ВидыЗапасов.СчетУчета,
	ПорядокСтрокТаблицыТовары.НомерСтроки

УПОРЯДОЧИТЬ ПО
	ПорядокСтрокТаблицыТовары.НомерСтроки</Текст>
			</Запрос>
		</Группа>
	</Запросы>
</ПравилаОбмена>